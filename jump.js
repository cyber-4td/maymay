(() => {
  var __webpack_modules__ = {
      45: t => {
        "use strict";
        t.exports = function(t, e) {
          var i = new Array(arguments.length - 1),
            n = 0,
            o = 2,
            r = !0;
          for (; o < arguments.length;) i[n++] = arguments[o++];
          return new Promise((function(o, s) {
            i[n] = function(t) {
              if (r)
                if (r = !1, t) s(t);
                else {
                  for (var e = new Array(arguments.length - 1), i = 0; i < e.length;) e[i++] = arguments[i];
                  o.apply(null, e)
                }
            };
            try {
              t.apply(e || null, i)
            } catch (t) {
              r && (r = !1, s(t))
            }
          }))
        }
      },
      47: (t, e, i) => {
        "use strict";
        e.Service = i(595)
      },
      129: (t, e, i) => {
        var n = i(602),
          o = i(971);
        e.protocol = 5;
        var r = e.PacketType = {
            CONNECT: 0,
            DISCONNECT: 1,
            EVENT: 2,
            ACK: 3,
            CONNECT_ERROR: 4
          },
          s = Number.isInteger || function(t) {
            return "number" == typeof t && isFinite(t) && Math.floor(t) === t
          },
          a = function(t) {
            return "string" == typeof t
          },
          h = function(t) {
            return "[object Object]" === Object.prototype.toString.call(t)
          };

        function c() {}

        function u() {}
        c.prototype.encode = function(t) {
          return [n.encode(t)]
        }, o(u.prototype), u.prototype.add = function(t) {
          var e = n.decode(t);
          this.checkPacket(e), this.emit("decoded", e)
        }, u.prototype.checkPacket = function(t) {
          if (!(s(t.type) && t.type >= r.CONNECT && t.type <= r.CONNECT_ERROR)) throw new Error("invalid packet type");
          if (!a(t.nsp)) throw new Error("invalid namespace");
          if (! function(t) {
              switch (t.type) {
                case r.CONNECT:
                  return void 0 === t.data || h(t.data);
                case r.DISCONNECT:
                  return void 0 === t.data;
                case r.CONNECT_ERROR:
                  return a(t.data) || h(t.data);
                default:
                  return Array.isArray(t.data)
              }
            }(t)) throw new Error("invalid payload");
          if (!(void 0 === t.id || s(t.id))) throw new Error("invalid packet id")
        }, u.prototype.destroy = function() {}, e.Encoder = c, e.Decoder = u
      },
      153: module => {
        "use strict";

        function inquire(moduleName) {
          try {
            var mod = eval("quire".replace(/^/, "re"))(moduleName);
            if (mod && (mod.length || Object.keys(mod).length)) return mod
          } catch (t) {}
          return null
        }
        module.exports = inquire
      },
      158: (t, e, i) => {
        "use strict";
        t.exports = r;
        var n = i(237);
        (r.prototype = Object.create(n.prototype)).constructor = r;
        var o = i(610);

        function r(t) {
          n.call(this, t)
        }
        r._configure = function() {
          o.Buffer && (r.prototype._slice = o.Buffer.prototype.slice)
        }, r.prototype.string = function() {
          var t = this.uint32();
          return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + t, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + t, this.len))
        }, r._configure()
      },
      237: (t, e, i) => {
        "use strict";
        t.exports = h;
        var n, o = i(610),
          r = o.LongBits,
          s = o.utf8;

        function a(t, e) {
          return RangeError("index out of range: " + t.pos + " + " + (e || 1) + " > " + t.len)
        }

        function h(t) {
          this.buf = t, this.pos = 0, this.len = t.length
        }
        var c, u = "undefined" != typeof Uint8Array ? function(t) {
            if (t instanceof Uint8Array || Array.isArray(t)) return new h(t);
            throw Error("illegal buffer")
          } : function(t) {
            if (Array.isArray(t)) return new h(t);
            throw Error("illegal buffer")
          },
          l = function() {
            return o.Buffer ? function(t) {
              return (h.create = function(t) {
                return o.Buffer.isBuffer(t) ? new n(t) : u(t)
              })(t)
            } : u
          };

        function d() {
          var t = new r(0, 0),
            e = 0;
          if (!(this.len - this.pos > 4)) {
            for (; e < 3; ++e) {
              if (this.pos >= this.len) throw a(this);
              if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 7 * e) >>> 0, this.buf[this.pos++] < 128) return t
            }
            return t.lo = (t.lo | (127 & this.buf[this.pos++]) << 7 * e) >>> 0, t
          }
          for (; e < 4; ++e)
            if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 7 * e) >>> 0, this.buf[this.pos++] < 128) return t;
          if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 28) >>> 0, t.hi = (t.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128) return t;
          if (e = 0, this.len - this.pos > 4) {
            for (; e < 5; ++e)
              if (t.hi = (t.hi | (127 & this.buf[this.pos]) << 7 * e + 3) >>> 0, this.buf[this.pos++] < 128) return t
          } else
            for (; e < 5; ++e) {
              if (this.pos >= this.len) throw a(this);
              if (t.hi = (t.hi | (127 & this.buf[this.pos]) << 7 * e + 3) >>> 0, this.buf[this.pos++] < 128) return t
            }
          throw Error("invalid varint encoding")
        }

        function p(t, e) {
          return (t[e - 4] | t[e - 3] << 8 | t[e - 2] << 16 | t[e - 1] << 24) >>> 0
        }

        function f() {
          if (this.pos + 8 > this.len) throw a(this, 8);
          return new r(p(this.buf, this.pos += 4), p(this.buf, this.pos += 4))
        }
        h.create = l(), h.prototype._slice = o.Array.prototype.subarray || o.Array.prototype.slice, h.prototype.uint32 = (c = 4294967295, function() {
          if (c = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return c;
          if (c = (c | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return c;
          if (c = (c | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return c;
          if (c = (c | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return c;
          if (c = (c | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return c;
          if ((this.pos += 5) > this.len) throw this.pos = this.len, a(this, 10);
          return c
        }), h.prototype.int32 = function() {
          return 0 | this.uint32()
        }, h.prototype.sint32 = function() {
          var t = this.uint32();
          return t >>> 1 ^ -(1 & t)
        }, h.prototype.bool = function() {
          return 0 !== this.uint32()
        }, h.prototype.fixed32 = function() {
          if (this.pos + 4 > this.len) throw a(this, 4);
          return p(this.buf, this.pos += 4)
        }, h.prototype.sfixed32 = function() {
          if (this.pos + 4 > this.len) throw a(this, 4);
          return 0 | p(this.buf, this.pos += 4)
        }, h.prototype.float = function() {
          if (this.pos + 4 > this.len) throw a(this, 4);
          var t = o.float.readFloatLE(this.buf, this.pos);
          return this.pos += 4, t
        }, h.prototype.double = function() {
          if (this.pos + 8 > this.len) throw a(this, 4);
          var t = o.float.readDoubleLE(this.buf, this.pos);
          return this.pos += 8, t
        }, h.prototype.bytes = function() {
          var t = this.uint32(),
            e = this.pos,
            i = this.pos + t;
          if (i > this.len) throw a(this, t);
          if (this.pos += t, Array.isArray(this.buf)) return this.buf.slice(e, i);
          if (e === i) {
            var n = o.Buffer;
            return n ? n.alloc(0) : new this.buf.constructor(0)
          }
          return this._slice.call(this.buf, e, i)
        }, h.prototype.string = function() {
          var t = this.bytes();
          return s.read(t, 0, t.length)
        }, h.prototype.skip = function(t) {
          if ("number" == typeof t) {
            if (this.pos + t > this.len) throw a(this, t);
            this.pos += t
          } else
            do {
              if (this.pos >= this.len) throw a(this)
            } while (128 & this.buf[this.pos++]);
          return this
        }, h.prototype.skipType = function(t) {
          switch (t) {
            case 0:
              this.skip();
              break;
            case 1:
              this.skip(8);
              break;
            case 2:
              this.skip(this.uint32());
              break;
            case 3:
              for (; 4 != (t = 7 & this.uint32());) this.skipType(t);
              break;
            case 5:
              this.skip(4);
              break;
            default:
              throw Error("invalid wire type " + t + " at offset " + this.pos)
          }
          return this
        }, h._configure = function(t) {
          n = t, h.create = l(), n._configure();
          var e = o.Long ? "toLong" : "toNumber";
          o.merge(h.prototype, {
            int64: function() {
              return d.call(this)[e](!1)
            },
            uint64: function() {
              return d.call(this)[e](!0)
            },
            sint64: function() {
              return d.call(this).zzDecode()[e](!1)
            },
            fixed64: function() {
              return f.call(this)[e](!0)
            },
            sfixed64: function() {
              return f.call(this)[e](!1)
            }
          })
        }
      },
      239: (t, e, i) => {
        "use strict";
        t.exports = o;
        var n = i(610);

        function o(t, e) {
          this.lo = t >>> 0, this.hi = e >>> 0
        }
        var r = o.zero = new o(0, 0);
        r.toNumber = function() {
          return 0
        }, r.zzEncode = r.zzDecode = function() {
          return this
        }, r.length = function() {
          return 1
        };
        var s = o.zeroHash = "\0\0\0\0\0\0\0\0";
        o.fromNumber = function(t) {
          if (0 === t) return r;
          var e = t < 0;
          e && (t = -t);
          var i = t >>> 0,
            n = (t - i) / 4294967296 >>> 0;
          return e && (n = ~n >>> 0, i = ~i >>> 0, ++i > 4294967295 && (i = 0, ++n > 4294967295 && (n = 0))), new o(i, n)
        }, o.from = function(t) {
          if ("number" == typeof t) return o.fromNumber(t);
          if (n.isString(t)) {
            if (!n.Long) return o.fromNumber(parseInt(t, 10));
            t = n.Long.fromString(t)
          }
          return t.low || t.high ? new o(t.low >>> 0, t.high >>> 0) : r
        }, o.prototype.toNumber = function(t) {
          if (!t && this.hi >>> 31) {
            var e = 1 + ~this.lo >>> 0,
              i = ~this.hi >>> 0;
            return e || (i = i + 1 >>> 0), -(e + 4294967296 * i)
          }
          return this.lo + 4294967296 * this.hi
        }, o.prototype.toLong = function(t) {
          return n.Long ? new n.Long(0 | this.lo, 0 | this.hi, Boolean(t)) : {
            low: 0 | this.lo,
            high: 0 | this.hi,
            unsigned: Boolean(t)
          }
        };
        var a = String.prototype.charCodeAt;
        o.fromHash = function(t) {
          return t === s ? r : new o((a.call(t, 0) | a.call(t, 1) << 8 | a.call(t, 2) << 16 | a.call(t, 3) << 24) >>> 0, (a.call(t, 4) | a.call(t, 5) << 8 | a.call(t, 6) << 16 | a.call(t, 7) << 24) >>> 0)
        }, o.prototype.toHash = function() {
          return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24)
        }, o.prototype.zzEncode = function() {
          var t = this.hi >> 31;
          return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ t) >>> 0, this.lo = (this.lo << 1 ^ t) >>> 0, this
        }, o.prototype.zzDecode = function() {
          var t = -(1 & this.lo);
          return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ t) >>> 0, this.hi = (this.hi >>> 1 ^ t) >>> 0, this
        }, o.prototype.length = function() {
          var t = this.lo,
            e = (this.lo >>> 28 | this.hi << 4) >>> 0,
            i = this.hi >>> 24;
          return 0 === i ? 0 === e ? t < 16384 ? t < 128 ? 1 : 2 : t < 2097152 ? 3 : 4 : e < 16384 ? e < 128 ? 5 : 6 : e < 2097152 ? 7 : 8 : i < 128 ? 9 : 10
        }
      },
      303: t => {
        "use strict";

        function e(t) {
          if (this._offset = 0, t instanceof ArrayBuffer) this._buffer = t, this._view = new DataView(this._buffer);
          else {
            if (!ArrayBuffer.isView(t)) throw new Error("Invalid argument");
            this._buffer = t.buffer, this._view = new DataView(this._buffer, t.byteOffset, t.byteLength)
          }
        }
        e.prototype._array = function(t) {
          for (var e = new Array(t), i = 0; i < t; i++) e[i] = this._parse();
          return e
        }, e.prototype._map = function(t) {
          for (var e = {}, i = 0; i < t; i++) e[this._parse()] = this._parse();
          return e
        }, e.prototype._str = function(t) {
          var e = function(t, e, i) {
            for (var n = "", o = 0, r = e, s = e + i; r < s; r++) {
              var a = t.getUint8(r);
              if (128 & a)
                if (192 != (224 & a))
                  if (224 != (240 & a)) {
                    if (240 != (248 & a)) throw new Error("Invalid byte " + a.toString(16));
                    (o = (7 & a) << 18 | (63 & t.getUint8(++r)) << 12 | (63 & t.getUint8(++r)) << 6 | 63 & t.getUint8(++r)) >= 65536 ? (o -= 65536, n += String.fromCharCode((o >>> 10) + 55296, 56320 + (1023 & o))) : n += String.fromCharCode(o)
                  } else n += String.fromCharCode((15 & a) << 12 | (63 & t.getUint8(++r)) << 6 | 63 & t.getUint8(++r));
              else n += String.fromCharCode((31 & a) << 6 | 63 & t.getUint8(++r));
              else n += String.fromCharCode(a)
            }
            return n
          }(this._view, this._offset, t);
          return this._offset += t, e
        }, e.prototype._bin = function(t) {
          var e = this._buffer.slice(this._offset, this._offset + t);
          return this._offset += t, e
        }, e.prototype._parse = function() {
          var t, e = this._view.getUint8(this._offset++),
            i = 0,
            n = 0,
            o = 0,
            r = 0;
          if (e < 192) return e < 128 ? e : e < 144 ? this._map(15 & e) : e < 160 ? this._array(15 & e) : this._str(31 & e);
          if (e > 223) return -1 * (255 - e + 1);
          switch (e) {
            case 192:
              return null;
            case 194:
              return !1;
            case 195:
              return !0;
            case 196:
              return i = this._view.getUint8(this._offset), this._offset += 1, this._bin(i);
            case 197:
              return i = this._view.getUint16(this._offset), this._offset += 2, this._bin(i);
            case 198:
              return i = this._view.getUint32(this._offset), this._offset += 4, this._bin(i);
            case 199:
              return i = this._view.getUint8(this._offset), n = this._view.getInt8(this._offset + 1), this._offset += 2, [n, this._bin(i)];
            case 200:
              return i = this._view.getUint16(this._offset), n = this._view.getInt8(this._offset + 2), this._offset += 3, [n, this._bin(i)];
            case 201:
              return i = this._view.getUint32(this._offset), n = this._view.getInt8(this._offset + 4), this._offset += 5, [n, this._bin(i)];
            case 202:
              return t = this._view.getFloat32(this._offset), this._offset += 4, t;
            case 203:
              return t = this._view.getFloat64(this._offset), this._offset += 8, t;
            case 204:
              return t = this._view.getUint8(this._offset), this._offset += 1, t;
            case 205:
              return t = this._view.getUint16(this._offset), this._offset += 2, t;
            case 206:
              return t = this._view.getUint32(this._offset), this._offset += 4, t;
            case 207:
              return o = this._view.getUint32(this._offset) * Math.pow(2, 32), r = this._view.getUint32(this._offset + 4), this._offset += 8, o + r;
            case 208:
              return t = this._view.getInt8(this._offset), this._offset += 1, t;
            case 209:
              return t = this._view.getInt16(this._offset), this._offset += 2, t;
            case 210:
              return t = this._view.getInt32(this._offset), this._offset += 4, t;
            case 211:
              return o = this._view.getInt32(this._offset) * Math.pow(2, 32), r = this._view.getUint32(this._offset + 4), this._offset += 8, o + r;
            case 212:
              return n = this._view.getInt8(this._offset), this._offset += 1, 0 === n ? void(this._offset += 1) : [n, this._bin(1)];
            case 213:
              return n = this._view.getInt8(this._offset), this._offset += 1, [n, this._bin(2)];
            case 214:
              return n = this._view.getInt8(this._offset), this._offset += 1, [n, this._bin(4)];
            case 215:
              return n = this._view.getInt8(this._offset), this._offset += 1, 0 === n ? (o = this._view.getInt32(this._offset) * Math.pow(2, 32), r = this._view.getUint32(this._offset + 4), this._offset += 8, new Date(o + r)) : [n, this._bin(8)];
            case 216:
              return n = this._view.getInt8(this._offset), this._offset += 1, [n, this._bin(16)];
            case 217:
              return i = this._view.getUint8(this._offset), this._offset += 1, this._str(i);
            case 218:
              return i = this._view.getUint16(this._offset), this._offset += 2, this._str(i);
            case 219:
              return i = this._view.getUint32(this._offset), this._offset += 4, this._str(i);
            case 220:
              return i = this._view.getUint16(this._offset), this._offset += 2, this._array(i);
            case 221:
              return i = this._view.getUint32(this._offset), this._offset += 4, this._array(i);
            case 222:
              return i = this._view.getUint16(this._offset), this._offset += 2, this._map(i);
            case 223:
              return i = this._view.getUint32(this._offset), this._offset += 4, this._map(i)
          }
          throw new Error("Could not parse")
        }, t.exports = function(t) {
          var i = new e(t),
            n = i._parse();
          if (i._offset !== t.byteLength) throw new Error(t.byteLength - i._offset + " trailing bytes");
          return n
        }
      },
      358: t => {
        "use strict";

        function e() {
          this._listeners = {}
        }
        t.exports = e, e.prototype.on = function(t, e, i) {
          return (this._listeners[t] || (this._listeners[t] = [])).push({
            fn: e,
            ctx: i || this
          }), this
        }, e.prototype.off = function(t, e) {
          if (void 0 === t) this._listeners = {};
          else if (void 0 === e) this._listeners[t] = [];
          else
            for (var i = this._listeners[t], n = 0; n < i.length;) i[n].fn === e ? i.splice(n, 1) : ++n;
          return this
        }, e.prototype.emit = function(t) {
          var e = this._listeners[t];
          if (e) {
            for (var i = [], n = 1; n < arguments.length;) i.push(arguments[n++]);
            for (n = 0; n < e.length;) e[n].fn.apply(e[n++].ctx, i)
          }
          return this
        }
      },
      390: t => {
        "use strict";
        t.exports = function(t, e, i) {
          var n = i || 8192,
            o = n >>> 1,
            r = null,
            s = n;
          return function(i) {
            if (i < 1 || i > o) return t(i);
            s + i > n && (r = t(n), s = 0);
            var a = e.call(r, s, s += i);
            return 7 & s && (s = 1 + (7 | s)), a
          }
        }
      },
      394: (t, e, i) => {
        "use strict";
        var n = e;

        function o() {
          n.util._configure(), n.Writer._configure(n.BufferWriter), n.Reader._configure(n.BufferReader)
        }
        n.build = "minimal", n.Writer = i(449), n.BufferWriter = i(818), n.Reader = i(237), n.BufferReader = i(158), n.util = i(610), n.rpc = i(47), n.roots = i(529), n.configure = o, o()
      },
      410: t => {
        "use strict";

        function e(t) {
          return "undefined" != typeof Float32Array ? function() {
            var e = new Float32Array([-0]),
              i = new Uint8Array(e.buffer),
              n = 128 === i[3];

            function o(t, n, o) {
              e[0] = t, n[o] = i[0], n[o + 1] = i[1], n[o + 2] = i[2], n[o + 3] = i[3]
            }

            function r(t, n, o) {
              e[0] = t, n[o] = i[3], n[o + 1] = i[2], n[o + 2] = i[1], n[o + 3] = i[0]
            }

            function s(t, n) {
              return i[0] = t[n], i[1] = t[n + 1], i[2] = t[n + 2], i[3] = t[n + 3], e[0]
            }

            function a(t, n) {
              return i[3] = t[n], i[2] = t[n + 1], i[1] = t[n + 2], i[0] = t[n + 3], e[0]
            }
            t.writeFloatLE = n ? o : r, t.writeFloatBE = n ? r : o, t.readFloatLE = n ? s : a, t.readFloatBE = n ? a : s
          }() : function() {
            function e(t, e, i, n) {
              var o = e < 0 ? 1 : 0;
              if (o && (e = -e), 0 === e) t(1 / e > 0 ? 0 : 2147483648, i, n);
              else if (isNaN(e)) t(2143289344, i, n);
              else if (e > 34028234663852886e22) t((o << 31 | 2139095040) >>> 0, i, n);
              else if (e < 11754943508222875e-54) t((o << 31 | Math.round(e / 1401298464324817e-60)) >>> 0, i, n);
              else {
                var r = Math.floor(Math.log(e) / Math.LN2);
                t((o << 31 | r + 127 << 23 | 8388607 & Math.round(e * Math.pow(2, -r) * 8388608)) >>> 0, i, n)
              }
            }

            function s(t, e, i) {
              var n = t(e, i),
                o = 2 * (n >> 31) + 1,
                r = n >>> 23 & 255,
                s = 8388607 & n;
              return 255 === r ? s ? NaN : o * (1 / 0) : 0 === r ? 1401298464324817e-60 * o * s : o * Math.pow(2, r - 150) * (s + 8388608)
            }
            t.writeFloatLE = e.bind(null, i), t.writeFloatBE = e.bind(null, n), t.readFloatLE = s.bind(null, o), t.readFloatBE = s.bind(null, r)
          }(), "undefined" != typeof Float64Array ? function() {
            var e = new Float64Array([-0]),
              i = new Uint8Array(e.buffer),
              n = 128 === i[7];

            function o(t, n, o) {
              e[0] = t, n[o] = i[0], n[o + 1] = i[1], n[o + 2] = i[2], n[o + 3] = i[3], n[o + 4] = i[4], n[o + 5] = i[5], n[o + 6] = i[6], n[o + 7] = i[7]
            }

            function r(t, n, o) {
              e[0] = t, n[o] = i[7], n[o + 1] = i[6], n[o + 2] = i[5], n[o + 3] = i[4], n[o + 4] = i[3], n[o + 5] = i[2], n[o + 6] = i[1], n[o + 7] = i[0]
            }

            function s(t, n) {
              return i[0] = t[n], i[1] = t[n + 1], i[2] = t[n + 2], i[3] = t[n + 3], i[4] = t[n + 4], i[5] = t[n + 5], i[6] = t[n + 6], i[7] = t[n + 7], e[0]
            }

            function a(t, n) {
              return i[7] = t[n], i[6] = t[n + 1], i[5] = t[n + 2], i[4] = t[n + 3], i[3] = t[n + 4], i[2] = t[n + 5], i[1] = t[n + 6], i[0] = t[n + 7], e[0]
            }
            t.writeDoubleLE = n ? o : r, t.writeDoubleBE = n ? r : o, t.readDoubleLE = n ? s : a, t.readDoubleBE = n ? a : s
          }() : function() {
            function e(t, e, i, n, o, r) {
              var s = n < 0 ? 1 : 0;
              if (s && (n = -n), 0 === n) t(0, o, r + e), t(1 / n > 0 ? 0 : 2147483648, o, r + i);
              else if (isNaN(n)) t(0, o, r + e), t(2146959360, o, r + i);
              else if (n > 17976931348623157e292) t(0, o, r + e), t((s << 31 | 2146435072) >>> 0, o, r + i);
              else {
                var a;
                if (n < 22250738585072014e-324) t((a = n / 5e-324) >>> 0, o, r + e), t((s << 31 | a / 4294967296) >>> 0, o, r + i);
                else {
                  var h = Math.floor(Math.log(n) / Math.LN2);
                  1024 === h && (h = 1023), t(4503599627370496 * (a = n * Math.pow(2, -h)) >>> 0, o, r + e), t((s << 31 | h + 1023 << 20 | 1048576 * a & 1048575) >>> 0, o, r + i)
                }
              }
            }

            function s(t, e, i, n, o) {
              var r = t(n, o + e),
                s = t(n, o + i),
                a = 2 * (s >> 31) + 1,
                h = s >>> 20 & 2047,
                c = 4294967296 * (1048575 & s) + r;
              return 2047 === h ? c ? NaN : a * (1 / 0) : 0 === h ? 5e-324 * a * c : a * Math.pow(2, h - 1075) * (c + 4503599627370496)
            }
            t.writeDoubleLE = e.bind(null, i, 0, 4), t.writeDoubleBE = e.bind(null, n, 4, 0), t.readDoubleLE = s.bind(null, o, 0, 4), t.readDoubleBE = s.bind(null, r, 4, 0)
          }(), t
        }

        function i(t, e, i) {
          e[i] = 255 & t, e[i + 1] = t >>> 8 & 255, e[i + 2] = t >>> 16 & 255, e[i + 3] = t >>> 24
        }

        function n(t, e, i) {
          e[i] = t >>> 24, e[i + 1] = t >>> 16 & 255, e[i + 2] = t >>> 8 & 255, e[i + 3] = 255 & t
        }

        function o(t, e) {
          return (t[e] | t[e + 1] << 8 | t[e + 2] << 16 | t[e + 3] << 24) >>> 0
        }

        function r(t, e) {
          return (t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3]) >>> 0
        }
        t.exports = e(e)
      },
      447: (t, e) => {
        "use strict";
        var i = e;
        i.length = function(t) {
          for (var e = 0, i = 0, n = 0; n < t.length; ++n)(i = t.charCodeAt(n)) < 128 ? e += 1 : i < 2048 ? e += 2 : 55296 == (64512 & i) && 56320 == (64512 & t.charCodeAt(n + 1)) ? (++n, e += 4) : e += 3;
          return e
        }, i.read = function(t, e, i) {
          if (i - e < 1) return "";
          for (var n, o = null, r = [], s = 0; e < i;)(n = t[e++]) < 128 ? r[s++] = n : n > 191 && n < 224 ? r[s++] = (31 & n) << 6 | 63 & t[e++] : n > 239 && n < 365 ? (n = ((7 & n) << 18 | (63 & t[e++]) << 12 | (63 & t[e++]) << 6 | 63 & t[e++]) - 65536, r[s++] = 55296 + (n >> 10), r[s++] = 56320 + (1023 & n)) : r[s++] = (15 & n) << 12 | (63 & t[e++]) << 6 | 63 & t[e++], s > 8191 && ((o || (o = [])).push(String.fromCharCode.apply(String, r)), s = 0);
          return o ? (s && o.push(String.fromCharCode.apply(String, r.slice(0, s))), o.join("")) : String.fromCharCode.apply(String, r.slice(0, s))
        }, i.write = function(t, e, i) {
          for (var n, o, r = i, s = 0; s < t.length; ++s)(n = t.charCodeAt(s)) < 128 ? e[i++] = n : n < 2048 ? (e[i++] = n >> 6 | 192, e[i++] = 63 & n | 128) : 55296 == (64512 & n) && 56320 == (64512 & (o = t.charCodeAt(s + 1))) ? (n = 65536 + ((1023 & n) << 10) + (1023 & o), ++s, e[i++] = n >> 18 | 240, e[i++] = n >> 12 & 63 | 128, e[i++] = n >> 6 & 63 | 128, e[i++] = 63 & n | 128) : (e[i++] = n >> 12 | 224, e[i++] = n >> 6 & 63 | 128, e[i++] = 63 & n | 128);
          return i - r
        }
      },
      449: (t, e, i) => {
        "use strict";
        t.exports = l;
        var n, o = i(610),
          r = o.LongBits,
          s = o.base64,
          a = o.utf8;

        function h(t, e, i) {
          this.fn = t, this.len = e, this.next = void 0, this.val = i
        }

        function c() {}

        function u(t) {
          this.head = t.head, this.tail = t.tail, this.len = t.len, this.next = t.states
        }

        function l() {
          this.len = 0, this.head = new h(c, 0, 0), this.tail = this.head, this.states = null
        }
        var d = function() {
          return o.Buffer ? function() {
            return (l.create = function() {
              return new n
            })()
          } : function() {
            return new l
          }
        };

        function p(t, e, i) {
          e[i] = 255 & t
        }

        function f(t, e) {
          this.len = t, this.next = void 0, this.val = e
        }

        function g(t, e, i) {
          for (; t.hi;) e[i++] = 127 & t.lo | 128, t.lo = (t.lo >>> 7 | t.hi << 25) >>> 0, t.hi >>>= 7;
          for (; t.lo > 127;) e[i++] = 127 & t.lo | 128, t.lo = t.lo >>> 7;
          e[i++] = t.lo
        }

        function m(t, e, i) {
          e[i] = 255 & t, e[i + 1] = t >>> 8 & 255, e[i + 2] = t >>> 16 & 255, e[i + 3] = t >>> 24
        }
        l.create = d(), l.alloc = function(t) {
          return new o.Array(t)
        }, o.Array !== Array && (l.alloc = o.pool(l.alloc, o.Array.prototype.subarray)), l.prototype._push = function(t, e, i) {
          return this.tail = this.tail.next = new h(t, e, i), this.len += e, this
        }, f.prototype = Object.create(h.prototype), f.prototype.fn = function(t, e, i) {
          for (; t > 127;) e[i++] = 127 & t | 128, t >>>= 7;
          e[i] = t
        }, l.prototype.uint32 = function(t) {
          return this.len += (this.tail = this.tail.next = new f((t >>>= 0) < 128 ? 1 : t < 16384 ? 2 : t < 2097152 ? 3 : t < 268435456 ? 4 : 5, t)).len, this
        }, l.prototype.int32 = function(t) {
          return t < 0 ? this._push(g, 10, r.fromNumber(t)) : this.uint32(t)
        }, l.prototype.sint32 = function(t) {
          return this.uint32((t << 1 ^ t >> 31) >>> 0)
        }, l.prototype.uint64 = function(t) {
          var e = r.from(t);
          return this._push(g, e.length(), e)
        }, l.prototype.int64 = l.prototype.uint64, l.prototype.sint64 = function(t) {
          var e = r.from(t).zzEncode();
          return this._push(g, e.length(), e)
        }, l.prototype.bool = function(t) {
          return this._push(p, 1, t ? 1 : 0)
        }, l.prototype.fixed32 = function(t) {
          return this._push(m, 4, t >>> 0)
        }, l.prototype.sfixed32 = l.prototype.fixed32, l.prototype.fixed64 = function(t) {
          var e = r.from(t);
          return this._push(m, 4, e.lo)._push(m, 4, e.hi)
        }, l.prototype.sfixed64 = l.prototype.fixed64, l.prototype.float = function(t) {
          return this._push(o.float.writeFloatLE, 4, t)
        }, l.prototype.double = function(t) {
          return this._push(o.float.writeDoubleLE, 8, t)
        };
        var y = o.Array.prototype.set ? function(t, e, i) {
          e.set(t, i)
        } : function(t, e, i) {
          for (var n = 0; n < t.length; ++n) e[i + n] = t[n]
        };
        l.prototype.bytes = function(t) {
          var e = t.length >>> 0;
          if (!e) return this._push(p, 1, 0);
          if (o.isString(t)) {
            var i = l.alloc(e = s.length(t));
            s.decode(t, i, 0), t = i
          }
          return this.uint32(e)._push(y, e, t)
        }, l.prototype.string = function(t) {
          var e = a.length(t);
          return e ? this.uint32(e)._push(a.write, e, t) : this._push(p, 1, 0)
        }, l.prototype.fork = function() {
          return this.states = new u(this), this.head = this.tail = new h(c, 0, 0), this.len = 0, this
        }, l.prototype.reset = function() {
          return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new h(c, 0, 0), this.len = 0), this
        }, l.prototype.ldelim = function() {
          var t = this.head,
            e = this.tail,
            i = this.len;
          return this.reset().uint32(i), i && (this.tail.next = t.next, this.tail = e, this.len += i), this
        }, l.prototype.finish = function() {
          for (var t = this.head.next, e = this.constructor.alloc(this.len), i = 0; t;) t.fn(t.val, e, i), i += t.len, t = t.next;
          return e
        }, l._configure = function(t) {
          n = t, l.create = d(), n._configure()
        }
      },
      523: t => {
        "use strict";

        function e(t, e, i) {
          for (var n = 0, o = 0, r = i.length; o < r; o++)(n = i.charCodeAt(o)) < 128 ? t.setUint8(e++, n) : n < 2048 ? (t.setUint8(e++, 192 | n >> 6), t.setUint8(e++, 128 | 63 & n)) : n < 55296 || n >= 57344 ? (t.setUint8(e++, 224 | n >> 12), t.setUint8(e++, 128 | n >> 6 & 63), t.setUint8(e++, 128 | 63 & n)) : (o++, n = 65536 + ((1023 & n) << 10 | 1023 & i.charCodeAt(o)), t.setUint8(e++, 240 | n >> 18), t.setUint8(e++, 128 | n >> 12 & 63), t.setUint8(e++, 128 | n >> 6 & 63), t.setUint8(e++, 128 | 63 & n))
        }

        function i(t, e, n) {
          var o = typeof n,
            r = 0,
            s = 0,
            a = 0,
            h = 0,
            c = 0,
            u = 0;
          if ("string" === o) {
            if (c = function(t) {
                for (var e = 0, i = 0, n = 0, o = t.length; n < o; n++)(e = t.charCodeAt(n)) < 128 ? i += 1 : e < 2048 ? i += 2 : e < 55296 || e >= 57344 ? i += 3 : (n++, i += 4);
                return i
              }(n), c < 32) t.push(160 | c), u = 1;
            else if (c < 256) t.push(217, c), u = 2;
            else if (c < 65536) t.push(218, c >> 8, c), u = 3;
            else {
              if (!(c < 4294967296)) throw new Error("String too long");
              t.push(219, c >> 24, c >> 16, c >> 8, c), u = 5
            }
            return e.push({
              _str: n,
              _length: c,
              _offset: t.length
            }), u + c
          }
          if ("number" === o) return Math.floor(n) === n && isFinite(n) ? n >= 0 ? n < 128 ? (t.push(n), 1) : n < 256 ? (t.push(204, n), 2) : n < 65536 ? (t.push(205, n >> 8, n), 3) : n < 4294967296 ? (t.push(206, n >> 24, n >> 16, n >> 8, n), 5) : (a = n / Math.pow(2, 32) | 0, h = n >>> 0, t.push(207, a >> 24, a >> 16, a >> 8, a, h >> 24, h >> 16, h >> 8, h), 9) : n >= -32 ? (t.push(n), 1) : n >= -128 ? (t.push(208, n), 2) : n >= -32768 ? (t.push(209, n >> 8, n), 3) : n >= -2147483648 ? (t.push(210, n >> 24, n >> 16, n >> 8, n), 5) : (a = Math.floor(n / Math.pow(2, 32)), h = n >>> 0, t.push(211, a >> 24, a >> 16, a >> 8, a, h >> 24, h >> 16, h >> 8, h), 9) : (t.push(203), e.push({
            _float: n,
            _length: 8,
            _offset: t.length
          }), 9);
          if ("object" === o) {
            if (null === n) return t.push(192), 1;
            if (Array.isArray(n)) {
              if ((c = n.length) < 16) t.push(144 | c), u = 1;
              else if (c < 65536) t.push(220, c >> 8, c), u = 3;
              else {
                if (!(c < 4294967296)) throw new Error("Array too large");
                t.push(221, c >> 24, c >> 16, c >> 8, c), u = 5
              }
              for (r = 0; r < c; r++) u += i(t, e, n[r]);
              return u
            }
            if (n instanceof Date) {
              var l = n.getTime();
              return a = Math.floor(l / Math.pow(2, 32)), h = l >>> 0, t.push(215, 0, a >> 24, a >> 16, a >> 8, a, h >> 24, h >> 16, h >> 8, h), 10
            }
            if (n instanceof ArrayBuffer) {
              if ((c = n.byteLength) < 256) t.push(196, c), u = 2;
              else if (c < 65536) t.push(197, c >> 8, c), u = 3;
              else {
                if (!(c < 4294967296)) throw new Error("Buffer too large");
                t.push(198, c >> 24, c >> 16, c >> 8, c), u = 5
              }
              return e.push({
                _bin: n,
                _length: c,
                _offset: t.length
              }), u + c
            }
            if ("function" == typeof n.toJSON) return i(t, e, n.toJSON());
            var d = [],
              p = "",
              f = Object.keys(n);
            for (r = 0, s = f.length; r < s; r++) "function" != typeof n[p = f[r]] && d.push(p);
            if ((c = d.length) < 16) t.push(128 | c), u = 1;
            else if (c < 65536) t.push(222, c >> 8, c), u = 3;
            else {
              if (!(c < 4294967296)) throw new Error("Object too large");
              t.push(223, c >> 24, c >> 16, c >> 8, c), u = 5
            }
            for (r = 0; r < c; r++) u += i(t, e, p = d[r]), u += i(t, e, n[p]);
            return u
          }
          if ("boolean" === o) return t.push(n ? 195 : 194), 1;
          if ("undefined" === o) return t.push(212, 0, 0), 3;
          throw new Error("Could not encode")
        }
        t.exports = function(t) {
          var n = [],
            o = [],
            r = i(n, o, t),
            s = new ArrayBuffer(r),
            a = new DataView(s),
            h = 0,
            c = 0,
            u = -1;
          o.length > 0 && (u = o[0]._offset);
          for (var l, d = 0, p = 0, f = 0, g = n.length; f < g; f++)
            if (a.setUint8(c + f, n[f]), f + 1 === u) {
              if (d = (l = o[h])._length, p = c + u, l._bin)
                for (var m = new Uint8Array(l._bin), y = 0; y < d; y++) a.setUint8(p + y, m[y]);
              else l._str ? e(a, p, l._str) : void 0 !== l._float && a.setFloat64(p, l._float);
              c += d, o[++h] && (u = o[h]._offset)
            } return s
        }
      },
      529: t => {
        "use strict";
        t.exports = {}
      },
      595: (t, e, i) => {
        "use strict";
        t.exports = o;
        var n = i(610);

        function o(t, e, i) {
          if ("function" != typeof t) throw TypeError("rpcImpl must be a function");
          n.EventEmitter.call(this), this.rpcImpl = t, this.requestDelimited = Boolean(e), this.responseDelimited = Boolean(i)
        }(o.prototype = Object.create(n.EventEmitter.prototype)).constructor = o, o.prototype.rpcCall = function t(e, i, o, r, s) {
          if (!r) throw TypeError("request must be specified");
          var a = this;
          if (!s) return n.asPromise(t, a, e, i, o, r);
          if (a.rpcImpl) try {
            return a.rpcImpl(e, i[a.requestDelimited ? "encodeDelimited" : "encode"](r).finish(), (function(t, i) {
              if (t) return a.emit("error", t, e), s(t);
              if (null !== i) {
                if (!(i instanceof o)) try {
                  i = o[a.responseDelimited ? "decodeDelimited" : "decode"](i)
                } catch (t) {
                  return a.emit("error", t, e), s(t)
                }
                return a.emit("data", i, e), s(null, i)
              }
              a.end(!0)
            }))
          } catch (t) {
            return a.emit("error", t, e), void setTimeout((function() {
              s(t)
            }), 0)
          } else setTimeout((function() {
            s(Error("already ended"))
          }), 0)
        }, o.prototype.end = function(t) {
          return this.rpcImpl && (t || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this
        }
      },
      602: (t, e, i) => {
        e.encode = i(523), e.decode = i(303)
      },
      610: function(t, e, i) {
        "use strict";
        var n = e;

        function o(t, e, i) {
          for (var n = Object.keys(e), o = 0; o < n.length; ++o) void 0 !== t[n[o]] && i || (t[n[o]] = e[n[o]]);
          return t
        }

        function r(t) {
          function e(t, i) {
            if (!(this instanceof e)) return new e(t, i);
            Object.defineProperty(this, "message", {
              get: function() {
                return t
              }
            }), Error.captureStackTrace ? Error.captureStackTrace(this, e) : Object.defineProperty(this, "stack", {
              value: (new Error).stack || ""
            }), i && o(this, i)
          }
          return e.prototype = Object.create(Error.prototype, {
            constructor: {
              value: e,
              writable: !0,
              enumerable: !1,
              configurable: !0
            },
            name: {
              get: function() {
                return t
              },
              set: void 0,
              enumerable: !1,
              configurable: !0
            },
            toString: {
              value: function() {
                return this.name + ": " + this.message
              },
              writable: !0,
              enumerable: !1,
              configurable: !0
            }
          }), e
        }
        n.asPromise = i(45), n.base64 = i(839), n.EventEmitter = i(358), n.float = i(410), n.inquire = i(153), n.utf8 = i(447), n.pool = i(390), n.LongBits = i(239), n.isNode = Boolean(void 0 !== i.g && i.g && i.g.process && i.g.process.versions && i.g.process.versions.node), n.global = n.isNode && i.g || "undefined" != typeof window && window || "undefined" != typeof self && self || this, n.emptyArray = Object.freeze ? Object.freeze([]) : [], n.emptyObject = Object.freeze ? Object.freeze({}) : {}, n.isInteger = Number.isInteger || function(t) {
          return "number" == typeof t && isFinite(t) && Math.floor(t) === t
        }, n.isString = function(t) {
          return "string" == typeof t || t instanceof String
        }, n.isObject = function(t) {
          return t && "object" == typeof t
        }, n.isset = n.isSet = function(t, e) {
          var i = t[e];
          return !(null == i || !t.hasOwnProperty(e)) && ("object" != typeof i || (Array.isArray(i) ? i.length : Object.keys(i).length) > 0)
        }, n.Buffer = function() {
          try {
            var t = n.inquire("buffer").Buffer;
            return t.prototype.utf8Write ? t : null
          } catch (t) {
            return null
          }
        }(), n._Buffer_from = null, n._Buffer_allocUnsafe = null, n.newBuffer = function(t) {
          return "number" == typeof t ? n.Buffer ? n._Buffer_allocUnsafe(t) : new n.Array(t) : n.Buffer ? n._Buffer_from(t) : "undefined" == typeof Uint8Array ? t : new Uint8Array(t)
        }, n.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, n.Long = n.global.dcodeIO && n.global.dcodeIO.Long || n.global.Long || n.inquire("long"), n.key2Re = /^true|false|0|1$/, n.key32Re = /^-?(?:0|[1-9][0-9]*)$/, n.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, n.longToHash = function(t) {
          return t ? n.LongBits.from(t).toHash() : n.LongBits.zeroHash
        }, n.longFromHash = function(t, e) {
          var i = n.LongBits.fromHash(t);
          return n.Long ? n.Long.fromBits(i.lo, i.hi, e) : i.toNumber(Boolean(e))
        }, n.merge = o, n.lcFirst = function(t) {
          return t.charAt(0).toLowerCase() + t.substring(1)
        }, n.newError = r, n.ProtocolError = r("ProtocolError"), n.oneOfGetter = function(t) {
          for (var e = {}, i = 0; i < t.length; ++i) e[t[i]] = 1;
          return function() {
            for (var t = Object.keys(this), i = t.length - 1; i > -1; --i)
              if (1 === e[t[i]] && void 0 !== this[t[i]] && null !== this[t[i]]) return t[i]
          }
        }, n.oneOfSetter = function(t) {
          return function(e) {
            for (var i = 0; i < t.length; ++i) t[i] !== e && delete this[t[i]]
          }
        }, n.toJSONOptions = {
          longs: String,
          enums: String,
          bytes: String,
          json: !0
        }, n._configure = function() {
          var t = n.Buffer;
          t ? (n._Buffer_from = t.from !== Uint8Array.from && t.from || function(e, i) {
            return new t(e, i)
          }, n._Buffer_allocUnsafe = t.allocUnsafe || function(e) {
            return new t(e)
          }) : n._Buffer_from = n._Buffer_allocUnsafe = null
        }
      },
      818: (t, e, i) => {
        "use strict";
        t.exports = r;
        var n = i(449);
        (r.prototype = Object.create(n.prototype)).constructor = r;
        var o = i(610);

        function r() {
          n.call(this)
        }

        function s(t, e, i) {
          t.length < 40 ? o.utf8.write(t, e, i) : e.utf8Write ? e.utf8Write(t, i) : e.write(t, i)
        }
        r._configure = function() {
          r.alloc = o._Buffer_allocUnsafe, r.writeBytesBuffer = o.Buffer && o.Buffer.prototype instanceof Uint8Array && "set" === o.Buffer.prototype.set.name ? function(t, e, i) {
            e.set(t, i)
          } : function(t, e, i) {
            if (t.copy) t.copy(e, i, 0, t.length);
            else
              for (var n = 0; n < t.length;) e[i++] = t[n++]
          }
        }, r.prototype.bytes = function(t) {
          o.isString(t) && (t = o._Buffer_from(t, "base64"));
          var e = t.length >>> 0;
          return this.uint32(e), e && this._push(r.writeBytesBuffer, e, t), this
        }, r.prototype.string = function(t) {
          var e = o.Buffer.byteLength(t);
          return this.uint32(e), e && this._push(s, e, t), this
        }, r._configure()
      },
      839: (t, e) => {
        "use strict";
        var i = e;
        i.length = function(t) {
          var e = t.length;
          if (!e) return 0;
          for (var i = 0; --e % 4 > 1 && "=" === t.charAt(e);) ++i;
          return Math.ceil(3 * t.length) / 4 - i
        };
        for (var n = new Array(64), o = new Array(123), r = 0; r < 64;) o[n[r] = r < 26 ? r + 65 : r < 52 ? r + 71 : r < 62 ? r - 4 : r - 59 | 43] = r++;
        i.encode = function(t, e, i) {
          for (var o, r = null, s = [], a = 0, h = 0; e < i;) {
            var c = t[e++];
            switch (h) {
              case 0:
                s[a++] = n[c >> 2], o = (3 & c) << 4, h = 1;
                break;
              case 1:
                s[a++] = n[o | c >> 4], o = (15 & c) << 2, h = 2;
                break;
              case 2:
                s[a++] = n[o | c >> 6], s[a++] = n[63 & c], h = 0
            }
            a > 8191 && ((r || (r = [])).push(String.fromCharCode.apply(String, s)), a = 0)
          }
          return h && (s[a++] = n[o], s[a++] = 61, 1 === h && (s[a++] = 61)), r ? (a && r.push(String.fromCharCode.apply(String, s.slice(0, a))), r.join("")) : String.fromCharCode.apply(String, s.slice(0, a))
        };
        var s = "invalid encoding";
        i.decode = function(t, e, i) {
          for (var n, r = i, a = 0, h = 0; h < t.length;) {
            var c = t.charCodeAt(h++);
            if (61 === c && a > 1) break;
            if (void 0 === (c = o[c])) throw Error(s);
            switch (a) {
              case 0:
                n = c, a = 1;
                break;
              case 1:
                e[i++] = n << 2 | (48 & c) >> 4, n = c, a = 2;
                break;
              case 2:
                e[i++] = (15 & n) << 4 | (60 & c) >> 2, n = c, a = 3;
                break;
              case 3:
                e[i++] = (3 & n) << 6 | c, a = 0
            }
          }
          if (1 === a) throw Error(s);
          return i - r
        }, i.test = function(t) {
          return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)
        }
      },
      946: (t, e, i) => {
        "use strict";
        t.exports = i(394)
      },
      971: t => {
        function e(t) {
          if (t) return function(t) {
            for (var i in e.prototype) t[i] = e.prototype[i];
            return t
          }(t)
        }
        t.exports = e, e.prototype.on = e.prototype.addEventListener = function(t, e) {
          return this._callbacks = this._callbacks || {}, (this._callbacks["$" + t] = this._callbacks["$" + t] || []).push(e), this
        }, e.prototype.once = function(t, e) {
          function i() {
            this.off(t, i), e.apply(this, arguments)
          }
          return i.fn = e, this.on(t, i), this
        }, e.prototype.off = e.prototype.removeListener = e.prototype.removeAllListeners = e.prototype.removeEventListener = function(t, e) {
          if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this;
          var i, n = this._callbacks["$" + t];
          if (!n) return this;
          if (1 == arguments.length) return delete this._callbacks["$" + t], this;
          for (var o = 0; o < n.length; o++)
            if ((i = n[o]) === e || i.fn === e) {
              n.splice(o, 1);
              break
            } return 0 === n.length && delete this._callbacks["$" + t], this
        }, e.prototype.emit = function(t) {
          this._callbacks = this._callbacks || {};
          for (var e = new Array(arguments.length - 1), i = this._callbacks["$" + t], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
          if (i) {
            n = 0;
            for (var o = (i = i.slice(0)).length; n < o; ++n) i[n].apply(this, e)
          }
          return this
        }, e.prototype.listeners = function(t) {
          return this._callbacks = this._callbacks || {}, this._callbacks["$" + t] || []
        }, e.prototype.hasListeners = function(t) {
          return !!this.listeners(t).length
        }
      }
    },
    __webpack_module_cache__ = {};

  function __webpack_require__(t) {
    var e = __webpack_module_cache__[t];
    if (void 0 !== e) return e.exports;
    var i = __webpack_module_cache__[t] = {
      exports: {}
    };
    return __webpack_modules__[t].call(i.exports, i, i.exports, __webpack_require__), i.exports
  }
  __webpack_require__.d = (t, e) => {
    for (var i in e) __webpack_require__.o(e, i) && !__webpack_require__.o(t, i) && Object.defineProperty(t, i, {
      enumerable: !0,
      get: e[i]
    })
  }, __webpack_require__.g = function() {
    if ("object" == typeof globalThis) return globalThis;
    try {
      return this || new Function("return this")()
    } catch (t) {
      if ("object" == typeof window) return window
    }
  }(), __webpack_require__.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e), __webpack_require__.r = t => {
    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
      value: "Module"
    }), Object.defineProperty(t, "__esModule", {
      value: !0
    })
  };
  var __webpack_exports__ = {};
  (() => {
    "use strict";
    __webpack_require__.d(__webpack_exports__, {
      U: () => OD
    });
    var t = {};
    __webpack_require__.r(t), __webpack_require__.d(t, {
      Decoder: () => eg,
      Encoder: () => Zf,
      PacketType: () => Qf,
      protocol: () => Jf
    });
    var e = function(t, i) {
      return e = Object.setPrototypeOf || {
        __proto__: []
      }
      instanceof Array && function(t, e) {
        t.__proto__ = e
      } || function(t, e) {
        for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
      }, e(t, i)
    };

    function i(t, i) {
      if ("function" != typeof i && null !== i) throw new TypeError("Class extends value " + String(i) + " is not a constructor or null");

      function n() {
        this.constructor = t
      }
      e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
    }
    var n = function() {
      return n = Object.assign || function(t) {
        for (var e, i = 1, n = arguments.length; i < n; i++)
          for (var o in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
        return t
      }, n.apply(this, arguments)
    };

    function o(t, e, i, n) {
      var o, r = arguments.length,
        s = r < 3 ? e : null === n ? n = Object.getOwnPropertyDescriptor(e, i) : n;
      if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(t, e, i, n);
      else
        for (var a = t.length - 1; a >= 0; a--)(o = t[a]) && (s = (r < 3 ? o(s) : r > 3 ? o(e, i, s) : o(e, i)) || s);
      return r > 3 && s && Object.defineProperty(e, i, s), s
    }

    function r(t, e, i, n) {
      return new(i || (i = Promise))((function(o, r) {
        function s(t) {
          try {
            h(n.next(t))
          } catch (t) {
            r(t)
          }
        }

        function a(t) {
          try {
            h(n.throw(t))
          } catch (t) {
            r(t)
          }
        }

        function h(t) {
          t.done ? o(t.value) : function(t) {
            return t instanceof i ? t : new i((function(e) {
              e(t)
            }))
          }(t.value).then(s, a)
        }
        h((n = n.apply(t, e || [])).next())
      }))
    }

    function s(t, e) {
      var i, n, o, r = {
          label: 0,
          sent: function() {
            if (1 & o[0]) throw o[1];
            return o[1]
          },
          trys: [],
          ops: []
        },
        s = Object.create(("function" == typeof Iterator ? Iterator : Object).prototype);
      return s.next = a(0), s.throw = a(1), s.return = a(2), "function" == typeof Symbol && (s[Symbol.iterator] = function() {
        return this
      }), s;

      function a(a) {
        return function(h) {
          return function(a) {
            if (i) throw new TypeError("Generator is already executing.");
            for (; s && (s = 0, a[0] && (r = 0)), r;) try {
              if (i = 1, n && (o = 2 & a[0] ? n.return : a[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, a[1])).done) return o;
              switch (n = 0, o && (a = [2 & a[0], o.value]), a[0]) {
                case 0:
                case 1:
                  o = a;
                  break;
                case 4:
                  return r.label++, {
                    value: a[1],
                    done: !1
                  };
                case 5:
                  r.label++, n = a[1], a = [0];
                  continue;
                case 7:
                  a = r.ops.pop(), r.trys.pop();
                  continue;
                default:
                  if (!(o = r.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== a[0] && 2 !== a[0])) {
                    r = 0;
                    continue
                  }
                  if (3 === a[0] && (!o || a[1] > o[0] && a[1] < o[3])) {
                    r.label = a[1];
                    break
                  }
                  if (6 === a[0] && r.label < o[1]) {
                    r.label = o[1], o = a;
                    break
                  }
                  if (o && r.label < o[2]) {
                    r.label = o[2], r.ops.push(a);
                    break
                  }
                  o[2] && r.ops.pop(), r.trys.pop();
                  continue
              }
              a = e.call(t, r)
            } catch (t) {
              a = [6, t], n = 0
            } finally {
              i = o = 0
            }
            if (5 & a[0]) throw a[1];
            return {
              value: a[0] ? a[1] : void 0,
              done: !0
            }
          }([a, h])
        }
      }
    }
    Object.create;

    function a(t) {
      var e = "function" == typeof Symbol && Symbol.iterator,
        i = e && t[e],
        n = 0;
      if (i) return i.call(t);
      if (t && "number" == typeof t.length) return {
        next: function() {
          return t && n >= t.length && (t = void 0), {
            value: t && t[n++],
            done: !t
          }
        }
      };
      throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
    }

    function h(t, e) {
      var i = "function" == typeof Symbol && t[Symbol.iterator];
      if (!i) return t;
      var n, o, r = i.call(t),
        s = [];
      try {
        for (;
          (void 0 === e || e-- > 0) && !(n = r.next()).done;) s.push(n.value)
      } catch (t) {
        o = {
          error: t
        }
      } finally {
        try {
          n && !n.done && (i = r.return) && i.call(r)
        } finally {
          if (o) throw o.error
        }
      }
      return s
    }

    function c(t, e, i) {
      if (i || 2 === arguments.length)
        for (var n, o = 0, r = e.length; o < r; o++) !n && o in e || (n || (n = Array.prototype.slice.call(e, 0, o)), n[o] = e[o]);
      return t.concat(n || Array.prototype.slice.call(e))
    }
    Object.create;
    "function" == typeof SuppressedError && SuppressedError;

    function u() {}
    var l = function() {
        function t(t) {
          this.appenders = t
        }
        return t.prototype.addAppender = function(t) {
          this.appenders.push(t)
        }, t.prototype.debug = function(t, e) {
          for (var i = 0, n = this.appenders.length; i < n; i++) this.appenders[i].debug(t, e)
        }, t.prototype.log = function(t, e) {
          for (var i = 0, n = this.appenders.length; i < n; i++) this.appenders[i].log(t, e)
        }, t.prototype.info = function(t, e) {
          for (var i = 0, n = this.appenders.length; i < n; i++) this.appenders[i].info(t, e)
        }, t.prototype.warn = function(t, e) {
          for (var i = 0, n = this.appenders.length; i < n; i++) this.appenders[i].warn(t, e)
        }, t.prototype.error = function(t, e) {
          for (var i = 0, n = this.appenders.length; i < n; i++) this.appenders[i].error(t, e)
        }, t
      }(),
      d = function(t, e) {
        return c(t ? [f(new Date), "[".concat(t, "]")] : [f(new Date)], h(e), !1)
      },
      p = function() {
        function t() {
          this.formatter = d
        }
        return t.prototype.debug = function(t, e) {
          console.debug.apply(console, c([], h(this.formatter(t, e, "debug")), !1))
        }, t.prototype.log = function(t, e) {
          console.log.apply(console, c([], h(this.formatter(t, e, "log")), !1))
        }, t.prototype.info = function(t, e) {
          console.info.apply(console, c([], h(this.formatter(t, e, "info")), !1))
        }, t.prototype.warn = function(t, e) {
          console.warn.apply(console, c([], h(this.formatter(t, e, "warn")), !1))
        }, t.prototype.error = function(t, e) {
          console.error.apply(console, c([], h(this.formatter(t, e, "error")), !1))
        }, t.shared = new t, t
      }();

    function f(t) {
      var e = t.getHours(),
        i = t.getMinutes(),
        n = t.getSeconds(),
        o = t.getMilliseconds(),
        r = "".concat(i < 10 ? "0" : "").concat(i),
        s = "".concat(n < 10 ? "0" : "").concat(n),
        a = "".concat(o < 100 ? "0" : "").concat(o < 10 ? "0" : "").concat(o);
      return "".concat(e, ":").concat(r, ":").concat(s, ".").concat(a)
    }
    var g = {
        all: Number.MIN_SAFE_INTEGER,
        debug: 1e4,
        log: 2e4,
        info: 3e4,
        warn: 4e4,
        error: 5e4
      },
      m = function() {
        function t(t) {
          this.name = t
        }
        return t.getLogger = function(e) {
          var i;
          return (i = t.loggerPool)[e] || (i[e] = new t(e))
        }, t.setLevel = function(e) {
          var i = t.level = g[e];
          t.prototype.debug = i <= g.debug ? y.debug : u, t.prototype.log = i <= g.log ? y.log : u, t.prototype.info = i <= g.info ? y.info : u, t.prototype.warn = i <= g.warn ? y.warn : u, t.prototype.error = i <= g.error ? y.error : u, t.debug = i <= g.debug ? t.shared.debug.bind(t.shared) : u, t.log = i <= g.log ? t.shared.log.bind(t.shared) : u, t.info = i <= g.info ? t.shared.info.bind(t.shared) : u, t.warn = i <= g.warn ? t.shared.warn.bind(t.shared) : u, t.error = i <= g.error ? t.shared.error.bind(t.shared) : u
        }, t.isLevelEnabled = function(e) {
          return t.level <= g[e]
        }, t.addAppender = function(e) {
          void 0 === t.appender ? t.appender = new l([p.shared, e]) : t.appender instanceof l ? t.appender.addAppender(e) : t.appender = new l([t.appender, e])
        }, Object.defineProperty(t.prototype, "appender", {
          get: function() {
            return this._appender || t.appender || p.shared
          },
          set: function(t) {
            this._appender = t
          },
          enumerable: !1,
          configurable: !0
        }), t.shared = new t(""), t.loggerPool = {}, t.level = g.all, t
      }(),
      y = {
        debug: function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.appender.debug(this.name, t)
        },
        log: function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.appender.log(this.name, t)
        },
        info: function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.appender.info(this.name, t)
        },
        warn: function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.appender.warn(this.name, t)
        },
        error: function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.appender.error(this.name, t)
        }
      };

    function v(t) {
      return t.reduce((function(t, e) {
        return t + e
      }), 0)
    }
    m.setLevel("all");
    var b = m.getLogger(""),
      w = function() {
        function t() {}
        return t.prototype.logEvent = function(t, e, i) {
          var n = new C(t, e);
          "number" == typeof i && (n.time = i), F().push(n), E()
        }, t.prototype.logEventImmediately = function(e, i, o) {
          return r(this, void 0, void 0, (function() {
            var r, a, h;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  r = new C(e, i), "number" == typeof o && (r.time = o), a = n(n({}, new k), r), s.label = 1;
                case 1:
                  return s.trys.push([1, 3, , 4]), [4, U.sendHttp({
                    url: "https://analysis.i51game.com/api/record/".concat(U.appId),
                    method: "POST",
                    data: a
                  })];
                case 2:
                  return s.sent(), [3, 4];
                case 3:
                  return h = s.sent(), t.reliability === t.Reliability.storeToDB ? B(r) : b.log(h), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, t.prototype.sendAnalysisUserAttr = function(t, e) {
          var i = {
              appId: U.appId,
              time: U.time.now(),
              key: t,
              value: e
            },
            n = U.user;
          return n.uid && (i.uid = String(n.uid)), n.chid && (i.chid = n.chid), U.sendHttp({
            url: "https://analysis.i51game.com/api/user",
            method: "POST",
            data: i
          })
        }, t.prototype.flush = function() {
          return E.flush()
        }, t
      }();
    ! function(t) {
      ! function(t) {
        t[t.normal = 0] = "normal", t[t.storeToDB = 1] = "storeToDB"
      }(t.Reliability || (t.Reliability = {})), t.reliability = t.Reliability.normal, t.useDistinctIdAsUid = !1, t.$dealDistinctId = function() {
        x.distinctId = function() {
          if (U.user.distinctId) {
            if (U.storage) {
              if (t = U.storage.getItem("user-distinctId")) {
                e = JSON.parse(t);
                return U.user.distinctId === e ? b.warn("User  distinctId , .") : b.error(",  storage  distinctId  user  distinctId ! ,  storage ."), e
              }
              return T(U.storage, U.user.distinctId), b.error(",  storage  distinctId  user  distinctId ! ,  user ."), U.user.distinctId
            }
            return b.warn(" @h5/wxgame >=3.8"), U.user.distinctId
          }
          if (U.storage) {
            var t;
            if (t = U.storage.getItem("user-distinctId")) return JSON.parse(t);
            var e = "".concat(Date.now().toString(36)).concat(Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(36));
            return T(U.storage, e), e
          }
          return void b.error(" distinctId ,  @h5/wxgame >=3.8 ")
        }()
      }
    }(w || (w = {}));
    var x = new(function() {
      function t() {}
      return t.prototype.setLinkKey = function(t) {
        void 0 === this.linkKey && (this.linkKey = t || "")
      }, t.prototype.getLinkKey = function() {
        return this.linkKey
      }, t
    }());

    function T(t, e) {
      t.setItem("user-distinctId", JSON.stringify(e))
    }
    var k = function() {
        this.appId = U.appId;
        var t = U.user;
        w.useDistinctIdAsUid ? x.distinctId && (this.uid = x.distinctId) : t.uid && (this.uid = String(t.uid)), t.accountUid && (this.accountUid = String(t.accountUid)), t.chid && (this.chid = t.chid), x.linkKey && (this.linkKey = x.linkKey), x.distinctId && (this.distinctId = x.distinctId, function(t) {
          if (!I) {
            var e = U.env;
            e && (t.sysInfo = {
              br: e.brand,
              md: e.model,
              pt: e.platform,
              st: e.system
            }, I = !0)
          }
        }(this)), t.$tags && t.$tags.length > 0 && (this.tags = t.$tags)
      },
      I = !1;
    var C = function(t, e) {
        this.eventId = t, this.time = U.time.now(), e && (this.eventData = e)
      },
      _ = "analysis-storage";

    function B(t) {
      var e = U.storage;
      if (e) {
        var i = S();
        i.length < 30 && (Array.isArray(t) ? i.push.apply(i, c([], h(t), !1)) : i.push(t), e.setItem(_, JSON.stringify(i))), M()
      }
    }

    function S() {
      var t, e = U.storage;
      if (!e) return [];
      try {
        var i = e.getItem(_);
        return i && (t = JSON.parse(i), Array.isArray(t)) ? t : []
      } catch (t) {
        return []
      }
    }

    function P() {
      if (D) {
        var t = U.storage;
        if (t) {
          var e = S();
          e.length > 0 && (t.setItem(_, void 0), D.push.apply(D, c([], h(e), !1)))
        }
      }
    }
    var D, M = L((function() {
      P(), E()
    }), 6e4, {
      leading: !1
    });

    function F() {
      return void 0 === D && (D = [], P()), D
    }
    var E = L((function() {
      return r(this, void 0, void 0, (function() {
        var t, e, i, o, r, a;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              if (1 !== (t = F()).length) return [3, 5];
              e = t.pop(), r = n(n({}, new k), e), s.label = 1;
            case 1:
              return s.trys.push([1, 3, , 4]), [4, U.sendHttp({
                url: "https://analysis.i51game.com/api/record/".concat(U.appId),
                method: "POST",
                data: r
              })];
            case 2:
              return s.sent(), [3, 4];
            case 3:
              return i = s.sent(), w.reliability === w.Reliability.storeToDB ? B(e) : b.error(i), [3, 4];
            case 4:
              return [3, 9];
            case 5:
              if (!(t.length > 1)) return [3, 9];
              o = t.splice(0, t.length), r = n(n({}, new k), {
                list: o
              }), s.label = 6;
            case 6:
              return s.trys.push([6, 8, , 9]), [4, U.sendHttp({
                url: "https://analysis.i51game.com/api/recordList/".concat(U.appId),
                method: "POST",
                data: r
              })];
            case 7:
              return s.sent(), [3, 9];
            case 8:
              return a = s.sent(), w.reliability === w.Reliability.storeToDB ? B(o) : b.error(a), [3, 9];
            case 9:
              return [2]
          }
        }))
      }))
    }), 15, {
      leading: !1
    });

    function L(t, e, i) {
      var n, o, r, s;
      void 0 === i && (i = {});
      var a = 0,
        h = function() {
          a = !1 === i.leading ? 0 : Date.now(), s = null, r = t.apply(n, o), s || (n = o = null)
        };

      function c() {
        var c = Date.now();
        a || !1 !== i.leading || (a = c);
        var u = e - (c - a);
        return n = this, o = arguments, u <= 0 || u > e ? (window.clearTimeout(s), s = null, a = c, r = t.apply(n, o), s || (n = o = null)) : s || !1 === i.trailing || (s = window.setTimeout(h, u)), r
      }
      return c.flush = function() {
        return s && (window.clearTimeout(s), h()), r
      }, c
    }
    var O, R = Date.now();

    function G(t, e) {
      X.logEventImmediately(t, e)
    }

    function A(t, e, i) {
      t === O.guideStart || t === O.guideEnd ? X.logEvent(t, {
        t: Date.now() - R
      }) : X.logEvent(t, e, i)
    }! function(t) {
      t.enter = "#enter", t.hide = "#hide", t.init = "#init", t.hostLoaded = "#host", t.loginFinish = "#login", t.mainPackLoaded = "#mainPack", t.resLoaded = "#res", t.guideStart = "#guideS", t.guideEnd = "#guideE", t.gameJump = "#jump", t.shareButton = "#shareB", t.share = "#share", t.videoButton = "#videoB", t.videoLoad = "#videoL", t.videoTouch = "#videoT", t.videoEnd = "#videoE", t.videoRetrySuccess = "#videoRS", t.videoRetryFailure = "#videoRF", t.interstitialAdLoad = "#iAdL", t.interstitialAdShow = "#iAdS", t.interstitialAdClose = "#iAdC", t.interstitialAdError = "#iAdE", t.pay = "#pay"
    }(O || (O = {}));
    var N = function() {
        function t() {
          this._events = {}
        }
        return t.prototype.emit = function(t) {
          for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
          var n = this._events[t];
          if (!n) return !1;
          n.length > 1 && (n = n.slice());
          for (var o = 0, r = n.length; o < r; o++) {
            var s = n[o];
            s.once && this.off(t, s.fn, s.context), s.fn.apply(s.context, e)
          }
          return !0
        }, t.prototype.on = function(t, e, i, n) {
          var o = new j(e, i, n),
            r = this._events[t];
          return r ? r.find((function(t) {
            return t.fn === e && t.context === i
          })) || r.push(o) : this._events[t] = [o], this
        }, t.prototype.once = function(t, e, i) {
          return this.on(t, e, i, !0)
        }, t.prototype.off = function(t, e, i) {
          var n = this._events[t];
          if (n) {
            var o = n.findIndex((function(t) {
              return t.fn === e && t.context === i
            }));
            o >= 0 && n.splice(o, 1)
          }
          return this
        }, t.prototype.has = function(t) {
          return this._events[t] && this._events[t].length > 0
        }, t.prototype.removeAllListeners = function(t) {
          this._events[t] = []
        }, t
      }(),
      j = function(t, e, i) {
        void 0 === i && (i = !1), this.fn = t, this.context = e, this.once = i
      },
      V = m.getLogger("@h5/libs-client"),
      U = {
        emitter: new N
      };

    function W(t, e) {
      U[t] = e
    }

    function q() {
      return U
    }
    U.emitter.once("logged", (function() {
      U.logged = !0
    }));
    var H = new Promise((function(t) {
      U.logged ? t() : U.emitter.once("logged", t)
    }));

    function $() {
      return H
    }
    var X, Y = m.getLogger("");
    ! function(t) {
      var e;
      t.isClosed = !1, t.close = function() {
        t.isClosed = !0, Y.log("")
      }, t.getProvider = function() {
        return e
      }, t.setProvider = function(t) {
        e = null === t ? new z : t
      }, t.logEvent = function(i, n, o) {
        U.DEBUG && Y.log(i, n), t.isClosed || e.logEvent(i, n, o)
      }, t.logEventImmediately = function(i, n, o) {
        U.DEBUG && Y.log(i, n), t.isClosed || (e.logEventImmediately || e.logEvent)(i, n, o)
      }, t.flush = function() {
        e.flush()
      }
    }(X || (X = {}));
    var z = function() {
      function t() {}
      return t.prototype.logEvent = function(t, e, i) {}, t.prototype.flush = function() {}, t
    }();
    var K = function() {
      function t() {}
      return Object.defineProperty(t, "isClosed", {
        get: function() {
          return X.isClosed
        },
        set: function(t) {
          X.isClosed = t
        },
        enumerable: !1,
        configurable: !0
      }), t.close = function() {
        X.close()
      }, t
    }();
    var J = {
      next: Math.random
    };

    function Q(t, e, i) {
      return void 0 === e ? Math.floor(J.next() * t) : "number" == typeof e ? void 0 === i ? Math.floor(J.next() * (e - t)) + t : Math.floor(i.next() * (e - t)) + t : Math.floor(e.next() * t)
    }

    function Z(t, e, i) {
      if (void 0 === e) {
        if (0 === t.length) return;
        return t[Math.floor(J.next() * t.length)]
      }
      if ("number" != typeof e) return t[Math.floor(e.next() * t.length)];
      if (void 0 === i && (i = J), e >= t.length) return t;
      for (var n = [], o = 0, r = t.length; o < r; o++)
        if (n.length < e) n.push(t[o]);
        else {
          var s = Math.floor(i.next() * o);
          s < e && (n[s] = t[o])
        } return n
    }

    function tt(t, e) {
      void 0 === e && (e = J);
      for (var i = 0, n = t.map((function(t) {
          return i += t
        })), o = e.next() * i, r = 0, s = n.length; r < s; ++r)
        if (o < n[r]) return r;
      return -1
    }

    function et(t, e, i) {
      if (void 0 === i && (i = J), !(e > 0 && t.length > 0)) return [];
      for (var n = function(t, e, i) {
          var n = [];
          if ("number" == typeof e)
            if ("function" == typeof i)
              for (var o = t; o <= e; ++o) n.push(i(o));
            else
              for (o = t; o <= e; ++o) n.push(o);
          else if ("function" == typeof e)
            for (o = 0; o < t; ++o) n.push(e(o));
          else
            for (o = 0; o < t; ++o) n.push(o);
          return n
        }(t.length), o = []; o.length < e && n.length > 0;) {
        var r = tt(n.map((function(e) {
          return t[e]
        })), i);
        if (-1 === r) break;
        o.push(n.splice(r, 1)[0])
      }
      return o
    }

    function it(t, e) {
      var i, n;
      void 0 === e && (e = J);
      for (var o = t.length; o > 1;) i = Math.floor(e.next() * o--), n = t[o], t[o] = t[i], t[i] = n;
      return t
    }! function() {
      function t(t, e, i) {
        void 0 === i && (i = J), this.mean = t, this.deviation = e, this.randomSource = i
      }
      t.prototype.next = function() {
        var t = 1 - this.randomSource.next(),
          e = 1 - this.randomSource.next();
        return Math.sqrt(-2 * Math.log(t)) * Math.cos(2 * Math.PI * e) * this.deviation + this.mean
      }
    }();
    var nt, ot = Math.pow(2, 48),
      rt = function() {
        function t(t) {
          this.seed = t
        }
        return t.prototype.next = function() {
          return this.seed = (25214903917 * this.seed + 11) % ot, this.seed / ot
        }, t
      }(),
      st = m.getLogger("MoreGames");
    ! function(t) {
      t.getConfig = function(t) {
        void 0 === t && (t = {});
        var e = "string" == typeof U.clientVersion ? parseInt(U.clientVersion) || Number.MAX_SAFE_INTEGER : U.clientVersion;
        return U.sendHttp({
          url: "https://wxgame-conf.i51game.com/open/moreGame",
          method: "GET",
          data: n({
            appId: U.confAppId,
            version: e,
            platform: U.env.platform
          }, t)
        })
      }, t.recordNavigated = function() {}
    }(nt || (nt = {}));
    var at, ht = nt.getConfig;
    ! function() {
      function t(t, e) {
        var i, n, o, r, s, h, c, u = this;
        this.groupsWeights = e, this.groupData = {}, this.appCD = {}, this.allGroups = [], this.navigateCD = [], this.notInCD = function(t) {
          var e = function(t) {
            var e;
            return "".concat(t.appId).concat(null !== (e = t.path) && void 0 !== e ? e : "")
          }(t);
          return !u.navigateCD.some((function(t) {
            return t && -1 !== t.indexOf(e)
          }))
        };
        try {
          for (var l = a(t), d = l.next(); !d.done; d = l.next()) {
            var p = d.value,
              f = "number" == typeof p.group ? [p.group] : p.group;
            try {
              for (var g = (o = void 0, a(f)), m = g.next(); !m.done; m = g.next()) {
                var y = m.value;
                this.groupData[y] || (this.groupData[y] = [], this.allGroups.push(y)), this.groupData[y].push(p), this.appCD["".concat(p.appId).concat(null !== (s = p.path) && void 0 !== s ? s : "")] = null !== (h = p.cd) && void 0 !== h ? h : 5
              }
            } catch (t) {
              o = {
                error: t
              }
            } finally {
              try {
                m && !m.done && (r = g.return) && r.call(g)
              } finally {
                if (o) throw o.error
              }
            }
          }
        } catch (t) {
          i = {
            error: t
          }
        } finally {
          try {
            d && !d.done && (n = l.return) && n.call(l)
          } finally {
            if (i) throw i.error
          }
        }
        this.allGroups.sort((function(t, e) {
          return t - e
        }));
        try {
          var v = null === (c = U.storage) || void 0 === c ? void 0 : c.getItem("mg-navigateCD");
          v && (this.navigateCD = JSON.parse(v))
        } catch (t) {
          console.error(t)
        }
      }
      t.prototype.takeItems = function(t, e, i) {
        var n, o = this;
        if (void 0 === i && (i = 1), 1 === (e = this.useGroup(e)).length && 1 === t && 1 === i) return [this.takeOne(e[0])];
        var r, s, a = function(t) {
          var e = Math.round(v(t)),
            i = v(t = t.map((function(t) {
              return Math.floor(t) || 1
            }))) - e;
          if (i > 0) {
            for (var n = t.length - 1; n >= 0; n--) {
              if (t[n] > i) {
                t[n] -= i;
                break
              }
              i -= t[n] - 1, t[n] = 1
            }
            for (n = t.length - 1; n >= 0; n--) {
              if (t[n] >= i) {
                t[n] -= i;
                break
              }
              i -= t[n], t[n] = 0
            }
          } else i < 0 && (t[0] += -i);
          return t
        }((r = e.map((function(t) {
          return o.groupsWeights[t] || 0
        })), s = t / v(r), r.map((function(t) {
          return t * s
        }))));
        U.DEBUG && console.log(" ".concat(JSON.stringify(e), "  ").concat(JSON.stringify(a), " ")), i >= 1 || (i = 1);
        for (var u = t * i, l = [], d = this.prepareData(); i--;)
          for (var p = 0, f = e.length; p < f; p++)
            for (var g = e[p], m = null !== (n = a[p]) && void 0 !== n ? n : 0, y = (d[g] || []).filter((function(t) {
                return t.icons.length > 0
              })), b = et(y.map((function(t) {
                return t.weight
              })), m), w = 0, x = b.length; w < x; w++) {
              var T = y[b[w]];
              T && l.push({
                name: T.names.length > 0 ? ut(T.names) : Z(T.raw_names),
                appId: T.appId,
                icon: ut(T.icons),
                path: T.path
              })
            }
        var k = u - l.length;
        if (k > 0) {
          var I = this.groupData[1] || [];
          l.push.apply(l, c([], h(et(I.map((function(t) {
            return t.weight
          })), k).map((function(t) {
            var e = I[t];
            return {
              name: Z(e.names),
              appId: e.appId,
              icon: Z(e.icons),
              path: e.path
            }
          }))), !1))
        }
        return this.minusCD(), l
      }, t.prototype.takeOne = function(t) {
        var e, i = this,
          n = (this.groupData[t] || []).filter((function(t) {
            return i.notInCD(t) && t.icons.length > 0
          })),
          o = tt(n.map((function(t) {
            return t.weight
          }))),
          r = n[o];
        return this.minusCD(), r ? {
          name: Z(r.names),
          appId: r.appId,
          icon: Z(r.icons),
          path: r.path
        } : (st.warn("takeOne: "), {
          name: "None",
          icon: "",
          appId: null !== (e = U.wxAppId) && void 0 !== e ? e : ""
        })
      }, t.prototype.recordNavigated = function(t, e) {
        void 0 === e && (e = "");
        var i = "".concat(t).concat(e),
          n = (this.appCD[i] || 5) - 1;
        if (n >= 0) {
          var o = this.navigateCD;
          o[n] || (o[n] = []), o[n].push(i), this._saveNavigateCD()
        }
      }, t.prototype.minusCD = function() {
        this.navigateCD.shift(), this._saveNavigateCD()
      }, t.prototype._saveNavigateCD = function() {
        var t;
        try {
          null === (t = U.storage) || void 0 === t || t.setItem("mg-navigateCD", JSON.stringify(this.navigateCD))
        } catch (t) {
          console.error(t)
        }
      }, t.prototype.useGroup = function(t) {
        return t && t.length ? t : this.allGroups
      }, t.prototype.prepareData = function(t) {
        var e = {};
        for (var i in this.groupData) e[i] = (this.groupData[i] || []).filter(this.notInCD).map(ct);
        return e
      }
    }();

    function ct(t) {
      return {
        appId: t.appId,
        path: t.path,
        raw_names: t.names,
        names: t.names.slice(),
        icons: t.icons.slice(),
        weight: t.weight
      }
    }

    function ut(t) {
      return t.splice(Q(t.length), 1)[0]
    }

    function lt(t, e) {
      for (var i = []; e > 0;) {
        var n = t.next();
        if (n.done) break;
        i.push(n.value), e--
      }
      return i
    }! function(t) {
      t[t.gamesList = 1] = "gamesList", t[t.gamesIcon = 2] = "gamesIcon", t[t.gamesBanner = 3] = "gamesBanner", t[t.gameBoxTags = 4] = "gameBoxTags", t[t.gameBoxList = 5] = "gameBoxList", t[t.gameBoxNew = 6] = "gameBoxNew", t[t.navigateReward = 7] = "navigateReward", t[t.gamesNavigate = 8] = "gamesNavigate", t[t.gamesPopularize = 9] = "gamesPopularize", t[t.groupNavigate = 10] = "groupNavigate"
    }(at || (at = {}));
    ! function() {
      function t(t, e) {
        this.data = t.filter((function(t) {
          return t.icons.length > 0 && -1 !== e.indexOf(t.appId)
        })), 0 === this.data.length && m.getLogger("").error("")
      }
      Object.defineProperty(t.prototype, "totalCount", {
        get: function() {
          return this.data.length
        },
        enumerable: !1,
        configurable: !0
      }), t.prototype.next = function() {
        var t, e, i, n = this.data,
          o = n[tt(n.map((function(t) {
            return t.weight
          })))];
        return o ? {
          name: null !== (t = Z(o.names)) && void 0 !== t ? t : "",
          icon: null !== (e = Z(o.icons)) && void 0 !== e ? e : "",
          appId: o.appId,
          path: o.path
        } : (m.getLogger("").warn(""), {
          name: "None",
          icon: "",
          appId: null !== (i = U.wxAppId) && void 0 !== i ? i : ""
        })
      }, t.prototype.recordNavigated = function(t) {}
    }();
    var dt = function() {
      function t(t, e) {
        this.data = t.filter((function(t) {
          return t.icons.length > 0 && -1 !== e.indexOf(t.appId)
        }))
      }
      return Object.defineProperty(t.prototype, "totalCount", {
        get: function() {
          return this.data.length
        },
        enumerable: !1,
        configurable: !0
      }), t.prototype.cloneData = function() {
        return this.data.map((function(t) {
          return {
            raw_names: t.names,
            names: t.names.slice(),
            icons: t.icons.slice(),
            appId: t.appId,
            path: t.path
          }
        }))
      }, t.prototype.createList = function(t) {
        var e, i, n, o;
        return s(this, (function(r) {
          switch (r.label) {
            case 0:
              e = this.cloneData(), t && it(e), r.label = 1;
            case 1:
              if (!e.some((function(t) {
                  return t.icons.length > 0
                }))) return [3, 6];
              i = 0, n = e.length, r.label = 2;
            case 2:
              return i < n ? (o = e[i]).icons.length > 0 ? [4, {
                name: o.names.length > 0 ? ut(o.names) : Z(o.raw_names),
                icon: ut(o.icons),
                appId: o.appId,
                path: o.path
              }] : [3, 4] : [3, 5];
            case 3:
              r.sent(), r.label = 4;
            case 4:
              return i++, [3, 2];
            case 5:
              return [3, 1];
            case 6:
              return [2]
          }
        }))
      }, t.prototype.first = function(t, e) {
        return e && this.data.length >= t ? it(lt(this.createList(!1), t)) : lt(this.createList(e), t)
      }, t.prototype.random = function(t) {
        return lt(this.createList(!0), t)
      }, t
    }();

    function pt(t, e) {
      var i, n, o, r, a, h, c, u, l, d, p;
      return void 0 === e && (e = 12), s(this, (function(f) {
        switch (f.label) {
          case 0:
            if (!(t.length <= e)) return [3, 3];
            i = t.slice(), f.label = 1;
          case 1:
            return [4, i];
          case 2:
            return f.sent(), [3, 1];
          case 3:
            for (n = [], o = [], r = 0, a = t.length; r < a; r++)(h = t[r]).fixed ? n.push(h) : o.push(h);
            if (c = t.slice(0, e), !((u = e - c.reduce((function(t, e) {
                return e.fixed ? t + 1 : t
              }), 0)) <= 0)) return [3, 7];
            f.label = 4;
          case 4:
            return [4, c];
          case 5:
            return f.sent(), [3, 4];
          case 6:
            return [3, 10];
          case 7:
            l = c.map((function(t) {
              return !!t.fixed
            })), d = function(t, e) {
              if (void 0 === e && (e = 1), 0 === t.length) throw new RangeError("arr.length should > 0");
              var i = function(t) {
                var i, o, r, a, h, c, u;
                return s(this, (function(s) {
                  switch (s.label) {
                    case 0:
                      if (0 !== (i = t.length)) return [3, 3];
                      s.label = 1;
                    case 1:
                      return [4, []];
                    case 2:
                      return s.sent(), [3, 1];
                    case 3:
                      return o = 0, r = n, [4, []];
                    case 4:
                      e = r.apply(void 0, [s.sent(), e]), s.label = 5;
                    case 5:
                      if (a = (o + e) % i, h = void 0, o + e <= i) h = t.slice(o, o + e);
                      else
                        for (h = [], c = 0; c < e; c++) h.push(t[(o + c) % i]);
                      return o = a, u = n, [4, h];
                    case 6:
                      return e = u.apply(void 0, [s.sent(), e]), [3, 5];
                    case 7:
                      return [2]
                  }
                }))
              }(t = t.concat());
              return i.next(), i;

              function n(t, e) {
                if (null == t) return e;
                if ("number" != typeof t) throw new TypeError(".next()  number ");
                return t
              }
            }(o, u), p = function() {
              var t, e;
              return s(this, (function(i) {
                switch (i.label) {
                  case 0:
                    return t = n.slice(), e = d.next().value, [4, l.map((function(i) {
                      return i ? t.shift() : e.shift()
                    }))];
                  case 1:
                    return i.sent(), [2]
                }
              }))
            }, f.label = 8;
          case 8:
            return [5, p()];
          case 9:
            return f.sent(), [3, 8];
          case 10:
            return [2]
        }
      }))
    }

    function ft(t) {
      if (void 0 === t && (t = "yunying"), "string" == typeof t) return U.sendHttp({
        url: "https://wxgame-conf.i51game.com/open/conf/".concat(t),
        method: "GET",
        data: {
          appId: U.confAppId
        }
      });
      if (Array.isArray(t)) return U.sendHttp({
        url: "https://wxgame-conf.i51game.com/open/conf",
        method: "GET",
        data: {
          appId: U.confAppId,
          keys: t.join(",")
        }
      });
      throw new TypeError("getOperationConfig  string | string[]")
    }

    function gt(t, e) {
      return t.getFullYear() === e.getFullYear() && (t.getMonth() === e.getMonth() && t.getDate() === e.getDate())
    }
    var mt = m.getLogger("host"),
      yt = Symbol("host-key");
    ! function() {
      function t() {}
      t.prototype.setData = function(t) {
        if (!t) return this;
        var e = this[yt];
        if (!e) return this;
        for (var i = 0, n = e.length; i < n; i++) {
          var o = h(e[i], 2),
            r = o[0],
            s = o[1];
          void 0 !== t[r] && (s(t[r]) ? this[r] = t[r] : mt.warn("".concat(r, " check fail:"), t[r]))
        }
        return this
      }, t.key = bt
    }();
    var vt = new WeakMap;

    function bt(t) {
      var e = vt.get(t);
      return e || (e = function(e, i) {
        (e[yt] || (e[yt] = [])).push([i, t])
      }, vt.set(t, e)), e
    }

    function wt(t) {
      return void 0 === t || t.endsWith("/") ? t : t + "/"
    }! function() {
      function t(t, e, i, n) {
        this.versionFileUrl = t, this.resm = e, this._loaded = !1, this.rootUrl = wt(i), this.resDomain = wt(n), this.versionInfo = new xt(this.rootUrl)
      }
      t.prototype.init = function() {
        return r(this, void 0, void 0, (function() {
          var t, e, i, n;
          return s(this, (function(o) {
            switch (o.label) {
              case 0:
                if (this._loaded) return [2, !0];
                t = m.getLogger("version"), e = this.versionFileUrl, o.label = 1;
              case 1:
                return o.trys.push([1, 3, , 4]), t.log("... ".concat(e)), [4, Tt({
                  url: e,
                  method: "GET"
                }, 3)];
              case 2:
                return (i = o.sent()) ? [3, 4] : (t.warn(" ".concat(e)), [2, !1]);
              case 3:
                return n = o.sent(), t.error(n), [2, !1];
              case 4:
                return this.setVersionData(i), t.log("!"), [2, !0]
            }
          }))
        }))
      }, t.prototype.setVersionData = function(t) {
        this.versionInfo.setVersionData(t), this._loaded = !0
      }, t.prototype.getVirtualUrl = function(t) {
        if (!t) return "";
        var e = t.indexOf("?"),
          i = -1 === e ? t : t.slice(0, e);
        if (this.rootUrl && !i.startsWith(this.rootUrl)) return t;
        if (!this._loaded) return void 0 === this.resDomain ? t : "".concat(this.resDomain).concat(t);
        var n = this.versionInfo.getVirtualName(i);
        return n ? "".concat(this.resm, "/").concat(n, ".").concat(i.slice(i.lastIndexOf(".") + 1)) : void 0 === this.resDomain ? t : "".concat(this.resDomain).concat(t)
      }
    }();
    var xt = function() {
      function t(t) {
        this._code = "", this._ver = 0, this._folderDir = {}, this._fileDir = {}, this._rootLen = t ? t.length : 0
      }
      return t.prototype.setVersionData = function(t) {
        this._code = t.code, this._ver = t.ver, this._folderDir = t.body.folderObj, this._fileDir = t.body.fileObj
      }, t.prototype.getVirtualName = function(t) {
        var e = t.lastIndexOf("/"),
          i = this._folderDir[-1 === e ? "" : t.slice(this._rootLen, e)];
        if (void 0 !== i) return this._fileDir["".concat(i, "/").concat(t.slice(e + 1))]
      }, t
    }();

    function Tt(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n;
        return s(this, (function(o) {
          switch (o.label) {
            case 0:
              if (!e--) return [3, 6];
              o.label = 1;
            case 1:
              return o.trys.push([1, 3, , 4]), [4, U.sendHttp(t)];
            case 2:
              return [2, o.sent()];
            case 3:
              return n = o.sent(), i = n, [3, 4];
            case 4:
              return [4, new Promise((function(t) {
                return setTimeout(t, 500)
              }))];
            case 5:
              return o.sent(), [3, 0];
            case 6:
              throw i
          }
        }))
      }))
    }
    var kt, It = "undefined" != typeof Symbol ? Symbol("tween_count") : "$$_tween_count_$$";
    ! function() {
      function t(e, i) {
        this.loop = !1, this._initQueueProps = {}, this._curQueueProps = {}, this._steps = [], this.paused = !1, this.duration = 0, this._prevPos = -1, this.position = 0, this._prevPosition = 0, this._stepPosition = 0, this.passive = !1, this._target = e, i && (this.loop = !!i.loop, this.onChange = i.onChange), this._curQueueProps = {}, this._initQueueProps = {}, this._steps = [], i && i.paused ? this.paused = !0 : t._register(this, !0), i && "number" == typeof i.position && this.setPosition(i.position, !0)
      }
      t.get = function(e, i) {
        return new t(e, i)
      }, t.getOwned = function(e, i) {
        void 0 === i && (i = {});
        var o = new t(e, n(n({}, i), {
          paused: !0
        }));
        return o.paused = !1, o
      }, t.removeTweens = function(e) {
        if (e[It]) {
          for (var i = t._tweens, n = i.length - 1; n >= 0; n--) i[n]._target == e && (i[n].paused = !0, i.splice(n, 1));
          e[It] = 0
        }
      }, t.pauseTweens = function(e) {
        if (e[It])
          for (var i = t._tweens, n = i.length - 1; n >= 0; n--) i[n]._target == e && (i[n].paused = !0)
      }, t.resumeTweens = function(e) {
        if (e[It])
          for (var i = t._tweens, n = i.length - 1; n >= 0; n--) i[n]._target == e && (i[n].paused = !1)
      }, t.tick = function(e) {
        for (var i = t._tweens.concat(), n = i.length - 1; n >= 0; n--) {
          var o = i[n];
          o.paused || o.$tick(e)
        }
        return !1
      }, t._register = function(e, i) {
        var n = e._target,
          o = t._tweens;
        if (i) n[It] = n[It] > 0 ? n[It] + 1 : 1, o.push(e);
        else {
          n[It]--;
          for (var r = o.length; r--;)
            if (o[r] === e) return void o.splice(r, 1)
        }
      }, t.removeAllTweens = function() {
        for (var e = t._tweens, i = 0, n = e.length; i < n; i++) {
          var o = e[i];
          o.paused = !0, o._target[It] = 0
        }
        e.length = 0
      }, t.prototype.setPosition = function(t, e) {
        t > 0 || (t = 0);
        var i = t,
          n = !1;
        if (i >= this.duration)
          if (this.loop) {
            var o = i % this.duration;
            i = 0 === o ? this.duration : o
          } else i = this.duration, n = !0;
        if (i === this._prevPos) return n;
        n && this.setPaused(!0);
        var r = this._prevPos;
        this.position = this._prevPos = i, this._prevPosition = t;
        var s = this._steps.length;
        if (s > 0) {
          for (var a = -1, h = 0; h < s; h++) {
            if ("step" == (c = this._steps[h]).type && (a = h, i >= c.t && i <= c.t + c.d)) break
          }
          for (h = 0; h < s; h++) {
            var c;
            if ("action" === (c = this._steps[h]).type) {
              if (e) continue;
              i < r ? (r !== this.duration && Ct(c, r, this.duration), Ct(c, 0, i, !0)) : Ct(c, r, i)
            } else "step" == c.type && a === h && this._updateTargetProps(c, Math.min((this._stepPosition = i - c.t) / c.d, 1))
          }
        }
        return this.onChange && this.onChange(), n
      }, t.prototype._updateTargetProps = function(t, e) {
        if (this.passive = !!t.v, !this.passive) {
          t.e && (e = t.e(e));
          var i, n, o = t.p0,
            r = t.p1;
          for (var s in this._initQueueProps) null == (i = o[s]) && (o[s] = i = this._initQueueProps[s]), null == (n = r[s]) && (r[s] = n = i), this._target[s] = i == n || 0 == e || 1 == e || "number" != typeof i ? 1 == e ? n : i : i + (n - i) * e
        }
      }, t.prototype.setPaused = function(e) {
        return this.paused == e || (this.paused = e, t._register(this, !e)), this
      }, t.prototype._addStep = function(t, e, i, n, o) {
        return t > 0 && (this._steps.push({
          type: "step",
          t: this.duration,
          d: t,
          p0: e,
          p1: i,
          e: n,
          v: o
        }), this.duration += t), this
      }, t.prototype._appendQueueProps = function(t) {
        for (var e in t) void 0 === this._initQueueProps[e] && (this._initQueueProps[e] = this._target[e]), this._curQueueProps[e] = t[e];
        return this._curQueueProps
      }, t.prototype._addAction = function(t, e, i) {
        return this._steps.push({
          type: "action",
          t: this.duration,
          f: t,
          p: e,
          o: i
        }), this
      }, t.prototype.wait = function(t, e) {
        if (!(t > 0)) return this;
        var i = Bt(this._curQueueProps);
        return this._addStep(t, i, i, void 0, e)
      }, t.prototype.to = function(t, e, i) {
        return e > 0 && this._addStep(e, Bt(this._curQueueProps), Bt(this._appendQueueProps(t)), i), this.set(t)
      }, t.prototype.call = function(t, e, i) {
        return void 0 === e && (e = this._target), void 0 === i && (i = []), this._addAction(t, i, e)
      }, t.prototype.set = function(t, e) {
        return void 0 === e && (e = this._target), this._appendQueueProps(t), this._addAction(_t, [t, e])
      }, t.prototype.play = function(t) {
        return void 0 === t && (t = this), this.call(t.setPaused, t, [!1])
      }, t.prototype.pause = function(t) {
        return void 0 === t && (t = this), this.call(t.setPaused, t, [!0])
      }, t.prototype.$tick = function(t) {
        this.paused || this.setPosition(this._prevPosition + t)
      }, t.prototype.isPaused = function() {
        return this.paused
      }, t.prototype.toOwned = function(t) {
        return null
      }, t._tweens = []
    }();

    function Ct(t, e, i, n) {
      void 0 === n && (n = !1);
      var o = e,
        r = i;
      e > i && (o = i, r = e);
      var s = t.t;
      (s == r || s > o && s < r || n && s == e) && t.f.apply(t.o, t.p)
    }

    function _t(t, e) {
      for (var i in t) e[i] = t[i]
    }

    function Bt(t) {
      var e = {};
      for (var i in t) e[i] = t[i];
      return e
    }! function(t) {
      function e(t) {
        return function(e) {
          return Math.pow(e, t)
        }
      }

      function i(t) {
        return function(e) {
          return 1 - Math.pow(1 - e, t)
        }
      }

      function n(t) {
        return function(e) {
          return (e *= 2) < 1 ? .5 * Math.pow(e, t) : 1 - .5 * Math.abs(Math.pow(2 - e, t))
        }
      }

      function o(t) {
        return function(e) {
          return e * e * ((t + 1) * e - t)
        }
      }

      function r(t) {
        return function(e) {
          return --e * e * ((t + 1) * e + t) + 1
        }
      }

      function s(t) {
        return t *= 1.525,
          function(e) {
            return (e *= 2) < 1 ? e * e * ((t + 1) * e - t) * .5 : .5 * ((e -= 2) * e * ((t + 1) * e + t) + 2)
          }
      }

      function a(t, e) {
        var i = 2 * Math.PI;
        return function(n) {
          if (0 == n || 1 == n) return n;
          var o = e / i * Math.asin(1 / t);
          return -t * Math.pow(2, 10 * (n -= 1)) * Math.sin((n - o) * i / e)
        }
      }

      function h(t, e) {
        var i = 2 * Math.PI;
        return function(n) {
          if (0 == n || 1 == n) return n;
          var o = e / i * Math.asin(1 / t);
          return t * Math.pow(2, -10 * n) * Math.sin((n - o) * i / e) + 1
        }
      }

      function c(t, e) {
        var i = 2 * Math.PI;
        return function(n) {
          var o = e / i * Math.asin(1 / t);
          return (n *= 2) < 1 ? t * Math.pow(2, 10 * (n -= 1)) * Math.sin((n - o) * i / e) * -.5 : t * Math.pow(2, -10 * (n -= 1)) * Math.sin((n - o) * i / e) * .5 + 1
        }
      }
      t.get = function(t) {
        return t < -1 && (t = -1), t > 1 && (t = 1),
          function(e) {
            return 0 == t ? e : t < 0 ? e * (e * -t + 1 + t) : e * ((2 - e) * t + (1 - t))
          }
      }, t.getPowIn = e, t.getPowOut = i, t.getPowInOut = n, t.quadIn = e(2), t.quadOut = i(2), t.quadInOut = n(2), t.cubicIn = e(3), t.cubicOut = i(3), t.cubicInOut = n(3), t.quartIn = e(4), t.quartOut = i(4), t.quartInOut = n(4), t.quintIn = e(5), t.quintOut = i(5), t.quintInOut = n(5), t.sineIn = function(t) {
        return 1 - Math.cos(t * Math.PI / 2)
      }, t.sineOut = function(t) {
        return Math.sin(t * Math.PI / 2)
      }, t.sineInOut = function(t) {
        return -.5 * (Math.cos(Math.PI * t) - 1)
      }, t.getBackIn = o, t.backIn = o(1.7), t.getBackOut = r, t.backOut = r(1.7), t.getBackInOut = s, t.backInOut = s(1.7), t.circIn = function(t) {
        return -(Math.sqrt(1 - t * t) - 1)
      }, t.circOut = function(t) {
        return Math.sqrt(1 - --t * t)
      }, t.circInOut = function(t) {
        return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
      }, t.bounceIn = function(e) {
        return 1 - t.bounceOut(1 - e)
      }, t.bounceOut = function(t) {
        return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
      }, t.bounceInOut = function(e) {
        return e < .5 ? .5 * t.bounceIn(2 * e) : .5 * t.bounceOut(2 * e - 1) + .5
      }, t.getElasticIn = a, t.elasticIn = a(1, .3), t.getElasticOut = h, t.elasticOut = h(1, .3), t.getElasticInOut = c, t.elasticInOut = c(1, .3 * 1.5)
    }(kt || (kt = {}));
    var St = function(t) {
      function e(e) {
        var i = this.constructor,
          n = t.call(this, e) || this;
        return n.name = i.name, "function" == typeof Error.captureStackTrace && Error.captureStackTrace(n, i), "function" == typeof Object.setPrototypeOf ? Object.setPrototypeOf(n, i.prototype) : n.__proto__ = i.prototype, n
      }
      return i(e, t), e
    }(Error);
    X.getProvider() || X.setProvider(new w), new m("@h5/libs-client").log("3.14.0");
    var Pt;

    function Dt(t, e, i, n) {
      return new(i || (i = Promise))((function(o, r) {
        function s(t) {
          try {
            h(n.next(t))
          } catch (t) {
            r(t)
          }
        }

        function a(t) {
          try {
            h(n.throw(t))
          } catch (t) {
            r(t)
          }
        }

        function h(t) {
          t.done ? o(t.value) : function(t) {
            return t instanceof i ? t : new i((function(e) {
              e(t)
            }))
          }(t.value).then(s, a)
        }
        h((n = n.apply(t, e || [])).next())
      }))
    }

    function Mt(t, e) {
      var i, n, o, r, s = {
        label: 0,
        sent: function() {
          if (1 & o[0]) throw o[1];
          return o[1]
        },
        trys: [],
        ops: []
      };
      return r = {
        next: a(0),
        throw: a(1),
        return: a(2)
      }, "function" == typeof Symbol && (r[Symbol.iterator] = function() {
        return this
      }), r;

      function a(r) {
        return function(a) {
          return function(r) {
            if (i) throw new TypeError("Generator is already executing.");
            for (; s;) try {
              if (i = 1, n && (o = 2 & r[0] ? n.return : r[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, r[1])).done) return o;
              switch (n = 0, o && (r = [2 & r[0], o.value]), r[0]) {
                case 0:
                case 1:
                  o = r;
                  break;
                case 4:
                  return s.label++, {
                    value: r[1],
                    done: !1
                  };
                case 5:
                  s.label++, n = r[1], r = [0];
                  continue;
                case 7:
                  r = s.ops.pop(), s.trys.pop();
                  continue;
                default:
                  if (!(o = s.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== r[0] && 2 !== r[0])) {
                    s = 0;
                    continue
                  }
                  if (3 === r[0] && (!o || r[1] > o[0] && r[1] < o[3])) {
                    s.label = r[1];
                    break
                  }
                  if (6 === r[0] && s.label < o[1]) {
                    s.label = o[1], o = r;
                    break
                  }
                  if (o && s.label < o[2]) {
                    s.label = o[2], s.ops.push(r);
                    break
                  }
                  o[2] && s.ops.pop(), s.trys.pop();
                  continue
              }
              r = e.call(t, s)
            } catch (t) {
              r = [6, t], n = 0
            } finally {
              i = o = 0
            }
            if (5 & r[0]) throw r[1];
            return {
              value: r[0] ? r[1] : void 0,
              done: !0
            }
          }([r, a])
        }
      }
    }
    var Ft = ((Pt = {})[-2] = "!", Pt[-1] = "!", Pt[90] = "!", Pt[91] = "!", Pt[50] = "!", Pt[93] = "!", Pt[94] = "session!", Pt[95] = "token!", Pt[100] = "!", Pt[101] = "Invoke!", Pt[202] = "!", Pt[203] = ",!", Pt[250] = "!", Pt[90001] = ".", Pt[90002] = ".", Pt[90003] = ".", Pt),
      Et = function() {
        function t(t, e) {
          this.name = "ProtocolError", this.errCode = t, this.errMsg = e ? ": " + e : function(t) {
            return Ft[t] || ("number" == typeof t ? ": " + t : ": " + t)
          }(t)
        }
        return t.prototype.toString = function() {
          return "[" + this.name + "] " + this.errCode + " " + this.errMsg
        }, t
      }();

    function Lt(t, e) {
      Gt[t.__cmd] = e
    }

    function Ot(t, e) {
      Rt ? Nt(t, e) : At.length < 10 && At.push({
        cmd: t,
        body: e
      })
    }
    var Rt = !1,
      Gt = {},
      At = [];

    function Nt(t, e) {
      var i = Gt[t];
      i && i(e)
    }
    var jt = {},
      Vt = {};

    function Ut(t) {
      jt[t.__cmd] = t
    }

    function Wt(t) {
      Vt[t.__cmd] = t
    }

    function qt(t, e) {
      return Vt[t] ? Vt[t].fromIndex(e) : {}
    }
    var Ht = 0;

    function $t(t, e, i) {
      var n, o, r = i.uid,
        s = i.connectToken;
      return n = e && "object" == typeof e && (o = e, 0 !== Object.keys(o).length) ? jt[t].toIndex(e) : {}, {
        uid: r,
        connectToken: s,
        format: 1,
        cmds: [{
          header: {
            seq: ++Ht,
            cmd: t
          },
          body: n
        }]
      }
    }

    function Xt(t) {
      if (zt) {
        if (!zt._disposed && zt.invokeUrl === t) return;
        zt.dispose()
      }
      zt = new Qt(t)
    }

    function Yt(t, e) {
      return Dt(this, void 0, void 0, (function() {
        var i, n, o, r, s, a, h, c, u;
        return Mt(this, (function(l) {
          switch (l.label) {
            case 0:
              return e.length > 650 ? (i = "POST", n = e) : (i = "GET", n = {
                cmd: e,
                _t: Date.now()
              }), [4, zt.send(t, i, n)];
            case 1:
              for (o = l.sent(), r = o[0], s = o.slice(1), a = 0, h = s; a < h.length; a++) Ot((c = h[a]).header.cmd, qt(c.header.cmd, c.body));
              if (u = r.header.ret) throw u > 0 ? new Et(u) : new Et(u, r.body);
              return [2, qt(t, r.body)]
          }
        }))
      }))
    }
    var zt, Kt, Jt, Qt = function() {
      function t(t) {
        this._disposed = !1, this.invokeUrl = t
      }
      return t.prototype.send = function(t, e, i) {
        return Dt(this, void 0, void 0, (function() {
          var t, n;
          return Mt(this, (function(o) {
            switch (o.label) {
              case 0:
                if (this._disposed) throw new Et(90001);
                o.label = 1;
              case 1:
                return o.trys.push([1, 3, , 4]), [4, U.sendHttp({
                  url: this.invokeUrl,
                  method: e,
                  data: i
                })];
              case 2:
                return t = o.sent(), [3, 4];
              case 3:
                return n = o.sent(), console.error("[HTTP]", n), [3, 4];
              case 4:
                if (!t) throw new Et(90002);
                if (!("cmds" in t)) {
                  if ("err" in t) throw new Et(-3, t.err);
                  throw new Et(90002)
                }
                if (!t.cmds.length) throw new Et(90003);
                return [2, t.cmds]
            }
          }))
        }))
      }, t.prototype.dispose = function() {
        this._disposed = !0
      }, t
    }();
    m.getLogger("");
    ! function(t) {
      t.panel = "", t.banner = "", t.icon = "", t.reward = "", t.navigate = "", t.fakeList = "", t.fakeInvite = "", t.fakeRedPack = "", t.fakeContinue = ""
    }(Kt || (Kt = {})),
    function(t) {
      t[t.success = 1] = "success", t[t.appCode = 2] = "appCode", t[t.cancel = 0] = "cancel", t[t.fail = -1] = "fail"
    }(Jt || (Jt = {}));
    var Zt = function() {
      function t() {}
      return t.init = function() {
        t._initialized ? m.getLogger("@h5/wxgame").warn("SpecialEvent.init() !") : (t._initialized = !0, function() {
          var t = this,
            e = Date.now(),
            i = 0;

          function o(t) {
            var o = e = Date.now();
            $().then((function() {
              var e = !!U.user.isNew;
              ++i, A("#enter", n(n({}, te(t)), {
                ne: e && 1 === i ? 1 : void 0,
                st: i
              }), o)
            }))
          }
          var a = !1;

          function h() {
            a || (a = !0, wx.onShow(o))
          }
          o(wx.getLaunchOptionsSync()), wx.onHide((function() {
            return r(t, void 0, void 0, (function() {
              var t, i;
              return s(this, (function(n) {
                switch (n.label) {
                  case 0:
                    return h(), t = Date.now(), i = t - e, U.logged ? [3, 2] : [4, $()];
                  case 1:
                    n.sent(), n.label = 2;
                  case 2:
                    try {
                      A("#hide", {
                        st: i
                      }, t), X.flush()
                    } catch (t) {}
                    return [2]
                }
              }))
            }))
          }))
        }(), function() {
          var t, e = (t = {}, t[Kt.panel] = 1, t[Kt.banner] = 2, t[Kt.icon] = 3, t[Kt.reward] = 4, t[Kt.navigate] = 5, t[Kt.fakeList] = 6, t[Kt.fakeInvite] = 7, t[Kt.fakeRedPack] = 8, t[Kt.fakeContinue] = 9, t);
          U.emitter.on("navigateSuccess", (function(t, i, n) {
            G("#jump", {
              na: i,
              tp: e[t],
              to: n.appId
            })
          }))
        }())
      }, t._initialized = !1, t
    }();

    function te(t) {
      var e, i, n, o = t.scene,
        r = t.query,
        s = t.referrerInfo;
      return {
        fu: r.fuid,
        ss: null !== (i = null === (e = Zt.shareSourceConverter) || void 0 === e ? void 0 : e.call(Zt, r.shareSource)) && void 0 !== i ? i : r.shareSource,
        si: r.shareId,
        sc: o,
        lk: r.linkKey ? decodeURIComponent(r.linkKey) : void 0,
        ra: null == s ? void 0 : s.appId,
        ru: null === (n = null == s ? void 0 : s.extraData) || void 0 === n ? void 0 : n.uid
      }
    }
    var ee = "undefined" != typeof wx ? wx.getSystemInfoSync() : {
      SDKVersion: "0.0.0"
    };
    m.info("System Info:", ee);
    var ie = ee.SDKVersion.split(".").map(Number),
      ne = ie[0],
      oe = ie[1],
      re = ie[2];

    function se(t, e, i) {
      return void 0 === e && (e = 0), void 0 === i && (i = 0), ne > t || !(ne < t) && (oe > e || !(oe < e) && re >= i)
    }
    var ae = "devtools" === ee.brand;
    var he = 0,
      ce = [],
      ue = function() {
        function t(t) {
          this.option = n({
            enableHttp2: !0
          }, t)
        }
        return t.prototype.send = function() {
          var e = this,
            i = this.option,
            n = i.url;
          return new Promise((function(o, r) {
            i.success = function(t) {
              var i = t.data,
                s = t.statusCode;
              t.header;
              if (e.statusCode = s, 200 === s) i ? o(i) : r(" (".concat(n, ")"));
              else {
                var a = void 0;
                switch (s) {
                  case 404:
                    a = "[404] Not Found (".concat(n, ")");
                    break;
                  case 500:
                    a = "[500] Internal Server Error (".concat(n, ")");
                    break;
                  case 502:
                    a = "[502] Bad Gateway (".concat(n, ")");
                    break;
                  case 504:
                    a = "[504] Gateway Timeout (".concat(n, ")");
                    break;
                  default:
                    a = "[".concat(s, "] ").concat(JSON.stringify(i), " (").concat(n, ")")
                }
                r(a)
              }
            }, i.fail = function(t) {
              "0" == t.errMsg ? (console.error("", n), r("")) : t.statusCode ? r("[".concat(t.statusCode, "] ").concat(t.errMsg, " (").concat(n, ")")) : r("".concat(t.errMsg, "-").concat(t.errno, " (").concat(n, ")"))
            }, i.complete = function() {
              he--;
              var t = ce.shift();
              t && t()
            }, he < t.queueMaxLength ? (he++, e.req = wx.request(i)) : (m.warn("WxRequest queue ".concat(n)), ce.push((function() {
              he++, e.req = wx.request(i)
            })))
          }))
        }, t.prototype.abort = function() {
          this.req && (this.req.abort(), this.req = void 0)
        }, t.getJSON = function(e, i, n) {
          return void 0 === n && (n = 1), r(this, void 0, void 0, (function() {
            var o, r, a;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  o = new t({
                    url: e,
                    data: i,
                    method: "GET",
                    dataType: "json"
                  }), s.label = 1;
                case 1:
                  if (!n--) return [3, 7];
                  s.label = 2;
                case 2:
                  return s.trys.push([2, 4, , 5]), [4, o.send()];
                case 3:
                  return [2, s.sent()];
                case 4:
                  return a = s.sent(), r = a, [3, 5];
                case 5:
                  return [4, new Promise((function(t) {
                    return setTimeout(t, 500)
                  }))];
                case 6:
                  return s.sent(), [3, 1];
                case 7:
                  throw r
              }
            }))
          }))
        }, t.queueMaxLength = 5, t
      }(),
      le = m.getLogger("update");
    var de, pe = se(2, 3, 0),
      fe = se(2, 8, 0),
      ge = !1,
      me = m.getLogger("share");

    function ye(t, e, i, n, o) {
      void 0 === o && (o = 2.5), t || (me.warn("invokeShare:  title "), t = ""), e || (me.warn("invokeShare:  imageUrl "), e = ""), i || (me.warn("invokeShare:  queryData "), i = {});
      var r = function(t) {
        var e = [];
        for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && null != t[i] && e.push("".concat(encodeURIComponent(i), "=").concat(encodeURIComponent(t[i])));
        return e.join("&")
      }(i);
      if (pe) {
        var s = Date.now();
        return me.log("", s, r), new Promise((function(i, n) {
          wx.shareAppMessage({
            title: t,
            imageUrl: e,
            query: r,
            success: function(t) {
              me.log(" success ()", t)
            },
            fail: function(t) {
              "shareAppMessage:fail cancel" === t.errMsg ? (me.log(""), i(de.cancel)) : (me.log(" fail", t), n(t.errMsg))
            },
            complete: function() {
              me.log(" complete ()", arguments)
            }
          }), wx.onShow((function t() {
            wx.offShow(t);
            var e = Date.now();
            e - s > 1e3 * o ? (me.log(" onShow", e), i(de.timeEnough)) : (me.log(" onShow", e, ""), i(de.timeNotEnough))
          }))
        })).catch((function(t) {
          return me.error("", t), de.fail
        }))
      }
      return new Promise((function(i, o) {
        wx.shareAppMessage({
          title: t,
          imageUrl: e,
          query: r,
          success: function(t) {
            if (t.cancel) return me.log(""), void i(de.cancel);
            n ? t.shareTickets && t.shareTickets.length ? (me.log(""), i(de.success)) : (me.log(", "), i(de.notGroup)) : (me.log(""), i(de.success))
          },
          fail: function(t) {
            "shareAppMessageDirectly:fail cancel" === t.errMsg || "shareAppMessage:fail cancel" === t.errMsg ? (me.log(""), i(de.cancel)) : o(t.errMsg)
          }
        })
      })).catch((function(t) {
        return me.error("", t), de.fail
      }))
    }! function(t) {
      t[t.success = 1] = "success", t[t.timeNotEnough = 2] = "timeNotEnough", t[t.notGroup = 3] = "notGroup", t[t.fail = 4] = "fail", t[t.cancel = 5] = "cancel", t[t.timeEnough = 6] = "timeEnough"
    }(de || (de = {}));
    var ve, be = m.getLogger("video");
    ! function(t) {
      t[t.cancel = 0] = "cancel", t[t.finish = 1] = "finish", t[t.fail = 2] = "fail"
    }(ve || (ve = {}));
    var we = function() {
        function t(t, e) {
          var i = this;
          this.adUnitId = t, this._isLoaded = !1, this.checkLoad = function(t) {
            i._checkLoadT && clearTimeout(i._checkLoadT), i._checkLoadT = setTimeout((function() {
              i._isLoaded || (be.log("".concat(t, "")), i.retry())
            }), 1e3 * t)
          }, this.retry = function() {
            var t;
            i._retryT && (clearTimeout(i._retryT), i._retryT = void 0), be.log("...");
            var e = i._totalErrorCount;
            null === (t = i.ad) || void 0 === t || t.load().then((function() {
              var t, i, n;
              t = "#videoRS", i = {
                rc: e
              }, X.logEvent(t, i, n), be.log("")
            }))
          }, this.onVideoLoad = function() {
            be.log("(onLoad)"), i._totalErrorCount = 0, i._isLoaded = !0, i._checkLoadT && (clearTimeout(i._checkLoadT), i._checkLoadT = void 0), U.emitter.emit("videoLoaded", i.adUnitId)
          }, this._totalErrorCount = 0, this.onVideoError = function(t) {
            if (!(i._totalErrorCount >= 7)) {
              var e = Math.pow(2, 2 + ++i._totalErrorCount);
              be.error("(onError) ".concat(e, "s... (").concat(i.adUnitId, ")"), t), U.emitter.emit("videoError", i.adUnitId, t), i._retryT && clearTimeout(i._retryT), i._retryT = setTimeout(i.retry, 1e3 * e)
            }
          }, this.onVideoClose = function(t) {
            var e = i.callback;
            i.callback = void 0, e && (t && t.isEnded || void 0 === t ? e(!0) : e(!1))
          }, be.info(" ".concat(t));
          var n = this.ad = wx.createRewardedVideoAd({
            adUnitId: t
          });
          n.onLoad(this.onVideoLoad), n.onError(this.onVideoError), n.onClose(this.onVideoClose), e && n.load().then((function() {
            be.info("")
          })), this.checkLoad(9)
        }
        return t.init = function(e, i, n) {
          if ("function" == typeof wx.createRewardedVideoAd)
            if (e && e.length)
              if (t._initialized) be.error("VideoAd  init");
              else {
                t._initialized = !0, t.video30 = new t(Z(e), n), i && i.length && (fe ? t.video15 = new t(Z(i), n) : be.warn(" VideoAd.init "));
                var o = q().emitter;
                o.on("videoStart", (function(t) {
                  A("#videoT", {
                    vt: t
                  })
                })), o.on("videoEnd", (function(t, e) {
                  A("#videoE", {
                    vt: t,
                    ut: e
                  })
                })), o.on("videoLoaded", (function(t) {
                  A("#videoL", {
                    ai: t
                  })
                })), o.on("videoError", (function(t, e) {
                  A("#videoL", {
                    ai: t,
                    ec: e && e.errCode || 1
                  })
                }))
              }
          else be.error("VideoAd.init ID");
          else be.warn("")
        }, t.play = function(e) {
          return t.video30 ? t.video30.tryPlay(e) : Promise.resolve(ve.fail)
        }, t.play15 = function(e) {
          return r(this, void 0, void 0, (function() {
            var i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return t.video15 ? [4, t.video15.tryPlay(e)] : [3, 2];
                case 1:
                  if ((i = n.sent()) !== ve.fail) return [2, i];
                  n.label = 2;
                case 2:
                  return t.video30 ? [2, t.video30.tryPlay(e)] : [2, ve.fail]
              }
            }))
          }))
        }, t.canWatch = function() {
          return !!t.video30 && t.video30.isLoaded
        }, Object.defineProperty(t.prototype, "isLoaded", {
          get: function() {
            return !!this.ad && this._isLoaded
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.tryPlay = function(t) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  if (!this.isLoaded) return [3, 5];
                  e.label = 1;
                case 1:
                  return e.trys.push([1, 3, , 4]), [4, this.play(t)];
                case 2:
                  return [2, e.sent() ? ve.finish : ve.cancel];
                case 3:
                  return e.sent(), [2, ve.fail];
                case 4:
                  return [3, 6];
                case 5:
                  return [2, ve.fail];
                case 6:
                  return [2]
              }
            }))
          }))
        }, t.prototype.play = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n, o, r, a, h = this;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  if (!this.ad) throw new Error("");
                  e = q().emitter, this._isLoaded = !1, s.label = 1;
                case 1:
                  return s.trys.push([1, 3, , 4]), [4, this.ad.load()];
                case 2:
                  return s.sent(), [3, 4];
                case 3:
                  throw i = s.sent(), be.warn("", i), i;
                case 4:
                  n = Date.now(), e.emit("videoStart", t, this.adUnitId), o = new Promise((function(t) {
                    return h.callback = t
                  })), s.label = 5;
                case 5:
                  return s.trys.push([5, 7, , 8]), [4, this.ad.show()];
                case 6:
                  return s.sent(), be.log(""), [3, 8];
                case 7:
                  throw r = s.sent(), this.callback = void 0, be.error("", r), r;
                case 8:
                  return [4, o];
                case 9:
                  return a = s.sent(), be.log(" isEnd:", a), this.checkLoad(6), a ? e.emit("videoEnd", t, Date.now() - n, this.adUnitId) : e.emit("videoCancel", t, Date.now() - n, this.adUnitId), [2, a]
              }
            }))
          }))
        }, t.load = function() {
          return be.error("VideoAd.load "), Promise.resolve()
        }, t.reset = function(t) {
          be.error("VideoAd.reset ")
        }, t._initialized = !1, t
      }(),
      xe = m.getLogger(""),
      Te = function() {
        function t(t) {
          var e = this;
          if (this.loaded = !1, this.onLoad = function() {
              e.loaded = !0, U.emitter.emit("interstitialLoaded", e.adUnitId)
            }, this.onError = function(t) {
              var i = 1004 === t.errCode ? 50 : 25;
              xe.warn(":", t.errCode, t.errMsg, "".concat(i, "")), U.emitter.emit("interstitialError", e.adUnitId, t.errCode, t.errMsg), e._delayReset(1e3 * i)
            }, this.onClose = function() {
              U.emitter.emit("interstitialClose", e.adUnitId, e._lastSource), ge && e.reset()
            }, this.adUnitIdList = t, "function" != typeof wx.createInterstitialAd) throw new Error(", !");
          if (!t || !t.length) throw new TypeError("!");
          var i = Z(t);
          xe.info(" ".concat(i)), this.ad = this._createAd(i), this.adUnitId = i
        }
        return Object.defineProperty(t, "lastShowT", {
          get: function() {
            return this._lastShowT
          },
          set: function(t) {
            this._lastShowT = t, wx.setStorageSync("InterstitialAd-lastShowT", t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t, "todayFinishCnt", {
          get: function() {
            return this._todayFinishCnt
          },
          set: function(t) {
            this._todayFinishCnt = t, wx.setStorageSync("InterstitialAd-todayFinishCnt", t)
          },
          enumerable: !1,
          configurable: !0
        }), t.init = function(e, i) {
          if (t._option = i, "function" == typeof wx.createInterstitialAd) {
            if (t.instance) xe.warn(" InterstitialAd! (,)"), t.instance.destroy();
            else {
              var n = function(t) {
                var e = wx.getStorageSync(t);
                return "number" != typeof e || isNaN(e) ? 0 : e
              };
              this._lastShowT = n("InterstitialAd-lastShowT"), this._todayFinishCnt = n("InterstitialAd-todayFinishCnt")
            }
            t._initT = U.time.now(), t.instance = new t(e);
            var o = q().emitter;
            o.on("videoEnd", t._onVideoEnd), o.on("videoCancel", t._onVideoCancel), o.on("interstitialShow", t._onInterstitialShow), o.on("interstitialClose", t._onInterstitialClose), o.on("interstitialLoaded", t._onInterstitialLoaded), o.on("interstitialError", t._onInterstitialError)
          } else xe.warn(", !")
        }, t._onVideoEnd = function() {
          t.lastEndTime = U.time.now()
        }, t._onVideoCancel = function() {
          t.lastEndTime = U.time.now()
        }, t._onInterstitialShow = function(e, i) {
          var n = t.lastShowT,
            o = t.lastShowT = U.time.now();
          gt(new Date(n), new Date(o)) ? t.todayFinishCnt += 1 : t.todayFinishCnt = 1, A("#iAdS", {
            ai: e,
            vt: i,
            ct: t.todayFinishCnt
          })
        }, t._onInterstitialClose = function(e, i) {
          t.lastEndTime = U.time.now(), A("#iAdC", {
            ai: e,
            vt: i,
            ut: U.time.now() - t.lastShowT,
            ct: t.todayFinishCnt
          })
        }, t._onInterstitialLoaded = function(t) {
          A("#iAdL", {
            ai: t
          })
        }, t._onInterstitialError = function(t, e, i) {
          A("#iAdE", {
            ai: t,
            ec: e,
            em: i
          })
        }, t.show = function(e) {
          if (t.instance) {
            var i = U.time.now();
            i - t._initT <= t._option.startLimit ? xe.warn("", "".concat(((i - t._initT) / 1e3).toFixed(1), "s < ").concat((t._option.startLimit / 1e3).toFixed(1), "s")) : i - t.lastEndTime <= t._option.minInterval ? xe.warn("", "".concat(((i - t.lastEndTime) / 1e3).toFixed(1), "s < ").concat((t._option.minInterval / 1e3).toFixed(1), "s")) : t.instance.show(e).catch((function(t) {
              xe.warn("show fail:", t)
            }))
          } else U.DEBUG && xe.warn("!")
        }, t.$show = function(e) {
          return r(this, void 0, void 0, (function() {
            var i;
            return s(this, (function(n) {
              if (!t.instance) throw U.DEBUG && xe.warn("!"), t.Error.NeedInit;
              if ((i = U.time.now()) - t._initT <= t._option.startLimit) throw U.DEBUG && xe.warn("", "".concat(((i - t._initT) / 1e3).toFixed(1), "s < ").concat((t._option.startLimit / 1e3).toFixed(1), "s")), t.Error.StartLimit;
              if (i - t.lastEndTime <= t._option.minInterval) throw U.DEBUG && xe.warn("", "".concat(((i - t.lastEndTime) / 1e3).toFixed(1), "s < ").concat((t._option.minInterval / 1e3).toFixed(1), "s")), t.Error.IntervalLimit;
              return [2, t.instance.show(e)]
            }))
          }))
        }, t.prototype._createAd = function(t) {
          var e = wx.createInterstitialAd({
            adUnitId: t
          });
          return e && (e.onLoad(this.onLoad), e.onError(this.onError), e.onClose(this.onClose)), e
        }, t.prototype.show = function(t) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return this.ad ? [4, this.ad.show()] : (xe.error("!"), this._delayReset(24e3), [2]);
                case 1:
                  return e.sent(), this._lastSource = t, U.emitter.emit("interstitialShow", this.adUnitId, t), this.loaded = !1, [2]
              }
            }))
          }))
        }, t.prototype.reset = function() {
          var t, e;
          this._resetT && (clearTimeout(this._resetT), this._resetT = void 0), this.ad && (this.ad.offLoad(this.onLoad), this.ad.offError(this.onError), this.ad.offClose(this.onClose), null === (e = (t = this.ad).destroy) || void 0 === e || e.call(t));
          var i = Z(this.adUnitIdList);
          xe.info(" ".concat(i)), this.ad = this._createAd(i), this.adUnitId = i
        }, t.prototype._delayReset = function(t) {
          var e = this;
          this._resetT && clearTimeout(this._resetT), this._resetT = setTimeout((function() {
            e.reset()
          }), t)
        }, t.prototype.destroy = function() {
          var t, e;
          this.ad && (this.ad.offLoad(this.onLoad), this.ad.offError(this.onError), this.ad.offClose(this.onClose), null === (e = (t = this.ad).destroy) || void 0 === e || e.call(t), this.ad = void 0, this.adUnitId = "", this.show = function() {
            return Promise.reject(",  show !")
          })
        }, t.lastEndTime = 0, t._initT = 0, t._lastShowT = 0, t._todayFinishCnt = 0, t
      }();
    ! function(t) {
      ! function(t) {
        t[t.NeedInit = 1] = "NeedInit", t[t.StartLimit = 2] = "StartLimit", t[t.IntervalLimit = 3] = "IntervalLimit"
      }(t.Error || (t.Error = {}))
    }(Te || (Te = {})), new m("@h5/wxgame").log("3.40.0"), "undefined" != typeof wx && (W("storage", {
      getItem: wx.getStorageSync,
      setItem: wx.setStorageSync,
      removeItem: wx.removeStorageSync
    }), W("env", wx.getSystemInfoSync()), W("getLaunchData", (function() {
      return te(wx.getLaunchOptionsSync())
    }))), W("sendHttp", (function(t) {
      return new ue(t).send()
    })), ae && K.close();
    const ke = THREE;
    var Ie = "https://jump.i51game.com",
      Ce = "https://cdn.i51game.com/jump",
      _e = window.innerWidth,
      Be = window.innerHeight,
      Se = _e / Be,
      Pe = 750,
      De = Be * (Pe / _e),
      Me = .3,
      Fe = 4.1,
      Ee = 1.1,
      Le = .9,
      Oe = new ke.Color("#3BB6DF"),
      Re = new ke.Color("#000000"),
      Ge = new ke.Vector3(1, 0, 0),
      Ae = new ke.Vector3(0, 1, 0),
      Ne = new ke.Vector3(0, 0, 1),
      je = 20,
      Ve = 30,
      Ue = new ke.Color("#AAAAAA"),
      We = new ke.Color("#2B2B2B"),
      qe = new ke.Color("#E45633"),
      He = new ke.Color("#4f4f4f"),
      $e = 101,
      Xe = [He, He, We, We],
      Ye = [.6, .6, .8, 1],
      ze = [30, 30, 30, 30, 30, 30, 30, 30, 30],
      Ke = ze.reduce((function(t, e) {
        return t + e
      }), 0),
      Je = new(function() {
        function t() {
          this._serverTimeDiff = 0
        }
        return t.prototype.syncServerTime = function(t) {
          this._serverTimeDiff = t - Date.now()
        }, Object.defineProperty(t.prototype, "curTime", {
          get: function() {
            return Date.now() + this._serverTimeDiff
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "curDay", {
          get: function() {
            return new Date(this.curTime).getDay()
          },
          enumerable: !1,
          configurable: !0
        }), t
      }());

    function Qe() {
      var t = new Date(Je.curTime);
      return new Date(t.getFullYear(), t.getMonth(), t.getDate())
    }

    function Ze(t) {
      var e = new Date(t);
      return new Date(e.getFullYear(), e.getMonth(), e.getDate())
    }

    function ti(t, e) {
      return t.toDateString() === e.toDateString()
    }
    var ei = 864e5;

    function ii(t) {
      return "0x".concat(t < 4096 ? "0" : "").concat(t.toString(16).toUpperCase())
    }

    function ni(t) {
      var e = Math.floor(t / 36e5),
        i = "".concat(e > 0 ? (e < 10 ? "0" : "") + e + ":" : "");
      t %= 36e5;
      var n = Math.floor(t / 6e4),
        o = "".concat(n < 10 ? "0" : "").concat(n);
      t %= 6e4;
      var r = Math.ceil(t / 1e3),
        s = "".concat(r < 10 ? "0" : "").concat(r);
      return "".concat(i).concat(o, ":").concat(s)
    }

    function oi(t) {
      var e = Math.floor(t / 36e5),
        i = "".concat(e > 0 ? (e < 10 ? "0" : "") + e + ":" : "");
      t %= 36e5;
      var n = Math.floor(t / 6e4),
        o = "".concat(n < 10 ? "0" : "").concat(n);
      t %= 6e4;
      var r = Math.floor(t / 1e3),
        s = "".concat(r < 10 ? "0" : "").concat(r),
        a = Math.floor(t - 1e3 * r),
        h = "".concat(a < 10 ? "00" : a < 100 ? "0" : "").concat(a);
      return "".concat(i).concat(o, ":").concat(s, ":").concat(h)
    }

    function ri(t) {
      t < 0 && (t = 0);
      var e = Math.floor(t / 864e5),
        i = "".concat(e > 0 ? e : "");
      t %= 864e5;
      var n = Math.floor(t / 36e5),
        o = "".concat(n > 0 ? n + "" : "");
      if (e > 0) return "".concat(i, "").concat(o);
      t %= 36e5;
      var r = Math.ceil(t / 6e4);
      return "".concat(o).concat(r, "")
    }
    var si = function() {
        function t(t) {
          void 0 === t && (t = !1), this.isRoot = t, this.timer = function() {
            return function(t) {
              var e = t.getHours(),
                i = t.getMinutes(),
                n = t.getSeconds(),
                o = t.getMilliseconds(),
                r = "".concat(i < 10 ? "0" : "").concat(i),
                s = "".concat(n < 10 ? "0" : "").concat(n),
                a = "".concat(o < 100 ? "0" : "").concat(o < 10 ? "0" : "").concat(o);
              return "".concat(e, ":").concat(r, ":").concat(s, ".").concat(a)
            }(new Date)
          }
        }
        return t.prototype.debug = function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]
        }, t.prototype.log = function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.category ? console.info.apply(console, c(["".concat(this.timer()).concat(this.category)], h(t), !1)) : console.info.apply(console, c([this.timer()], h(t), !1))
        }, t.prototype.info = function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.category ? console.info.apply(console, c(["".concat(this.timer()).concat(this.category)], h(t), !1)) : console.info.apply(console, c([this.timer()], h(t), !1))
        }, t.prototype.warn = function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.category ? console.warn.apply(console, c(["".concat(this.timer()).concat(this.category)], h(t), !1)) : console.warn.apply(console, c([this.timer()], h(t), !1))
        }, t.prototype.error = function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          this.category ? console.error.apply(console, c(["".concat(this.timer()).concat(this.category)], h(t), !1)) : console.error.apply(console, c([this.timer()], h(t), !1))
        }, t.prototype.withCategory = function(e) {
          var i = this.isRoot ? new t : this;
          return i.category = " [".concat(e, "]"), i
        }, t.prototype.setTimer = function(e) {
          var i = this.isRoot ? new t : this;
          return i.timer = e, i
        }, t
      }(),
      ai = new si(!0),
      hi = {},
      ci = "dlc",
      ui = "dlc_team";

    function li(t) {
      return !!hi[t]
    }

    function di(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          return hi[t] ? [2, Promise.resolve()] : "function" != typeof wx.loadSubpackage ? (e = window.require("".concat(t, "/game.js")), hi[t] = !0, [2, Promise.resolve(e)]) : [2, new Promise((function(e, i) {
            wx.loadSubpackage({
              name: t,
              success: function(i) {
                DEVELOP && console.log(" ".concat(t, " ")), hi[t] = !0, e()
              },
              fail: function(t) {
                i(t)
              }
            })
          }))]
        }))
      }))
    }
    var pi = function() {
        function t() {
          this._folderDir = {}, this._fileDir = {}, this._rootUrl = "", this._rootLen = 0, this._versionT = 0, this._code = "", this._ver = 0
        }
        return Object.defineProperty(t.prototype, "rootUrl", {
          set: function(t) {
            this._rootUrl = t, this._rootLen = this._rootUrl.length
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.initVersionInfo = function(t) {
          this.readHeader(t);
          try {
            var e = t.body,
              i = e.folderObj,
              n = e.fileObj;
            this._folderDir = i, this._fileDir = n
          } catch (t) {
            DEVELOP && console.log(t)
          }
        }, t.prototype.getVersionNum = function(t) {
          var e = t.lastIndexOf("/"),
            i = t.substring(this._rootLen, e),
            n = t.substring(e + 1);
          return "/" === i && (i = ""), this._fileDir["".concat(this.getFolderIndex(i), "/").concat(n)]
        }, t.prototype.getVersionTime = function() {
          var t = new Date;
          return t.setTime(1e3 * this._versionT), "".concat(t.getFullYear()).concat(t.getMonth() + 1 < 10 ? "0" : "").concat(t.getMonth() + 1).concat(t.getDate() < 10 ? "0" : "").concat(t.getDate()).concat(t.toLocaleTimeString(void 0, {
            hour12: !1
          }).split(":").join(""))
        }, t.prototype.getVersionT = function() {
          return this._versionT
        }, t.prototype.readHeader = function(t) {
          this._code = t.code, this._ver = t.ver
        }, t.prototype.getFolderIndex = function(t) {
          return this._folderDir[t]
        }, t
      }(),
      fi = ai.withCategory("version"),
      gi = function() {
        function t(t, e) {
          void 0 === t && (t = "version"), void 0 === e && (e = "resm"), this.versionsDir = t, this.resMD5Dir = e, this.versionInfo = new pi, this._loaded = !1, this.versionInfo.rootUrl = ""
        }
        return Object.defineProperty(t.prototype, "isLoaded", {
          get: function() {
            return this._loaded
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.init = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return t = $hostDef.version ? $hostDef.version : 1769759192, console.log("-----LOAD VERSION-----", t), e = "".concat(Ce, "/").concat(this.versionsDir, "/version").concat(t, ".json"), fi.log("loading... ".concat(e)), [4, Vi(e)];
                case 1:
                  return i = n.sent(), this.versionInfo.initVersionInfo(i), fi.log("loaded ".concat(1769759192)), this._loaded = !0, [2]
              }
            }))
          }))
        }, t.prototype.getUrl = function(t) {
          if (!t) return "";
          if (!this._loaded) return "resource/".concat(t);
          var e = t.split("?")[0],
            i = this.versionInfo.getVersionNum(e);
          if (!i) return "resource/".concat(t);
          var n = e.split("."),
            o = n[n.length - 1];
          return "".concat(this.resMD5Dir, "/").concat(i, ".").concat(o)
        }, t
      }(),
      mi = new gi;

    function yi(t) {
      return t.startsWith("".concat(ci, "/")) || t.startsWith("".concat(ui, "/")) ? t : "".concat(Ce, "/").concat(mi.getUrl(t))
    }
    var vi = wx.env.USER_DATA_PATH,
      bi = ai.withCategory("res"),
      wi = wx.getFileSystemManager(),
      xi = "resm",
      Ti = "version",
      ki = "dlc/",
      Ii = !1;
    Ei(""), Ei(xi), Ei(Ti),
      function() {
        if (Ii) return;
        var t = "".concat(vi, "/").concat(xi);
        try {
          var e = wi.readdirSync(t);
          if (e) {
            var i = [];
            0;
            for (var n = 0, o = 0; o < e.length; o++) {
              var r = t + "/" + e[o],
                s = wi.statSync(r);
              s && (n += s.size, i.push({
                path: r,
                stats: s
              }))
            }
            var a = n / 1048576;
            0;
            var h = Date.now();
            if (a > 20)
              for (o = 0; o < i.length; o++) {
                var c = i[o];
                h - 1e3 * c.stats.lastAccessedTime > 6048e5 && Di(c.path)
              }
          }
        } catch (t) {}
      }();
    var Ci = {},
      _i = {};

    function Bi(t) {
      return Ci[t] ? Promise.resolve(Ci[t]) : (_i[t] || (_i[t] = function(t) {
        return r(this, void 0, void 0, (function() {
          var e, i, n;
          return s(this, (function(o) {
            switch (o.label) {
              case 0:
                return [4, Li("dlc/ui/".concat(t, ".json"))];
              case 1:
                return e = o.sent(), i = PIXI.BaseTexture.fromImage("dlc/ui/".concat(t, ".png")), n = new PIXI.Spritesheet(i, e), [2, new Promise((function(e) {
                  n.parse((function() {
                    delete _i[t], Ci[t] = n.textures, e(n.textures)
                  }))
                }))]
            }
          }))
        }))
      }(t)), _i[t])
    }

    function Si(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          try {
            return [2, Pi("configs/".concat(t, ".json")).then(Li)]
          } catch (e) {
            return [2, ue.getJSON(yi("configs/".concat(t, ".json")))]
          }
        }))
      }))
    }

    function Pi(t) {
      return r(this, void 0, void 0, (function() {
        var e, i, n, o, r;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              if (e = function(t) {
                  return mi.getUrl(t)
                }(t), Ii || !e.startsWith(xi)) return [2, "".concat(Ce, "/").concat(e)];
              i = "".concat(vi, "/").concat(e), n = e.substr(5, 32), DEVELOP && bi.log("fileMd5:", n), s.label = 1;
            case 1:
              return s.trys.push([1, 3, , 4]), [4, Fi(i)];
            case 2:
              if ((o = s.sent()).digest !== n) throw bi.warn("md5 ".concat(o.digest, "!==").concat(n, " ")), Di(i), new Error("md5 err");
              return DEVELOP && bi.log("md5ok", t, i), [2, i];
            case 3:
              return s.sent(), r = "".concat(Ce, "/").concat(e), DEVELOP && bi.log("...", t, r), [2, new Promise((function(e) {
                wx.downloadFile({
                  url: r,
                  filePath: i,
                  success: function(o) {
                    200 === o.statusCode ? (o.tempFilePath || (o.tempFilePath = i), DEVELOP && bi.log(":", t, i), Fi(i).then((function(o) {
                      o.digest !== n ? (bi.warn("md5 ".concat(o.digest, "!==").concat(n, " ")), Mi(i), e(r)) : (DEVELOP && bi.log("md5ok", t, i), e(i))
                    })).catch((function(t) {
                      bi.error("", t), e(r)
                    }))) : (bi.error("[".concat(o.statusCode, "] ").concat(r)), Mi(i), e(r))
                  },
                  fail: function(t) {
                    bi.warn(t.errMsg), e(r)
                  }
                })
              }))];
            case 4:
              return [2]
          }
        }))
      }))
    }

    function Di(t) {
      try {
        wi.unlinkSync(t), bi.log("", t)
      } catch (t) {}
    }

    function Mi(t) {
      try {
        wi.unlink({
          filePath: t,
          success: function() {
            bi.log("", t)
          },
          fail: function(t) {
            console.warn(t.errMsg)
          }
        })
      } catch (t) {}
    }

    function Fi(t) {
      return new Promise((function(e, i) {
        wi.getFileInfo({
          filePath: t,
          digestAlgorithm: "md5",
          success: e,
          fail: function(t) {
            return i(t.errMsg)
          }
        })
      }))
    }

    function Ei(t) {
      if (!Ii) {
        var e = "".concat(vi, "/").concat(t);
        try {
          wi.accessSync(e)
        } catch (t) {
          0;
          try {
            wi.mkdirSync(e)
          } catch (t) {
            Ii = !0, console.warn("mkdir error:", e, t)
          }
        }
      }
    }

    function Li(t) {
      return Ni(t) || Ai(t) ? Gi(t) : ue.getJSON(t)
    }

    function Oi(t) {
      return new Promise((function(e, i) {
        return wi.readFile({
          filePath: t,
          encoding: "utf-8",
          success: function(t) {
            return e(t.data)
          },
          fail: function(t) {
            return i(t.errMsg)
          }
        })
      }))
    }

    function Ri(t) {
      return new Promise((function(e, i) {
        return wi.readFile({
          filePath: t,
          encoding: void 0,
          success: function(t) {
            return e(t.data)
          },
          fail: function(t) {
            i(t.errMsg)
          }
        })
      }))
    }

    function Gi(t) {
      return new Promise((function(e, i) {
        return wi.readFile({
          filePath: t,
          encoding: "utf-8",
          success: function(t) {
            try {
              e(JSON.parse(t.data))
            } catch (t) {
              i(t)
            }
          },
          fail: function(t) {
            return i(t.errMsg)
          }
        })
      }))
    }

    function Ai(t) {
      return t.startsWith(vi)
    }

    function Ni(t) {
      return t.startsWith(ki)
    }

    function ji(t) {
      return r(this, void 0, void 0, (function() {
        var e, i;
        return s(this, (function(n) {
          switch (n.label) {
            case 0:
              if (Ii) return [2, t];
              e = t.slice(t.lastIndexOf("/") + 1), i = "".concat(vi, "/").concat(Ti, "/").concat(e), n.label = 1;
            case 1:
              return n.trys.push([1, 3, , 4]), DEVELOP && bi.log("version...", i), [4, Fi(i)];
            case 2:
              if (!n.sent()) throw new Error("now local file err");
              return DEVELOP && bi.log("version", i), [2, i];
            case 3:
              return n.sent(),
                function() {
                  if (!Ii) {
                    var t = "".concat(vi, "/").concat(Ti);
                    try {
                      var e = wi.readdirSync(t);
                      if (e) {
                        DEVELOP && console.log(":\n", e);
                        for (var i = 0; i < e.length; i++) {
                          var n = t + "/" + e[i];
                          wi.unlink({
                            filePath: n
                          }), DEVELOP && console.log("", n)
                        }
                      }
                    } catch (t) {}
                  }
                }(), DEVELOP && bi.log("version...", t), [2, new Promise((function(e) {
                  wx.downloadFile({
                    url: t,
                    filePath: i,
                    success: function(n) {
                      200 === n.statusCode ? (n.tempFilePath || (n.tempFilePath = i), DEVELOP && bi.log(":", t), e(i)) : (bi.error("[".concat(n.statusCode, "] ").concat(t)), Mi(i), e(t))
                    },
                    fail: function(i) {
                      bi.warn(i.errMsg), e(t)
                    }
                  })
                }))];
            case 4:
              return [2]
          }
        }))
      }))
    }

    function Vi(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          try {
            return [2, ji(t).then(Li)]
          } catch (e) {
            return [2, ue.getJSON(t, void 0, 3)]
          }
        }))
      }))
    }
    var Ui = {};

    function Wi() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          return Ui.score ? [2, Promise.resolve()] : [2, Gi("dlc/font/score.json").then((function(t) {
            return new Promise((function(e) {
              PIXI.Texture.from("dlc/font/score_0.png").once("update", (function(i) {
                PIXI.extras.BitmapText.registerJsonFont(t, i), Ui.score = !0, e()
              }))
            }))
          }))]
        }))
      }))
    }
    var qi, Hi = wx.getSystemInfoSync(),
      $i = "function" == typeof wx.getDeviceInfo ? wx.getDeviceInfo() : null,
      Xi = $i ? $i.benchmarkLevel : Hi.benchmarkLevel,
      Yi = $i ? $i.platform : Hi.platform,
      zi = function() {
        if (tn() || Zi()) return !1;
        if (window.devicePixelRatio <= 2) return !0;
        if (Ji()) {
          var t = Hi.model ? Hi.model.toLowerCase() : "";
          if (t.includes("iphone 4")) return !0;
          if (t.includes("iphone 5")) return !0;
          if (t.includes("iphone se")) return !0;
          if (t.includes("iphone 6")) return !0
        }
        return Xi > 0 && Xi <= 10
      }(),
      Ki = "function" == typeof wx.getWindowInfo ? wx.getWindowInfo() : null;

    function Ji() {
      return void 0 === qi && (qi = Hi.system.includes("iOS")), qi
    }
    var Qi = void 0;

    function Zi() {
      return void 0 === Qi && (Qi = "devtools" === Hi.brand), Qi
    }

    function tn() {
      return "windows" === Yi || "mac" === Yi
    }

    function en() {
      return "android" === Yi || "ios" === Yi || "ohos" === Yi
    }
    var nn = h(Hi.SDKVersion.split(".").map(Number), 3),
      on = nn[0],
      rn = nn[1],
      sn = nn[2];

    function an(t, e, i) {
      return void 0 === e && (e = 0), void 0 === i && (i = 0), on > t || !(on < t) && (rn > e || !(rn < e) && sn >= i)
    }

    function hn(t, e, i) {
      return void 0 === i && (i = "..."), t ? (t.length > e && (t = t.slice(0, e) + i), t) : ""
    }

    function cn() {
      return $hostDef.gameClub && "function" == typeof wx.createGameClubButton
    }
    var un = "".concat(Ce, "/host.json"),
      ln = "".concat("https://ver.i51game.com/jump", "/host.json"),
      dn = !1;

    function pn() {
      return r(this, void 0, void 0, (function() {
        var t, e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              if (dn) return [2, Promise.resolve()];
              ! function() {
                window.$hostDef = {
                  api: "api"
                }, $hostDef.censor = !1, $hostDef.DEVELOP = !1, $hostDef.videoAd = !0, $hostDef.bannerScale = .75, $hostDef.interstitialAd = !0, $hostDef.forceVideoRevive = !1, $hostDef.shareRevive = !0, $hostDef.coinEnable = !0, $hostDef.showCustomer = !0, $hostDef.linkTicket = !0, $hostDef.showInvite = !0, $hostDef.coinButtonEnable = !0, $hostDef.packetEnable = !0, $hostDef.packetTime = 3600, $hostDef.packetScore = 150, $hostDef.gameRate = !0, $hostDef.showGroupText = !0, $hostDef.expertMapIds = [];
                for (var t = 182; t >= 1; t--) $hostDef.expertMapIds.push(t);
                $hostDef.gamesBanner = !0, $hostDef.gamesPanel = !0, $hostDef.gamesIcon = !0, $hostDef.navigateBack = 1, $hostDef.signPopUp = !1, $hostDef.trySkin = !1, $hostDef.skinVideoDuration = 60, $hostDef.shareFriendGift = !0, $hostDef.shareFriendPercent = 1, $hostDef.limitGift = !1, $hostDef.limitGiftPopUp = !0, $hostDef.limitGiftPopUpScore = 30, $hostDef.limitGiftTime = 432e5, $hostDef.limitGiftVideoCD1 = 35e3, $hostDef.limitGiftVideoCD2 = 6e4, $hostDef.limitGiftMissShowTime = 1728e5, $hostDef.limitGiftNextShowTime = ei, $hostDef.bannerAdNew = !0, $hostDef.dailyRewardPopLimit = 1, $hostDef.gameCenter = !0, $hostDef.gameCenterABTest = !1, $hostDef.coinVideoDuration = 60, $hostDef.expertOpenList = [], $hostDef.challengeMode = !1, $hostDef.challengeOpenScore = 150, $hostDef.challengeOpenVideoCount = 20, $hostDef.updateImage = null, $hostDef.updateDesc = null, $hostDef.gameClub = !0, $hostDef.version = null, $hostDef.dailyMode = !0, $hostDef.noGameModeVideo = !1, $hostDef.maxBlood = 100, $hostDef.defaultBlood = 50, $hostDef.reviveAddBlood = 50, $hostDef.bloodMask = !0, $hostDef.team = !0, $hostDef.wxChallenge = !0, $hostDef.wxChallengeScore = 500, $hostDef.autoCreateChallengeCount = 1, $hostDef.showLimitSkin = !0, $hostDef.wxChallengeScoreKey = "challengeScoreA", $hostDef.wxChallengeReward = !0, $hostDef.wxChallengeRewardScore = 300, $hostDef.wxChallengeRewardScoreKey = "challengeScoreB"
              }(), i.label = 1;
            case 1:
              return i.trys.push([1, 3, , 4]), [4, ue.getJSON(ln)];
            case 2:
              return t = i.sent(), [3, 4];
            case 3:
              return i.sent(), [3, 4];
            case 4:
              if (t) return [3, 8];
              i.label = 5;
            case 5:
              return i.trys.push([5, 7, , 8]), [4, ue.getJSON(un)];
            case 6:
              return t = i.sent(), [3, 8];
            case 7:
              return i.sent(), [3, 8];
            case 8:
              return t && (fn(t), (e = t["version-1769759192"]) && fn(e)), Zi() && ($hostDef.api = "api-test", $hostDef.team = !0, $hostDef.DEVELOP = !0), window.DEVELOP = !0 === $hostDef.DEVELOP, window.DEVELOP && console.log("---$hostDef---", $hostDef), dn = !0, [2]
          }
        }))
      }))
    }

    function fn(t) {
      if (t) {
        if (t.hasOwnProperty("api") && ($hostDef.api = t.api), t.hasOwnProperty("DEVELOP") && ($hostDef.DEVELOP = t.DEVELOP), t.hasOwnProperty("videoAd") && ($hostDef.videoAd = Number(t.videoAd) > 0), t.hasOwnProperty("interstitialAd") && ($hostDef.interstitialAd = t.interstitialAd > 0), t.hasOwnProperty("shareRevive") && ($hostDef.shareRevive = Number(t.shareRevive) > 0), t.hasOwnProperty("sharePercents") && ($hostDef.sharePercents = t.sharePercents), t.hasOwnProperty("forceVideoRevive") && ($hostDef.forceVideoRevive = t.forceVideoRevive), t.hasOwnProperty("coinEnable") && ($hostDef.coinEnable = Number(t.coinEnable) > 0), t.hasOwnProperty("showCustomer") && ($hostDef.showCustomer = Number(t.showCustomer) > 0), t.hasOwnProperty("linkTicket") && ($hostDef.linkTicket = Number(t.linkTicket) > 0), t.hasOwnProperty("mp") && ($hostDef.canMp = Number(t.mp) > 0), t.hasOwnProperty("coinButtonEnable") && ($hostDef.coinButtonEnable = t.coinButtonEnable), t.hasOwnProperty("showInvite") && ($hostDef.showInvite = Number(t.showInvite) > 0), t.hasOwnProperty("packetEnable") && ($hostDef.packetEnable = Number(t.packetEnable) > 0), t.hasOwnProperty("packetTime") && ($hostDef.packetTime = Number(t.packetTime)), t.hasOwnProperty("packetScore") && ($hostDef.packetScore = Number(t.packetScore)), t.hasOwnProperty("gameRate") && ($hostDef.gameRate = Number(t.gameRate) > 0), t.hasOwnProperty("showGroupText") && ($hostDef.showGroupText = Number(t.showGroupText) > 0), t.hasOwnProperty("noticeId") && ($hostDef.noticeId = Number(t.noticeId)), t.hasOwnProperty("censor") && ($hostDef.censor = t.censor), t.hasOwnProperty("maxExpertId")) {
          $hostDef.maxExpertId = t.maxExpertId, $hostDef.expertMapIds = [];
          for (var e = t.maxExpertId; e >= 1; e--) $hostDef.expertMapIds.push(e)
        }
        t.hasOwnProperty("expertOpenList") && ($hostDef.expertOpenList = t.expertOpenList), t.hasOwnProperty("gamesBanner") && ($hostDef.gamesBanner = t.gamesBanner), t.hasOwnProperty("gamesPanel") && ($hostDef.gamesPanel = t.gamesPanel), t.hasOwnProperty("gamesIcon") && ($hostDef.gamesIcon = t.gamesIcon), t.hasOwnProperty("navigateBack") && ($hostDef.navigateBack = Number(t.navigateBack)), t.hasOwnProperty("signPopUp") && ($hostDef.signPopUp = t.signPopUp), t.hasOwnProperty("trySkin") && ($hostDef.trySkin = t.trySkin), t.hasOwnProperty("skinVideoDuration") && ($hostDef.skinVideoDuration = t.skinVideoDuration), t.hasOwnProperty("shareFriendGift") && ($hostDef.shareFriendGift = t.shareFriendGift), t.hasOwnProperty("shareFriendPercent") && ($hostDef.shareFriendPercent = t.shareFriendPercent), t.hasOwnProperty("limitGift") && ($hostDef.limitGift = t.limitGift), t.hasOwnProperty("limitGiftPopUp") && ($hostDef.limitGiftPopUp = t.limitGiftPopUp), t.hasOwnProperty("limitGiftPopUpScore") && ($hostDef.limitGiftPopUpScore = t.limitGiftPopUpScore), t.hasOwnProperty("limitGiftTime") && ($hostDef.limitGiftTime = 1e3 * t.limitGiftTime), t.hasOwnProperty("limitGiftVideoCD1") && ($hostDef.limitGiftVideoCD1 = 1e3 * t.limitGiftVideoCD1), t.hasOwnProperty("limitGiftVideoCD2") && ($hostDef.limitGiftVideoCD2 = 1e3 * t.limitGiftVideoCD2), t.hasOwnProperty("limitGiftNextShowTime") && ($hostDef.limitGiftNextShowTime = 1e3 * t.limitGiftNextShowTime), t.hasOwnProperty("limitGiftMissShowTime") && ($hostDef.limitGiftMissShowTime = 1e3 * t.limitGiftMissShowTime), t.hasOwnProperty("bannerAdNew") && ($hostDef.bannerAdNew = t.bannerAdNew), t.hasOwnProperty("dailyRewardPopLimit") && ($hostDef.dailyRewardPopLimit = t.dailyRewardPopLimit), t.hasOwnProperty("gameCenter") && ($hostDef.gameCenter = t.gameCenter), t.hasOwnProperty("gameCenterABTest") && ($hostDef.gameCenterABTest = t.gameCenterABTest), t.hasOwnProperty("coinVideoDuration") && ($hostDef.coinVideoDuration = t.coinVideoDuration), t.hasOwnProperty("challengeMode") && ($hostDef.challengeMode = t.challengeMode), t.hasOwnProperty("challengeOpenScore") && ($hostDef.challengeOpenScore = t.challengeOpenScore), t.hasOwnProperty("challengeOpenVideoCount") && ($hostDef.challengeOpenVideoCount = t.challengeOpenVideoCount), t.hasOwnProperty("challengeEndTime") && ($hostDef.challengeEndTime = t.challengeEndTime), t.hasOwnProperty("updateImage") && ($hostDef.updateImage = t.updateImage), t.hasOwnProperty("updateDesc") && ($hostDef.updateDesc = t.updateDesc), t.hasOwnProperty("gameClub") && ($hostDef.gameClub = t.gameClub), t.hasOwnProperty("version") && ($hostDef.version = t.version), t.hasOwnProperty("dailyMode") && ($hostDef.dailyMode = t.dailyMode), t.hasOwnProperty("noGameModeVideo") && ($hostDef.noGameModeVideo = t.noGameModeVideo), t.hasOwnProperty("maxBlood") && ($hostDef.maxBlood = t.maxBlood), t.hasOwnProperty("defaultBlood") && ($hostDef.defaultBlood = t.defaultBlood), t.hasOwnProperty("reviveAddBlood") && ($hostDef.reviveAddBlood = t.reviveAddBlood), t.hasOwnProperty("bloodMask") && ($hostDef.bloodMask = t.bloodMask), t.hasOwnProperty("team") && ($hostDef.team = t.team), t.hasOwnProperty("wxChallenge") && ($hostDef.wxChallenge = t.wxChallenge), t.hasOwnProperty("wxChallengeScore") && ($hostDef.wxChallengeScore = t.wxChallengeScore), t.hasOwnProperty("autoCreateChallengeCount") && ($hostDef.autoCreateChallengeCount = t.autoCreateChallengeCount), t.hasOwnProperty("showLimitSkin") && ($hostDef.showLimitSkin = t.showLimitSkin), t.hasOwnProperty("wxChallengeScoreKey") && ($hostDef.wxChallengeScoreKey = t.wxChallengeScoreKey), t.hasOwnProperty("wxChallengeReward") && ($hostDef.wxChallengeReward = t.wxChallengeReward), t.hasOwnProperty("wxChallengeRewardScore") && ($hostDef.wxChallengeRewardScore = t.wxChallengeRewardScore), t.hasOwnProperty("wxChallengeRewardScoreKey") && ($hostDef.wxChallengeRewardScoreKey = t.wxChallengeRewardScoreKey)
      }
    }
    var gn = [];
    Object.freeze(gn);
    var mn = {};
    Object.freeze(mn);
    var yn = {};

    function vn() {
      return "undefined" != typeof window ? window : void 0 !== __webpack_require__.g ? __webpack_require__.g : "undefined" != typeof self ? self : yn
    }

    function bn() {
      return ++$o.mobxGuid
    }

    function wn(t) {
      throw xn(!1, t), "X"
    }

    function xn(t, e) {
      if (!t) throw new Error("[mobx] " + (e || "An invariant failed, however the error is obfuscated because this is an production build."))
    }

    function Tn(t) {
      var e = !1;
      return function() {
        if (!e) return e = !0, t.apply(this, arguments)
      }
    }
    var kn = function() {};

    function In(t) {
      return null !== t && "object" == typeof t
    }

    function Cn(t) {
      if (null === t || "object" != typeof t) return !1;
      var e = Object.getPrototypeOf(t);
      return e === Object.prototype || null === e
    }

    function _n(t, e, i) {
      Object.defineProperty(t, e, {
        enumerable: !1,
        writable: !0,
        configurable: !0,
        value: i
      })
    }

    function Bn(t, e, i) {
      Object.defineProperty(t, e, {
        enumerable: !1,
        writable: !1,
        configurable: !0,
        value: i
      })
    }

    function Sn(t, e) {
      var i = "isMobX" + t;
      return e.prototype[i] = !0,
        function(t) {
          return In(t) && !0 === t[i]
        }
    }

    function Pn(t) {
      return void 0 !== vn().Map && t instanceof vn().Map
    }

    function Dn(t) {
      return t instanceof Set
    }

    function Mn(t) {
      for (var e = [];;) {
        var i = t.next();
        if (i.done) break;
        e.push(i.value)
      }
      return e
    }

    function Fn() {
      return "function" == typeof Symbol && Symbol.toPrimitive || "@@toPrimitive"
    }

    function En(t) {
      return null === t ? null : "object" == typeof t ? "" + t : t
    }

    function Ln(t, e) {
      for (var i = t.next(); !i.done;) e(i.value), i = t.next()
    }

    function On() {
      return "function" == typeof Symbol && Symbol.iterator || "@@iterator"
    }

    function Rn(t, e) {
      Bn(t, On(), e)
    }

    function Gn(t) {
      return t[On()] = Nn, t
    }

    function An() {
      return "function" == typeof Symbol && Symbol.toStringTag || "@@toStringTag"
    }

    function Nn() {
      return this
    }
    var jn = function() {
        function t(t) {
          void 0 === t && (t = "Atom@" + bn()), this.name = t, this.isPendingUnobservation = !1, this.isBeingObserved = !1, this.observers = [], this.observersIndexes = {}, this.diffValue = 0, this.lastAccessedBy = 0, this.lowestObserverState = go.NOT_TRACKING
        }
        return t.prototype.onBecomeUnobserved = function() {}, t.prototype.onBecomeObserved = function() {}, t.prototype.reportObserved = function() {
          return Qo(this)
        }, t.prototype.reportChanged = function() {
          Ko(),
            function(t) {
              if (t.lowestObserverState === go.STALE) return;
              t.lowestObserverState = go.STALE;
              var e = t.observers,
                i = e.length;
              for (; i--;) {
                var n = e[i];
                n.dependenciesState === go.UP_TO_DATE && (n.isTracing !== mo.NONE && Zo(n, t), n.onBecomeStale()), n.dependenciesState = go.STALE
              }
            }(this), Jo()
        }, t.prototype.toString = function() {
          return this.name
        }, t
      }(),
      Vn = Sn("Atom", jn);

    function Un(t, e, i) {
      void 0 === e && (e = kn), void 0 === i && (i = kn);
      var n, o = new jn(t);
      return xr("onBecomeObserved", o, e, n), wr(o, i), o
    }

    function Wn(t, e) {
      return t === e
    }
    var qn = {
        identity: Wn,
        structural: function(t, e) {
          return gs(t, e)
        },
        default: function(t, e) {
          return function(t, e) {
            return "number" == typeof t && "number" == typeof e && isNaN(t) && isNaN(e)
          }(t, e) || Wn(t, e)
        },
        shallow: function(t, e) {
          return gs(t, e, 1)
        }
      },
      Hn = function(t, e) {
        return Hn = Object.setPrototypeOf || {
          __proto__: []
        }
        instanceof Array && function(t, e) {
          t.__proto__ = e
        } || function(t, e) {
          for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        }, Hn(t, e)
      };

    function $n(t, e) {
      function i() {
        this.constructor = t
      }
      Hn(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i)
    }
    var Xn = function() {
      return Xn = Object.assign || function(t) {
        for (var e, i = 1, n = arguments.length; i < n; i++)
          for (var o in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
        return t
      }, Xn.apply(this, arguments)
    };

    function Yn(t, e) {
      var i = "function" == typeof Symbol && t[Symbol.iterator];
      if (!i) return t;
      var n, o, r = i.call(t),
        s = [];
      try {
        for (;
          (void 0 === e || e-- > 0) && !(n = r.next()).done;) s.push(n.value)
      } catch (t) {
        o = {
          error: t
        }
      } finally {
        try {
          n && !n.done && (i = r.return) && i.call(r)
        } finally {
          if (o) throw o.error
        }
      }
      return s
    }

    function zn() {
      for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(Yn(arguments[e]));
      return t
    }
    var Kn = {},
      Jn = {};

    function Qn(t) {
      if (!0 !== t.__mobxDidRunLazyInitializers) {
        var e = t.__mobxDecorators;
        if (e)
          for (var i in _n(t, "__mobxDidRunLazyInitializers", !0), e) {
            var n = e[i];
            n.propertyCreator(t, n.prop, n.descriptor, n.decoratorTarget, n.decoratorArguments)
          }
      }
    }

    function Zn(t, e) {
      return function() {
        var i, n, o = function(n, o, r, s) {
          if (!0 === s) return e(n, o, r, n, i), null;
          if (!Object.prototype.hasOwnProperty.call(n, "__mobxDecorators")) {
            var a = n.__mobxDecorators;
            _n(n, "__mobxDecorators", Xn({}, a))
          }
          return n.__mobxDecorators[o] = {
              prop: o,
              propertyCreator: e,
              descriptor: r,
              decoratorTarget: n,
              decoratorArguments: i
            },
            function(t, e) {
              var i = e ? Kn : Jn;
              return i[t] || (i[t] = {
                configurable: !0,
                enumerable: e,
                get: function() {
                  return Qn(this), this[t]
                },
                set: function(e) {
                  Qn(this), this[t] = e
                }
              })
            }(o, t)
        };
        return (2 === (n = arguments).length || 3 === n.length) && "string" == typeof n[1] || 4 === n.length && !0 === n[3] ? (i = gn, o.apply(null, arguments)) : (i = Array.prototype.slice.call(arguments), o)
      }
    }

    function to(t, e, i) {
      return _r(t) ? t : Array.isArray(t) ? po.array(t, {
        name: i
      }) : Cn(t) ? po.object(t, void 0, {
        name: i
      }) : Pn(t) ? po.map(t, {
        name: i
      }) : Dn(t) ? po.set(t, {
        name: i
      }) : t
    }

    function eo(t) {
      return t
    }

    function io(t) {
      xn(t);
      var e = Zn(!0, (function(e, i, n, o, r) {
          ss(e, i, n ? n.initializer ? n.initializer.call(e) : n.value : void 0, t)
        })),
        i = ("undefined" != typeof process && process.env, e);
      return i.enhancer = t, i
    }
    var no = {
        deep: !0,
        name: void 0,
        defaultDecorator: void 0
      },
      oo = {
        deep: !1,
        name: void 0,
        defaultDecorator: void 0
      };

    function ro(t) {
      return null == t ? no : "string" == typeof t ? {
        name: t,
        deep: !0
      } : t
    }

    function so(t) {
      return t.defaultDecorator ? t.defaultDecorator.enhancer : !1 === t.deep ? eo : to
    }
    Object.freeze(no), Object.freeze(oo);
    var ao = io(to),
      ho = io((function(t, e, i) {
        return null == t || ls(t) || Kr(t) || ts(t) || ns(t) ? t : Array.isArray(t) ? po.array(t, {
          name: i,
          deep: !1
        }) : Cn(t) ? po.object(t, void 0, {
          name: i,
          deep: !1
        }) : Pn(t) ? po.map(t, {
          name: i,
          deep: !1
        }) : Dn(t) ? po.set(t, {
          name: i,
          deep: !1
        }) : wn(!1)
      })),
      co = io(eo),
      uo = io((function(t, e, i) {
        return gs(t, e) ? e : t
      }));
    var lo = {
        box: function(t, e) {
          arguments.length > 2 && fo("box");
          var i = ro(e);
          return new No(t, so(i), i.name, !0, i.equals)
        },
        shallowBox: function(t, e) {
          return arguments.length > 2 && fo("shallowBox"), po.box(t, {
            name: e,
            deep: !1
          })
        },
        array: function(t, e) {
          arguments.length > 2 && fo("array");
          var i = ro(e);
          return new qr(t, so(i), i.name)
        },
        shallowArray: function(t, e) {
          return arguments.length > 2 && fo("shallowArray"), po.array(t, {
            name: e,
            deep: !1
          })
        },
        map: function(t, e) {
          arguments.length > 2 && fo("map");
          var i = ro(e);
          return new Qr(t, so(i), i.name)
        },
        shallowMap: function(t, e) {
          return arguments.length > 2 && fo("shallowMap"), po.map(t, {
            name: e,
            deep: !1
          })
        },
        set: function(t, e) {
          arguments.length > 2 && fo("set");
          var i = ro(e);
          return new is(t, so(i), i.name)
        },
        object: function(t, e, i) {
          return "string" == typeof arguments[1] && fo("object"), Tr({}, t, e, ro(i))
        },
        shallowObject: function(t, e) {
          return "string" == typeof arguments[1] && fo("shallowObject"), po.object(t, {}, {
            name: e,
            deep: !1
          })
        },
        ref: co,
        shallow: ho,
        deep: ao,
        struct: uo
      },
      po = function(t, e, i) {
        if ("string" == typeof arguments[1]) return ao.apply(null, arguments);
        if (_r(t)) return t;
        var n = Cn(t) ? po.object(t, e, i) : Array.isArray(t) ? po.array(t, e) : Pn(t) ? po.map(t, e) : Dn(t) ? po.set(t, e) : t;
        if (n !== t) return n;
        wn(!1)
      };

    function fo(t) {
      wn("Expected one or two arguments to observable." + t + ". Did you accidentally try to use observable." + t + " as decorator?")
    }
    Object.keys(lo).forEach((function(t) {
      return po[t] = lo[t]
    }));
    var go, mo, yo = Zn(!1, (function(t, e, i, n, o) {
        var r = i.get,
          s = i.set,
          a = o[0] || {};
        ! function(t, e, i) {
          var n = rs(t);
          i.name = n.name + "." + e, i.context = t, n.values[e] = new jo(i), Object.defineProperty(t, e, function(t) {
            return hs[t] || (hs[t] = {
              configurable: $o.computedConfigurable,
              enumerable: !1,
              get: function() {
                return cs(this).read(this, t)
              },
              set: function(e) {
                cs(this).write(this, t, e)
              }
            })
          }(e))
        }(t, e, Xn({
          get: r,
          set: s
        }, a))
      })),
      vo = yo({
        equals: qn.structural
      }),
      bo = function(t, e, i) {
        if ("string" == typeof e) return yo.apply(null, arguments);
        if (null !== t && "object" == typeof t && 1 === arguments.length) return yo.apply(null, arguments);
        var n = "object" == typeof e ? e : {};
        return n.get = t, n.set = "function" == typeof e ? e : n.set, n.name = n.name || t.name || "", new jo(n)
      };
    bo.struct = vo,
      function(t) {
        t[t.NOT_TRACKING = -1] = "NOT_TRACKING", t[t.UP_TO_DATE = 0] = "UP_TO_DATE", t[t.POSSIBLY_STALE = 1] = "POSSIBLY_STALE", t[t.STALE = 2] = "STALE"
      }(go || (go = {})),
      function(t) {
        t[t.NONE = 0] = "NONE", t[t.LOG = 1] = "LOG", t[t.BREAK = 2] = "BREAK"
      }(mo || (mo = {}));
    var wo = function(t) {
      this.cause = t
    };

    function xo(t) {
      return t instanceof wo
    }

    function To(t) {
      switch (t.dependenciesState) {
        case go.UP_TO_DATE:
          return !1;
        case go.NOT_TRACKING:
        case go.STALE:
          return !0;
        case go.POSSIBLY_STALE:
          for (var e = Po(!0), i = Bo(), n = t.observing, o = n.length, r = 0; r < o; r++) {
            var s = n[r];
            if (Uo(s)) {
              if ($o.disableErrorBoundaries) s.get();
              else try {
                s.get()
              } catch (t) {
                return So(i), Do(e), !0
              }
              if (t.dependenciesState === go.STALE) return So(i), Do(e), !0
            }
          }
          return Mo(t), So(i), Do(e), !1
      }
    }

    function ko(t) {
      var e = t.observers.length > 0;
      $o.computationDepth > 0 && e && wn(!1), $o.allowStateChanges || !e && "strict" !== $o.enforceActions || wn(!1)
    }

    function Io(t, e, i) {
      var n = Po(!0);
      Mo(t), t.newObserving = new Array(t.observing.length + 100), t.unboundDepsCount = 0, t.runId = ++$o.runId;
      var o, r = $o.trackingDerivation;
      if ($o.trackingDerivation = t, !0 === $o.disableErrorBoundaries) o = e.call(i);
      else try {
        o = e.call(i)
      } catch (t) {
        o = new wo(t)
      }
      return $o.trackingDerivation = r,
        function(t) {
          for (var e = t.observing, i = t.observing = t.newObserving, n = go.UP_TO_DATE, o = 0, r = t.unboundDepsCount, s = 0; s < r; s++) {
            0 === (a = i[s]).diffValue && (a.diffValue = 1, o !== s && (i[o] = a), o++), a.dependenciesState > n && (n = a.dependenciesState)
          }
          i.length = o, t.newObserving = null, r = e.length;
          for (; r--;) {
            0 === (a = e[r]).diffValue && Yo(a, t), a.diffValue = 0
          }
          for (; o--;) {
            var a;
            1 === (a = i[o]).diffValue && (a.diffValue = 0, Xo(a, t))
          }
          n !== go.UP_TO_DATE && (t.dependenciesState = n, t.onBecomeStale())
        }(t), t.observing.length, Do(n), o
    }

    function Co(t) {
      var e = t.observing;
      t.observing = [];
      for (var i = e.length; i--;) Yo(e[i], t);
      t.dependenciesState = go.NOT_TRACKING
    }

    function _o(t) {
      var e = Bo(),
        i = t();
      return So(e), i
    }

    function Bo() {
      var t = $o.trackingDerivation;
      return $o.trackingDerivation = null, t
    }

    function So(t) {
      $o.trackingDerivation = t
    }

    function Po(t) {
      var e = $o.allowStateReads;
      return $o.allowStateReads = t, e
    }

    function Do(t) {
      $o.allowStateReads = t
    }

    function Mo(t) {
      if (t.dependenciesState !== go.UP_TO_DATE) {
        t.dependenciesState = go.UP_TO_DATE;
        for (var e = t.observing, i = e.length; i--;) e[i].lowestObserverState = go.UP_TO_DATE
      }
    }
    var Fo = 0,
      Eo = 1,
      Lo = Object.getOwnPropertyDescriptor((function() {}), "name");
    Lo && Lo.configurable;

    function Oo(t, e) {
      var i = function() {
        return Ro(t, e, this, arguments)
      };
      return i.isMobxAction = !0, i
    }

    function Ro(t, e, i, n) {
      var o = function(t, e, i) {
        var n = ar() && !!t,
          o = 0;
        if (n) {
          o = Date.now();
          var r = i && i.length || 0,
            s = new Array(r);
          if (r > 0)
            for (var a = 0; a < r; a++) s[a] = i[a];
          cr({
            type: "action",
            name: t,
            object: e,
            arguments: s
          })
        }
        var h = Bo();
        Ko();
        var c = Go(!0),
          u = Po(!0),
          l = {
            prevDerivation: h,
            prevAllowStateChanges: c,
            prevAllowStateReads: u,
            notifySpy: n,
            startTime: o,
            actionId: Eo++,
            parentActionId: Fo
          };
        return Fo = l.actionId, l
      }(t, i, n);
      try {
        return e.apply(i, n)
      } catch (t) {
        throw o.error = t, t
      } finally {
        ! function(t) {
          Fo !== t.actionId && wn("invalid action stack. did you forget to finish an action?");
          Fo = t.parentActionId, void 0 !== t.error && ($o.suppressReactionErrors = !0);
          Ao(t.prevAllowStateChanges), Do(t.prevAllowStateReads), Jo(), So(t.prevDerivation), t.notifySpy && lr({
            time: Date.now() - t.startTime
          });
          $o.suppressReactionErrors = !1
        }(o)
      }
    }

    function Go(t) {
      var e = $o.allowStateChanges;
      return $o.allowStateChanges = t, e
    }

    function Ao(t) {
      $o.allowStateChanges = t
    }
    var No = function(t) {
      function e(e, i, n, o, r) {
        void 0 === n && (n = "ObservableValue@" + bn()), void 0 === o && (o = !0), void 0 === r && (r = qn.default);
        var s = t.call(this, n) || this;
        return s.enhancer = i, s.name = n, s.equals = r, s.hasUnreportedChange = !1, s.value = i(e, void 0, n), o && ar() && hr({
          type: "create",
          name: s.name,
          newValue: "" + s.value
        }), s
      }
      return $n(e, t), e.prototype.dehanceValue = function(t) {
        return void 0 !== this.dehancer ? this.dehancer(t) : t
      }, e.prototype.set = function(t) {
        var e = this.value;
        if ((t = this.prepareNewValue(t)) !== $o.UNCHANGED) {
          var i = ar();
          i && cr({
            type: "update",
            name: this.name,
            newValue: t,
            oldValue: e
          }), this.setNewValue(t), i && lr()
        }
      }, e.prototype.prepareNewValue = function(t) {
        if (ko(this), Dr(this)) {
          var e = Fr(this, {
            object: this,
            type: "update",
            newValue: t
          });
          if (!e) return $o.UNCHANGED;
          t = e.newValue
        }
        return t = this.enhancer(t, this.value, this.name), this.equals(this.value, t) ? $o.UNCHANGED : t
      }, e.prototype.setNewValue = function(t) {
        var e = this.value;
        this.value = t, this.reportChanged(), Er(this) && Or(this, {
          type: "update",
          object: this,
          newValue: t,
          oldValue: e
        })
      }, e.prototype.get = function() {
        return this.reportObserved(), this.dehanceValue(this.value)
      }, e.prototype.intercept = function(t) {
        return Mr(this, t)
      }, e.prototype.observe = function(t, e) {
        return e && t({
          object: this,
          type: "update",
          newValue: this.value,
          oldValue: void 0
        }), Lr(this, t)
      }, e.prototype.toJSON = function() {
        return this.get()
      }, e.prototype.toString = function() {
        return this.name + "[" + this.value + "]"
      }, e.prototype.valueOf = function() {
        return En(this.get())
      }, e
    }(jn);
    No.prototype[Fn()] = No.prototype.valueOf;
    Sn("ObservableValue", No);
    var jo = function() {
      function t(t) {
        this.dependenciesState = go.NOT_TRACKING, this.observing = [], this.newObserving = null, this.isBeingObserved = !1, this.isPendingUnobservation = !1, this.observers = [], this.observersIndexes = {}, this.diffValue = 0, this.runId = 0, this.lastAccessedBy = 0, this.lowestObserverState = go.UP_TO_DATE, this.unboundDepsCount = 0, this.__mapid = "#" + bn(), this.value = new wo(null), this.isComputing = !1, this.isRunningSetter = !1, this.isTracing = mo.NONE, xn(t.get, "missing option for computed: get"), this.derivation = t.get, this.name = t.name || "ComputedValue@" + bn(), t.set && (this.setter = Oo(this.name + "-setter", t.set)), this.equals = t.equals || (t.compareStructural || t.struct ? qn.structural : qn.default), this.scope = t.context, this.requiresReaction = !!t.requiresReaction, this.keepAlive = !!t.keepAlive
      }
      return t.prototype.onBecomeStale = function() {
        ! function(t) {
          if (t.lowestObserverState !== go.UP_TO_DATE) return;
          t.lowestObserverState = go.POSSIBLY_STALE;
          var e = t.observers,
            i = e.length;
          for (; i--;) {
            var n = e[i];
            n.dependenciesState === go.UP_TO_DATE && (n.dependenciesState = go.POSSIBLY_STALE, n.isTracing !== mo.NONE && Zo(n, t), n.onBecomeStale())
          }
        }(this)
      }, t.prototype.onBecomeUnobserved = function() {}, t.prototype.onBecomeObserved = function() {}, t.prototype.get = function() {
        this.isComputing && wn("Cycle detected in computation " + this.name + ": " + this.derivation), 0 !== $o.inBatch || 0 !== this.observers.length || this.keepAlive ? (Qo(this), To(this) && this.trackAndCompute() && function(t) {
          if (t.lowestObserverState === go.STALE) return;
          t.lowestObserverState = go.STALE;
          var e = t.observers,
            i = e.length;
          for (; i--;) {
            var n = e[i];
            n.dependenciesState === go.POSSIBLY_STALE ? n.dependenciesState = go.STALE : n.dependenciesState === go.UP_TO_DATE && (t.lowestObserverState = go.UP_TO_DATE)
          }
        }(this)) : To(this) && (this.warnAboutUntrackedRead(), Ko(), this.value = this.computeValue(!1), Jo());
        var t = this.value;
        if (xo(t)) throw t.cause;
        return t
      }, t.prototype.peek = function() {
        var t = this.computeValue(!1);
        if (xo(t)) throw t.cause;
        return t
      }, t.prototype.set = function(t) {
        if (this.setter) {
          xn(!this.isRunningSetter, "The setter of computed value '" + this.name + "' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"), this.isRunningSetter = !0;
          try {
            this.setter.call(this.scope, t)
          } finally {
            this.isRunningSetter = !1
          }
        } else xn(!1, !1)
      }, t.prototype.trackAndCompute = function() {
        ar() && hr({
          object: this.scope,
          type: "compute",
          name: this.name
        });
        var t = this.value,
          e = this.dependenciesState === go.NOT_TRACKING,
          i = this.computeValue(!0),
          n = e || xo(t) || xo(i) || !this.equals(t, i);
        return n && (this.value = i), n
      }, t.prototype.computeValue = function(t) {
        var e;
        if (this.isComputing = !0, $o.computationDepth++, t) e = Io(this, this.derivation, this.scope);
        else if (!0 === $o.disableErrorBoundaries) e = this.derivation.call(this.scope);
        else try {
          e = this.derivation.call(this.scope)
        } catch (t) {
          e = new wo(t)
        }
        return $o.computationDepth--, this.isComputing = !1, e
      }, t.prototype.suspend = function() {
        this.keepAlive || (Co(this), this.value = void 0)
      }, t.prototype.observe = function(t, e) {
        var i = this,
          n = !0,
          o = void 0;
        return mr((function() {
          var r = i.get();
          if (!n || e) {
            var s = Bo();
            t({
              type: "update",
              object: i,
              newValue: r,
              oldValue: o
            }), So(s)
          }
          n = !1, o = r
        }))
      }, t.prototype.warnAboutUntrackedRead = function() {}, t.prototype.toJSON = function() {
        return this.get()
      }, t.prototype.toString = function() {
        return this.name + "[" + this.derivation.toString() + "]"
      }, t.prototype.valueOf = function() {
        return En(this.get())
      }, t
    }();
    jo.prototype[Fn()] = jo.prototype.valueOf;
    var Vo, Uo = Sn("ComputedValue", jo),
      Wo = function() {
        this.version = 5, this.UNCHANGED = {}, this.trackingDerivation = null, this.computationDepth = 0, this.runId = 0, this.mobxGuid = 0, this.inBatch = 0, this.pendingUnobservations = [], this.pendingReactions = [], this.isRunningReactions = !1, this.allowStateChanges = !0, this.allowStateReads = !0, this.enforceActions = !1, this.spyListeners = [], this.globalReactionErrorHandlers = [], this.computedRequiresReaction = !1, this.reactionRequiresObservable = !1, this.observableRequiresReaction = !1, this.computedConfigurable = !1, this.disableErrorBoundaries = !1, this.suppressReactionErrors = !1
      },
      qo = !0,
      Ho = !1,
      $o = ((Vo = vn()).__mobxInstanceCount > 0 && !Vo.__mobxGlobals && (qo = !1), Vo.__mobxGlobals && Vo.__mobxGlobals.version !== (new Wo).version && (qo = !1), qo ? Vo.__mobxGlobals ? (Vo.__mobxInstanceCount += 1, Vo.__mobxGlobals.UNCHANGED || (Vo.__mobxGlobals.UNCHANGED = {}), Vo.__mobxGlobals) : (Vo.__mobxInstanceCount = 1, Vo.__mobxGlobals = new Wo) : (setTimeout((function() {
        Ho || wn("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")
      }), 1), new Wo));

    function Xo(t, e) {
      var i = t.observers.length;
      i && (t.observersIndexes[e.__mapid] = i), t.observers[i] = e, t.lowestObserverState > e.dependenciesState && (t.lowestObserverState = e.dependenciesState)
    }

    function Yo(t, e) {
      if (1 === t.observers.length) t.observers.length = 0, zo(t);
      else {
        var i = t.observers,
          n = t.observersIndexes,
          o = i.pop();
        if (o !== e) {
          var r = n[e.__mapid] || 0;
          r ? n[o.__mapid] = r : delete n[o.__mapid], i[r] = o
        }
        delete n[e.__mapid]
      }
    }

    function zo(t) {
      !1 === t.isPendingUnobservation && (t.isPendingUnobservation = !0, $o.pendingUnobservations.push(t))
    }

    function Ko() {
      $o.inBatch++
    }

    function Jo() {
      if (0 === --$o.inBatch) {
        or();
        for (var t = $o.pendingUnobservations, e = 0; e < t.length; e++) {
          var i = t[e];
          i.isPendingUnobservation = !1, 0 === i.observers.length && (i.isBeingObserved && (i.isBeingObserved = !1, i.onBecomeUnobserved()), i instanceof jo && i.suspend())
        }
        $o.pendingUnobservations = []
      }
    }

    function Qo(t) {
      var e = $o.trackingDerivation;
      return null !== e ? (e.runId !== t.lastAccessedBy && (t.lastAccessedBy = e.runId, e.newObserving[e.unboundDepsCount++] = t, t.isBeingObserved || (t.isBeingObserved = !0, t.onBecomeObserved())), !0) : (0 === t.observers.length && $o.inBatch > 0 && zo(t), !1)
    }

    function Zo(t, e) {
      if (console.log("[mobx.trace] '" + t.name + "' is invalidated due to a change in: '" + e.name + "'"), t.isTracing === mo.BREAK) {
        var i = [];
        tr(kr(ds(t, n)), i, 1), new Function("debugger;\n/*\nTracing '" + t.name + "'\n\nYou are entering this break point because derivation '" + t.name + "' is being traced and '" + e.name + "' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n" + (t instanceof jo ? t.derivation.toString().replace(/[*]\//g, "/") : "") + "\n\nThe dependencies for this derivation are:\n\n" + i.join("\n") + "\n*/\n    ")()
      }
      var n
    }

    function tr(t, e, i) {
      e.length >= 1e3 ? e.push("(and many more)") : (e.push("" + new Array(i).join("\t") + t.name), t.dependencies && t.dependencies.forEach((function(t) {
        return tr(t, e, i + 1)
      })))
    }
    var er = function() {
      function t(t, e, i, n) {
        void 0 === t && (t = "Reaction@" + bn()), void 0 === n && (n = !1), this.name = t, this.onInvalidate = e, this.errorHandler = i, this.requiresObservable = n, this.observing = [], this.newObserving = [], this.dependenciesState = go.NOT_TRACKING, this.diffValue = 0, this.runId = 0, this.unboundDepsCount = 0, this.__mapid = "#" + bn(), this.isDisposed = !1, this._isScheduled = !1, this._isTrackPending = !1, this._isRunning = !1, this.isTracing = mo.NONE
      }
      return t.prototype.onBecomeStale = function() {
        this.schedule()
      }, t.prototype.schedule = function() {
        this._isScheduled || (this._isScheduled = !0, $o.pendingReactions.push(this), or())
      }, t.prototype.isScheduled = function() {
        return this._isScheduled
      }, t.prototype.runReaction = function() {
        if (!this.isDisposed) {
          if (Ko(), this._isScheduled = !1, To(this)) {
            this._isTrackPending = !0;
            try {
              this.onInvalidate(), this._isTrackPending && ar() && hr({
                name: this.name,
                type: "scheduled-reaction"
              })
            } catch (t) {
              this.reportExceptionInDerivation(t)
            }
          }
          Jo()
        }
      }, t.prototype.track = function(t) {
        Ko();
        var e, i = ar();
        i && (e = Date.now(), cr({
          name: this.name,
          type: "reaction"
        })), this._isRunning = !0;
        var n = Io(this, t, void 0);
        this._isRunning = !1, this._isTrackPending = !1, this.isDisposed && Co(this), xo(n) && this.reportExceptionInDerivation(n.cause), i && lr({
          time: Date.now() - e
        }), Jo()
      }, t.prototype.reportExceptionInDerivation = function(t) {
        var e = this;
        if (this.errorHandler) this.errorHandler(t, this);
        else {
          if ($o.disableErrorBoundaries) throw t;
          var i = "[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '" + this + "'";
          $o.suppressReactionErrors ? console.warn("[mobx] (error in reaction '" + this.name + "' suppressed, fix error of causing action below)") : console.error(i, t), ar() && hr({
            type: "error",
            name: this.name,
            message: i,
            error: "" + t
          }), $o.globalReactionErrorHandlers.forEach((function(i) {
            return i(t, e)
          }))
        }
      }, t.prototype.dispose = function() {
        this.isDisposed || (this.isDisposed = !0, this._isRunning || (Ko(), Co(this), Jo()))
      }, t.prototype.getDisposer = function() {
        var t = this.dispose.bind(this);
        return t.$mobx = this, t
      }, t.prototype.toString = function() {
        return "Reaction[" + this.name + "]"
      }, t.prototype.trace = function(t) {
        void 0 === t && (t = !1),
          function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            var i = !1;
            "boolean" == typeof t[t.length - 1] && (i = t.pop());
            var n = function(t) {
              switch (t.length) {
                case 0:
                  return $o.trackingDerivation;
                case 1:
                  return ds(t[0]);
                case 2:
                  return ds(t[0], t[1])
              }
            }(t);
            if (!n) return wn(!1);
            n.isTracing === mo.NONE && console.log("[mobx.trace] '" + n.name + "' tracing enabled");
            n.isTracing = i ? mo.BREAK : mo.LOG
          }(this, t)
      }, t
    }();
    var ir = 100,
      nr = function(t) {
        return t()
      };

    function or() {
      $o.inBatch > 0 || $o.isRunningReactions || nr(rr)
    }

    function rr() {
      $o.isRunningReactions = !0;
      for (var t = $o.pendingReactions, e = 0; t.length > 0;) {
        ++e === ir && (console.error("Reaction doesn't converge to a stable state after " + ir + " iterations. Probably there is a cycle in the reactive function: " + t[0]), t.splice(0));
        for (var i = t.splice(0), n = 0, o = i.length; n < o; n++) i[n].runReaction()
      }
      $o.isRunningReactions = !1
    }
    var sr = Sn("Reaction", er);

    function ar() {
      return !!$o.spyListeners.length
    }

    function hr(t) {
      if ($o.spyListeners.length)
        for (var e = $o.spyListeners, i = 0, n = e.length; i < n; i++) e[i](t)
    }

    function cr(t) {
      hr(Xn(Xn({}, t), {
        spyReportStart: !0
      }))
    }
    var ur = {
      spyReportEnd: !0
    };

    function lr(t) {
      hr(t ? Xn(Xn({}, t), {
        spyReportEnd: !0
      }) : ur)
    }

    function dr() {
      wn(!1)
    }

    function pr(t) {
      return function(e, i, n) {
        if (n) {
          if (n.value) return {
            value: Oo(t, n.value),
            enumerable: !1,
            configurable: !0,
            writable: !0
          };
          var o = n.initializer;
          return {
            enumerable: !1,
            configurable: !0,
            writable: !0,
            initializer: function() {
              return Oo(t, o.call(this))
            }
          }
        }
        return function(t) {
          return function(e, i, n) {
            Object.defineProperty(e, i, {
              configurable: !0,
              enumerable: !1,
              get: function() {},
              set: function(e) {
                _n(this, i, fr(t, e))
              }
            })
          }
        }(t).apply(this, arguments)
      }
    }
    var fr = function(t, e, i, n) {
      return 1 === arguments.length && "function" == typeof t ? Oo(t.name || "<unnamed action>", t) : 2 === arguments.length && "function" == typeof e ? Oo(t, e) : 1 === arguments.length && "string" == typeof t ? pr(t) : !0 !== n ? pr(e).apply(null, arguments) : void(t[e] = Oo(t.name || e, i.value))
    };

    function gr(t, e, i) {
      _n(t, e, Oo(e, i.bind(t)))
    }

    function mr(t, e) {
      void 0 === e && (e = mn);
      var i, n = e && e.name || t.name || "Autorun@" + bn();
      if (!e.scheduler && !e.delay) i = new er(n, (function() {
        this.track(s)
      }), e.onError, e.requiresObservable);
      else {
        var o = vr(e),
          r = !1;
        i = new er(n, (function() {
          r || (r = !0, o((function() {
            r = !1, i.isDisposed || i.track(s)
          })))
        }), e.onError, e.requiresObservable)
      }

      function s() {
        t(i)
      }
      return i.schedule(), i.getDisposer()
    }
    fr.bound = function(t, e, i, n) {
      return !0 === n ? (gr(t, e, i.value), null) : i ? {
        configurable: !0,
        enumerable: !1,
        get: function() {
          return gr(this, e, i.value || i.initializer.call(this)), this[e]
        },
        set: dr
      } : {
        enumerable: !1,
        configurable: !0,
        set: function(t) {
          gr(this, e, t)
        },
        get: function() {}
      }
    };
    var yr = function(t) {
      return t()
    };

    function vr(t) {
      return t.scheduler ? t.scheduler : t.delay ? function(e) {
        return setTimeout(e, t.delay)
      } : yr
    }

    function br(t, e, i) {
      void 0 === i && (i = mn), "boolean" == typeof i && (i = {
        fireImmediately: i
      });
      var n, o, r, s = i.name || "Reaction@" + bn(),
        a = fr(s, i.onError ? (n = i.onError, o = e, function() {
          try {
            return o.apply(this, arguments)
          } catch (t) {
            n.call(this, t)
          }
        }) : e),
        h = !i.scheduler && !i.delay,
        c = vr(i),
        u = !0,
        l = !1,
        d = i.compareStructural ? qn.structural : i.equals || qn.default,
        p = new er(s, (function() {
          u || h ? f() : l || (l = !0, c(f))
        }), i.onError, i.requiresObservable);

      function f() {
        if (l = !1, !p.isDisposed) {
          var e = !1;
          p.track((function() {
            var i = t(p);
            e = u || !d(r, i), r = i
          })), u && i.fireImmediately && a(r, p), u || !0 !== e || a(r, p), u && (u = !1)
        }
      }
      return p.schedule(), p.getDisposer()
    }

    function wr(t, e, i) {
      return xr("onBecomeUnobserved", t, e, i)
    }

    function xr(t, e, i, n) {
      var o = "function" == typeof n ? ds(e, i) : ds(e),
        r = "function" == typeof n ? n : i,
        s = o[t];
      return "function" != typeof s ? wn(!1) : (o[t] = function() {
        s.call(this), r.call(this)
      }, function() {
        o[t] = s
      })
    }

    function Tr(t, e, i, n) {
      var o = (n = ro(n)).defaultDecorator || (!1 === n.deep ? co : ao);
      Qn(t), rs(t, n.name, o.enhancer), Ko();
      try {
        for (var r = Object.getOwnPropertyNames(e), s = 0, a = r.length; s < a; s++) {
          var h = r[s],
            c = Object.getOwnPropertyDescriptor(e, h);
          0;
          var u = (i && h in i ? i[h] : c.get ? yo : o)(t, h, c, !0);
          u && Object.defineProperty(t, h, u)
        }
      } finally {
        Jo()
      }
      return t
    }

    function kr(t) {
      var e, i, n = {
        name: t.name
      };
      return t.observing && t.observing.length > 0 && (n.dependencies = (e = t.observing, i = [], e.forEach((function(t) {
        -1 === i.indexOf(t) && i.push(t)
      })), i).map(kr)), n
    }

    function Ir() {
      this.message = "FLOW_CANCELLED"
    }

    function Cr(t, e) {
      if (null == t) return !1;
      if (void 0 !== e) {
        if (ls(t)) {
          var i = t.$mobx;
          return i.values && !!i.values[e]
        }
        return !1
      }
      return ls(t) || !!t.$mobx || Vn(t) || sr(t) || Uo(t)
    }

    function _r(t) {
      return 1 !== arguments.length && wn(!1), Cr(t)
    }
    Ir.prototype = Object.create(Error.prototype);

    function Br(t, e) {
      void 0 === e && (e = void 0), Ko();
      try {
        return t.apply(e)
      } finally {
        Jo()
      }
    }

    function Sr(t, e, i) {
      return 1 === arguments.length || e && "object" == typeof e ? function(t, e) {
        0;
        var i, n = new Promise((function(n, o) {
          var r = Pr(t, n, Xn(Xn({}, e), {
            onError: o
          }));
          i = function() {
            r(), o("WHEN_CANCELLED")
          }
        }));
        return n.cancel = i, n
      }(t, e) : Pr(t, e, i || {})
    }

    function Pr(t, e, i) {
      var n;
      "number" == typeof i.timeout && (n = setTimeout((function() {
        if (!r.$mobx.isDisposed) {
          r();
          var t = new Error("WHEN_TIMEOUT");
          if (!i.onError) throw t;
          i.onError(t)
        }
      }), i.timeout)), i.name = i.name || "When@" + bn();
      var o = Oo(i.name + "-effect", e),
        r = mr((function(e) {
          t() && (e.dispose(), n && clearTimeout(n), o())
        }), i);
      return r
    }

    function Dr(t) {
      return void 0 !== t.interceptors && t.interceptors.length > 0
    }

    function Mr(t, e) {
      var i = t.interceptors || (t.interceptors = []);
      return i.push(e), Tn((function() {
        var t = i.indexOf(e); - 1 !== t && i.splice(t, 1)
      }))
    }

    function Fr(t, e) {
      var i = Bo();
      try {
        var n = t.interceptors;
        if (n)
          for (var o = 0, r = n.length; o < r && (xn(!(e = n[o](e)) || e.type, "Intercept handlers should return nothing or a change object"), e); o++);
        return e
      } finally {
        So(i)
      }
    }

    function Er(t) {
      return void 0 !== t.changeListeners && t.changeListeners.length > 0
    }

    function Lr(t, e) {
      var i = t.changeListeners || (t.changeListeners = []);
      return i.push(e), Tn((function() {
        var t = i.indexOf(e); - 1 !== t && i.splice(t, 1)
      }))
    }

    function Or(t, e) {
      var i = Bo(),
        n = t.changeListeners;
      if (n) {
        for (var o = 0, r = (n = n.slice()).length; o < r; o++) n[o](e);
        So(i)
      }
    }
    var Rr, Gr, Ar, Nr, jr = (Rr = !1, Gr = {}, Object.defineProperty(Gr, "0", {
        set: function() {
          Rr = !0
        }
      }), Object.create(Gr)[0] = 1, !1 === Rr),
      Vr = 0,
      Ur = function() {};
    Ar = Ur, Nr = Array.prototype, void 0 !== Object.setPrototypeOf ? Object.setPrototypeOf(Ar.prototype, Nr) : void 0 !== Ar.prototype.__proto__ ? Ar.prototype.__proto__ = Nr : Ar.prototype = Nr, Object.isFrozen(Array) && ["constructor", "push", "shift", "concat", "pop", "unshift", "replace", "find", "findIndex", "splice", "reverse", "sort"].forEach((function(t) {
      Object.defineProperty(Ur.prototype, t, {
        configurable: !0,
        writable: !0,
        value: Array.prototype[t]
      })
    }));
    var Wr = function() {
        function t(t, e, i, n) {
          this.array = i, this.owned = n, this.values = [], this.lastKnownLength = 0, this.atom = new jn(t || "ObservableArray@" + bn()), this.enhancer = function(i, n) {
            return e(i, n, t + "[..]")
          }
        }
        return t.prototype.dehanceValue = function(t) {
          return void 0 !== this.dehancer ? this.dehancer(t) : t
        }, t.prototype.dehanceValues = function(t) {
          return void 0 !== this.dehancer && t.length > 0 ? t.map(this.dehancer) : t
        }, t.prototype.intercept = function(t) {
          return Mr(this, t)
        }, t.prototype.observe = function(t, e) {
          return void 0 === e && (e = !1), e && t({
            object: this.array,
            type: "splice",
            index: 0,
            added: this.values.slice(),
            addedCount: this.values.length,
            removed: [],
            removedCount: 0
          }), Lr(this, t)
        }, t.prototype.getArrayLength = function() {
          return this.atom.reportObserved(), this.values.length
        }, t.prototype.setArrayLength = function(t) {
          if ("number" != typeof t || t < 0) throw new Error("[mobx.array] Out of range: " + t);
          var e = this.values.length;
          if (t !== e)
            if (t > e) {
              for (var i = new Array(t - e), n = 0; n < t - e; n++) i[n] = void 0;
              this.spliceWithArray(e, 0, i)
            } else this.spliceWithArray(t, e - t)
        }, t.prototype.updateArrayLength = function(t, e) {
          if (t !== this.lastKnownLength) throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");
          this.lastKnownLength += e, e > 0 && t + e + 1 > Vr && Yr(t + e + 1)
        }, t.prototype.spliceWithArray = function(t, e, i) {
          var n = this;
          ko(this.atom);
          var o = this.values.length;
          if (void 0 === t ? t = 0 : t > o ? t = o : t < 0 && (t = Math.max(0, o + t)), e = 1 === arguments.length ? o - t : null == e ? 0 : Math.max(0, Math.min(e, o - t)), void 0 === i && (i = gn), Dr(this)) {
            var r = Fr(this, {
              object: this.array,
              type: "splice",
              index: t,
              removedCount: e,
              added: i
            });
            if (!r) return gn;
            e = r.removedCount, i = r.added
          }
          i = 0 === i.length ? i : i.map((function(t) {
            return n.enhancer(t, void 0)
          }));
          var s = i.length - e;
          this.updateArrayLength(o, s);
          var a = this.spliceItemsIntoValues(t, e, i);
          return 0 === e && 0 === i.length || this.notifyArraySplice(t, i, a), this.dehanceValues(a)
        }, t.prototype.spliceItemsIntoValues = function(t, e, i) {
          var n;
          if (i.length < 1e4) return (n = this.values).splice.apply(n, zn([t, e], i));
          var o = this.values.slice(t, t + e);
          return this.values = this.values.slice(0, t).concat(i, this.values.slice(t + e)), o
        }, t.prototype.notifyArrayChildUpdate = function(t, e, i) {
          var n = !this.owned && ar(),
            o = Er(this),
            r = o || n ? {
              object: this.array,
              type: "update",
              index: t,
              newValue: e,
              oldValue: i
            } : null;
          n && cr(Xn(Xn({}, r), {
            name: this.atom.name
          })), this.atom.reportChanged(), o && Or(this, r), n && lr()
        }, t.prototype.notifyArraySplice = function(t, e, i) {
          var n = !this.owned && ar(),
            o = Er(this),
            r = o || n ? {
              object: this.array,
              type: "splice",
              index: t,
              removed: i,
              added: e,
              removedCount: i.length,
              addedCount: e.length
            } : null;
          n && cr(Xn(Xn({}, r), {
            name: this.atom.name
          })), this.atom.reportChanged(), o && Or(this, r), n && lr()
        }, t
      }(),
      qr = function(t) {
        function e(e, i, n, o) {
          void 0 === n && (n = "ObservableArray@" + bn()), void 0 === o && (o = !1);
          var r = t.call(this) || this,
            s = new Wr(n, i, r, o);
          if (Bn(r, "$mobx", s), e && e.length) {
            var a = Go(!0);
            r.spliceWithArray(0, 0, e), Ao(a)
          }
          return jr && Object.defineProperty(s.array, "0", Hr), r
        }
        return $n(e, t), e.prototype.intercept = function(t) {
          return this.$mobx.intercept(t)
        }, e.prototype.observe = function(t, e) {
          return void 0 === e && (e = !1), this.$mobx.observe(t, e)
        }, e.prototype.clear = function() {
          return this.splice(0)
        }, e.prototype.concat = function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          return this.$mobx.atom.reportObserved(), Array.prototype.concat.apply(this.peek(), t.map((function(t) {
            return Kr(t) ? t.peek() : t
          })))
        }, e.prototype.replace = function(t) {
          return this.$mobx.spliceWithArray(0, this.$mobx.values.length, t)
        }, e.prototype.toJS = function() {
          return this.slice()
        }, e.prototype.toJSON = function() {
          return this.toJS()
        }, e.prototype.peek = function() {
          return this.$mobx.atom.reportObserved(), this.$mobx.dehanceValues(this.$mobx.values)
        }, e.prototype.find = function(t, e, i) {
          void 0 === i && (i = 0);
          var n = this.findIndex.apply(this, arguments);
          return -1 === n ? void 0 : this.get(n)
        }, e.prototype.findIndex = function(t, e, i) {
          void 0 === i && (i = 0);
          for (var n = this.peek(), o = n.length, r = i; r < o; r++)
            if (t.call(e, n[r], r, this)) return r;
          return -1
        }, e.prototype.splice = function(t, e) {
          for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
          switch (arguments.length) {
            case 0:
              return [];
            case 1:
              return this.$mobx.spliceWithArray(t);
            case 2:
              return this.$mobx.spliceWithArray(t, e)
          }
          return this.$mobx.spliceWithArray(t, e, i)
        }, e.prototype.spliceWithArray = function(t, e, i) {
          return this.$mobx.spliceWithArray(t, e, i)
        }, e.prototype.push = function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          var i = this.$mobx;
          return i.spliceWithArray(i.values.length, 0, t), i.values.length
        }, e.prototype.pop = function() {
          return this.splice(Math.max(this.$mobx.values.length - 1, 0), 1)[0]
        }, e.prototype.shift = function() {
          return this.splice(0, 1)[0]
        }, e.prototype.unshift = function() {
          for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
          var i = this.$mobx;
          return i.spliceWithArray(0, 0, t), i.values.length
        }, e.prototype.reverse = function() {
          var t = this.slice();
          return t.reverse.apply(t, arguments)
        }, e.prototype.sort = function(t) {
          var e = this.slice();
          return e.sort.apply(e, arguments)
        }, e.prototype.remove = function(t) {
          var e = this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);
          return e > -1 && (this.splice(e, 1), !0)
        }, e.prototype.move = function(t, e) {
          function i(t) {
            if (t < 0) throw new Error("[mobx.array] Index out of bounds: " + t + " is negative");
            var e = this.$mobx.values.length;
            if (t >= e) throw new Error("[mobx.array] Index out of bounds: " + t + " is not smaller than " + e)
          }
          if (i.call(this, t), i.call(this, e), t !== e) {
            var n, o = this.$mobx.values;
            n = t < e ? zn(o.slice(0, t), o.slice(t + 1, e + 1), [o[t]], o.slice(e + 1)) : zn(o.slice(0, e), [o[t]], o.slice(e, t), o.slice(t + 1)), this.replace(n)
          }
        }, e.prototype.get = function(t) {
          var e = this.$mobx;
          if (e) {
            if (t < e.values.length) return e.atom.reportObserved(), e.dehanceValue(e.values[t]);
            console.warn("[mobx.array] Attempt to read an array index (" + t + ") that is out of bounds (" + e.values.length + "). Please check length first. Out of bound indices will not be tracked by MobX")
          }
        }, e.prototype.set = function(t, e) {
          var i = this.$mobx,
            n = i.values;
          if (t < n.length) {
            ko(i.atom);
            var o = n[t];
            if (Dr(i)) {
              var r = Fr(i, {
                type: "update",
                object: this,
                index: t,
                newValue: e
              });
              if (!r) return;
              e = r.newValue
            }(e = i.enhancer(e, o)) !== o && (n[t] = e, i.notifyArrayChildUpdate(t, e, o))
          } else {
            if (t !== n.length) throw new Error("[mobx.array] Index out of bounds, " + t + " is larger than " + n.length);
            i.spliceWithArray(t, 0, [e])
          }
        }, e
      }(Ur);
    Rn(qr.prototype, (function() {
        this.$mobx.atom.reportObserved();
        var t = this,
          e = 0;
        return Gn({
          next: function() {
            return e < t.length ? {
              value: t[e++],
              done: !1
            } : {
              done: !0,
              value: void 0
            }
          }
        })
      })), Object.defineProperty(qr.prototype, "length", {
        enumerable: !1,
        configurable: !0,
        get: function() {
          return this.$mobx.getArrayLength()
        },
        set: function(t) {
          this.$mobx.setArrayLength(t)
        }
      }), _n(qr.prototype, An(), "Array"), ["indexOf", "join", "lastIndexOf", "slice", "toString", "toLocaleString"].forEach((function(t) {
        var e = Array.prototype[t];
        xn("function" == typeof e, "Base function not defined on Array prototype: '" + t + "'"), _n(qr.prototype, t, (function() {
          return e.apply(this.peek(), arguments)
        }))
      })), ["every", "filter", "forEach", "map", "some"].forEach((function(t) {
        xn("function" == typeof Array.prototype[t], "Base function not defined on Array prototype: '" + t + "'"), _n(qr.prototype, t, (function(e, i) {
          var n = this,
            o = this.$mobx;
          return o.atom.reportObserved(), o.dehanceValues(o.values)[t]((function(t, o) {
            return e.call(i, t, o, n)
          }), i)
        }))
      })), ["reduce", "reduceRight"].forEach((function(t) {
        _n(qr.prototype, t, (function() {
          var e = this,
            i = this.$mobx;
          i.atom.reportObserved();
          var n = arguments[0];
          return arguments[0] = function(t, o, r) {
            return o = i.dehanceValue(o), n(t, o, r, e)
          }, i.values[t].apply(i.values, arguments)
        }))
      })),
      function(t, e) {
        for (var i = 0; i < e.length; i++) _n(t, e[i], t[e[i]])
      }(qr.prototype, ["constructor", "intercept", "observe", "clear", "concat", "get", "replace", "toJS", "toJSON", "peek", "find", "findIndex", "splice", "spliceWithArray", "push", "pop", "set", "shift", "unshift", "reverse", "sort", "remove", "move", "toString", "toLocaleString"]);
    var Hr = $r(0);

    function $r(t) {
      return {
        enumerable: !1,
        configurable: !1,
        get: function() {
          return this.get(t)
        },
        set: function(e) {
          this.set(t, e)
        }
      }
    }

    function Xr(t) {
      Object.defineProperty(qr.prototype, "" + t, $r(t))
    }

    function Yr(t) {
      for (var e = Vr; e < t; e++) Xr(e);
      Vr = t
    }
    Yr(1e3);
    var zr = Sn("ObservableArrayAdministration", Wr);

    function Kr(t) {
      return In(t) && zr(t.$mobx)
    }
    var Jr = {},
      Qr = function() {
        function t(t, e, i) {
          if (void 0 === e && (e = to), void 0 === i && (i = "ObservableMap@" + bn()), this.enhancer = e, this.name = i, this.$mobx = Jr, this._keysAtom = Un(this.name + ".keys()"), "function" != typeof Map) throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");
          this._data = new Map, this._hasMap = new Map, this.merge(t)
        }
        return t.prototype._has = function(t) {
          return this._data.has(t)
        }, t.prototype.has = function(t) {
          var e = this;
          if (!$o.trackingDerivation) return this._has(t);
          var i = this._hasMap.get(t);
          if (!i) {
            var n = i = new No(this._has(t), eo, this.name + "." + Zr(t) + "?", !1);
            this._hasMap.set(t, n), wr(n, (function() {
              return e._hasMap.delete(t)
            }))
          }
          return i.get()
        }, t.prototype.set = function(t, e) {
          var i = this._has(t);
          if (Dr(this)) {
            var n = Fr(this, {
              type: i ? "update" : "add",
              object: this,
              newValue: e,
              name: t
            });
            if (!n) return this;
            e = n.newValue
          }
          return i ? this._updateValue(t, e) : this._addValue(t, e), this
        }, t.prototype.delete = function(t) {
          var e = this;
          if ((ko(this._keysAtom), Dr(this)) && !(o = Fr(this, {
              type: "delete",
              object: this,
              name: t
            }))) return !1;
          if (this._has(t)) {
            var i = ar(),
              n = Er(this),
              o = n || i ? {
                type: "delete",
                object: this,
                oldValue: this._data.get(t).value,
                name: t
              } : null;
            return i && cr(Xn(Xn({}, o), {
              name: this.name,
              key: t
            })), Br((function() {
              e._keysAtom.reportChanged(), e._updateHasMapEntry(t, !1), e._data.get(t).setNewValue(void 0), e._data.delete(t)
            })), n && Or(this, o), i && lr(), !0
          }
          return !1
        }, t.prototype._updateHasMapEntry = function(t, e) {
          var i = this._hasMap.get(t);
          i && i.setNewValue(e)
        }, t.prototype._updateValue = function(t, e) {
          var i = this._data.get(t);
          if ((e = i.prepareNewValue(e)) !== $o.UNCHANGED) {
            var n = ar(),
              o = Er(this),
              r = o || n ? {
                type: "update",
                object: this,
                oldValue: i.value,
                name: t,
                newValue: e
              } : null;
            n && cr(Xn(Xn({}, r), {
              name: this.name,
              key: t
            })), i.setNewValue(e), o && Or(this, r), n && lr()
          }
        }, t.prototype._addValue = function(t, e) {
          var i = this;
          ko(this._keysAtom), Br((function() {
            var n = new No(e, i.enhancer, i.name + "." + Zr(t), !1);
            i._data.set(t, n), e = n.value, i._updateHasMapEntry(t, !0), i._keysAtom.reportChanged()
          }));
          var n = ar(),
            o = Er(this),
            r = o || n ? {
              type: "add",
              object: this,
              name: t,
              newValue: e
            } : null;
          n && cr(Xn(Xn({}, r), {
            name: this.name,
            key: t
          })), o && Or(this, r), n && lr()
        }, t.prototype.get = function(t) {
          return this.has(t) ? this.dehanceValue(this._data.get(t).get()) : this.dehanceValue(void 0)
        }, t.prototype.dehanceValue = function(t) {
          return void 0 !== this.dehancer ? this.dehancer(t) : t
        }, t.prototype.keys = function() {
          return this._keysAtom.reportObserved(), this._data.keys()
        }, t.prototype.values = function() {
          var t = this,
            e = this.keys();
          return Gn({
            next: function() {
              var i = e.next(),
                n = i.done,
                o = i.value;
              return {
                done: n,
                value: n ? void 0 : t.get(o)
              }
            }
          })
        }, t.prototype.entries = function() {
          var t = this,
            e = this.keys();
          return Gn({
            next: function() {
              var i = e.next(),
                n = i.done,
                o = i.value;
              return {
                done: n,
                value: n ? void 0 : [o, t.get(o)]
              }
            }
          })
        }, t.prototype.forEach = function(t, e) {
          var i = this;
          this._keysAtom.reportObserved(), this._data.forEach((function(n, o) {
            return t.call(e, i.get(o), o, i)
          }))
        }, t.prototype.merge = function(t) {
          var e = this;
          return ts(t) && (t = t.toJS()), Br((function() {
            var i = Go(!0);
            try {
              Cn(t) ? Object.keys(t).forEach((function(i) {
                return e.set(i, t[i])
              })) : Array.isArray(t) ? t.forEach((function(t) {
                var i = Yn(t, 2),
                  n = i[0],
                  o = i[1];
                return e.set(n, o)
              })) : Pn(t) ? t.constructor !== Map ? wn("Cannot initialize from classes that inherit from Map: " + t.constructor.name) : t.forEach((function(t, i) {
                return e.set(i, t)
              })) : null != t && wn("Cannot initialize map from " + t)
            } finally {
              Ao(i)
            }
          })), this
        }, t.prototype.clear = function() {
          var t = this;
          Br((function() {
            _o((function() {
              t._data.forEach((function(e, i) {
                return t.delete(i)
              }))
            }))
          }))
        }, t.prototype.replace = function(t) {
          var e = this;
          return Br((function() {
            var i = function(t) {
                if (Pn(t) || ts(t)) return t;
                if (Array.isArray(t)) return new Map(t);
                if (Cn(t)) {
                  var e = new Map;
                  for (var i in t) e.set(i, t[i]);
                  return e
                }
                return wn("Cannot convert to map from '" + t + "'")
              }(t),
              n = new Map,
              o = !1;
            if (Ln(e._data.keys(), (function(t) {
                if (!i.has(t))
                  if (e.delete(t)) o = !0;
                  else {
                    var r = e._data.get(t);
                    n.set(t, r)
                  }
              })), Ln(i.entries(), (function(t) {
                var i = Yn(t, 2),
                  r = i[0],
                  s = i[1],
                  a = e._data.has(r);
                if (e.set(r, s), e._data.has(r)) {
                  var h = e._data.get(r);
                  n.set(r, h), a || (o = !0)
                }
              })), !o)
              if (e._data.size !== n.size) e._keysAtom.reportChanged();
              else
                for (var r = e._data.keys(), s = n.keys(), a = r.next(), h = s.next(); !a.done;) {
                  if (a.value !== h.value) {
                    e._keysAtom.reportChanged();
                    break
                  }
                  a = r.next(), h = s.next()
                }
            e._data = n
          })), this
        }, Object.defineProperty(t.prototype, "size", {
          get: function() {
            return this._keysAtom.reportObserved(), this._data.size
          },
          enumerable: !0,
          configurable: !0
        }), t.prototype.toPOJO = function() {
          var t = this,
            e = {};
          return this.forEach((function(i, n) {
            return e["symbol" == typeof n ? n : Zr(n)] = t.get(n)
          })), e
        }, t.prototype.toJS = function() {
          return new Map(this)
        }, t.prototype.toJSON = function() {
          return this.toPOJO()
        }, t.prototype.toString = function() {
          var t = this;
          return this.name + "[{ " + Mn(this.keys()).map((function(e) {
            return Zr(e) + ": " + t.get(e)
          })).join(", ") + " }]"
        }, t.prototype.observe = function(t, e) {
          return Lr(this, t)
        }, t.prototype.intercept = function(t) {
          return Mr(this, t)
        }, t
      }();

    function Zr(t) {
      return t && t.toString ? t.toString() : new String(t).toString()
    }
    Rn(Qr.prototype, (function() {
      return this.entries()
    })), Bn(Qr.prototype, An(), "Map");
    var ts = Sn("ObservableMap", Qr),
      es = {},
      is = function() {
        function t(t, e, i) {
          if (void 0 === e && (e = to), void 0 === i && (i = "ObservableSet@" + bn()), this.name = i, this.$mobx = es, this._data = new Set, this._atom = Un(this.name), "function" != typeof Set) throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");
          this.enhancer = function(t, n) {
            return e(t, n, i)
          }, t && this.replace(t)
        }
        return t.prototype.dehanceValue = function(t) {
          return void 0 !== this.dehancer ? this.dehancer(t) : t
        }, t.prototype.clear = function() {
          var t = this;
          Br((function() {
            _o((function() {
              t._data.forEach((function(e) {
                t.delete(e)
              }))
            }))
          }))
        }, t.prototype.forEach = function(t, e) {
          var i = this;
          this._atom.reportObserved(), this._data.forEach((function(n) {
            t.call(e, n, n, i)
          }))
        }, Object.defineProperty(t.prototype, "size", {
          get: function() {
            return this._atom.reportObserved(), this._data.size
          },
          enumerable: !0,
          configurable: !0
        }), t.prototype.add = function(t) {
          var e = this;
          if ((ko(this._atom), Dr(this)) && !(o = Fr(this, {
              type: "add",
              object: this,
              newValue: t
            }))) return this;
          if (!this.has(t)) {
            Br((function() {
              e._data.add(e.enhancer(t, void 0)), e._atom.reportChanged()
            }));
            var i = ar(),
              n = Er(this),
              o = n || i ? {
                type: "add",
                object: this,
                newValue: t
              } : null;
            0, n && Or(this, o)
          }
          return this
        }, t.prototype.delete = function(t) {
          var e = this;
          if (Dr(this) && !(o = Fr(this, {
              type: "delete",
              object: this,
              oldValue: t
            }))) return !1;
          if (this.has(t)) {
            var i = ar(),
              n = Er(this),
              o = n || i ? {
                type: "delete",
                object: this,
                oldValue: t
              } : null;
            return Br((function() {
              e._atom.reportChanged(), e._data.delete(t)
            })), n && Or(this, o), !0
          }
          return !1
        }, t.prototype.has = function(t) {
          return this._atom.reportObserved(), this._data.has(this.dehanceValue(t))
        }, t.prototype.entries = function() {
          var t = 0,
            e = Mn(this.keys()),
            i = Mn(this.values());
          return Gn({
            next: function() {
              var n = t;
              return t += 1, n < i.length ? {
                value: [e[n], i[n]],
                done: !1
              } : {
                done: !0
              }
            }
          })
        }, t.prototype.keys = function() {
          return this.values()
        }, t.prototype.values = function() {
          this._atom.reportObserved();
          var t, e = this,
            i = 0;
          return void 0 !== this._data.values ? t = Mn(this._data.values()) : (t = [], this._data.forEach((function(e) {
            return t.push(e)
          }))), Gn({
            next: function() {
              return i < t.length ? {
                value: e.dehanceValue(t[i++]),
                done: !1
              } : {
                done: !0
              }
            }
          })
        }, t.prototype.replace = function(t) {
          var e = this;
          return ns(t) && (t = t.toJS()), Br((function() {
            var i = Go(!0);
            try {
              Array.isArray(t) || Dn(t) ? (e.clear(), t.forEach((function(t) {
                return e.add(t)
              }))) : null != t && wn("Cannot initialize set from " + t)
            } finally {
              Ao(i)
            }
          })), this
        }, t.prototype.observe = function(t, e) {
          return Lr(this, t)
        }, t.prototype.intercept = function(t) {
          return Mr(this, t)
        }, t.prototype.toJS = function() {
          return new Set(this)
        }, t.prototype.toString = function() {
          return this.name + "[ " + Mn(this.keys()).join(", ") + " ]"
        }, t
      }();
    Rn(is.prototype, (function() {
      return this.values()
    })), Bn(is.prototype, An(), "Set");
    var ns = Sn("ObservableSet", is),
      os = function() {
        function t(t, e, i) {
          this.target = t, this.name = e, this.defaultEnhancer = i, this.values = {}
        }
        return t.prototype.read = function(t, e) {
          if (this.target === t || (this.illegalAccess(t, e), this.values[e])) return this.values[e].get()
        }, t.prototype.write = function(t, e, i) {
          var n = this.target;
          n !== t && this.illegalAccess(t, e);
          var o = this.values[e];
          if (o instanceof jo) o.set(i);
          else {
            if (Dr(this)) {
              if (!(a = Fr(this, {
                  type: "update",
                  object: n,
                  name: e,
                  newValue: i
                }))) return;
              i = a.newValue
            }
            if ((i = o.prepareNewValue(i)) !== $o.UNCHANGED) {
              var r = Er(this),
                s = ar(),
                a = r || s ? {
                  type: "update",
                  object: n,
                  oldValue: o.value,
                  name: e,
                  newValue: i
                } : null;
              s && cr(Xn(Xn({}, a), {
                name: this.name,
                key: e
              })), o.setNewValue(i), r && Or(this, a), s && lr()
            }
          }
        }, t.prototype.remove = function(t) {
          if (this.values[t]) {
            var e = this.target;
            if (Dr(this))
              if (!(r = Fr(this, {
                  object: e,
                  name: t,
                  type: "remove"
                }))) return;
            try {
              Ko();
              var i = Er(this),
                n = ar(),
                o = this.values[t].get();
              this.keys && this.keys.remove(t), delete this.values[t], delete this.target[t];
              var r = i || n ? {
                type: "remove",
                object: e,
                oldValue: o,
                name: t
              } : null;
              n && cr(Xn(Xn({}, r), {
                name: this.name,
                key: t
              })), i && Or(this, r), n && lr()
            } finally {
              Jo()
            }
          }
        }, t.prototype.illegalAccess = function(t, e) {
          console.warn("Property '" + e + "' of '" + t + "' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")
        }, t.prototype.observe = function(t, e) {
          return Lr(this, t)
        }, t.prototype.intercept = function(t) {
          return Mr(this, t)
        }, t.prototype.getKeys = function() {
          var t = this;
          return void 0 === this.keys && (this.keys = new qr(Object.keys(this.values).filter((function(e) {
            return t.values[e] instanceof No
          })), eo, "keys(" + this.name + ")", !0)), this.keys.slice()
        }, t
      }();

    function rs(t, e, i) {
      void 0 === e && (e = ""), void 0 === i && (i = to);
      var n = t.$mobx;
      return n || (Cn(t) || (e = (t.constructor.name || "ObservableObject") + "@" + bn()), e || (e = "ObservableObject@" + bn()), Bn(t, "$mobx", n = new os(t, e, i)), n)
    }

    function ss(t, e, i, n) {
      var o = rs(t);
      if (Dr(o)) {
        var r = Fr(o, {
          object: t,
          name: e,
          type: "add",
          newValue: i
        });
        if (!r) return;
        i = r.newValue
      }
      i = (o.values[e] = new No(i, n, o.name + "." + e, !1)).value, Object.defineProperty(t, e, function(t) {
          return as[t] || (as[t] = {
            configurable: !0,
            enumerable: !0,
            get: function() {
              return this.$mobx.read(this, t)
            },
            set: function(e) {
              this.$mobx.write(this, t, e)
            }
          })
        }(e)), o.keys && o.keys.push(e),
        function(t, e, i, n) {
          var o = Er(t),
            r = ar(),
            s = o || r ? {
              type: "add",
              object: e,
              name: i,
              newValue: n
            } : null;
          r && cr(Xn(Xn({}, s), {
            name: t.name,
            key: i
          }));
          o && Or(t, s);
          r && lr()
        }(o, t, e, i)
    }
    var as = Object.create(null),
      hs = Object.create(null);

    function cs(t) {
      var e = t.$mobx;
      return e || (Qn(t), t.$mobx)
    }
    var us = Sn("ObservableObjectAdministration", os);

    function ls(t) {
      return !!In(t) && (Qn(t), us(t.$mobx))
    }

    function ds(t, e) {
      if ("object" == typeof t && null !== t) {
        if (Kr(t)) return void 0 !== e && wn(!1), t.$mobx.atom;
        if (ns(t)) return t.$mobx;
        if (ts(t)) {
          var i = t;
          return void 0 === e ? i._keysAtom : ((n = i._data.get(e) || i._hasMap.get(e)) || wn(!1), n)
        }
        var n;
        if (Qn(t), e && !t.$mobx && t[e], ls(t)) return e ? ((n = t.$mobx.values[e]) || wn(!1), n) : wn(!1);
        if (Vn(t) || Uo(t) || sr(t)) return t
      } else if ("function" == typeof t && sr(t.$mobx)) return t.$mobx;
      return wn(!1)
    }

    function ps(t, e) {
      return t || wn("Expecting some object"), void 0 !== e ? ps(ds(t, e)) : Vn(t) || Uo(t) || sr(t) || ts(t) || ns(t) ? t : (Qn(t), t.$mobx ? t.$mobx : void wn(!1))
    }
    var fs = Object.prototype.toString;

    function gs(t, e, i) {
      return void 0 === i && (i = -1), ms(t, e, i)
    }

    function ms(t, e, i, n, o) {
      if (t === e) return 0 !== t || 1 / t == 1 / e;
      if (null == t || null == e) return !1;
      if (t != t) return e != e;
      var r = typeof t;
      if ("function" !== r && "object" !== r && "object" != typeof e) return !1;
      t = ys(t), e = ys(e);
      var s = fs.call(t);
      if (s !== fs.call(e)) return !1;
      switch (s) {
        case "[object RegExp]":
        case "[object String]":
          return "" + t == "" + e;
        case "[object Number]":
          return +t != +t ? +e != +e : 0 === +t ? 1 / +t == 1 / e : +t === +e;
        case "[object Date]":
        case "[object Boolean]":
          return +t === +e;
        case "[object Symbol]":
          return "undefined" != typeof Symbol && Symbol.valueOf.call(t) === Symbol.valueOf.call(e)
      }
      var a = "[object Array]" === s;
      if (!a) {
        if ("object" != typeof t || "object" != typeof e) return !1;
        var h = t.constructor,
          c = e.constructor;
        if (h !== c && !("function" == typeof h && h instanceof h && "function" == typeof c && c instanceof c) && "constructor" in t && "constructor" in e) return !1
      }
      if (0 === i) return !1;
      i < 0 && (i = -1), o = o || [];
      for (var u = (n = n || []).length; u--;)
        if (n[u] === t) return o[u] === e;
      if (n.push(t), o.push(e), a) {
        if ((u = t.length) !== e.length) return !1;
        for (; u--;)
          if (!ms(t[u], e[u], i - 1, n, o)) return !1
      } else {
        var l = Object.keys(t),
          d = void 0;
        if (u = l.length, Object.keys(e).length !== u) return !1;
        for (; u--;)
          if (!vs(e, d = l[u]) || !ms(t[d], e[d], i - 1, n, o)) return !1
      }
      return n.pop(), o.pop(), !0
    }

    function ys(t) {
      return Kr(t) ? t.peek() : Pn(t) || ts(t) || Dn(t) || ns(t) ? Mn(t.entries()) : t
    }

    function vs(t, e) {
      return Object.prototype.hasOwnProperty.call(t, e)
    }
    "object" == typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ && __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({
      spy: function(t) {
        return $o.spyListeners.push(t), Tn((function() {
          $o.spyListeners = $o.spyListeners.filter((function(e) {
            return e !== t
          }))
        }))
      },
      extras: {
        getDebugName: function(t, e) {
          return (void 0 !== e ? ds(t, e) : ls(t) || ts(t) || ns(t) ? ps(t) : ds(t)).name
        }
      },
      $mobx: "$mobx"
    });
    var bs, ws = new(function() {
      function t() {
        this.gameInitialized = !1, this.isShow = !0, this.isOffline = !1, this.query = null, this.shareTicket = null, this.lastVideoTime = 0, this.lastTurntableVideoTime = 0, this.lastShareCoinTime = 0, this.lastSkinVideoTime = 0, this.lastCoinVideoTime = 0, this.skipSkinTry = !1, this.signSubscribeCheck = !0;
        var t = wx.getLaunchOptionsSync();
        this.query = t.query || {}, this.shareTicket = t.shareTicket
      }
      return o([po], t.prototype, "gameInitialized", void 0), t
    }());
    ! function(t) {
      t[t.normal = 1] = "normal", t[t.game = 2] = "game", t[t.revive = 3] = "revive", t[t.update = 4] = "update", t[t.skin = 5] = "skin", t[t.pk = 6] = "pk", t[t.pkLose = 7] = "pkLose", t[t.expertGame = 8] = "expertGame", t[t.expertGameFinish = 9] = "expertGameFinish", t[t.gameRelay = 10] = "gameRelay", t[t.coinPacket = 11] = "coinPacket", t[t.gold = 12] = "gold", t[t.friendCircle = 13] = "friendCircle", t[t.adCard = 14] = "adCard", t[t.collectMode = 15] = "collectMode", t[t.speedModePassed = 16] = "speedModePassed", t[t.speedModeFailed = 17] = "speedModeFailed", t[t.hpModeNoHpFailed = 18] = "hpModeNoHpFailed", t[t.hpModeFailed = 19] = "hpModeFailed", t[t.mutationMode = 20] = "mutationMode", t[t.punchMode = 21] = "punchMode", t[t.powerMode = 22] = "powerMode"
    }(bs || (bs = {}));
    var xs = {
        1: "",
        2: "",
        3: "",
        4: "",
        5: "",
        6: "",
        7: "",
        8: "",
        9: "",
        10: "",
        11: "",
        12: "",
        13: "",
        14: "",
        15: "",
        16: "",
        17: "",
        18: "",
        19: "",
        20: "",
        21: "",
        22: ""
      },
      Ts = "gapToGap",
      ks = "gapToBan",
      Is = "continuousPassScoreAdd",
      Cs = "crashBanScoreRate",
      _s = "createFloorNum",
      Bs = "createFloorByRemainNum",
      Ss = "floorScore",
      Ps = {
        1: "",
        2: "",
        3: "",
        4: "",
        5: "",
        6: "",
        7: "",
        8: "",
        9: "",
        10: "",
        11: "",
        12: "",
        13: "",
        14: "",
        15: ""
      },
      Ds = {
        101: "",
        102: "",
        103: "",
        104: "",
        105: "",
        106: "",
        107: "",
        108: "",
        109: "",
        110: "",
        111: "",
        112: "",
        113: "",
        114: "",
        115: "",
        116: "",
        117: "",
        118: "",
        203: "",
        204: "",
        205: "",
        206: "",
        207: "",
        208: ""
      };

    function Ms(t) {
      return function(e) {
        for (var i in t) this[i] = t[i](e[i])
      }
    }
    var Fs = function(t) {
      return Ls(t, Number)
    };

    function Es(t) {
      return function(e) {
        return e ? e.split(t).map(Number) : void 0
      }
    }

    function Ls(t, e) {
      return function(i) {
        return i ? i.split(t).map(e) : []
      }
    }

    function Os(t) {
      return void 0 !== t ? function(e) {
        return e ? Number(e) : t
      } : Number
    }

    function Rs(t) {
      if (t) return Number(t)
    }

    function Gs(t) {
      return t
    }
    var As = function() {
        function t(t) {
          var e, i;
          this.map = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new Ns(r);
              this.map[s.type] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
          this.createFloorByRemainNum = this.getBaseDataValue(Bs)[0], this.createFloorNum = this.getBaseDataValue(_s)[0], this.floorScore = this.getBaseDataValue(Ss)[0], this.crashBanScoreRate = this.getBaseDataValue(Cs)[0], this.continuousPassScoreAdd = this.getBaseDataValue(Is)[0], this.gapToGap = this.getBaseDataValue(Ts), this.gapToBan = this.getBaseDataValue(ks)
        }
        return t.prototype.getBaseData = function(t) {
          return this.map[t]
        }, t.prototype.getBaseDataValue = function(t) {
          return this.getBaseData(t).value
        }, t
      }(),
      Ns = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        type: String,
        value: Fs("|")
      }));
    ! function() {
      function t(t, e) {
        this.mean = t, this.deviation = e, this.randomSource = {
          next: function() {
            return Math.random()
          }
        }
      }
      t.prototype.next = function() {
        var t = 1 - this.randomSource.next(),
          e = 1 - this.randomSource.next();
        return Math.sqrt(-2 * Math.log(t)) * Math.cos(2 * Math.PI * e) * this.deviation + this.mean
      }
    }();

    function js(t, e, i) {
      void 0 === i && (i = !1);
      var n = e - t;
      return i && (n += 1), Math.floor(Math.random() * n + t)
    }

    function Vs(t, e) {
      var i = e - t;
      return Math.random() * i + t
    }

    function Us(t) {
      if (0 !== t.length) return t[Math.floor(Math.random() * t.length)]
    }

    function Ws(t) {
      var e = 0;
      t.forEach((function(t) {
        e += t > 0 ? Number(t) : 0
      }));
      for (var i = Math.random() * e, n = 0, o = t.length; n < o; n++) {
        if (i < t[n]) return n;
        i -= t[n]
      }
      return t.length - 1
    }
    var qs, Hs = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          if (i.block) {
            var n = i.block.split("|").map((function(t) {
              return t.split("-").map((function(t) {
                return parseInt(t, 10)
              }))
            }));
            i.blockIds = [], i.probList = [];
            for (var o = 0; o < n.length; o++) {
              var r = n[o];
              i.blockIds.push(r[0]), i.probList.push(r[1])
            }
            i.gapPropList = [], i.gapPropList[0] = i.gapToGapPower, i.gapPropList[1] = i.gapToPlanePower, i.gapPropList[2] = i.gapToBanPower, i.gapPropList[3] = 0, delete i.block
          }
          if (i.collectBlock) {
            n = i.collectBlock.split("|").map((function(t) {
              return t.split("-").map((function(t) {
                return parseInt(t, 10)
              }))
            }));
            i.collectBlockIds = [], i.collectProbList = [];
            for (o = 0; o < n.length; o++) {
              r = n[o];
              i.collectBlockIds.push(r[0]), i.collectProbList.push(r[1])
            }
            delete i.collectBlock
          }
          return i.collectFloorGap && (i.collectFloorGaps = i.collectFloorGap.split("|").map((function(t) {
            return t.split("-").map((function(t) {
              return parseInt(t, 10)
            }))
          })), delete i.collectFloorGap), i
        }
        return i(e, t), e.prototype.getRandomStageId = function() {
          var t = Ws(this.probList);
          return this.blockIds[t]
        }, e.prototype.getRandomCollectStageId = function() {
          var t = Ws(this.collectProbList);
          return this.collectBlockIds[t]
        }, e.prototype.getFloorGap = function(t) {
          var e = this.collectFloorGaps[t];
          return js(e[0], e[1], !0)
        }, e.prototype.getRandomGapToType = function() {
          return Ws(this.gapPropList)
        }, e
      }(Ms({
        id: Number,
        block: String,
        collectBlock: String,
        collectFloorGap: String,
        gapToGapPower: Rs,
        gapToBanPower: Rs,
        gapToPlanePower: Rs,
        diff: Os(1)
      })),
      $s = function() {
        function t(t) {
          var e, i;
          this.maxDiff = 1, this.diffMap = new Map;
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new Hs(r);
              this.diffMap.has(s.diff) || (this.diffMap.set(s.diff, []), s.diff > this.maxDiff && (this.maxDiff = s.diff)), this.diffMap.get(s.diff).push(s)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.containDiff = function(t) {
          return this.diffMap.has(t)
        }, t.prototype.getDifficultyGroup = function(t) {
          return this.diffMap.get(t)
        }, t
      }(),
      Xs = function() {
        function t(t) {
          var e, i;
          this.itemMap = {}, this.itemMap = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new Ys(r);
              this.itemMap[s.id] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getItem = function(t) {
          return this.itemMap[t]
        }, t
      }(),
      Ys = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        skin: Rs,
        gold: Rs,
        ticket: Rs,
        name: String,
        cost: Os(0)
      })),
      zs = function() {
        function t(t) {
          var e, i;
          this.itemMap = {}, this.itemMap = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new Ks(r);
              this.itemMap[s.skin] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getItem = function(t) {
          return this.itemMap[t]
        }, t
      }(),
      Ks = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        skin: Number,
        weight: Number
      })),
      Js = function() {
        function t(t) {
          this.modeMap = {};
          for (var e = 0; e < t.length; e++) {
            var i = t[e],
              n = new Qs(i);
            this.modeMap[n.type] = n
          }
        }
        return t.prototype.getMode = function(t) {
          return this.modeMap[t]
        }, t
      }(),
      Qs = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        name: String,
        type: Number,
        targetType: String,
        targetValue: Number,
        diffOrder: Fs("|")
      }));
    ! function(t) {
      t[t.Level1 = 1] = "Level1", t[t.Level2 = 2] = "Level2", t[t.Level3 = 3] = "Level3", t[t.Level4 = 4] = "Level4"
    }(qs || (qs = {}));
    var Zs = Math.PI / 180,
      ta = 180 / Math.PI,
      ea = .5 * Math.PI;

    function ia(t) {
      var e = t % 360;
      return e < 0 && (e += 360), e
    }
    var na = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          if (i.block) {
            var n = i.block.split("|").map((function(t) {
              return t.split("-").map((function(t) {
                return parseInt(t, 10)
              }))
            }));
            i.blockIds = [], i.probList = [];
            for (var o = 0; o < n.length; o++) {
              var r = n[o];
              i.blockIds.push(r[0]), i.probList.push(r[1])
            }
            i.gapPropList = [], i.gapPropList[0] = i.gapToGapPower, i.gapPropList[1] = i.gapToPlanePower, i.gapPropList[2] = i.gapToBanPower, delete i.block
          }
          return i.angleDiff < 0 && (i.angleDiff = ia(i.angleDiff)), i
        }
        return i(e, t), e.prototype.getRandomHardId = function() {
          var t = Ws(this.probList);
          return this.blockIds[t]
        }, e.prototype.getRandomGapToType = function() {
          return Ws(this.gapPropList)
        }, e
      }(Ms({
        floor: Number,
        gapToGapPower: Rs,
        gapToBanPower: Rs,
        gapToPlanePower: Rs,
        mapId: Os(0),
        stage: Rs,
        angleDiff: Os(0),
        block: Gs,
        diff: Os(qs.Level1)
      })),
      oa = function() {
        function t(t) {
          var e, i;
          this.difficultyMap = {}, this.difficultyList = [], this.floorDifficulty = {}, this.difficultyMap = {}, this.difficultyList = [];
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new na(r);
              this.difficultyMap[s.floor] = s, this.difficultyList.push(s)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
          this.difficultyList.sort((function(t, e) {
            return t.floor - e.floor
          })), this.difficultySize = this.difficultyList.length, this.floorDifficulty = {};
          for (var h = 0; h < 1e3; h++) this.getDifficulty(0, h)
        }
        return t.prototype.getDifficulty = function(t, e) {
          var i = this.floorDifficulty[e];
          if (i) return i;
          for (var n = 0; n < this.difficultySize; n++) {
            var o = this.difficultyList[n];
            if (e <= o.floor) {
              i = o;
              break
            }
            var r = this.difficultyList[n + 1];
            if (!r) {
              i = this.difficultyList[this.difficultySize - 1];
              break
            }
            if (e > o.floor && e < r.floor) {
              i = o;
              break
            }
          }
          return this.floorDifficulty[e] = i, i
        }, t
      }(),
      ra = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        name: String,
        finishFloor: Os(0)
      })),
      sa = function() {
        function t(t) {
          this.inviteWordMap = {}, this.inviteWorldTypeMap = {}, this.inviteWordMap = {};
          for (var e = 0; e < t.length; e++) {
            var i = new aa(t[e]);
            this.inviteWordMap[i.id] = i
          }
          for (var n in this.inviteWorldTypeMap = {}, this.inviteWordMap) {
            var o = this.inviteWordMap[n];
            this.inviteWorldTypeMap[o.type] || (this.inviteWorldTypeMap[o.type] = []), this.inviteWorldTypeMap[o.type].push(o)
          }
        }
        return t.prototype.getRandomInviteWordByType = function(t) {
          var e = this.inviteWorldTypeMap[t];
          return e && 0 !== e.length ? e[Math.floor(e.length * Math.random())] : this.getDefaultInviteWord()
        }, t.prototype.getDefaultInviteWord = function() {
          return {
            id: 1,
            type: 1,
            desc: "",
            image: "share1.png"
          }
        }, t.prototype.getCompareInviteWord = function(t) {
          if (t <= 0) return this.getRandomInviteWordByType(bs.pkLose);
          var e = this.inviteWorldTypeMap[bs.pk];
          if (!e || 0 === e.length) return this.getDefaultInviteWord();
          for (var i = 0, n = e.length; i < n; i++) {
            var o = e[i];
            if (o.diff && (o.diff[0] <= t && t <= o.diff[1])) return o
          }
          return e[e.length - 1]
        }, t.prototype.getInviteWord = function(t) {
          return this.inviteWordMap[t]
        }, t
      }(),
      aa = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        type: Number,
        desc: String,
        image: String,
        diff: Es("|"),
        mapId: Os(0)
      })),
      ha = function() {
        function t() {
          this.expertModeMap = {}, this.expertFloors = [0], this.expertMaxId = 0, this.difficultyMap = {}, this.difficultyList = [], this.floorDifficulty = {}, this.shareMap = {}, this.finishShareMap = {}, this.expertModeMap = {}
        }
        return t.prototype.fillModes = function(t) {
          this.expertMaxId = 0;
          for (var e = 0; e < t.length; e++) {
            var i = t[e],
              n = new ra(i);
            this.expertModeMap[n.id] = n, this.expertFloors[n.id] = n.finishFloor, this.expertMaxId = Math.max(this.expertMaxId, n.id)
          }
        }, t.prototype.isMapLoaded = function(t) {
          return !!this.difficultyList[t]
        }, t.prototype.loadExpertMap = function(t) {
          return r(this, void 0, void 0, (function() {
            var e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return this.isMapLoaded(t) ? [2] : [4, ue.getJSON(yi("configs/expert/expertDifficulty".concat(t, ".json")))];
                case 1:
                  return (e = i.sent()) && this._fillMapData(t, Gh(e)), [2]
              }
            }))
          }))
        }, t.prototype._fillMapData = function(t, e) {
          for (var i = e.shares, n = 0; n < i.length; n++) {
            var o = i[n];
            8 === Number(o.type) ? this.shareMap[t] = new aa(o) : this.finishShareMap[t] = new aa(o)
          }
          var r = e.stages;
          r && gh.fillData(r), this.difficultyList[t] || (this.difficultyList[t] = []);
          var s = this.difficultyList[t],
            a = e.difficulty;
          for (n = 0; n < a.length; n++) {
            (o = a[n]).mapId = t;
            var h = new na(o),
              c = o.floor + "_" + o.mapId;
            this.difficultyMap[c] = h, s.push(h)
          }
          s.sort((function(t, e) {
            return t.floor - e.floor
          }));
          for (n = 0; n < 200; n++) this.getDifficulty(t, n)
        }, t.prototype.getExpertShareWord = function(t) {
          return this.shareMap[t]
        }, t.prototype.getExpertFinishShareWord = function(t) {
          return this.finishShareMap[t]
        }, t.prototype.getExpertMode = function(t) {
          return this.expertModeMap[t]
        }, t.prototype.getDifficulty = function(t, e) {
          var i = this.floorDifficulty[t + "_" + e];
          if (i) return i;
          for (var n = this.difficultyList[t], o = 0, r = n.length; o < r; o++) {
            var s = n[o];
            if (e <= s.floor) {
              i = s;
              break
            }
            var a = n[o + 1];
            if (!a) {
              i = n[r - 1];
              break
            }
            if (e > s.floor && e < a.floor) {
              i = s;
              break
            }
          }
          return this.floorDifficulty[t + "_" + e] = i, i
        }, t
      }(),
      ca = function() {
        function t(t) {
          var e, i;
          this.itemMap = {}, this.itemMap = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new ua(r);
              this.itemMap[s.id] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getGift = function(t) {
          return this.itemMap[t]
        }, t
      }(),
      ua = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          if (i.items = [], i.item) {
            i.items = [];
            for (var n = i.item.split("-"), o = 0, r = n.length; o < r; o++) {
              var s = n[o];
              if (s) {
                var a = s.split("|"),
                  h = {
                    id: parseInt(a[0], 10),
                    num: parseInt(a[1], 10)
                  };
                i.items.push(h)
              }
            }
          }
          return i
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        gold: Rs,
        item: Gs,
        ticket: Os(0)
      })),
      la = function(t) {
        Object.assign(this, t)
      },
      da = function() {
        function t(t) {
          var e, i;
          this.floorDifficulty = {}, this.maxDiff = 1, this.diffMap = new Map;
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new na(r);
              this.diffMap.has(s.diff) || (this.diffMap.set(s.diff, []), s.diff > this.maxDiff && (this.maxDiff = s.diff)), this.diffMap.get(s.diff).push(s)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
          this.diffMap.forEach((function(t) {
            t.sort((function(t, e) {
              return t.floor - e.floor
            }))
          })), this.floorDifficulty = {}
        }
        return t.prototype.containDiff = function(t) {
          return this.diffMap.has(t)
        }, t.prototype.getDifficulty = function(t, e) {
          var i = t + "_" + e,
            n = this.floorDifficulty[i];
          if (n) return n;
          var o = this.diffMap.get(t);
          if (!o) return null;
          for (var r = o.length, s = 0; s < r; s++) {
            var a = o[s];
            if (e <= a.floor) {
              n = a;
              break
            }
            var h = o[s + 1];
            if (!h) {
              n = o[r - 1];
              break
            }
            if (e > a.floor && e < h.floor) {
              n = a;
              break
            }
          }
          return this.floorDifficulty[i] = n, n
        }, t
      }(),
      pa = function() {
        function t(t) {
          var e, i;
          this.itemMap = {}, this.skinItems = [], this.normalSkinItems = [], this.taskSkinItems = [], this.goldSkinItems = [], this.paintSkinItems = [], this.trailSkinItems = [], this.totalSkinCount = 0, this.itemMap = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new fa(r);
              this.itemMap[s.id] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
          for (var h in this.skinItems = [], this.normalSkinItems = [], this.taskSkinItems = [], this.goldSkinItems = [], this.paintSkinItems = [], this.trailSkinItems = [], this.itemMap) {
            var c = this.itemMap[h];
            if (4 === c.type) switch (this.skinItems.push(c), c.skinType) {
              case 0:
                this.normalSkinItems.push(c), 0 !== c.gold ? this.goldSkinItems.push(c) : this.taskSkinItems.push(c);
                break;
              case 1:
                this.paintSkinItems.push(c);
                break;
              case 2:
                this.trailSkinItems.push(c)
            }
          }
          this.skinItems.sort((function(t, e) {
            return t.sort - e.sort
          })), this.taskSkinItems.sort((function(t, e) {
            return t.sort - e.sort
          })), this.goldSkinItems.sort((function(t, e) {
            return t.sort - e.sort
          })), this.paintSkinItems.sort((function(t, e) {
            return t.sort - e.sort
          })), this.trailSkinItems.sort((function(t, e) {
            return t.sort - e.sort
          })), this.totalSkinCount = this.skinItems.length
        }
        return t.prototype.getSkins = function() {
          return this.skinItems
        }, t.prototype.getNormalSkinsByType = function(t) {
          return t ? this.goldSkinItems : this.taskSkinItems
        }, t.prototype.getNormalSkins = function() {
          return this.normalSkinItems
        }, t.prototype.getPaintSkins = function() {
          return this.paintSkinItems
        }, t.prototype.getTrailSkins = function() {
          return this.trailSkinItems
        }, t.prototype.getItem = function(t) {
          return this.itemMap[t]
        }, t
      }(),
      fa = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        type: Number,
        sort: Number,
        name: String,
        hide: Os(0),
        gold: Os(0),
        video: Os(0),
        skinType: Os(0),
        trial: Os(0),
        desc: Gs,
        minuteLimit: Rs
      })),
      ga = function() {
        function t(t) {
          var e, i;
          this.itemMap = {}, this.itemMap = {};
          var n = 1;
          try {
            for (var o = a(t), r = o.next(); !r.done; r = o.next()) {
              var s = r.value,
                h = new ma(s);
              this.itemMap[h.id] = h, n = Math.max(h.id, n)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              r && !r.done && (i = o.return) && i.call(o)
            } finally {
              if (e) throw e.error
            }
          }
          this.maxId = n
        }
        return t.prototype.getLimitGift = function(t) {
          return this.itemMap[t]
        }, t
      }(),
      ma = function(t) {
        function e(e) {
          return t.call(this, e) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        gifts: Fs("|"),
        name: Gs,
        cost: Number
      })),
      ya = function() {
        function t(t) {
          this.medalMap = {}, this.medalTypeMap = new Map;
          for (var e = 0; e < t.length; e++) {
            var i = t[e],
              n = Number(i.id);
            if (!this.medalMap[n]) {
              var o = new va(i);
              this.medalMap[o.id] = o, this.medalTypeMap.has(o.type) || this.medalTypeMap.set(o.type, []), this.medalTypeMap.get(o.type).push(o)
            }
          }
        }
        return t.prototype.getMedals = function(t) {
          return this.medalTypeMap.get(t)
        }, t.prototype.getLevel = function(t) {
          var e = this.getMedal(t);
          return this.getMedals(e.type).indexOf(e) + 1
        }, t.prototype.getMedal = function(t) {
          return this.medalMap[t]
        }, t
      }(),
      va = function(t) {
        function e(e) {
          return t.call(this, e) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        type: Number,
        rank: Fs("|")
      })),
      ba = function() {
        function t(t) {
          var e, i;
          this.floorDifficulty = {}, this.maxDiff = 1, this.diffMap = new Map;
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new na(r);
              this.diffMap.has(s.diff) || (this.diffMap.set(s.diff, []), s.diff > this.maxDiff && (this.maxDiff = s.diff)), this.diffMap.get(s.diff).push(s)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
          this.diffMap.forEach((function(t) {
            t.sort((function(t, e) {
              return t.floor - e.floor
            }))
          })), this.floorDifficulty = {}
        }
        return t.prototype.containDiff = function(t) {
          return this.diffMap.has(t)
        }, t.prototype.getDifficulty = function(t, e) {
          var i = t + "_" + e,
            n = this.floorDifficulty[i];
          if (n) return n;
          var o = this.diffMap.get(t);
          if (!o) return null;
          for (var r = o.length, s = 0; s < r; s++) {
            var a = o[s];
            if (e <= a.floor) {
              n = a;
              break
            }
            var h = o[s + 1];
            if (!h) {
              n = o[r - 1];
              break
            }
            if (e > a.floor && e < h.floor) {
              n = a;
              break
            }
          }
          return this.floorDifficulty[i] = n, n
        }, t
      }(),
      wa = function() {
        function t() {
          this.noticeMap = {}, this.noticeMap = {}
        }
        return t.prototype.fillData = function(t) {
          for (var e = 0; e < t.length; e++) {
            var i = new xa(t[e]);
            this.noticeMap[i.id] = i
          }
        }, t.prototype.getNotice = function(t) {
          return this.noticeMap[t]
        }, t
      }(),
      xa = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          if (i.limitTime) {
            var n = i.limitTime.split("|");
            i.startTime = new Date(n[0]).getTime(), i.endTime = new Date(n[1]).getTime(), delete i.limitTime
          }
          return i
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        type: Number,
        text: String,
        limitTime: Gs
      })),
      Ta = function() {
        function t(t) {
          var e, i;
          this.floorDifficulty = {}, this.maxDiff = 1, this.diffMap = new Map;
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new na(r);
              this.diffMap.has(s.diff) || (this.diffMap.set(s.diff, []), s.diff > this.maxDiff && (this.maxDiff = s.diff)), this.diffMap.get(s.diff).push(s)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
          this.diffMap.forEach((function(t) {
            t.sort((function(t, e) {
              return t.floor - e.floor
            }))
          })), this.floorDifficulty = {}
        }
        return t.prototype.containDiff = function(t) {
          return this.diffMap.has(t)
        }, t.prototype.getDifficulty = function(t, e) {
          var i = t + "_" + e,
            n = this.floorDifficulty[i];
          if (n) return n;
          var o = this.diffMap.get(t);
          if (!o) return null;
          for (var r = o.length, s = 0; s < r; s++) {
            var a = o[s];
            if (e <= a.floor) {
              n = a;
              break
            }
            var h = o[s + 1];
            if (!h) {
              n = o[r - 1];
              break
            }
            if (e > a.floor && e < h.floor) {
              n = a;
              break
            }
          }
          return this.floorDifficulty[i] = n, n
        }, t
      }();

    function ka(t) {
      return window.seedrandom(t)
    }

    function Ia(t, e, i, n) {
      void 0 === n && (n = !1);
      var o = e - t;
      return n && (o += 1), Math.floor(i() * o + t)
    }

    function Ca(t, e) {
      if (0 !== t.length) return t[Math.floor(e() * t.length)]
    }
    var _a, Ba, Sa, Pa = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          return 1 === i.type ? i.rules = [i.stage.split("|").map((function(t) {
            return t.split("_").map((function(t) {
              return t.split("-").map((function(t) {
                return 0 === t.indexOf("*") ? -parseFloat(t.slice(1)) : parseFloat(t)
              }))
            }))
          }))] : 2 === i.type && (i.rules = i.stage.split("+").map((function(t) {
            return t.split("|").map((function(t) {
              return t.split("_").map((function(t) {
                return t.split("-").map((function(t) {
                  return 0 === t.indexOf("*") ? -parseFloat(t.slice(1)) : parseFloat(t)
                }))
              }))
            }))
          }))), delete i.stage, i
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        type: Number,
        group: Number,
        stage: Gs,
        angles: Es("+")
      })),
      Da = function() {
        function t(t) {
          this.groupMap = {}, this.groupMap = {};
          for (var e = 0; e < t.length; e++) {
            var i = t[e],
              n = new Pa(i),
              o = 1e3 * n.group + n.type;
            this.groupMap[o] || (this.groupMap[o] = []), this.groupMap[o].push(n)
          }
        }
        return t.prototype.getDataByGroup = function(t, e, i) {
          var n = 1e3 * e + t,
            o = this.groupMap[n];
          return o ? Ca(o, i) : null
        }, t
      }(),
      Ma = function(t) {
        function e(e) {
          return t.call(this, e) || this
        }
        return i(e, t), e
      }(Ms({
        period: Number,
        type: Number,
        stageGroup: Number,
        num: Number,
        anglesGroup: Rs,
        groupAngle: Es("-"),
        diff: Os(qs.Level1)
      })),
      Fa = function() {
        function t(t) {
          this.maxDiff = 1, this.diffMap = new Map;
          for (var e = 0; e < t.length; e++) {
            var i = new Ma(t[e]);
            this.diffMap.has(i.diff) || (this.diffMap.set(i.diff, []), i.diff > this.maxDiff && (this.maxDiff = i.diff)), this.diffMap.get(i.diff).push(i)
          }
        }
        return t.prototype.containDiff = function(t) {
          return this.diffMap.has(t)
        }, t.prototype.getArray = function(t) {
          return this.diffMap.get(t)
        }, t
      }(),
      Ea = function() {
        function t(t) {
          var e, i;
          this.itemMap = {}, this.itemMap = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new La(r);
              this.itemMap[s.id] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getItem = function(t) {
          return this.itemMap[t]
        }, t
      }(),
      La = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        giftId: Number,
        alterGiftId: Os(0)
      })),
      Oa = function() {
        function t(t) {
          var e, i;
          this.skinMap = {}, this.skinMap = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new Ra(r);
              this.skinMap[s.id] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getItem = function(t) {
          return this.skinMap[t]
        }, t
      }(),
      Ra = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        name: String,
        scale: Number,
        color: Gs,
        transparent: Os(0),
        model: Gs,
        mtl: Gs,
        texture: Gs,
        rotate: (Ba = "x", Ba ? function(t) {
          return t ? String(t) : Ba
        } : String),
        rotationY: Os(0),
        trailColors: (_a = ",", Ls(_a, String)),
        trailAge: Os(.4),
        animation: Os(0),
        followOffset: Os(0),
        piece: Gs,
        follow: Gs,
        paint: Gs,
        frames: Es("|"),
        trailScale: Os(0),
        shininess: Os(50)
      })),
      Ga = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          return 1 === i.type ? i.rules = [i.stage.split("|").map((function(t) {
            return t.split("_").map((function(t) {
              return t.split("-").map((function(t) {
                return 0 === t.indexOf("*") ? -parseFloat(t.slice(1)) : parseFloat(t)
              }))
            }))
          }))] : 2 === i.type && (i.rules = i.stage.split("+").map((function(t) {
            return t.split("|").map((function(t) {
              return t.split("_").map((function(t) {
                return t.split("-").map((function(t) {
                  return 0 === t.indexOf("*") ? -parseFloat(t.slice(1)) : parseFloat(t)
                }))
              }))
            }))
          }))), delete i.stage, i
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        type: Number,
        group: Number,
        stage: Gs,
        angles: Es("+"),
        diff: Os(qs.Level1)
      })),
      Aa = function() {
        function t(t) {
          this.groupMap = {}, this.groupMap = {};
          for (var e = 0; e < t.length; e++) {
            var i = t[e],
              n = new Ga(i),
              o = 1e3 * n.group + n.type;
            this.groupMap[o] || (this.groupMap[o] = []), this.groupMap[o].push(n)
          }
        }
        return t.prototype.getDataByGroup = function(t, e, i) {
          var n = 1e3 * e + t,
            o = this.groupMap[n];
          return o ? Ca(o, i) : null
        }, t
      }(),
      Na = function(t) {
        function e(e) {
          return t.call(this, e) || this
        }
        return i(e, t), e
      }(Ms({
        period: Number,
        type: Number,
        stageGroup: Number,
        num: Number,
        anglesGroup: Rs,
        groupAngle: Es("-"),
        diff: Os(qs.Level1)
      })),
      ja = function() {
        function t(t) {
          this.maxDiff = 1, this.diffMap = new Map;
          for (var e = 0; e < t.length; e++) {
            var i = new Na(t[e]);
            this.diffMap.has(i.diff) || (this.diffMap.set(i.diff, []), i.diff > this.maxDiff && (this.maxDiff = i.diff)), this.diffMap.get(i.diff).push(i)
          }
        }
        return t.prototype.containDiff = function(t) {
          return this.diffMap.has(t)
        }, t.prototype.getArray = function(t) {
          return this.diffMap.get(t)
        }, t
      }(),
      Va = function() {
        function t() {
          this.stageMap = {}, this.stageList = [], this.stageMap = {}
        }
        return t.prototype.fillData = function(t) {
          for (var e = 0; e < t.length; e++) {
            var i = t[e],
              n = Number(i.id);
            if (!this.stageMap[n]) {
              var o = new Ua(i);
              this.stageMap[o.id] = o, this.stageList[o.hard] || (this.stageList[o.hard] = []), this.stageList[o.hard].push(o)
            }
          }
        }, t.prototype.getRandomStageByHard = function(t) {
          var e = this.stageList[t];
          return e ? e[Math.floor(Math.random() * e.length)] : (DEVELOP && console.error("stageConfighard:" + t), this.getStage(1))
        }, t.prototype.getStage = function(t) {
          return this.stageMap[t]
        }, t
      }(),
      Ua = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          (i.rules = i.stage.split("+").map((function(t) {
            return t.split("|").map((function(t) {
              return t.split("_").map((function(t) {
                return t.split("-").map((function(t) {
                  return 0 === t.indexOf("*") ? -parseFloat(t.slice(1)) : parseFloat(t)
                }))
              }))
            }))
          })), delete i.stage, i.collect) && (i.collects = i.collect.split("|").map((function(t) {
            return t.split("_").map((function(t) {
              return t.split("-").map((function(t) {
                return 0 === t.indexOf("*") ? -parseFloat(t.slice(1)) : parseFloat(t)
              }))
            }))
          })), delete i.collect);
          return i
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        hard: Number,
        stage: String,
        collect: Gs
      })),
      Wa = function() {
        function t(t) {
          var e, i;
          this.taskMap = {}, this.itemMap = {}, this.taskList = [], this.taskMap = {}, this.itemMap = {}, this.taskList = [];
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new qa(r);
              this.taskMap[s.id] = s, this.taskList.push(s), this.itemMap[s.item] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getTasks = function() {
          return this.taskList
        }, t.prototype.getTaskByItemId = function(t) {
          return this.itemMap[t]
        }, t.prototype.getTask = function(t) {
          return this.taskMap[t]
        }, t
      }(),
      qa = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        type: Number,
        value: Number,
        item: Number,
        des: String,
        condition: Os(0),
        showNeed: Os(0),
        hide: Os(0),
        getTip: Os(0)
      })),
      Ha = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        finishFloor: Os(0),
        openTime: Gs,
        show: Os(0)
      })),
      $a = function() {
        function t() {
          this.difficultyMap = {}, this.difficultyList = [], this.floorDifficulty = {}, this.challengeFloors = [0], this.challengeModeList = [], this.challengeModeMap = {}, this.difficultyList = [], this.floorDifficulty = {}
        }
        return t.prototype.fillData = function(t, e) {
          this.challengeModeList = [], this.challengeModeMap = {};
          for (var i = 0; i < t.length; i++) {
            if ((o = t[i]).finishFloor) {
              var n = new Ha(o);
              this.challengeModeMap[n.id] = n, this.challengeFloors[n.id] = n.finishFloor, this.challengeModeList.push(n)
            }
          }
          for (i = 0; i < e.length; i++) {
            var o = e[i],
              r = (n = new na(o), o.floor + "_" + o.mapId);
            this.difficultyMap[r] = n
          }
          for (var s in this.difficultyList = [], this.difficultyMap) {
            var a = this.difficultyMap[s];
            this.difficultyList[a.mapId] || (this.difficultyList[a.mapId] = []), this.difficultyList[a.mapId].push(a)
          }
          this.floorDifficulty = {};
          for (var h = 0; h < this.difficultyList.length; h++) {
            var c = this.difficultyList[h];
            if (c) {
              c.sort((function(t, e) {
                return t.floor - e.floor
              }));
              for (i = 0; i < 200; i++) this.getDifficulty(h, i)
            }
          }
        }, t.prototype.getChallengeModeList = function() {
          return this.challengeModeList
        }, t.prototype.getChallengeMode = function(t) {
          return this.challengeModeMap[t]
        }, t.prototype.getDifficulty = function(t, e) {
          var i = t + "_" + e,
            n = this.floorDifficulty[i];
          if (n) return n;
          for (var o = this.difficultyList[t], r = 0, s = o.length; r < s; r++) {
            var a = o[r];
            if (e <= a.floor) {
              n = a;
              break
            }
            var h = o[r + 1];
            if (!h) {
              n = o[s - 1];
              break
            }
            if (e > a.floor && e < h.floor) {
              n = a;
              break
            }
          }
          return this.floorDifficulty[i] = n, n
        }, t
      }(),
      Xa = function() {
        function t(t) {
          var e, i;
          this.map = {}, this.map = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new Ya(r);
              this.map[s.id] = s;
              var h = s.type + (s.default ? "_" + s.default : "");
              this.map[h] || (this.map[h] = []), this.map[h].push(s)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getDecorates = function(t, e) {
          return this.map[t]
        }, t.prototype.getDecorate = function(t) {
          return this.map[t]
        }, t
      }(),
      Ya = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          return i.position = i.default, i
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        type: String,
        default: Gs,
        name: String,
        model: String,
        mtl: String,
        positionFix: Es(","),
        rotationFix: Es(","),
        scaleFix: Es(",")
      })),
      za = function() {
        function t(t) {
          var e, i;
          this.map = {}, this.map = {}, this.maxLevel = 0, this.levels = [];
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new Ka(r);
              this.map[s.level] = s, s.level > this.maxLevel && (this.maxLevel = s.level), this.levels.push(s)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getTeamLevels = function() {
          return this.levels
        }, t.prototype.getTeamLevel = function(t) {
          return this.map[t]
        }, t
      }(),
      Ka = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        level: Number,
        memberMax: Number,
        needExp: Os(0)
      })),
      Ja = function() {
        function t(t) {
          var e, i;
          this.tasks = [];
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new Za(r);
              this.tasks.push(s)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getTasks = function() {
          var t = new Date(lh.dailyModeStartTime).getTime(),
            e = Je.curTime >= t;
          return this.tasks.filter((function(t) {
            return t.taskType !== Sa.DailyGame || e
          }))
        }, t
      }();
    ! function(t) {
      t[t.ClassicsGame = 1] = "ClassicsGame", t[t.DailyGame = 2] = "DailyGame", t[t.ExpertGame = 3] = "ExpertGame"
    }(Sa || (Sa = {}));
    var Qa, Za = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        taskType: Number,
        taskValue: Number,
        score: Number,
        teamExp: Number,
        contribution: Number
      })),
      th = function() {
        function t(t, e) {
          var i, n, o, r;
          this.rewards = [];
          try {
            for (var s = a(t), h = s.next(); !h.done; h = s.next()) {
              var c = h.value,
                u = new eh(c);
              this.rewards.push(u)
            }
          } catch (t) {
            i = {
              error: t
            }
          } finally {
            try {
              h && !h.done && (n = s.return) && n.call(s)
            } finally {
              if (i) throw i.error
            }
          }
          this.newRewards = [];
          try {
            for (var l = a(e), d = l.next(); !d.done; d = l.next()) {
              c = d.value, u = new eh(c);
              this.newRewards.push(u)
            }
          } catch (t) {
            o = {
              error: t
            }
          } finally {
            try {
              d && !d.done && (r = l.return) && r.call(l)
            } finally {
              if (o) throw o.error
            }
          }
        }
        return t.prototype.getRewards = function() {
          var t = new Date(lh.dailyModeStartTime).getTime();
          return Je.curTime >= t ? this.newRewards : this.rewards
        }, t
      }(),
      eh = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        needScore: Number,
        giftCoin: Rs,
        giftRevive: Rs
      })),
      ih = function() {
        function t(t) {
          var e, i;
          this.map = {}, this.map = {};
          try {
            for (var n = a(t), o = n.next(); !o.done; o = n.next()) {
              var r = o.value,
                s = new nh(r);
              this.map[s.taskType] = s
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }
        return t.prototype.getTask = function(t) {
          return this.map[t]
        }, t
      }(),
      nh = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e
      }(Ms({
        id: Number,
        taskType: Number,
        taskValue: Number,
        needCount: Number,
        giftExp: Number,
        giftCoupon: Number,
        giftContribution: Number
      })),
      oh = null,
      rh = null,
      sh = null,
      ah = null,
      hh = null,
      ch = null,
      uh = null,
      lh = null,
      dh = null,
      ph = null,
      fh = null,
      gh = new Va,
      mh = new wa,
      yh = new $a,
      vh = new ha,
      bh = null,
      wh = null,
      xh = null,
      Th = null,
      kh = null,
      Ih = null,
      Ch = null,
      _h = null,
      Bh = null,
      Sh = null,
      Ph = null,
      Dh = null,
      Mh = null,
      Fh = null,
      Eh = !1,
      Lh = !1,
      Oh = !1;

    function Rh(t, e) {
      if ("object" != typeof t) return t;
      for (var i in t) Array.isArray(t) ? t[i] = Rh(t[i], e) : t.hasOwnProperty(i) && e[i] && (t[e[i]] = Rh(t[i], e), delete t[i]);
      return t
    }

    function Gh(t) {
      return t && t.__v && t.__k ? Rh(t.__v, t.__k) : t
    }

    function Ah() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return Oh ? [2, Promise.resolve()] : [4, Si("notice")];
            case 1:
              return (t = e.sent()) && (mh.fillData(t.notice), Oh = !0), [2]
          }
        }))
      }))
    }

    function Nh(t, e) {
      try {
        wx.setStorageSync(t, e)
      } catch (t) {}
    }

    function jh(t) {
      try {
        return PIXI.Sprite.fromFrame(t)
      } catch (t) {
        return new PIXI.Sprite
      }
    }

    function Vh(t) {
      try {
        return PIXI.Texture.fromFrame(t)
      } catch (t) {
        return PIXI.Texture.EMPTY
      }
    }

    function Uh(t) {
      return PIXI.Sprite.fromImage(t)
    }

    function Wh(t) {
      var e = new PIXI.Sprite;
      return e.texture = PIXI.Texture.fromImage(t), e
    }

    function qh(t, e, i, n, o) {
      var r = Vh(t);
      return new PIXI.mesh.NineSlicePlane(r, e, i, n, o)
    }

    function Hh(t, e, i) {
      void 0 === i && (i = !0);
      var n = qh("popup_bg.png", 30, 30, 30, 30);
      return n.width = t, n.height = e, n.interactive = i, n
    }

    function $h(t, e, i) {
      void 0 === i && (i = !0);
      var n = qh("bg_scale9.png", 30, 110, 30, 20);
      return n.width = t, n.height = e, n.interactive = i, n
    }

    function Xh(t, e, i, n, o) {
      return void 0 === n && (n = "left"), void 0 === o && (o = 26), new PIXI.Text(t, {
        fill: e,
        fontWeight: i ? "bold" : "normal",
        align: n || "left",
        fontSize: o || 26
      })
    }

    function Yh(t, e, i, n, o, r, s) {
      return void 0 === r && (r = "left"), void 0 === s && (s = 5), new PIXI.Text(t, {
        fill: e,
        fontWeight: o ? "bold" : "normal",
        align: r || "left",
        wordWrap: !0,
        breakWords: !0,
        fontSize: n,
        wordWrapWidth: i,
        leading: s
      })
    }

    function zh(t, e, i, n) {
      return new PIXI.extras.BitmapText(t, {
        font: "".concat(e, "px DigitalSerial"),
        align: n || "left",
        tint: i || 16777215
      })
    }
    var Kh, Jh, Qh = function(t) {
        function e(e) {
          var i = t.call(this) || this,
            n = qh("bg_float.png", 25, 25, 25, 25);
          n.width = 680, n.height = 80, i.addChild(n);
          var o = new PIXI.Text(e, {
            fontSize: 34,
            fill: "#ffde00",
            fontWeight: "bold"
          });
          return o.x = (680 - o.width) / 2, o.y = (80 - o.height) / 2, i.addChild(o), i.x = (Pe - i.width) / 2, i.y = .4 * (De - i.height), i
        }
        return i(e, t), e.prototype.destroy = function(e) {
          TWEEN.killTweensOf(this), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      Zh = function() {
        function t() {
          this.uiScale = 1, this.layerMap = {}, this.panelMap = {}, this.openedPopUpPanelCount = 0, this.activePanels = [], this.popUpPanelRefs = new Set
        }
        return t.prototype.init = function(t) {
          this.stage = t.stage, this.panelLayer = new PIXI.Container, this.popUpLayer = new PIXI.Container, this.topLayer = new PIXI.Container, this.stage.addChild(this.panelLayer), this.stage.addChild(this.popUpLayer), this.stage.addChild(this.topLayer), this.uiScale = Be / De, this.stage.scale.set(this.uiScale, this.uiScale), this.layerMap[0] = this.panelLayer, this.layerMap[1] = this.popUpLayer, this.layerMap[2] = this.topLayer
        }, t.prototype.addView = function(t) {
          this.layerMap[t.panelType].addChild(t), t.panelType > 0 && (this.popUpPanelRefs.add(t), this.openedPopUpPanelCount = this.popUpPanelRefs.size, this.activePanels.indexOf(t) < 0 && this.activePanels.push(t))
        }, t.prototype.addMask = function(t, e) {
          this.layerMap[t].addChild(e)
        }, t.prototype.hasPanel = function(t) {
          return !!this.panelMap[t]
        }, t.prototype.showPanel = function(t, e) {
          var i = t.clsName;
          var n = this.panelMap[i];
          return n && !n.isDisposed || (DEVELOP && n && n.isDisposed && console.warn("panel is not clean"), (n = new t).name = i, n.cls = i, this.panelMap[n.cls] = n), 1 === n.panelType && (this.lastPopUpView && n !== this.lastPopUpView && this.lastPopUpView.canClose && this.lastPopUpView.close(), this.lastPopUpView = n), n.show(e), n
        }, t.prototype.getPanel = function(t) {
          return this.panelMap[t]
        }, t.prototype.closePanel = function(t) {
          var e = this.panelMap[t];
          return !!e && (e.close(), !0)
        }, t.prototype.destroyAllPopUps = function() {
          var t, e;
          try {
            for (var i = a(this.popUpPanelRefs), n = i.next(); !n.done; n = i.next()) {
              var o = n.value;
              o.panelType > 0 && this.destroyPanel(o)
            }
          } catch (e) {
            t = {
              error: e
            }
          } finally {
            try {
              n && !n.done && (e = i.return) && e.call(i)
            } finally {
              if (t) throw t.error
            }
          }
        }, t.prototype.destroyPanels = function(t) {
          var e, i;
          try {
            for (var n = a(this.popUpPanelRefs), o = n.next(); !o.done; o = n.next()) {
              var r = o.value;
              t.indexOf(r.name) >= 0 && this.destroyPanel(r)
            }
          } catch (t) {
            e = {
              error: t
            }
          } finally {
            try {
              o && !o.done && (i = n.return) && i.call(n)
            } finally {
              if (e) throw e.error
            }
          }
        }, t.prototype.destroyPanel = function(t) {
          if (t) {
            if (this.lastPopUpView === t && (this.lastPopUpView = null), t.panelType > 0) {
              this.popUpPanelRefs.delete(t), this.openedPopUpPanelCount = this.popUpPanelRefs.size;
              var e = this.activePanels.indexOf(t);
              e >= 0 && this.activePanels.splice(e, 1)
            }
            t.destroy(), delete this.panelMap[t.cls]
          }
        }, o([po], t.prototype, "lastPopUpView", void 0), o([po], t.prototype, "openedPopUpPanelCount", void 0), o([po], t.prototype, "activePanels", void 0), t
      }(),
      tc = new Zh;

    function ec(t, e, i, n, o, r) {
      void 0 === i && (i = ""), ic(t, e, !1, i, "", n, o, r)
    }

    function ic(t, e, i, n, o, r, s, a, h, c) {
      var u, l = {};
      l.title = t, l.content = e, l.showCancel = i, n && (l.confirmText = n), h && (l.confirmColor = h), o && (l.cancelText = o), c && (l.cancelColor = c), l.success = function(t) {
        r && r(t)
      }, l.fail = function(t) {
        s && s(t)
      }, l.complete = function(t) {
        a && a(t)
      }, u = l, wx.showModal(u)
    }

    function nc(t, e, i) {
      var n;
      void 0 === e && (e = ""), void 0 === i && (i = {}), n = e && e.errMsg || e, console.warn("showError", t, e), wx.showModal({
        title: String(t),
        content: String(n),
        confirmText: i.confirmText || "",
        showCancel: !1,
        success: i.success,
        fail: function(t) {
          return console.error(t.errMsg)
        }
      })
    }

    function oc(t) {
      ai.error("[ErrorMsg]:", t), t && (t.errMsg || t.message) ? rc(t.errMsg || t.message) : rc("," + JSON.stringify(t))
    }

    function rc(t, e) {
      if (void 0 === e && (e = 300), t) {
        var i = new Qh(t);
        tc.topLayer.addChild(i);
        var n = i.y;
        i.alpha = .3, new TWEEN.Tween(i).easing(TWEEN.Easing.Quintic.Out).to({
          y: n - 50,
          alpha: 1
        }, 400).chain(new TWEEN.Tween(i).delay(e).to({
          y: n - 80,
          alpha: 0
        }, 300).onComplete((function() {
          return i.destroy({
            children: !0
          })
        }))).start()
      }
    }

    function sc(t, e) {
      void 0 === e && (e = !1), wx.showLoading({
        mask: e,
        title: t
      })
    }

    function ac(t) {
      wx.hideLoading(t)
    }! function(t) {
      t[t.addTicketCoin = 2] = "addTicketCoin", t[t.addAllSkin = 3] = "addAllSkin", t[t.resetShareFriendTime = 4] = "resetShareFriendTime", t[t.resetDailyGoodsTime = 5] = "resetDailyGoodsTime", t[t.unlockNextChallengeLevel = 6] = "unlockNextChallengeLevel", t[t.addAllDecorate = 7] = "addAllDecorate", t[t.clearAllDecorate = 8] = "clearAllDecorate", t[t.addTeamCoupon = 9] = "addTeamCoupon", t[t.addTeamCoin = 10] = "addTeamCoin", t[t.addTeamDonation10000 = 11] = "addTeamDonation10000", t[t.addTeamDonation1000 = 12] = "addTeamDonation1000", t[t.addTeamExp = 13] = "addTeamExp", t[t.addSkin = 14] = "addSkin", t[t.delSkin = 15] = "delSkin", t[t.deleteAccount = 999] = "deleteAccount"
    }(Kh || (Kh = {})),
    function(t) {
      t[t.Classics = 0] = "Classics", t[t.Expert = 1] = "Expert", t[t.Challenge = 2] = "Challenge", t[t.Collection = 3] = "Collection", t[t.FastDrop = 4] = "FastDrop", t[t.Blood = 5] = "Blood", t[t.Mutation = 6] = "Mutation", t[t.Punch = 7] = "Punch", t[t.Power = 8] = "Power"
    }(Jh || (Jh = {}));
    var hc = 1,
      cc = 2,
      uc = 3,
      lc = 4,
      dc = 5,
      pc = 6,
      fc = 7,
      gc = 8,
      mc = 9,
      yc = 10,
      vc = 15,
      bc = 16,
      wc = 17,
      xc = 18,
      Tc = null;
    "function" == typeof wx.getOpenDataContext && (Tc = wx.getOpenDataContext());
    var kc = "function" == typeof wx.getOpenDataContext,
      Ic = Tc ? Tc.canvas : wx.createCanvas(),
      Cc = PIXI.Texture.fromCanvas(Ic),
      _c = "",
      Bc = [],
      Sc = null,
      Pc = "score";
    var Dc = !1;

    function Mc() {
      Dc || (Dc = !0, Tc && Tc.postMessage({
        type: xc
      }))
    }

    function Fc(t) {
      Mc(), Sc && (Sc.save(), Bc.push(Sc)), Sc = t, t && (Ic.width = t.width, Ic.height = t.height, Tc && Tc.postMessage(t.getMessage())), Cc.update()
    }

    function Ec(t) {
      if (Sc === t) t && t.destroy(), (Sc = Bc.pop()) ? (Ic.width = Sc.width, Ic.height = Sc.height, Tc && Tc.postMessage(Sc.getMessage(!0)), Sc.restore()) : Tc && Tc.postMessage({
        type: dc
      }), Cc.update();
      else {
        var e = Bc.indexOf(t); - 1 !== e ? (t && t.destroy(), Bc.splice(e, 1)) : console.warn("endOpenData fail:  openDataStack ", t)
      }
    }

    function Lc() {
      Pc = Zi() || "api" !== $hostDef.api ? "score-test" : "score", Oc({
        type: mc,
        scoreKey: Pc
      })
    }

    function Oc(t) {
      kc && Tc.postMessage(t)
    }

    function Rc(t, e) {
      if (t || e) {
        var i = [];
        t && i.push({
          isMaster: 1,
          myOpenId: t.firstOpenId,
          otherOpenId: t.otherOpenId,
          score: t.score,
          map: 0
        }), e && i.push({
          isMaster: 0,
          myOpenId: e.otherOpenId,
          otherOpenId: e.firstOpenId,
          score: e.score,
          map: 0
        }), Oc({
          type: wc,
          relayData: JSON.stringify(i)
        })
      }
    }

    function Gc(t) {
      var e = [{
        key: Pc,
        value: "0"
      }];
      if ("score" === Pc) {
        var i = {
            wxgame: {
              score: 0,
              update_time: Math.floor(Je.curTime / 1e3)
            }
          },
          n = JSON.stringify(i);
        e.push({
          key: "cscore",
          value: n
        })
      }
      wx.setUserCloudStorage({
        KVDataList: e,
        success: function(e) {
          DEVELOP && console.log("clearScore succ:", JSON.stringify(e)), t && t(!0)
        },
        fail: function(e) {
          DEVELOP && console.log("clearScore fail", e), t && t(!1)
        }
      })
    }
    var Ac = function() {
        function t() {
          this.ballColor = "#3BB6DF", this.inviteInfos = [0, 0, 0], this.raceCount = 0, this.load(zi)
        }
        return Object.defineProperty(t.prototype, "vibrate", {
          get: function() {
            return this._vibrate
          },
          set: function(t) {
            this._vibrate = t, t && !tn() && wx.vibrateShort()
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "sound", {
          get: function() {
            return this._sound
          },
          set: function(t) {
            this._sound = t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "quality", {
          get: function() {
            return this._quality
          },
          set: function(t) {
            this._quality = t
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.save = function() {
          wx.setStorage({
            key: "settings",
            data: {
              vibrate: this.vibrate,
              sound: this.sound,
              quality: this.quality
            }
          })
        }, t.prototype.load = function(t) {
          try {
            var e = wx.getStorageSync("settings");
            "" !== e ? (this.sound = e.sound, this.vibrate = e.vibrate, this.quality = e.quality) : (this.quality = !t, this.sound = !0, this.vibrate = !Zi(), this.save())
          } catch (e) {
            this.quality = !t, this.sound = !0, this.vibrate = !Zi(), this.save()
          }
        }, t.prototype.setInviteInfos = function(t) {
          this.inviteInfos = t
        }, o([bo], t.prototype, "vibrate", null), o([po], t.prototype, "_vibrate", void 0), o([bo], t.prototype, "sound", null), o([po], t.prototype, "_sound", void 0), o([bo], t.prototype, "quality", null), o([po], t.prototype, "_quality", void 0), t
      }(),
      Nc = new Ac,
      jc = function() {
        function t() {
          var t = ae || tn();
          SPE.valueOverLifetimeLength = 4;
          for (var e, i = t, n = ["webgl", "experimental-webgl"], o = 0; o < n.length; o++) {
            try {
              e = canvas.getContext(n[o], {
                alpha: !1,
                antialias: i,
                stencil: !0,
                preserveDrawingBuffer: !1,
                premultipliedAlpha: !1
              })
            } catch (t) {}
            if (e) break
          }
          var r = this.gl = e;
          if (r) {
            canvas.width === _e && canvas.height === Be || (console.log("Old Size:"), console.log("canvas.width:", canvas.width), console.log("canvas.height:", canvas.height), canvas.width = _e, canvas.height = Be, console.log("New Size:"), console.log("canvas.width:", canvas.width), console.log("canvas.height:", canvas.height));
            var s = this.renderer3D = new ke.WebGLRenderer({
              context: e,
              canvas,
              alpha: !1,
              stencil: !0,
              premultipliedAlpha: !1
            });
            s.setPixelRatio(2), s.setClearColor(0, 1), s.shadowMap.enabled = Nc.quality, s.autoClear = !1, this.state3D = s.state,
              function(t, e) {
                kc && (Ic.width = t, Ic.height = e)
              }(canvas.width, canvas.height), PIXI.settings.isLittleGame = !0, PIXI.settings.MAX_TEXTURES = 4, PIXI.settings.MAX_VERTEX_ATTRIBS = 16, PIXI.settings.SPRITE_BATCH_SIZE = 256, PIXI.settings.GC_MODE = PIXI.GC_MODES.MANUAL, PIXI.settings.MIPMAP_TEXTURES = !1, PIXI.settings.RESOLUTION = 1, PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.LINEAR, Ji() && !an(2, 10, 5) && (PIXI.settings.CAN_UPLOAD_SAME_BUFFER = !1), r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL, 0), this.pixiApp = new PIXI.Application({
                view: canvas,
                context: r,
                width: _e,
                height: Be,
                resolution: 2,
                clearBeforeRender: !1,
                legacy: !0,
                sharedLoader: !0,
                autoStart: !1,
                sharedTicker: !0
              }), this.ticker = this.pixiApp.ticker, this.pixiApp.removeRenderTick(), this.renderer2D = this.pixiApp.renderer, this.renderer2D.plugins.interaction.moveWhenInside = !0, this.state2D = this.renderer2D.state
          } else nc("WEBGL", "webgl context lost", {
            confirmText: "",
            success: function(t) {
              t.confirm && "function" == typeof wx.restartMiniProgram && wx.restartMiniProgram()
            }
          })
        }
        return t.prototype.render = function(t, e, i) {
          this.state3D.reset(), this.renderer3D.clear(!0, !0, !0), this.renderer3D.render(t, e), this.renderer2D.reset(), this.ticker.update(i), this.pixiApp.render()
        }, t
      }(),
      Vc = function() {
        function t() {}
        return t.decodeURIComponent = function(t) {
          var e = t + "";
          try {
            e = decodeURIComponent(t)
          } catch (i) {
            e = t
          }
          return e
        }, t.encodeURIComponent = function(t) {
          t += "";
          try {
            return encodeURIComponent(t)
          } catch (e) {
            return t
          }
        }, t.encodeString = function(t) {
          var e = "";
          if (!(t += "")) return "";
          try {
            t = t.replace(/[@#%]/g, ""), e = encodeURIComponent(t)
          } catch (i) {
            console.error("encodeURIComponent fail", t), e = " "
          }
          if (e.length >= 128)
            for (var i = Math.min(14, t.length - 1); e.length >= 128; i--) try {
              e = encodeURIComponent(t.substr(0, i))
            } catch (i) {
              console.error("encodeURIComponent fail", t), e = " "
            }
          return e
        }, t.decodeString = function(t) {
          try {
            return decodeURIComponent(t)
          } catch (e) {
            return console.error("decodeURIComponent fail", t), " "
          }
        }, t
      }();

    function Uc(t) {
      switch (t) {
        case de.success:
        case de.notGroup:
        case de.timeEnough:
          return !0;
        case de.timeNotEnough:
        case de.fail:
        case de.cancel:
        default:
          return !1
      }
    }

    function Wc(t, e, i, n) {
      return r(this, void 0, void 0, (function() {
        var o;
        return s(this, (function(r) {
          switch (r.label) {
            case 0:
              return s = i.shareSource, a = i.shareId, A(O.share, {
                ss: s,
                si: a
              }), [4, ye(t, e, i, n, Ji() ? 2.6 : 2)];
            case 1:
              return Uc(o = r.sent()) && function(t) {
                0;
                X.logEvent("-".concat(t))
              }(i.shareId), [2, o]
          }
          var s, a
        }))
      }))
    }

    function qc() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          return [2, Xc((t = uh.getRandomInviteWordByType(bs.normal)).type, t.desc, t.image, null, t.id)]
        }))
      }))
    }

    function Hc(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          return [2, Zc(t).then((function(e) {
            Qc = 2 === Qc ? 5 : 2;
            var i = uh.getInviteWord(e.scoreId),
              n = i ? i.desc : "";
            return n = n.replace("{score}", t), Xc(bs.game, n, e.image || i.image, {
              score: t,
              nick: Vc.encodeURIComponent(uC.nick),
              map: 0
            }, i.id)
          }))]
        }))
      }))
    }

    function $c(t) {
      return r(this, void 0, void 0, (function() {
        var e, i, n;
        return s(this, (function(o) {
          return e = uh.getRandomInviteWordByType(bs.skin), i = oh.getItem(t), n = (n = e ? e.desc : "").replace("{name}", i.name), [2, hu(e.id, t).then((function(t) {
            return Xc(e.type, n, t || e.image, null, e.id)
          })).catch((function() {
            return Xc(e.type, n, e.image, null, e.id)
          }))]
        }))
      }))
    }

    function Xc(t, e, i, n, o) {
      return r(this, void 0, void 0, (function() {
        var r;
        return s(this, (function(s) {
          return [2, Wc((r = zc(t, e, i, n, o)).title, r.image, r.query)]
        }))
      }))
    }

    function Yc() {
      var t = uh.getRandomInviteWordByType(bs.normal),
        e = zc(bs.normal, t.desc, t.image, null, t.id),
        i = function(t) {
          var e = [];
          for (var i in t) t.hasOwnProperty(i) && e.push("".concat(encodeURIComponent(i), "=").concat(encodeURIComponent(t[i])));
          return e.join("&")
        }(e.query);
      return {
        title: e.title || "",
        imageUrl: e.image || "",
        query: i
      }
    }

    function zc(t, e, i, n, o) {
      var r = {
        title: e || "",
        image: ""
      };
      return r.query = function(t, e, i) {
        var n = {
          fuid: uC.uid,
          shareSource: t,
          shareId: String(i)
        };
        uC.chid && "interstitial" !== uC.chid && (n.chid = uC.chid);
        if (e)
          for (var o in e) e.hasOwnProperty(o) && (n[o] = e[o]);
        n.time || (n.time = Je.curTime);
        var r = x.getLinkKey();
        r && (n.linkKey = r);
        return n
      }(t, n, o), i && (i.indexOf("http") >= 0 || i.indexOf("wxfile:") >= 0 ? r.image = i : r.image = yi("share/".concat(i))), r
    }

    function Kc() {
      var t = wx.createCanvas();
      return t.width = 750, t.height = 586, t
    }

    function Jc(t) {
      try {
        return t.toTempFilePathSync({
          x: 0,
          y: 0,
          width: t.width,
          height: t.height
        })
      } catch (t) {
        return null
      }
    }
    var Qc = 2;

    function Zc(t) {
      return r(this, void 0, void 0, (function() {
        var e, i, n, o;
        return s(this, (function(r) {
          return e = Kc(), i = uh.getInviteWord(Qc), n = wx.createImage(), o = new Promise((function(o) {
            n.onload = function() {
              try {
                var r = e.getContext("2d");
                n.width > 0 && n.height > 0 && r.drawImage(n, 0, 0), tu(r, t, i.image, i.type), o({
                  scoreId: Qc,
                  image: Jc(e)
                })
              } catch (t) {
                o({
                  scoreId: Qc
                })
              }
            }, n.onerror = function() {
              o({
                scoreId: Qc
              })
            }
          })), n.src = yi("share/".concat(i.image)), [2, o]
        }))
      }))
    }

    function tu(t, e, i, n) {
      switch (i) {
        case "share8.png":
          t.fillStyle = "#FFFFFF", t.font = "80px SimHei", t.textAlign = "center", t.fillText(e, 375, 190);
          break;
        case "share7.png":
          t.fillStyle = "#000000", t.font = "100px SimHei", t.textAlign = "center", t.fillText(e, 375, 120);
          break;
        case "share11.png":
        case "share12.png":
          t.fillStyle = "#000000", t.font = "120px SimHei", t.textAlign = "center", t.fillText(e, 600, 200);
          break;
        case "share17.png":
          t.fillStyle = "#FFFFFF", t.font = "120px SimHei", t.textAlign = "center", t.fillText(e, 230, 250);
          break;
        case "sharemode15.png":
          t.fillStyle = "#FFFFFF", t.font = "80px SimHei", t.textAlign = "center", t.fillText(e + "", 380, 310);
          break;
        case "sharemode16.png":
          t.fillStyle = "#FFFFFF", t.font = "45px SimHei", t.textAlign = "center", t.fillText(e, 380, 290);
          break;
        case "sharemode18.png":
        case "sharemode19.png":
        case "sharemode20.png":
          t.fillStyle = "#FFFFFF", t.font = "80px SimHei", t.textAlign = "center", t.fillText(e + "", 380, 310);
          break;
        case "sharemode21.png":
        case "sharemode22.png":
          t.fillStyle = "#FFFFFF", t.font = "80px SimHei", t.textAlign = "center", t.fillText(e, 380, 310)
      }
      n === bs.expertGame && ("share13.png" === i ? (t.fillStyle = "#000000", t.font = "120px SimHei", t.textAlign = "center", t.fillText(e, 180, 190)) : "share23.png" === i ? (t.fillStyle = "#FFFFFF", t.font = "80px SimHei", t.textAlign = "center", t.fillText(e, 370, 220)) : (t.fillStyle = "#FFFFFF", t.font = "80px SimHei", t.textAlign = "center", t.fillText(e, 370, 180)))
    }

    function eu(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n, o;
        return s(this, (function(r) {
          return i = uh.getCompareInviteWord(t - e), n = wx.createImage(), o = new Promise((function(e) {
            n.onload = function() {
              try {
                var o = Kc(),
                  r = o.getContext("2d");
                n.width > 0 && n.height > 0 && r.drawImage(n, 0, 0), tu(r, t, i.image, i.type), e({
                  conf: i,
                  image: Jc(o)
                })
              } catch (t) {
                e({
                  conf: i
                })
              }
            }, n.onerror = function() {
              e({
                conf: i
              })
            }
          })), n.src = yi("share/".concat(i.image)), [2, o]
        }))
      }))
    }

    function iu(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n;
        return s(this, (function(o) {
          return i = wx.createImage(), n = new Promise((function(n) {
            i.onload = function() {
              try {
                var o = Kc(),
                  r = o.getContext("2d");
                i.width > 0 && i.height > 0 && r.drawImage(i, 0, 0), tu(r, e + "", t.image, t.type), n({
                  conf: t,
                  image: Jc(o)
                })
              } catch (e) {
                n({
                  conf: t
                })
              }
            }, i.onerror = function() {
              n({
                conf: t
              })
            }
          })), i.src = yi("share/".concat(t.image)), [2, n]
        }))
      }))
    }

    function nu(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n;
        return s(this, (function(o) {
          return i = wx.createImage(), n = new Promise((function(n) {
            i.onload = function() {
              try {
                var o = Kc(),
                  r = o.getContext("2d");
                i.width > 0 && i.height > 0 && r.drawImage(i, 0, 0), tu(r, e + "", t.image, t.type), n({
                  conf: t,
                  image: Jc(o)
                })
              } catch (e) {
                n({
                  conf: t
                })
              }
            }, i.onerror = function() {
              n({
                conf: t
              })
            }
          })), i.src = yi("share/".concat(t.image)), [2, n]
        }))
      }))
    }

    function ou(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n;
        return s(this, (function(o) {
          return i = wx.createImage(), n = new Promise((function(n) {
            i.onload = function() {
              try {
                var o = Kc(),
                  r = o.getContext("2d");
                i.width > 0 && i.height > 0 && r.drawImage(i, 0, 0), tu(r, oi(e), t.image, t.type), n({
                  conf: t,
                  image: Jc(o)
                })
              } catch (e) {
                n({
                  conf: t
                })
              }
            }, i.onerror = function() {
              n({
                conf: t
              })
            }
          })), i.src = yi("share/".concat(t.image)), [2, n]
        }))
      }))
    }

    function ru(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n;
        return s(this, (function(o) {
          return i = wx.createImage(), n = new Promise((function(n) {
            i.onload = function() {
              try {
                var o = Kc(),
                  r = o.getContext("2d");
                i.width > 0 && i.height > 0 && r.drawImage(i, 0, 0), tu(r, e + "", t.image, t.type), n({
                  conf: t,
                  image: Jc(o)
                })
              } catch (e) {
                n({
                  conf: t
                })
              }
            }, i.onerror = function() {
              n({
                conf: t
              })
            }
          })), i.src = yi("share/".concat(t.image)), [2, n]
        }))
      }))
    }

    function su(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n;
        return s(this, (function(o) {
          return i = wx.createImage(), n = new Promise((function(n) {
            i.onload = function() {
              try {
                var o = Kc(),
                  r = o.getContext("2d");
                i.width > 0 && i.height > 0 && r.drawImage(i, 0, 0), tu(r, e + "", t.image, t.type), n({
                  conf: t,
                  image: Jc(o)
                })
              } catch (e) {
                n({
                  conf: t
                })
              }
            }, i.onerror = function() {
              n({
                conf: t
              })
            }
          })), i.src = yi("share/".concat(t.image)), [2, n]
        }))
      }))
    }

    function au(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n;
        return s(this, (function(o) {
          return i = wx.createImage(), n = new Promise((function(n) {
            i.onload = function() {
              try {
                var o = Kc(),
                  r = o.getContext("2d");
                i.width > 0 && i.height > 0 && r.drawImage(i, 0, 0), tu(r, e + "", t.image, t.type), n({
                  conf: t,
                  image: Jc(o)
                })
              } catch (e) {
                n({
                  conf: t
                })
              }
            }, i.onerror = function() {
              n({
                conf: t
              })
            }
          })), i.src = yi("share/".concat(t.image)), [2, n]
        }))
      }))
    }

    function hu(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n, o, r, a, h, c;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              return i = uh.getInviteWord(t), n = wx.createImage(), o = new Promise((function(t) {
                n.onload = function() {
                  t()
                }
              })), n.src = yi("share/".concat(i.image)), r = wx.createImage(), a = new Promise((function(t) {
                r.onload = function() {
                  t()
                }
              })), r.src = yi("item/item".concat(e, ".png")), [4, Promise.all([o, a])];
            case 1:
              return s.sent(), h = Kc(), c = h.getContext("2d"), n.width > 0 && n.height > 0 && c.drawImage(n, 0, 0), c.scale(2, 2), r.width > 0 && r.height > 0 && c.drawImage(r, 155, 100), c.scale(1, 1), [2, Jc(h)]
          }
        }))
      }))
    }

    function cu(t) {
      return r(this, void 0, void 0, (function() {
        var e, i, n;
        return s(this, (function(o) {
          return e = uh.getRandomInviteWordByType(bs.gameRelay), i = wx.createImage(), n = new Promise((function(n) {
            i.onload = function() {
              try {
                var o = Kc(),
                  r = o.getContext("2d");
                r.drawImage(i, 0, 0), tu(r, t, e.image, e.type), n({
                  conf: e,
                  image: Jc(o)
                })
              } catch (t) {
                n({
                  conf: e
                })
              }
            }, i.onerror = function() {
              n({
                conf: e
              })
            }
          })), i.src = yi("share/".concat(e.image)), [2, n]
        }))
      }))
    }

    function uu() {
      return !$hostDef.censor && !tn() && "function" == typeof wx.onShareTimeline
    }

    function lu(t) {
      return new Promise((function(e) {
        return setTimeout(e, t)
      }))
    }
    var du = "function" == typeof wx.createInterstitialAd;

    function pu() {
      du && Te.show()
    }
    var fu = "";

    function gu(t) {
      rc("".concat(t))
    }

    function mu(t) {
      return r(this, void 0, void 0, (function() {
        var e, i, n;
        return s(this, (function(o) {
          switch (o.label) {
            case 0:
              return function(t) {
                var e = "-".concat(Ps[t]),
                  i = null;
                2 === t && (i = {
                  type: RI.mode
                });
                0;
                X.logEvent(e, i)
              }(t), (null == (e = null === (n = we.video30) || void 0 === n ? void 0 : n.ad) ? void 0 : e.setServerSideVerificationData) && e.setServerSideVerificationData({
                userId: uC.uid.toString(),
                rewardItem: Ps[t],
                rewardAmount: 1
              }), [4, we.play(Ps[t])];
            case 1:
              return (i = o.sent()) === ve.finish ? (eD({
                type: 1
              }).then((function(t) {
                t && t.syncData && uC.syncData(t.syncData)
              })), function(t) {
                if (2 === t) {
                  var e = "-".concat(Ps[t]),
                    i = {
                      type: RI.mode
                    };
                  0, X.logEvent(e, i)
                }
              }(t)) : i === ve.cancel && function(t) {
                var e = "-".concat(Ps[t]),
                  i = null;
                2 === t && (i = {
                  type: RI.mode
                });
                0;
                X.logEvent(e, i)
              }(t), [2, i]
          }
        }))
      }))
    }

    function yu() {
      return $hostDef.videoAd && we.canWatch()
    }
    var vu, bu, wu, xu, Tu = "pointerdown",
      ku = "pointerup",
      Iu = "pointertap",
      Cu = "pointercancel",
      _u = "pointerout",
      Bu = "pointerupoutside",
      Su = "pointermove";
    Hi.model.includes("iPhone X") || Hi.statusBarHeight >= 42 || Hi.model.includes("PLA-AL10") ? (vu = 88, bu = 42, wu = 15, xu = 15) : Ki ? (vu = Math.max(15, Ki.safeArea.top), bu = Math.max(15, Ki.screenHeight - Ki.safeArea.bottom), wu = Math.max(15, Ki.safeArea.left), xu = Math.max(15, Ki.screenWidth - Ki.safeArea.right)) : (vu = Hi.statusBarHeight && 20 !== Hi.statusBarHeight ? 2 * Hi.statusBarHeight : 15, bu = 15, wu = 15, xu = 15);
    var Pu = Pe - wu - xu,
      Du = De - vu - bu,
      Mu = {
        top: vu,
        bottom: bu,
        left: wu,
        right: xu,
        width: Pu,
        height: Du,
        halfWidth: Pu / 2,
        halfHeight: Du / 2
      },
      Fu = [],
      Eu = function(t) {
        function e(e, i) {
          var n = t.call(this) || this;
          return n._isDisposed = !1, n.modal = !1, n._modalAlpha = .5, n.canTapMaskClose = !1, n._destroyBag = [], n.modal = e, n.panelType = i, n
        }
        return i(e, t), Object.defineProperty(e.prototype, "addToDestroy", {
          set: function(t) {
            this._destroyBag.push(t)
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.showModalMask = function() {
          if (!this.modalShape) {
            var t = void 0;
            Fu.length > 0 ? t = Fu.pop() : ((t = new PIXI.Graphics).beginFill(0, 1), t.drawRect(0, 0, Pe, De), t.endFill(), t.interactive = !0), this.modalShape = t, this.modalShape.alpha = this._modalAlpha, this.modalShape.on(Iu, this.onTpaModalShape, this)
          }
          tc.addMask(this.panelType, this.modalShape)
        }, e.prototype.onTpaModalShape = function() {
          this.canTapMaskClose && this.close()
        }, Object.defineProperty(e.prototype, "modalAlpha", {
          get: function() {
            return this._modalAlpha
          },
          set: function(t) {
            this._modalAlpha = t, this.modalShape && (this.modalShape.alpha = this._modalAlpha)
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.hideModal = function() {
          this.modalShape && this.modalShape.parent && this.modalShape.parent.removeChild(this.modalShape)
        }, e.prototype.addSkin = function(t) {
          this.addChild(t.skin)
        }, e.prototype.addSkinTo = function(t, e) {
          e.addChild(t.skin)
        }, e.prototype.hide = function() {
          this.modal && this.hideModal(), this.parent && this.parent.removeChild(this), this.onHide()
        }, e.prototype.show = function(t) {
          this.modal && this.showModalMask(), tc.addView(this), this.x = (Pe - this.width) / 2, this.y = Mu.top + (De - this.height - Mu.bottom) / 2, this.onShow(t)
        }, e.prototype.close = function() {
          this.isDisposed || tc.destroyPanel(this)
        }, Object.defineProperty(e.prototype, "canClose", {
          get: function() {
            return !this.isDisposed
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          if (!this.isDisposed) {
            if (this._destroyBag.forEach((function(t) {
                return t()
              })), this._destroyBag.length = 0, this.hide(), this.modalShape) {
              var e = this.modalShape;
              e.parent && e.parent.removeChild(e), e.off(Iu, this.onTpaModalShape, this), Fu.length > 5 ? e.destroy() : Fu.push(e), this.modalShape = null
            }
            this.onDestroy(), this._isDisposed = !0, t.prototype.destroy.call(this, {
              children: !0
            })
          }
        }, Object.defineProperty(e.prototype, "isDisposed", {
          get: function() {
            return this._destroyed || this._isDisposed
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onShow = function(t) {}, e.prototype.onHide = function() {}, e.prototype.onDestroy = function() {}, e.clsName = "BaseView", e
      }(PIXI.Container),
      Lu = function() {
        function t() {
          this._destroyed = !1, this._destroyBag = []
        }
        return Object.defineProperty(t.prototype, "addToDestroy", {
          set: function(t) {
            this._destroyBag.push(t)
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.resetScale = function() {
          this._destroyed || this.skin && this.skin.scale && this.skin.scale.set(1, 1)
        }, Object.defineProperty(t.prototype, "skin", {
          get: function() {
            return null
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "scale", {
          get: function() {
            return this.skin ? this.skin.scale : new PIXI.Point(1, 1)
          },
          set: function(t) {
            this.skin && (this.skin.scale = t)
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.onInteractive = function(t) {}, Object.defineProperty(t.prototype, "interactive", {
          get: function() {
            return !!this.skin && this.skin.interactive
          },
          set: function(t) {
            this._destroyed || (this.onInteractive(t), this.skin && (this.skin.interactive = t))
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "x", {
          get: function() {
            return this.skin ? this.skin.x : 0
          },
          set: function(t) {
            this.skin && (this.skin.x = t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "y", {
          get: function() {
            return this.skin ? this.skin.y : 0
          },
          set: function(t) {
            this.skin && (this.skin.y = t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "width", {
          get: function() {
            return this.skin ? this.skin.width : 0
          },
          set: function(t) {
            this.skin && (this.skin.width = t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "height", {
          get: function() {
            return this.skin ? this.skin.height : 0
          },
          set: function(t) {
            this.skin && (this.skin.height = t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "visible", {
          get: function() {
            return !!this.skin && this.skin.visible
          },
          set: function(t) {
            this.skin && (this.skin.visible = t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "alpha", {
          get: function() {
            return this.skin ? this.skin.alpha : 1
          },
          set: function(t) {
            this.skin && (this.skin.alpha = t)
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.addSkin = function(t) {
          this.skin && this.skin.addChild(t.skin)
        }, t.prototype.addSkinTo = function(t, e) {
          e.addChild(t.skin)
        }, t.prototype.on = function(t, e, i) {
          this.skin && this.skin.on(t, e, i)
        }, t.prototype.once = function(t, e, i) {
          this.skin && this.skin.once(t, e, i)
        }, t.prototype.off = function(t, e, i) {
          this.skin && this.skin.off(t, e, i)
        }, t.prototype.destroy = function() {
          this._destroyed = !0, this._destroyBag.forEach((function(t) {
            return t()
          })), this._destroyBag.length = 0, this.skin && (this.skin.parent && this.skin.parent.removeChild(this.skin), this.skin.destroy({
            children: !0
          }))
        }, t
      }(),
      Ou = function(t) {
        function e() {
          return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t), e.prototype.resetScale = function() {
          this._destroyed || (t.prototype.resetScale.call(this), this.updatePos())
        }, e.prototype.updatePos = function() {
          if (!this._center) {
            this._defaultPos || (this._defaultPos = new PIXI.Point(this.skin.position.x, this.skin.position.y));
            var t = this._defaultPos.x + (this._width - this.skin.width) / 2,
              e = this._defaultPos.y + (this._height - this.skin.height) / 2;
            this.skin.position.set(t, e)
          }
        }, e.prototype.setScale = function(t) {
          !this._destroyed && this.skin && (this.skin.scale.set(t, t), this.updatePos())
        }, e
      }(Lu),
      Ru = function(t) {
        function e(e, i) {
          void 0 === i && (i = !0);
          var n = t.call(this) || this;
          return void 0 === i && (i = !0), n._center = i, n.sprite = jh(e), n.sprite.interactive = !0, n._width = n.sprite.width, n._height = n.sprite.height, i && n.sprite.anchor.set(.5, .5), n.sprite.on(Tu, n.onTapDown, n), n.sprite.on(ku, n.onTapUp, n), n.sprite.on(Cu, n.onTapUp, n), n.sprite.on(_u, n.onTapUp, n), n.sprite.on(Bu, n.onTapUp, n), n
        }
        return i(e, t), e.prototype.setFrameId = function(t) {
          this.sprite.texture = Vh(t)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.sprite
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onInteractive = function(t) {
          var e = this;
          this.clearDelay(), t || (this.timeOutId = setTimeout((function() {
            e.resetScale(), e.timeOutId = void 0
          }), 30))
        }, e.prototype.onTapUp = function() {
          this.setScale(1)
        }, e.prototype.onTapDown = function() {
          this.setScale(.9)
        }, e.prototype.clearDelay = function() {
          this.timeOutId && (clearTimeout(this.timeOutId), this.timeOutId = void 0)
        }, e.prototype.destroy = function() {
          this.clearDelay(), this.sprite && this.sprite.removeAllListeners(), t.prototype.destroy.call(this), this.sprite = null
        }, e
      }(Ou),
      Gu = [1, 1.33, 1.66, 2],
      Au = .02,
      Nu = .998,
      ju = Math.log(Nu);
    var Vu = function() {
        function t(t) {
          this.target = t, this.$scrollFactor = 1, this.previousTime = 0, this.velocity = 0, this.previousVelocity = [], this.currentPosition = 0, this.previousPosition = 0, this.lastPoint = 0, this.started = !0
        }
        return t.prototype.start = function(t) {
          this.started = !0, this.velocity = 0, this.previousVelocity.length = 0, this.previousPosition = this.currentPosition = t, this.lastPoint = t, this.animation = void 0
        }, t.prototype.update = function(t) {
          this.currentPosition = t;
          var e = this.lastPoint - t,
            i = e + this.target.scrollV;
          this.lastPoint = t, (i < 0 || i > this.target.maxScrollV) && (i -= .5 * e), this.target.scrollV = i
        }, t.prototype.finish = function() {
          var t = this.target,
            e = t.scrollV,
            i = t.maxScrollV;
          this.started = !1;
          for (var n = 2.33 * this.velocity, o = this.previousVelocity, r = o.length, s = 2.33, a = 0; a < r; a++) {
            var h = Gu[a];
            n += o[0] * h, s += h
          }
          var c = n / s,
            u = Math.abs(c);
          if (u > Au) {
            var l = 0,
              d = e + (c - Au) / ju * 2 * this.$scrollFactor;
            if (d < 0 || d > i)
              for (d = e; Math.abs(c) > Au;) c *= (d -= c) < 0 || d > i ? .95 * Nu : Nu, l++;
            else l = Math.log(Au / u) / ju;
            this.throwTo(d, l)
          } else this.checkScroll()
        }, t.prototype.checkScroll = function() {
          var t = this.target,
            e = t.scrollV,
            i = t.maxScrollV;
          e < 0 ? this.throwTo(0, 300) : e > i && this.throwTo(i, 300)
        }, t.prototype.onTick = function(t) {
          var e = t - this.previousTime;
          if (this.previousTime = t, this.started) {
            var i = this.previousVelocity;
            i.length >= 4 && i.shift(), 0 === e && (e = 16.6), this.velocity = (this.currentPosition - this.previousPosition) / e, i.push(this.velocity), this.previousPosition = this.currentPosition
          }
          this.animation && (this.animation.update(e), this.target.scrollV = this.animation.value, this.animation.isEnd && (this.animation = void 0, this.checkScroll()))
        }, Object.defineProperty(t.prototype, "isThrowing", {
          get: function() {
            return this.animation && !this.animation.isEnd
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.throwToTop = function() {
          this.throwTo(0, 300)
        }, t.prototype.throwTo = function(t, e) {
          var i = this.target.scrollV;
          i !== t && (this.animation = new Uu(i, t, e))
        }, t
      }(),
      Uu = function() {
        function t(t, e, i) {
          this.from = t, this.to = e, this.duration = i, this.pass = 0, this.value = 0, this.isEnd = !1, this.distance = e - t, this.value = t
        }
        return t.prototype.update = function(t) {
          var e, i;
          this.pass += t, this.pass > this.duration ? (this.value = this.to, this.isEnd = !0) : this.value = (e = this.pass / this.duration, ((i = e - 1) * i * i + 1) * this.distance + this.from)
        }, t
      }(),
      Wu = function(t) {
        function e(e, i) {
          var n = t.call(this) || this;
          n.visibleHeight = i, n.maxScrollV = Number.MAX_SAFE_INTEGER, n.touchScroll = new Vu(n), n.startY = 0;
          var o = new PIXI.Graphics;
          o.beginFill(0), o.drawRect(0, 0, e, n.visibleHeight), o.endFill(), n.addChild(o), n.mask = o, n.interactive = !0, n.on(Tu, n._onTouchStart, n), n.on(Su, n._onTouchMove, n), n.on(ku, n._onTouchEnd, n), n.on(Bu, n._onTouchEnd, n), n.on(Cu, n._onTouchEnd, n);
          var r = function(t) {
            n._destroyed || (n.touchScroll.onTick(Date.now()), requestAnimationFrame(r))
          };
          return requestAnimationFrame(r), n
        }
        return i(e, t), e.prototype.setContent = function(t) {
          this.content = t, this.addChild(t), this.updateMaxScrollV()
        }, e.prototype.updateMaxScrollV = function() {
          this.maxScrollV = Math.max(0, this.content.contentHeight - this.visibleHeight), this.touchScroll.checkScroll()
        }, e.prototype._onTouchStart = function(t) {
          this.startY = t.data.global.y, this.touchScroll.start(t.data.global.y)
        }, e.prototype._onTouchMove = function(t) {
          var e = t.data.global.y;
          this.touchScroll.update(e), this.content && this.content.interactiveChildren && Math.abs(e - this.startY) > 5 && (this.content.interactiveChildren = !1)
        }, e.prototype._onTouchEnd = function(t) {
          this.touchScroll.finish(), this.content && (this.content.interactiveChildren = !0)
        }, Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return this.content ? this.content.scrollV : 0
          },
          set: function(t) {
            this.content && (this.content.scrollV = t)
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      qu = m.getLogger("subscribe"),
      Hu = "h4HDqPNKSM1YGTYEvlw4fLxE9iDQDzhH4F_8DDY2HUc",
      $u = "qNqO6lxMT9iMk4pXj2ew0Jfbgl7Afd4wZUFitlnDnCg",
      Xu = "buS0wzQgHzH2xmzWwayxSZ1N5UukBFUjjJdrhIylKG8",
      Yu = "a44-XGgvUmsf4OUrZegGZtnv20oV9zzlMNK1EOuL3KA",
      zu = function() {
        function t() {
          this.subscribedSign = !1, this.subscribedNotice = !1, this.subscribedTurntable = !1, this.subscribedAdCard = !1
        }
        return t.prototype.fetchSubscribes = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n, o, r;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  t = [Hu, $u, Xu, Yu], s.label = 1;
                case 1:
                  return s.trys.push([1, 14, , 15]), [4, oD({
                    templateIds: t
                  })];
                case 2:
                  if (e = s.sent(), i = e.list, DEVELOP && console.log("fetchSubscribes:", i), !i || i.length <= 0) return [2];
                  n = 0, s.label = 3;
                case 3:
                  if (!(n < i.length)) return [3, 13];
                  switch (o = i[n], o.templateId) {
                    case Hu:
                      return [3, 4];
                    case $u:
                      return [3, 6];
                    case Xu:
                      return [3, 8];
                    case Yu:
                      return [3, 10]
                  }
                  return [3, 12];
                case 4:
                  return [4, this.fetchSignSubscribeInfo(o)];
                case 5:
                  return s.sent(), [3, 12];
                case 6:
                  return [4, this.fetchNoticeSubscribeInfo(o)];
                case 7:
                  return s.sent(), [3, 12];
                case 8:
                  return [4, this.fetchTurntableSubscribeInfo(o)];
                case 9:
                  return s.sent(), [3, 12];
                case 10:
                  return [4, this.fetchAdCardSubscribeInfo(o)];
                case 11:
                  return s.sent(), [3, 12];
                case 12:
                  return n++, [3, 3];
                case 13:
                  return [3, 15];
                case 14:
                  return r = s.sent(), DEVELOP && qu.log(r), [3, 15];
                case 15:
                  return [2]
              }
            }))
          }))
        }, t.prototype.fetchSignSubscribeInfo = function(t) {
          return r(this, void 0, void 0, (function() {
            var e = this;
            return s(this, (function(i) {
              return Ku(t).then((function(t) {
                e.subscribedSign = t
              })), [2]
            }))
          }))
        }, t.prototype.fetchNoticeSubscribeInfo = function(t) {
          return r(this, void 0, void 0, (function() {
            var e = this;
            return s(this, (function(i) {
              return Ku(t).then((function(t) {
                e.subscribedNotice = t
              })), [2]
            }))
          }))
        }, t.prototype.fetchTurntableSubscribeInfo = function(t) {
          return r(this, void 0, void 0, (function() {
            var e = this;
            return s(this, (function(i) {
              return Ku(t).then((function(t) {
                e.subscribedTurntable = t
              })), [2]
            }))
          }))
        }, t.prototype.fetchAdCardSubscribeInfo = function(t) {
          return r(this, void 0, void 0, (function() {
            var e = this;
            return s(this, (function(i) {
              return Ku(t).then((function(t) {
                e.subscribedAdCard = t
              })), [2]
            }))
          }))
        }, Object.defineProperty(t.prototype, "supportRequestSubscribe", {
          get: function() {
            return "function" == typeof wx.requestSubscribeMessage
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.requestSubscribe = function(t, e) {
          return r(this, void 0, void 0, (function() {
            var i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return "function" != typeof wx.requestSubscribeMessage ? (rc(""), [2, "none"]) : [4, new Promise((function(n, o) {
                    VI(e, ""), wx.requestSubscribeMessage({
                      tmplIds: [t],
                      success: function(e) {
                        n(e[t])
                      },
                      fail: function(t) {
                        i = t.errCode, n("reject")
                      }
                    })
                  }))];
                case 1:
                  return "accept" !== (n = o.sent()) && (DEVELOP && console.log(":", i), VI(e, ""), rc(20004 === i ? "" : 10002 === i || 10003 === i ? "" : "")), [2, n]
              }
            }))
          }))
        }, o([po], t.prototype, "subscribedSign", void 0), o([po], t.prototype, "subscribedNotice", void 0), o([po], t.prototype, "subscribedTurntable", void 0), o([po], t.prototype, "subscribedAdCard", void 0), t
      }();

    function Ku(t) {
      return r(this, void 0, void 0, (function() {
        var e, i, n;
        return s(this, (function(o) {
          if (t.templateId === $u) return [2, t.count > 0];
          if (e = t.count > 0 && t.schedules.length > 0, t.schedules.length > 0)
            if (DEVELOP && qu.log(""), i = !1, t.count <= 0 && (DEVELOP && qu.log(""), i = !0), i) qu.log(","), e = !1, r = {
              ids: t.schedules.map((function(t) {
                return t.id
              }))
            }, vC(4100, r);
            else switch ((n = t.schedules[0]).id) {
              case $u:
                break;
              case Hu:
                ! function(t) {
                  var e = new Date(t.sendTime);
                  if (new Date(Je.curTime).toDateString() === e.toDateString()) {
                    DEVELOP && qu.log("");
                    var i = new Date(Je.curTime);
                    i.setDate(i.getDate() + 1), i.setHours(e.getHours(), 0, 0, 0), rD({
                      id: t.id,
                      sendTime: i.getTime(),
                      keyValues: t.keyValues
                    })
                  }
                }(n);
                break;
              case Xu:
                ! function(t) {
                  var e = new Date(t.sendTime);
                  if (new Date(Je.curTime).getTime() >= e.getTime()) {
                    DEVELOP && qu.log("");
                    var i = new Date(Je.curTime);
                    i.getHours() < 12 ? i.setHours(12) : i.getHours() < 20 ? i.setHours(20) : ((i = Qe()).setDate(i.getDate() + 1), i.setHours(8)), rD({
                      id: t.id,
                      sendTime: i.getTime(),
                      keyValues: t.keyValues
                    })
                  }
                }(n);
                break;
              case Yu:
                ! function(t) {
                  var e = new Date(t.sendTime);
                  if (new Date(Je.curTime).toDateString() === e.toDateString()) {
                    var i = new Date(Je.curTime);
                    i.setDate(i.getDate() + 1), i.setHours(18, 30, 0, 0), rD({
                      id: t.id,
                      sendTime: i.getTime(),
                      keyValues: t.keyValues
                    })
                  }
                }(n)
            } else DEVELOP && qu.log("");
          var r;
          return [2, e]
        }))
      }))
    }
    var Ju = new zu,
      Qu = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.sprite = jh("button_close.png"), e.sprite.interactive = !0, e.sprite.anchor.set(.5, .5), e.sprite.on(Tu, e.onTapDown, e), e.sprite.on(ku, e.onTapUp, e), e.sprite.on(Cu, e.onTapUp, e), e.sprite.on(_u, e.onTapUp, e), e.sprite.on(Bu, e.onTapUp, e), e
        }
        return i(e, t), Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.sprite
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onTapUp = function() {
          this._destroyed || this.sprite && this.sprite.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this._destroyed || this.sprite && this.sprite.scale.set(.9, .9)
        }, e.prototype.destroy = function() {
          this.sprite && this.sprite.removeAllListeners(), t.prototype.destroy.call(this), this.sprite = null
        }, e
      }(Lu),
      Zu = function(t) {
        function e(e, i) {
          var n = t.call(this) || this;
          return n.frameId = e, n.offFrameId = i, n.sprite = jh(e), n.sprite.interactive = !0, n.sprite.anchor.set(.5, .5), n.sprite.on(Tu, n.onTapDown, n), n.sprite.on(ku, n.onTapUp, n), n.sprite.on(Cu, n.onTapUp, n), n.sprite.on(_u, n.onTapUp, n), n.sprite.on(Bu, n.onTapUp, n), n.toggle = !1, n
        }
        return i(e, t), Object.defineProperty(e.prototype, "toggle", {
          get: function() {
            return this._toggle
          },
          set: function(t) {
            this._toggle = t, this.sprite.texture = Vh(t ? this.frameId : this.offFrameId)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.sprite
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onTapUp = function() {
          this._destroyed || this.sprite.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this._destroyed || this.sprite.scale.set(.9, .9)
        }, e.prototype.destroy = function() {
          this.sprite && this.sprite.removeAllListeners(), t.prototype.destroy.call(this), this.sprite = null
        }, e
      }(Lu);

    function tl(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              return i.trys.push([0, 2, , 3]), [4, JP({
                type: t
              })];
            case 1:
              return (e = i.sent()).syncData && uC.syncData(e.syncData), [2, e];
            case 2:
              return oc(i.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function el() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, LP({})];
            case 1:
              return (t = e.sent()).syncData && uC.syncData(t.syncData), [2, t];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }
    var il = function(t) {
      function e() {
        var i = t.call(this) || this;
        e.instance = i, i.container = new PIXI.Container, i.container.interactive = !0;
        var n = new PIXI.Container;
        i.bg = jh("button_ball.png"), i.bg.anchor.set(0, 0), n.addChild(i.bg), i.thumb = jh("button_ball_blue.png"), i.thumb.y = (i.bg.height - i.thumb.height) / 2, i.thumb.x = (i.bg.width - i.thumb.width) / 2, n.addChild(i.thumb), i.thumbMask = new PIXI.Graphics, i.thumbMask.x = i.thumb.x, i.thumbMask.y = i.thumb.y, i.thumbMask.beginFill(0), i.thumbMask.drawRect(0, 0, i.thumb.width, i.thumb.height), i.thumbMask.endFill(), n.addChild(i.thumbMask), i.thumb.mask = i.thumbMask, i.redIcon = jh("redpoint2.png"), i.redIcon.x = i.bg.width - i.redIcon.width - 10, i.redIcon.y = 10, n.addChild(i.redIcon), n.position.set(-i.bg.width / 2, -i.bg.height / 2), i.container.addChild(n), i.width = i.bg.width;
        var o = -1;
        return i.addToDestroy = mr((function() {
          uC.gold !== o && (o = uC.gold), i.progress = uC.skinCount / oh.totalSkinCount, i.redIcon.visible = uC.skinRedType > 0, i.redIcon.visible && (i.redIcon.texture = Vh(1 === uC.skinRedType ? "redpoint2.png" : "greenpoint.png"))
        })), i
      }
      return i(e, t), Object.defineProperty(e.prototype, "progress", {
        get: function() {
          return this.thumbMask.scale.y
        },
        set: function(t) {
          t < 0 && (t = 0), this.thumbMask.scale.y = Math.min(t, 1), this.thumbMask.y = this.thumb.y + this.thumb.height - this.thumbMask.height
        },
        enumerable: !1,
        configurable: !0
      }), Object.defineProperty(e.prototype, "skin", {
        get: function() {
          return this.container
        },
        enumerable: !1,
        configurable: !0
      }), e.prototype.destroy = function() {
        t.prototype.destroy.call(this), this.container = null, e.instance = null
      }, e
    }(Lu);

    function nl(t) {
      var e = il.instance;
      if (e)
        for (var i = e.skin.toGlobal({
            x: 0,
            y: 0
          }), n = i.x / tc.uiScale, o = i.y / tc.uiScale, r = t < 10 ? t : Math.min(30, Math.max(10, Math.floor(t / 20))), s = function(t) {
            var e = jh("gold.png");
            e.anchor.set(.5, .5), e.x = 375, e.y = De / 2, tc.stage.addChild(e);
            var i = new TWEEN.Tween(e).delay(100 * Math.random()).to({
                x: e.x + 250 * (Math.random() - .5),
                y: e.y + 250 * (Math.random() - .5)
              }, 500).easing(TWEEN.Easing.Quartic.In),
              r = new TWEEN.Tween(e).delay(300).to({
                x: n,
                y: o,
                alpha: 0
              }, 500).easing(TWEEN.Easing.Quartic.Out).onComplete((function() {
                e.destroy({
                  children: !0
                })
              }));
            i.chain(r), i.start()
          }, a = 0; a < r; a++) s()
    }
    var ol = function(t) {
        function e() {
          var e = t.call(this, !0, 2) || this;
          e.scoreTween = null, e.modalAlpha = .8;
          var i = jh("turntable_result_title.png");
          i.anchor.set(.5, .5), i.x = 375, i.y = Mu.top + 200, e.addChild(i), e.light = jh("reward_light.png"), e.light.anchor.set(.5, .5), e.light.x = 375, e.light.y = De / 2, e.addChild(e.light), e.goldContainer = new PIXI.Container;
          var n = jh("big_gold.png"),
            o = e.goldText = Xh("x0", "#FFCE49", !0, "left", 40);
          return o.x = n.x + n.width + 20, o.y = n.y + (n.height - o.height) / 2, e.goldContainer.addChild(n), e.goldContainer.addChild(o), e.goldContainer.x = (Pe - e.goldContainer.width) / 2, e.goldContainer.y = (De - e.goldContainer.height) / 2, e.addChild(e.goldContainer), e.skinIcon = new PIXI.Sprite, e.skinIcon.width = 100, e.skinIcon.height = 100, e.skinIcon.anchor.set(.5, .5), e.skinIcon.x = 375, e.skinIcon.y = De / 2, e.addChild(e.skinIcon), e.buttonGroup = new PIXI.Container, e.videoButton = new Ru("button_video_double.png"), e.videoButton.on(Iu, e.onTapVideo, e), e.buttonGroup.addChild(e.videoButton.skin), e.skipButton = new Ru("button_skip.png"), e.skipButton.y = e.videoButton.y + e.videoButton.height / 2 + 150, e.skipButton.on(Tu, e._onSkip, e), e.buttonGroup.addChild(e.skipButton.skin), e.buttonGroup.x = 375, e.buttonGroup.y = De / 2 + 200, e.addChild(e.buttonGroup), e.getButton = new Ru("button_get.png"), e.getButton.on(Tu, e._onGet, e), e.getButton.x = 375, e.getButton.y = De / 2 + 200, e.addChild(e.getButton.skin), e
        }
        return i(e, t), e.prototype._onGet = function() {
          this.close()
        }, e.prototype.onTapVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [4, mu(4)];
                case 1:
                  return (t = e.sent()) === ve.cancel ? [2, gu("")] : t === ve.fail ? [2, rc(fu)] : (this.onVideoSuccess(), [2])
              }
            }))
          }))
        }, e.prototype._onSkip = function() {
          this.close()
        }, e.prototype.playScoreTween = function(t, e, i) {
          var n = this;
          this.goldText.text = t + "", this.scoreTween = new TWEEN.Tween({
            s: t
          }).to({
            s: e
          }, 800).onUpdate((function(t) {
            n.isDisposed || (n.goldText.text = t.s.toFixed())
          })).onComplete((function() {
            i && i()
          })).easing(TWEEN.Easing.Circular.Out).start()
        }, e.prototype.onShow = function(t) {
          if (this.x = 0, this.y = 0, this.light.rotation = 0, new TWEEN.Tween(this.light).to({
              rotation: 2 * Math.PI
            }, 3e3).easing(TWEEN.Easing.Linear.None).repeat(1 / 0).start(), this.curGold = t.gold ? t.gold : 0, this.goldContainer.visible = this.curGold > 0, this.curGold > 0 && this.playScoreTween(0, this.curGold), this.isSkinGift = !1, this.skinIcon.visible = !1, t.items && t.items.length > 0) {
            var e = t.items[0][0];
            this.isSkinGift = !0, this.skinIcon.visible = this.isSkinGift, this.skinIcon.texture = Vh("item".concat(e, ".png"))
          }
          this.videoButton.visible = !this.isSkinGift && (Zi() || yu()), this.getButton.visible = !this.videoButton.visible, this.buttonGroup.visible = this.videoButton.visible
        }, e.prototype.onHide = function() {
          this.scoreTween && (TWEEN.remove(this.scoreTween), this.scoreTween = null), TWEEN.killTweensOf(this.light), this.curGold > 0 && nl(this.curGold)
        }, e.prototype.onVideoSuccess = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i = this;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return this.buttonGroup.visible = !1, [4, tl(1)];
                case 1:
                  return (t = n.sent()) && t.gift ? (e = this.curGold, this.curGold *= 2, this.playScoreTween(e, this.curGold, (function() {
                    i.getButton && (i.getButton.visible = !0, i.buttonGroup.visible = !1)
                  }))) : (this.getButton.visible = !0, this.buttonGroup.visible = !1), [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.skipButton && (this.skipButton.destroy(), this.skipButton = null), this.getButton && (this.getButton.destroy(), this.getButton = null)
        }, e.clsName = "TurntableResultView", e
      }(Eu),
      rl = function(t) {
        function e() {
          var e = t.call(this, !0, 2) || this;
          e.isTurntableEnd = !1, e.modalAlpha = .8, e.name = "TurntableView";
          var i = e.titleBg = jh("turntable_title.png");
          i.anchor.set(.5, .5), i.x = 375, e.addChild(i), e.turntableContainer = new PIXI.Container;
          var n = jh("turntable.png");
          n.width = 581, n.height = 581, n.anchor.set(.5, .5), e.turntableContainer.addChild(n), e.turntableContainer.x = 375, e.turntableContainer.y = De / 2, e.addChild(e.turntableContainer);
          var o = e.turntableTop = jh("turntable_top.png");
          return o.width = 172, o.height = 173, o.anchor.set(.5, .5), o.x = 375, o.y = De / 2 - 20, e.addChild(o), e.closeButton = new Qu, e.closeButton.x = e.turntableContainer.x + e.turntableContainer.width / 2, e.closeButton.y = e.turntableContainer.y - e.turntableContainer.height / 2, e.closeButton.on(Tu, (function() {
            e.close()
          }), e), e.addSkin(e.closeButton), e.buttonGroup = new PIXI.Container, e.videoButton = new Zu("button_video_turntable.png", "button_video_turntable_gray.png"), e.videoButton.x = e.videoButton.width / 2, e.videoButton.on(Iu, e.onTapVideoTurntable, e), e.freeButton = new Zu("button_free.png", "button_free_gray.png"), e.freeButton.x = e.videoButton.x + e.videoButton.width / 2 + 50 + e.freeButton.width / 2, e.freeButton.on(Tu, e.onTapFree, e), e.buttonGroup.addChild(e.videoButton.skin), e.buttonGroup.addChild(e.freeButton.skin), Ju.supportRequestSubscribe && (e.subscribeButton = new Zu("btn_subscribe_turntable.png", "btn_subscribe_turntabled.png"), e.subscribeButton.x = e.videoButton.x + e.videoButton.width / 2 + 50 + e.subscribeButton.width / 2, e.subscribeButton.on(Iu, e.onTapSubscribe, e), e.buttonGroup.addChild(e.subscribeButton.skin), e.subscribeButton.visible = !1), e.addChild(e.buttonGroup), e.buttonGroup.x = (Pe - e.buttonGroup.width) / 2, e.buttonGroup.y = e.turntableContainer.y + e.turntableContainer.height / 2 + 120, e.freeText = Xh("", "#FFFF00", !0, "center", 32), e.freeText.y = e.freeButton.height / 2 + 20, e.freeText.x = e.freeButton.x - e.freeText.width / 2, e.freeText.visible = !1, e.buttonGroup.addChild(e.freeText), e.addToDestroy = mr((function() {
            if (!e.isDisposed) {
              e.videoButton.toggle = uC.videoTurntableCount < lh.maxTurntableVideoCount;
              var t = uC.freeTurntableCount > 0;
              e.freeButton.toggle = t, e.freeText.visible = !t, e.freeText.visible && (e.freeText.text = e.getNextFreeTimeText(), e.freeText.x = e.freeButton.x - e.freeText.width / 2), Ju.supportRequestSubscribe && (e.freeButton.visible = t, e.subscribeButton.visible = !t), e._refreshFreeTurntable()
            }
          })), e.addToDestroy = mr((function() {
            e.subscribeButton.toggle = !Ju.subscribedTurntable
          })), e
        }
        return i(e, t), e.prototype._startTurntable = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n, o, r = this;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  if (1 === t) {
                    if (uC.freeTurntableCount <= 0) return rc(""), [2]
                  } else if (uC.videoTurntableCount >= lh.maxTurntableVideoCount) return rc(""), [2];
                  for (this.closeButton.visible = !1, this.turntableContainer.scale.set(1, 1), this.turntableTop.scale.set(1, 1), TWEEN.killTweensOf(this.turntableContainer); this.turntableContainer.rotation > 2 * Math.PI;) this.turntableContainer.rotation -= 2 * Math.PI;
                  return [4, new Promise((function(t) {
                    new TWEEN.Tween(r.turntableContainer).to({
                      rotation: r.turntableContainer.rotation + 2 * Math.PI
                    }, 1e3).easing(TWEEN.Easing.Quartic.In).onComplete((function() {
                      t()
                    })).start()
                  }))];
                case 1:
                  return s.sent(), new TWEEN.Tween(this.turntableContainer).to({
                    rotation: this.turntableContainer.rotation + 2 * Math.PI
                  }, 270).repeat(1 / 0).start(), [4, sl(t)];
                case 2:
                  return e = s.sent(), DEVELOP && console.log("turnable result:", e), this.isTurntableEnd = !0, e ? [4, lu(js(1250, 1400, !1))] : [3, 5];
                case 3:
                  for (s.sent(), TWEEN.killTweensOf(this.turntableContainer), i = e.index, n = 180 * this.turntableContainer.rotation / Math.PI, o = 720 + 60 * (7 - i); o < n;) o += 720;
                  return o += 20 * (Math.random() - .5), [4, new Promise((function(t) {
                    new TWEEN.Tween(r.turntableContainer).to({
                      rotation: o * Math.PI / 180
                    }, js(1250, 1400, !1)).easing(TWEEN.Easing.Quartic.Out).onComplete((function() {
                      t()
                    })).start()
                  }))];
                case 4:
                  return s.sent(), [3, 6];
                case 5:
                  TWEEN.killTweensOf(this.turntableContainer), s.label = 6;
                case 6:
                  return this.closeButton.visible = !0, tc.showPanel(ol, e.gift), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function() {
          var t = this;
          this.x = 0, this.y = 0, this.turntableContainer.rotation = 0, this.turntableContainer.scale.set(.5, .5), this.turntableTop.scale.set(.5, .5), this.startTween = new TWEEN.Tween({
            s: .5
          }).to({
            s: 1
          }, 600).onUpdate((function(e) {
            t.isDisposed || (t.turntableContainer.scale.set(e.s, e.s), t.turntableTop.scale.set(e.s, e.s))
          })).easing(TWEEN.Easing.Elastic.Out).start();
          var e = _e / Be >= .7 ? 100 : 200;
          this.titleBg.y = -this.titleBg.height, new TWEEN.Tween(this.titleBg).to({
            y: Mu.top + e
          }, 600).easing(TWEEN.Easing.Elastic.Out).start(), this.buttonGroup.y + this.buttonGroup.height > De && (this.buttonGroup.y = De - this.buttonGroup.height)
        }, e.prototype._refreshFreeTurntable = function() {
          if (!(uC.freeTurntableCount > 0)) {
            var t = !1,
              e = new Date(Je.curTime);
            if (uC.lastFreeTurntableTime <= 0) t = !0;
            else {
              var i = new Date(1e3 * uC.lastFreeTurntableTime);
              ti(i, e) ? (i.getHours() < 12 && e.getHours() >= 12 || i.getHours() < 20 && e.getHours() >= 20) && (t = !0) : t = !0
            }
            t && function() {
              r(this, void 0, void 0, (function() {
                var t;
                return s(this, (function(e) {
                  switch (e.label) {
                    case 0:
                      return e.trys.push([0, 2, , 3]), [4, ZP({})];
                    case 1:
                      return (t = e.sent()).syncData && uC.syncData(t.syncData), [2, t];
                    case 2:
                      return oc(e.sent()), [3, 3];
                    case 3:
                      return [2]
                  }
                }))
              }))
            }()
          }
        }, e.prototype.onHide = function() {
          this.startTween && (TWEEN.remove(this.startTween), this.startTween = null), TWEEN.killTweensOf(this.titleBg), TWEEN.killTweensOf(this.turntableContainer)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.closeButton && (this.closeButton.destroy(), this.closeButton = null), this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.freeButton && (this.freeButton.destroy(), this.freeButton = null), this.subscribeButton && (this.subscribeButton.destroy(), this.subscribeButton = null)
        }, e.prototype.getNextFreeTimeText = function() {
          var t = new Date(Je.curTime),
            e = "";
          return e = t.getHours() < 12 ? "12" : t.getHours() < 20 ? "20" : "00", "".concat(e, ":00")
        }, e.prototype.onTapVideoTurntable = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return (t = Je.curTime - ws.lastTurntableVideoTime) < 3e4 ? (rc("".concat(30 - Math.floor(t / 1e3), "")), [2]) : uC.videoTurntableCount >= lh.maxTurntableVideoCount ? (rc(""), [2]) : (this.isTurntableEnd = !1, [4, mu(1)]);
                case 1:
                  return (e = i.sent()) === ve.cancel ? [2, gu("")] : e === ve.fail ? [2, rc(fu)] : (this.isTurntableEnd ? this.onVideoDoubleSuccess(e) : this.onVideoTurntableSuccess(), [2])
              }
            }))
          }))
        }, e.prototype.onTapSubscribe = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return Ju.subscribedTurntable ? [2] : [4, Ju.requestSubscribe(Xu, "")];
                case 1:
                  return "accept" === e.sent() && ((t = new Date(Je.curTime)).getHours() < 12 ? t.setHours(12) : t.getHours() < 20 ? t.setHours(20) : ((t = Qe()).setDate(t.getDate() + 1), t.setHours(8)), nD({
                    templateId: Xu,
                    sendTime: t.getTime()
                  }), Ju.subscribedTurntable = !0, rc(""), this.close()), [2]
              }
            }))
          }))
        }, e.prototype.onTapFree = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  if (uC.freeTurntableCount <= 0) return rc(this.getNextFreeTimeText()), [2];
                  t.label = 1;
                case 1:
                  return t.trys.push([1, 3, 4, 5]), this.buttonGroup.visible = !1, [4, this._startTurntable(1)];
                case 2:
                  return t.sent(), [3, 5];
                case 3:
                  return t.sent(), [3, 5];
                case 4:
                  return this.buttonGroup.visible = !0, [7];
                case 5:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onVideoTurntableSuccess = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  ws.lastTurntableVideoTime = Je.curTime, t.label = 1;
                case 1:
                  return t.trys.push([1, 3, 4, 5]), this.buttonGroup.visible = !1, [4, this._startTurntable(2)];
                case 2:
                  return t.sent(), [3, 5];
                case 3:
                  return t.sent(), [3, 5];
                case 4:
                  return this.buttonGroup.visible = !0, [7];
                case 5:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onVideoDoubleSuccess = function(t) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, al(1, null)];
                case 1:
                  return t.sent(), [2]
              }
            }))
          }))
        }, e.clsName = "TurntableView", e
      }(Eu);

    function sl(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              return i.trys.push([0, 2, , 3]), [4, zP({
                type: t
              })];
            case 1:
              return (e = i.sent()).syncData && uC.syncData(e.syncData), [2, e];
            case 2:
              return oc(i.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function al(t, e) {
      return r(this, void 0, void 0, (function() {
        var i;
        return s(this, (function(n) {
          switch (n.label) {
            case 0:
              return n.trys.push([0, 2, , 3]), [4, JP({
                type: t,
                orderNo: e
              })];
            case 1:
              return (i = n.sent()).syncData && uC.syncData(i.syncData), [2, i];
            case 2:
              return oc(n.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function hl() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return [4, Bi("turntable")];
            case 1:
              return t.sent(), tc.showPanel(rl), [2]
          }
        }))
      }))
    }

    function cl(t, e, i) {
      return r(this, void 0, void 0, (function() {
        var n;
        return s(this, (function(o) {
          return eD({
            type: 2
          }), n = new Promise((function(t) {
            wx.onShow(t)
          })), [2, ul(t, e, (function() {
            i && i();
            var t = Date.now();
            n.then((function() {
              Date.now() - t >= ("number" != typeof $hostDef.navigateBack || isNaN($hostDef.navigateBack) ? 1e4 : 1e3 * $hostDef.navigateBack) && eD({
                type: 3
              })
            }))
          }))]
        }))
      }))
    }

    function ul(t, e, i, o) {
      return r(this, void 0, void 0, (function() {
        var r, a, h;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              if (!t) return [2, Jt.fail];
              if ("function" == typeof i ? (o = i, i = {
                  uid: U.user.uid
                }) : i = n({
                  uid: U.user.uid
                }, i), (r = q().emitter).emit("navigateInvoke", e, t.name, t, i), "function" != typeof wx.navigateToMiniProgram) return [2, Jt.fail];
              a = t.appId, h = t.path, s.label = 1;
            case 1:
              return s.trys.push([1, 3, , 4]), [4, new Promise((function(n, s) {
                wx.navigateToMiniProgram({
                  appId: a,
                  path: h,
                  extraData: i,
                  success: function() {
                    r.emit("navigateSuccess", e, t.name, t, i), o && o(), n(Jt.success)
                  },
                  fail: function(o) {
                    "navigateToMiniProgram:fail cancel" === o.errMsg ? (r.emit("navigateCancel", e, t.name, t, i), n(Jt.cancel)) : s(o.errMsg)
                  }
                })
              }))];
            case 2:
              return [2, s.sent()];
            case 3:
              return s.sent(), [3, 4];
            case 4:
              return [2, Jt.fail]
          }
        }))
      }))
    }
    var ll = function(t) {
      function e() {
        var e = t.call(this) || this;
        return e.width = 100, e.height = 100, e.interactive = !0, e.on(Iu, e.onNavigate, e), e
      }
      return i(e, t), e.prototype.onNavigate = function() {
        this.dataSource && cl(this.dataSource, Kt.banner)
      }, e
    }(PIXI.Sprite);

    function dl(t, e) {
      (function(t) {
        return r(this, void 0, void 0, (function() {
          var e, i;
          return s(this, (function(n) {
            switch (n.label) {
              case 0:
                if (Ii) return [2, t];
                e = t.slice(t.lastIndexOf("/") + 1), i = "".concat(vi, "/").concat(e), n.label = 1;
              case 1:
                return n.trys.push([1, 3, , 4]), DEVELOP && bi.log("...", i), [4, Fi(i)];
              case 2:
                if (!n.sent()) throw new Error("now local file err");
                return DEVELOP && bi.log("", i), [2, i];
              case 3:
                return n.sent(), DEVELOP && bi.log("...", t), [2, new Promise((function(e) {
                  wx.downloadFile({
                    url: t,
                    filePath: i,
                    success: function(n) {
                      200 === n.statusCode ? (n.tempFilePath || (n.tempFilePath = i), DEVELOP && bi.log(":", t), e(i)) : (bi.error("[".concat(n.statusCode, "] ").concat(t)), Mi(i), e(t))
                    },
                    fail: function(i) {
                      bi.warn(i.errMsg), e(t)
                    }
                  })
                }))];
              case 4:
                return [2]
            }
          }))
        }))
      })(t).then((function(t) {
        e.texture = PIXI.Texture.fromImage(t)
      }))
    }
    var pl = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.items = [], e.name = "MoreGameLeftBannerList", e.y = 0, e
        }
        return i(e, t), e.prototype.setData = function(t) {
          for (var e = this, i = this.items, n = 0, o = 0; o < t.length; o++) {
            var r = t[o],
              s = i[n];
            s || ((s = new ll).x = 0, s.y = n * (fl + gl), this.addChild(s), i[n] = s), s.dataSource = r, dl(r.icon, s), ++n
          }
          n < i.length && i.splice(n).forEach((function(t) {
            e.removeChild(t), t.destroy({
              children: !0
            })
          }))
        }, Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return 0 - this.y
          },
          set: function(t) {
            this.y = 0 - t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this.height + 0 + 0
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      fl = 100,
      gl = 10;
    const ml = JSON.parse('{"eh":["wx1478bb254dd0a07d","wxc2f9f01f064f5166","wx9abfaaedb2534b77","wxad4e66d7ff9349ab","wx5c3a8b3d07eb0b25","wx91441f682524f72b","wx4e213fc80f50349a","wx5cdff303ff4fe623","wxc27d1914179be0b0","wxceb81b779f274c69","wx36842826738ee970","wx8eac7b3b8ec0c5d7","wxca0f1c6aca17c4ec","wxc9eb6f411be21c42","wx4d4a01582078e326","wx431fc505500a986b","wxc9bccae077cdcb9a","wx897cb6fb78cd2778","wxcfd3df0bae31a3ba","wx36b8e8eaa78e3c67","wx1b61f4605c6860d3","wx5c0d6fbbe6834ced","wx3c63512d715147c8","wxc8a1e04576d71362","wx078a911a30b10fea","wx14a8a5c148254bb8","wx6bbb3060449791bb","wx7b967d7a2342e105","wx52b5ad25ea792183","wx861b7c4045c9f3fc","wx10d5658980363842","wx0e3439ec84f140b6","wx3cbf74b158ca1237","wxa5b2af84d176f953","wxd95c805fa8dad997","wx26c7f660e7158dbf","wx49e58ddd399bfdff","wx46fd7a5018374bdb","wxd0cdbe16c4683d49","wx46d38f50eae00dca","wx3f997d7bc483a96d","wx3d865389bb288501","wx883c0025978033a7","wx16a46cbea7864824","wxa1b0f90bedfd5c56","wx7f016b5547d73db7","wxbda79d936caf0aaa","wx5be610bcc04311ad","wx4fa58b057b7a2e13","wx737115997af92a64","wxf24210b3770da1a9","wxb370846de024d33a","wxcb5d1084bf5c20fb","wx221cd9d52c707a9e","wx14b66f8b2d5fa216","wx13f52b64507f72ff","wx02d714cf3ac748a7","wx0188457534807906","wxb669ddab22a36928","wx71dc62393bfbf79b","wx938a2e16b1fa04e3","wxd59226cf12e0d68f","wx969f3e8bf5f24b67","wx56cd93f0f7d4967a","wx56d2f341816cdf62","wx439a969453f92408","wxf2c0ca62750619db","wxdbca98efda3dce54","wx8c115eeaab91c393","wx7bd1014d793cfd13"]}');
    var yl = m.getLogger("banner"),
      vl = "function" == typeof wx.createBannerAd,
      bl = 280;

    function wl() {
      return !!vl && (!(_e <= 320) && (!(_e / Be > .65) && Boolean($hostDef.bannerAdNew)))
    }
    var xl, Tl = ["adunit-053a1813200bcccb", "adunit-e57f928da928a626", "adunit-04dcbbaebe99aa96"],
      kl = ["MenuView", "GameOverView", "ExpertGameOverView", "GameModeGameOverView"];

    function Il() {
      wl() && (bl = Math.floor(.21 * _e), DEVELOP && (yl.info("---initBanners---"), yl.info("screenWidth:", _e), yl.info("screenHeight:", Be), yl.info("BANNER_HEIGHT:", bl)), Tl = function(t) {
        for (var e, i, n = t.length; n > 1;) e = Math.floor(Math.random() * n--), i = t[n], t[n] = t[e], t[e] = i;
        return t
      }(Tl), function() {
        if (!wl()) return;
        xl && (xl.hide(), xl.destroy());
        var t = $hostDef.bannerScale || 1,
          e = bl,
          i = _e <= 320 ? 0 : _e * (1 - t) * .5,
          n = Tl[0],
          o = xl = wx.createBannerAd({
            adUnitId: n,
            adIntervals: 30,
            style: {
              width: _e * t,
              left: i,
              top: Be - e
            }
          });
        DEVELOP && yl.info("---banner.onResize---", "function" == typeof o.onResize);
        if ("function" == typeof o.onResize) {
          var r = _e * t,
            s = Be - e;
          o.onResize((function(t) {
            var e = t.width,
              i = t.height;
            DEVELOP && yl.info("---onResize---" + e + " , " + i), r === e && s === i || (r = e, s = i, o.style.left = (_e - e) / 2, o.style.top = Be - i)
          }))
        } else o.style.left = _e * (1 - t) * .5, o.style.top = Be - e;
        o.onError((function(t) {
          DEVELOP && yl.info("banner error", t)
        }))
      }(), br((function() {
        if (tc.openedPopUpPanelCount > 1 || RI.isGaming) return !1;
        var t = tc.lastPopUpView;
        return t && kl.indexOf(t.name) >= 0
      }), (function(t) {
        t ? function() {
          if (!wl()) return;
          DEVELOP && yl.info("showBanner");
          xl && xl.show().catch((function(t) {}))
        }() : function() {
          if (!wl()) return;
          DEVELOP && yl.info("hideBanner");
          xl && xl.hide().catch((function(t) {}))
        }()
      })))
    }
    var Cl, _l, Bl = function() {
      function t(t) {
        DEVELOP && m.log(":", t);
        var e = this.gamesList = (t[at.gamesList] || []).map(Sl);
        this.gamesIcon = t[at.gamesIcon] || [], this.gamesBanner = t[at.gamesBanner] || [], this.navigateReward = t[at.navigateReward] || [], this._refreshList = pt(e);
        this.canRefresh = e.length > 12 && e.slice(0, 12).some((function(t) {
          return !t.fixed
        })) && e.slice(12).some((function(t) {
          return !t.fixed
        })), this.gamesNavigate = new dt(t[at.gamesNavigate] || [], ml.eh)
      }
      return t.prototype.getNextGameList = function() {
        return this._refreshList.next().value
      }, t.prototype.getRandomItem = function(t) {
        return function(t, e) {
          if (t) {
            var i = t.filter((function(t) {
                return t.name !== e
              })),
              n = tt(i.map((function(t) {
                return t.weight
              })));
            return i[n]
          }
        }(this.gamesIcon, t)
      }, t.prototype.getUnlimitedNavigateList = function(t) {
        void 0 === t && (t = 1);
        for (var e = this.gamesNavigate, i = Q(2e48), n = new rt(i), o = it(e.first(e.totalCount), n); --t > 0;) n.seed = i, o = o.concat(it(e.first(e.totalCount), n));
        return o
      }, t
    }();

    function Sl(t) {
      return t.lastClick = wx.getStorageSync("more-games-".concat(t.name)) || 0, Object.defineProperty(t, "isRed", {
        get: function() {
          return Date.now() - this.lastClick > 864e5 * this.redPoint
        },
        configurable: !0,
        enumerable: !0
      }), t = po(t), br((function() {
        return t.lastClick
      }), (function(e) {
        Nh("more-games-".concat(t.name), e)
      })), t
    }

    function Pl() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          return Cl ? [2, Cl] : (_l || (_l = ht().then((function(t) {
            return Cl = new Bl(t), _l = void 0, Cl
          }))), [2, _l])
        }))
      }))
    }
    var Dl = function(t) {
        function e() {
          var e = t.call(this) || this;
          e._destroyed = !1, e._showList = !1, e._destroyBag = [];
          var i = e.bg = jh("more_games_left_bg.png");
          i.width = 140, i.height = 530, e.addChild(i), e.pivot.x = 0, e.pivot.y = 0, e.turntableButton = new Ru("icon_turntable_small.png"), e.turntableButton.x = 15 + e.turntableButton.width / 2, e.turntableButton.y = 20 + e.turntableButton.height / 2, e.turntableButton.on(Tu, (function() {
            hl(), e.setListVisible(!1)
          }), e), e.addChild(e.turntableButton.skin), e.scroller = new Wu(120, 370), e.scroller.x = 25, e.scroller.y = 130 + (400 - e.scroller.visibleHeight) / 2, e.scroller.visible = !1, e.list = new pl, e.scroller.setContent(e.list), e.addChild(e.scroller), e.gameIcon = jh("moregame_panel_button.png"), e.gameIcon.x = i.width, e.gameIcon.y = 30, e.gameIcon.interactive = !0, e.gameIcon.on(Tu, e.onClickShowHide, e), e.addChild(e.gameIcon), e.redIcon = jh("redpoint2.png"), e.redIcon.x = 50, e.redIcon.y = 0, e.gameIcon.addChild(e.redIcon), e.scroller.on(Tu, (function() {
            e.list.items.length > 3 && (e.stopRollAnimation(), -1 !== e.timerId && clearTimeout(e.timerId), e.timerId = setTimeout((function() {
              clearTimeout(e.timerId), e.timerId = -1, e.startRollAnimation()
            }), 4e3))
          }), e);
          var n = e;
          return Pl().then((function(t) {
            if (!n._destroyed && t.gamesList) {
              var e = t.gamesList;
              n.list.setData(e), n.scroller.y = 130 + (400 - Math.min(n.scroller.height, n.scroller.visibleHeight)) / 2, n.scroller.updateMaxScrollV(), n.scroller.scrollV = 0, n.startRollAnimation()
            }
          })), e.setListVisible(!1), e.addToDestroy = mr((function() {
            e.redIcon.visible = uC.freeTurntableCount > 0
          })), e
        }
        return i(e, t), e.canShow = function() {
          return !$hostDef.censor && $hostDef.gamesPanel
        }, Object.defineProperty(e.prototype, "addToDestroy", {
          set: function(t) {
            this._destroyBag.push(t)
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onClickShowHide = function() {
          this.setListVisible(!this._showList)
        }, e.prototype.setListVisible = function(t) {
          this._showList = t, this.gameIcon.x = this._showList ? 140 : 0, this.bg.visible = this.scroller.visible = this._showList, this.turntableButton.visible = this.bg.visible, this.turntableButton.resetScale()
        }, e.prototype.startRollAnimation = function() {
          if (!(this._destroyed || this.list.items.length <= 3)) {
            var t, e;
            this.scroller.scrollV === this.scroller.maxScrollV ? (t = 0, e = 20 * this.scroller.scrollV) : (t = this.scroller.maxScrollV, e = 20 * (this.scroller.maxScrollV - this.scroller.scrollV)), TWEEN.killTweensOf(this.scroller);
            var i = this;
            new TWEEN.Tween(this.scroller).to({
              scrollV: t
            }, e).delay(1e3).onComplete((function() {
              i._destroyed || i.startRollAnimation()
            })).start()
          }
        }, e.prototype.stopRollAnimation = function() {
          var t = this.scroller;
          t && TWEEN.killTweensOf(t)
        }, e.prototype.destroy = function() {
          this._destroyed = !0, this._destroyBag.forEach((function(t) {
            return t()
          })), this._destroyBag.length = 0, -1 !== this.timerId && clearTimeout(this.timerId), this.stopRollAnimation(), this.turntableButton && (this.turntableButton.destroy(), this.turntableButton = null), this.scroller && (this.scroller.destroy({
            children: !0
          }), this.scroller = null), t.prototype.destroy.call(this, {
            children: !0
          })
        }, e
      }(PIXI.Container),
      Ml = function(t) {
        function e() {
          var e = t.call(this) || this;
          e._shakeCount = 0, e.moreGame = jh("try_game.png"), e.moreGame.x = -e.moreGame.width / 2, e.moreGame.y = -e.moreGame.height / 2, e.addChild(e.moreGame), e.gameIcon = new PIXI.Sprite, e.gameIcon.width = 129, e.gameIcon.height = 129, e.gameIcon.x = e.moreGame.x + 15, e.gameIcon.y = e.moreGame.y + 16, e.addChild(e.gameIcon), e.scale.set(.8, .8), e.interactive = !0, e.on(Tu, e.onNavigate, e), e.visible = !1;
          var i = e;
          return Pl().then((function(t) {
            i._destroyed || (i.config = t, i.visible = !0, i.updateIcon())
          })), e
        }
        return i(e, t), e.prototype.updateIcon = function() {
          if (this.config) {
            var t = this.def && this.def.name,
              e = this.def = this.config.getRandomItem(t);
            this.visible = null !== e, e && e.icon && (dl(e.icon, this.gameIcon), this.showGameIconTween())
          }
        }, e.prototype.onNavigate = function() {
          this.def && (cl(this.def, Kt.icon).catch((function(t) {})), this._shakeCount = 0, this.showGameIcon())
        }, e.prototype.showGameIcon = function() {
          this.stopGameIconTween(), this.updateIcon()
        }, e.prototype.stopGameIconTween = function() {
          TWEEN.killTweensOf(this)
        }, e.prototype.showGameIconTween = function() {
          if (!this._destroyed) {
            this._shakeCount++, this._shakeCount > 3 && (this._shakeCount = 0, this.updateIcon()), this.stopGameIconTween();
            var t = 15 * Math.PI / 180;
            this.rotation = 0;
            var e = new TWEEN.Tween(this).delay(2e3).to({
                rotation: -t
              }, 50).easing(TWEEN.Easing.Quadratic.InOut),
              i = new TWEEN.Tween(this).to({
                rotation: t
              }, 100).easing(TWEEN.Easing.Linear.None),
              n = new TWEEN.Tween(this).to({
                rotation: -t
              }, 100).easing(TWEEN.Easing.Linear.None),
              o = this,
              r = new TWEEN.Tween(this).to({
                rotation: 0
              }, 50).easing(TWEEN.Easing.Linear.None).onComplete((function() {
                o._destroyed || o.showGameIconTween()
              }));
            n.chain(r), i.chain(n), e.chain(i), e.start()
          }
        }, e.prototype.destroy = function(e) {
          TWEEN.killTweensOf(this), t.prototype.destroy.call(this, {
            children: !0
          })
        }, e
      }(PIXI.Container),
      Fl = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._destroyBag = [], e
        }
        return i(e, t), Object.defineProperty(e.prototype, "addToDestroy", {
          set: function(t) {
            this._destroyBag.push(t)
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this._destroyBag.forEach((function(t) {
            return t()
          })), this._destroyBag.length = 0, t.prototype.destroy.call(this, {
            children: !0
          })
        }, e
      }(PIXI.Container),
      El = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.programTip = jh("icon_addprogram.png"), e.programTip.width = 340, e.programTip.height = 71, e.addChild(e.programTip), e
        }
        return i(e, t), e.prototype.startTween = function() {
          if (!this._destroyed) {
            this.stopTween();
            var t = this.defaultX - 20,
              e = this.defaultX,
              i = this.defaultX - 10,
              n = new TWEEN.Tween(this).delay(1500).to({
                x: t
              }, 50).easing(TWEEN.Easing.Quadratic.InOut),
              o = new TWEEN.Tween(this).to({
                x: e
              }, 100).easing(TWEEN.Easing.Linear.None),
              r = new TWEEN.Tween(this).to({
                x: t
              }, 100).easing(TWEEN.Easing.Linear.None),
              s = this,
              a = new TWEEN.Tween(this).to({
                x: i
              }, 50).easing(TWEEN.Easing.Linear.None).onComplete((function() {
                s.startTween()
              }));
            r.chain(a), o.chain(r), n.chain(o), n.start()
          }
        }, e.prototype.stopTween = function() {
          TWEEN.killTweensOf(this)
        }, e.prototype.destroy = function() {
          this.stopTween(), t.prototype.destroy.call(this)
        }, e
      }(Fl),
      Ll = function() {
        function t() {
          this._listeners = {}
        }
        return t.prototype.addOnceListener = function(t, e, i) {
          e.__once = !0, this.addListener(t, e, i)
        }, t.prototype.addListener = function(t, e, i) {
          i && e.__bindThis !== i && (e.__bindThis = i, e.__bindFunc = e.bind(i));
          var n = this._listeners[t];
          n || (this._listeners[t] = n = []), -1 === n.indexOf(e) && n.push(e)
        }, t.prototype.removeListener = function(t, e) {
          var i = this._listeners[t];
          if (i) {
            var n = i.indexOf(e); - 1 !== n && (i.splice(n, 1), e.__bindThis && delete e.__bindThis, e.__bindFunc && delete e.__bindFunc, e.__once && delete e.__once)
          }
        }, t.prototype.dispatchEvent = function(t, e) {
          var i = this._listeners[t];
          if (i)
            for (var n = 0, o = (i = i.concat()).length; n < o; n++) {
              var r = i[n];
              r && (r.__bindFunc ? r.__bindFunc(e) : r(e), r.__once && this.removeListener(t, r))
            }
        }, t.prototype.removeAllListeners = function() {
          this._listeners = {}
        }, t
      }();

    function Ol(t) {
      var e = function(t) {
        var e = new Uint8Array(t),
          i = new Vl(e),
          n = i.readUncompressedLength();
        if (-1 === n) throw new Error("Invalid bitstream");
        var o = new ArrayBuffer(n),
          r = new Uint8Array(o);
        if (!i.unCompress(r)) throw new Error("Invalid bitstream");
        return o
      }(t);
      return function(t) {
        for (var e = new Uint16Array(t), i = "", n = 0; n < e.length; n++) i += String.fromCharCode(e[n]);
        return i
      }(e)
    }
    new Array(15);

    function Rl(t, e, i, n, o) {
      for (var r = 0; r < o; r++) i[n + r] = t[e + r]
    }
    var Gl = [0, 255, 65535, 16777215, 4294967295];

    function Al(t, e, i, n) {
      for (var o = 0; o < n; o++) t[e + o] = t[e - i + o]
    }
    var Nl, jl, Vl = function() {
      function t(t) {
        this.array = t, this.pos = 0
      }
      return t.prototype.readUncompressedLength = function() {
        for (var t, e, i = 0, n = 0; n < 32 && this.pos < this.array.length;) {
          if (t = this.array[this.pos], this.pos += 1, (e = 127 & t) << n >>> n !== e) return -1;
          if (i |= e << n, t < 128) return i;
          n += 7
        }
        return -1
      }, t.prototype.unCompress = function(t) {
        for (var e, i, n, o, r = this.array, s = r.length, a = this.pos, h = 0; a < r.length;)
          if (e = r[a], a += 1, 3 & e) {
            switch (3 & e) {
              case 1:
                i = 4 + (e >>> 2 & 7), o = r[a] + (e >>> 5 << 8), a += 1;
                break;
              case 2:
                if (a + 1 >= s) return !1;
                i = (e >>> 2) + 1, o = r[a] + (r[a + 1] << 8), a += 2;
                break;
              case 3:
                if (a + 3 >= s) return !1;
                i = (e >>> 2) + 1, o = r[a] + (r[a + 1] << 8) + (r[a + 2] << 16) + (r[a + 3] << 24), a += 4
            }
            if (0 === o || o > h) return !1;
            Al(t, h, o, i), h += i
          } else {
            if ((i = (e >>> 2) + 1) > 60) {
              if (a + 3 >= s) return !1;
              n = i - 60, i = 1 + ((i = r[a] + (r[a + 1] << 8) + (r[a + 2] << 16) + (r[a + 3] << 24)) & Gl[n]), a += n
            }
            if (a + i > s) return !1;
            Rl(r, a, t, h, i), a += i, h += i
          } return !0
      }, t
    }();

    function Ul(t) {
      return 4 - 6 * t
    }! function(t) {
      t[t.Word1 = 0] = "Word1", t[t.Word2 = 1] = "Word2", t[t.Word3 = 2] = "Word3"
    }(Nl || (Nl = {})),
    function(t) {
      t[t.Top = 0] = "Top", t[t.Center = 1] = "Center", t[t.Bottom = 2] = "Bottom"
    }(jl || (jl = {}));
    var Wl = function() {
        function t(t, e, i) {
          this.collected = !1, this._endY = 0, this.moveSpeed = 0, this._perMoveTime = 0, this._totalMoveTime = 0, this.rotationSpeed = 0, this.rotationRange = 0, this._curStartAngle = 0, this._endRotationAngle = 0, this._perRotationTime = 0, this._totalRotateTime = 0, this.type = t, this.id = e, this.floor = i, this.radius = .2
        }
        return t.prototype.setPos = function(t) {
          this.pos = t;
          var e = 0;
          switch (t) {
            case jl.Top:
              e = 4;
              break;
            case jl.Center:
              e = 3;
              break;
            case jl.Bottom:
              e = 2
          }
          this._curY = Ul(this.floor) + e, this._startY = this._curY
        }, Object.defineProperty(t.prototype, "y", {
          get: function() {
            return this._curY
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.setMoveSpeed = function(t) {
          this.moveSpeed = t, this.moveRange = 2, this.moveSpeed < 0 ? this._endY = this._startY - this.moveRange : this._endY = this._startY + this.moveRange, 0 !== this.moveSpeed && (this._perMoveTime = Math.abs(this.moveRange / this.moveSpeed))
        }, t.prototype.rotate = function(t) {
          this.setAngle(this._startAngle + t)
        }, Object.defineProperty(t.prototype, "curStartAngle", {
          get: function() {
            return this._curStartAngle
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "centerAngle", {
          get: function() {
            return this._curStartAngle
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "curY", {
          get: function() {
            return this._curY
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.setAngle = function(t) {
          this._startAngle = ia(t), this._curStartAngle = this._startAngle, this._endRotationAngle = this._startAngle + this.rotationRange
        }, t.prototype.setRotateSpeed = function(t, e) {
          this.rotationSpeed = t, this.rotationRange = e, 0 === e && (this.rotationSpeed = 0), this.rotationSpeed < 0 ? this._endRotationAngle = this._startAngle - this.rotationRange : this._endRotationAngle = this._startAngle + this.rotationRange, 0 !== this.rotationSpeed && (this._perRotationTime = Math.abs(this.rotationRange / this.rotationSpeed))
        }, t.prototype.update = function(t) {
          if (0 !== this.rotationSpeed && (this._totalRotateTime += t, 0 !== this._perRotationTime)) {
            var e = Math.floor(this._totalRotateTime / this._perRotationTime),
              i = this._totalRotateTime - e * this._perRotationTime;
            this._curStartAngle = e % 2 == 0 ? this._startAngle + this.rotationSpeed * i : this._endRotationAngle - this.rotationSpeed * i
          }
          if (0 !== this.moveSpeed && (this._totalMoveTime += t, 0 !== this._perMoveTime)) {
            e = Math.floor(this._totalMoveTime / this._perMoveTime), i = this._totalMoveTime - e * this._perMoveTime;
            this._curY = e % 2 == 0 ? this._startY + this.moveSpeed * i : this._endY - this.moveSpeed * i
          }
          var n = cI.ball,
            o = (this._curStartAngle + RI.curRotation) * Zs,
            r = 3 * Math.sin(o),
            s = 3 * Math.cos(o),
            a = n.x - r,
            h = n.y - this._curY,
            c = n.z - s;
          return !!(a * a + h * h + c * c < n.radius + this.radius)
        }, t
      }(),
      ql = new(function() {
        function t() {
          this._startListeners = [], this._endListeners = [], this._moveListeners = [], wx.onTouchStart(this._onTouchStart.bind(this));
          var t = this._onTouchEnd.bind(this);
          wx.onTouchEnd(t), wx.onTouchCancel(t), wx.onTouchMove(this._onTouchMove.bind(this))
        }
        return t.prototype._onTouchStart = function(t) {
          for (var e = this._startListeners.length - 1; e >= 0; e--) {
            var i = this._startListeners[e];
            i && (i.__bindFunc ? i.__bindFunc(t) : i(t))
          }
        }, t.prototype._onTouchMove = function(t) {
          for (var e = this._moveListeners.length - 1; e >= 0; e--) {
            var i = this._moveListeners[e];
            i ? i.__bindFunc ? i.__bindFunc(t) : i(t) : this._moveListeners.splice(e, 1)
          }
        }, t.prototype._onTouchEnd = function(t) {
          for (var e = this._endListeners.length - 1; e >= 0; e--) {
            var i = this._endListeners[e];
            i ? i.__bindFunc ? i.__bindFunc(t) : i(t) : this._endListeners.splice(e, 1)
          }
        }, t.prototype.addTouchStart = function(t, e) {
          var i = this;
          e && t.__bindThis !== e && (t.__bindThis = e, t.__bindFunc = t.bind(e)), -1 === this._startListeners.indexOf(t) && setTimeout((function() {
            i._startListeners.push(t)
          }), 1)
        }, t.prototype.addTouchEnd = function(t, e) {
          var i = this;
          e && t.__bindThis !== e && (t.__bindThis = e, t.__bindFunc = t.bind(e)), -1 === this._endListeners.indexOf(t) && setTimeout((function() {
            i._endListeners.push(t)
          }), 1)
        }, t.prototype.addTouchMove = function(t, e) {
          var i = this;
          e && t.__bindThis !== e && (t.__bindThis = e, t.__bindFunc = t.bind(e)), -1 === this._moveListeners.indexOf(t) && setTimeout((function() {
            i._moveListeners.push(t)
          }), 1)
        }, t.prototype.removeTouchStart = function(t) {
          var e = this._startListeners.indexOf(t); - 1 !== e && (this._startListeners.splice(e, 1), t.__bindThis && delete t.__bindThis, t.__bindFunc && delete t.__bindFunc)
        }, t.prototype.removeTouchEnd = function(t) {
          var e = this._endListeners.indexOf(t); - 1 !== e && (this._endListeners.splice(e, 1), t.__bindThis && delete t.__bindThis, t.__bindFunc && delete t.__bindFunc)
        }, t.prototype.removeTouchMove = function(t) {
          var e = this._moveListeners.indexOf(t); - 1 !== e && (this._moveListeners.splice(e, 1), t.__bindThis && delete t.__bindThis, t.__bindFunc && delete t.__bindFunc)
        }, t
      }());

    function Hl(t, e, i, n) {
      wx.showKeyboard({
        defaultValue: t,
        maxLength: e,
        multiple: i,
        confirmHold: !1,
        confirmType: "done",
        success: function() {
          var t = function(t) {
              var i = t.value;
              e(), n(i)
            },
            e = function() {
              wx.offKeyboardComplete(t)
            };
          wx.onKeyboardComplete(t)
        }
      })
    }
    var $l = new Set([1, 8, 9, 11, 12, 13, 99, 100]),
      Xl = new Set([2, 3, 4, 5, 6, 7]),
      Yl = [new Set([0]), $l, Xl],
      zl = function() {
        function t(t) {
          this.pieceList = [], this.hasWall = !1, this.hasHalfWall = !1, this.hasScaleWall = !1, this.hasTorus = !1, this.needsUpdate = !1, this.gapToType = -1, this.gapAngle = 0, this.hasWord = !1, this.disableUpdate = !1, this.floor = t
        }
        return t.prototype.addWord = function(t) {
          this.wordList || (this.wordList = []), this.wordList.push(t)
        }, t.prototype.addPiece = function(t) {
          this.pieceList.push(t)
        }, t.prototype.changePieceType = function(t, e, i) {
          t.type === e && t.power === i || (this.removePiece(t, !1), t.type = e, t.power = i, 3 === e ? (this.hasWall = !0, this.wallList || (this.wallList = []), this.wallList.push(t)) : 4 === e ? (this.hasHalfWall = !0, this.halfWallList || (this.halfWallList = []), this.halfWallList.push(t)) : 5 === e || 7 === e ? (this.hasScaleWall = !0, this.scaleWallList || (this.scaleWallList = []), this.scaleWallList.push(t)) : 6 === e && (this.hasTorus = !0, this.torusList || (this.torusList = []), this.torusList.push(t)), 0 === t.rotationSpeed && 0 === t.scaleSpeed || (this.needsUpdate = !0, this.updateList || (this.updateList = []), this.updateList.push(t)))
        }, t.prototype.removePiece = function(t, e) {
          var i;
          (void 0 === e && (e = !0), e) && ((i = this.pieceList.indexOf(t)) >= 0 && this.pieceList.splice(i, 1));
          this.hasWall && ((i = this.wallList.indexOf(t)) >= 0 && (this.wallList.splice(i, 1), this.hasWall = this.wallList.length > 0));
          this.hasHalfWall && ((i = this.halfWallList.indexOf(t)) >= 0 && (this.halfWallList.splice(i, 1), this.hasHalfWall = this.halfWallList.length > 0));
          this.hasScaleWall && ((i = this.scaleWallList.indexOf(t)) >= 0 && (this.scaleWallList.splice(i, 1), this.hasScaleWall = this.scaleWallList.length > 0));
          this.hasTorus && ((i = this.torusList.indexOf(t)) >= 0 && (this.torusList.splice(i, 1), this.hasTorus = this.torusList.length > 0));
          this.needsUpdate && ((i = this.updateList.indexOf(t)) >= 0 && (this.updateList.splice(i, 1), this.needsUpdate = this.updateList.length > 0))
        }, t.prototype.rotate = function(t) {
          for (var e = 0, i = this.pieceList.length; e < i; e++) this.pieceList[e].rotate(t);
          if (this.wordList)
            for (e = 0, i = this.wordList.length; e < i; e++) this.wordList[e].rotate(t)
        }, t.prototype.findFirstPieceByType = function(t) {
          for (var e = 0, i = this.pieceList.length; e < i; e++) {
            var n = this.pieceList[e];
            if (Yl[t].has(n.type)) return n
          }
          return null
        }, t.prototype.findFirstGapAngle = function() {
          var t = this.pieceList.length;
          if (1 === t) return this.pieceList[0].endAngle;
          if (0 === t) return Math.floor(360 * Math.random());
          for (var e = [], i = 0; i < t; i++) {
            var n = this.pieceList[i],
              o = n.curStartAngle,
              r = o + n.angle;
            r > 360 ? (e.push([o, 360]), e.push([0, r - 360])) : e.push([o, r])
          }
          e.sort((function(t, e) {
            return t[0] - e[0]
          }));
          var s = e[0];
          for (i = 1; i < e.length; i++) {
            var a = e[i],
              h = s[1];
            if (h < a[0]) return h;
            if (i === e.length - 1 && a[1] < 360) return a[1];
            s = a
          }
          return Math.floor(360 * Math.random())
        }, t.prototype.afterInit = function() {
          this.pieceList.sort((function(t, e) {
            return t.startAngle - e.startAngle
          })), this.hasWall = !1, this.wallList = null, this.hasHalfWall = !1, this.halfWallList = null, this.hasScaleWall = !1, this.scaleWallList = null, this.hasTorus = !1, this.torusList = null, this.needsUpdate = !1, this.updateList = null;
          for (var t = 0, e = this.pieceList.length; t < e; t++) {
            var i = this.pieceList[t],
              n = i.type;
            3 === n ? (this.hasWall = !0, this.wallList || (this.wallList = []), this.wallList.push(i)) : 4 === n ? (this.hasHalfWall = !0, this.halfWallList || (this.halfWallList = []), this.halfWallList.push(i)) : 5 === n || 7 === n ? (this.hasScaleWall = !0, this.scaleWallList || (this.scaleWallList = []), this.scaleWallList.push(i)) : 6 === n && (this.hasTorus = !0, this.torusList || (this.torusList = []), this.torusList.push(i)), 0 === i.rotationSpeed && 0 === i.scaleSpeed || (this.needsUpdate = !0, this.updateList || (this.updateList = []), this.updateList.push(i))
          }
          this.checkWords()
        }, t.prototype.checkWords = function() {
          this.wordList && this.wordList.length > 0 ? (this.hasWord = !0, this.needsUpdate = !0) : this.hasWord = !1
        }, t.prototype.clearWords = function() {
          this.wordList = null, this.hasWord = !1
        }, t
      }();

    function Kl(t, e, i, n, o, r) {
      var s = new Ql(e, t);
      return s.setAngle(i, n, r, o), 0 === t && (s.safe = !0), s
    }
    var Jl = .8,
      Ql = function() {
        function t(t, e) {
          this.safe = !1, this.isGhost = !1, this.power = -1, this.initPower = -1, this.type = t, this.initType = this.type, this.floor = e, this.y = Ul(e), this.scaleY = 1, 5 === this.type || 7 === this.type ? (this.scaleSpeed = 1, this._perScaleTime = 1 / this.scaleSpeed) : (this.scaleSpeed = 0, this._perScaleTime = 0), 6 === this.type && (this.y += 4.2), 11 === this.type ? this.power = 1 : 12 === this.type ? this.power = 2 : 13 === this.type && (this.power = 3), this.initPower = this.power, this._totalTime = 0
        }
        return t.prototype.setAngle = function(t, e, i, n) {
          this.startAngle = ia(t), this.angle = e, this._curStartAngle = this.startAngle, this.rotationSpeed = i, this.rotationRange = n, 0 === this.rotationRange && (this.rotationSpeed = 0), 0 !== this.rotationSpeed ? this._perRotationTime = Math.abs(this.rotationRange / this.rotationSpeed) : this._perRotationTime = 0, this.rotationSpeed < 0 ? this._endRotationAngle = this.startAngle - this.rotationRange : this._endRotationAngle = this.startAngle + this.rotationRange
        }, t.prototype.rotate = function(t) {
          this.setAngle(this.startAngle + t, this.angle, this.rotationSpeed, this.rotationRange)
        }, t.prototype.update = function(t) {
          if (0 !== this.rotationSpeed || 0 !== this.scaleSpeed) {
            if (this._totalTime += t, 0 !== this._perRotationTime) {
              var e = Math.floor(this._totalTime / this._perRotationTime),
                i = this._totalTime - e * this._perRotationTime;
              this._curStartAngle = e % 2 == 0 ? this.startAngle + this.rotationSpeed * i : this._endRotationAngle - this.rotationSpeed * i
            }
            if (0 !== this._perScaleTime) {
              var n = Math.floor(this._totalTime / this._perScaleTime),
                o = this._totalTime - n * this._perScaleTime,
                r = void 0;
              (r = n % 2 == 0 ? 7 === this.type ? Jl * (1 - o * this.scaleSpeed) : Jl * o * this.scaleSpeed : 7 === this.type ? Jl * o * this.scaleSpeed : Jl * (1 - o * this.scaleSpeed)) > 1 && (r = 1), this.scaleY = .2 + r
            }
          }
        }, Object.defineProperty(t.prototype, "endAngle", {
          get: function() {
            return ia(this._curStartAngle + this.angle)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "curStartAngle", {
          get: function() {
            return this._curStartAngle
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "isRed", {
          get: function() {
            return this.type >= 2 && this.type < 8
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "isEnd", {
          get: function() {
            return 99 === this.type || 100 === this.type
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "isFadeOut", {
          get: function() {
            return this.type >= 11 && this.type <= 13
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.isInside = function(t) {
          var e = ia(this._curStartAngle),
            i = ia(this._curStartAngle + this.angle);
          if (i >= e) {
            if (t >= e && t <= i) return !0
          } else {
            if (t >= 0 && t <= i) return !0;
            if (t >= e && t <= 360) return !0
          }
          return !1
        }, t.prototype.isIntersect = function(t, e) {
          var i = ia(this._curStartAngle),
            n = i + this.angle,
            o = ia(t),
            r = o + e;
          if (n > 360) {
            var s = n - 360;
            if (r > 360) {
              var a = r - 360;
              return Zl(i, 360, o, 360) || Zl(i, 360, 0, a) || Zl(0, s, o, 360) || Zl(0, s, 0, a)
            }
            return Zl(i, 360, o, r) || Zl(0, s, o, r)
          }
          return r > 360 ? Zl(i, n, o, 360) || Zl(i, n, 0, r - 360) : Zl(i, n, o, r)
        }, t
      }();

    function Zl(t, e, i, n) {
      return t <= i && n <= e || (t >= i && t <= n || e >= i && e <= n)
    }

    function td(t, e) {
      for (var i = new zl(t), n = 0; n < e.length; n++) {
        var o = e[n],
          r = o[0],
          s = r[0],
          a = 0,
          h = 0;
        3 === r.length ? (h = r[1], a = r[2]) : 2 === r.length && (h = r[1], a = Ve);
        for (var c = 1; c < o.length; c++) {
          var u = o[c][0],
            l = o[c][1];
          i.addPiece(Kl(t, u, s, l, h, a)), s += l
        }
      }
      return i.afterInit(), i.gapToType = -1, i.gapAngle = 0, i
    }

    function ed(t, e) {
      for (var i = new zl(t), n = 0; n < 12; n++) {
        var o = Kl(t, n % 2 == 0 ? 99 : 100, e + 30 * n, 30, 0, 0);
        o.safe = !0, i.addPiece(o)
      }
      return i.afterInit(), i
    }
    var id, nd, od, rd, sd, ad, hd, cd, ud = [0, 0, 0];

    function ld(t, e, i, n) {
      if (0 !== i || 0 !== n) {
        var o = ud;
        o[0] = t.gapPropList[0], o[1] = t.gapPropList[1], o[2] = t.gapPropList[2], 0 !== i && (o[0] *= i, e.gapToType = Ws(o)), 0 !== n && (o[2] *= n, e.gapToType = Ws(o))
      } else e.gapToType = t.getRandomGapToType()
    }

    function dd(t, e, i) {
      if (i >= 0) {
        var n = 0;
        if (0 === i) {
          n = e - t.findFirstGapAngle()
        } else {
          var o = t.findFirstPieceByType(i);
          o && (n = e - o.startAngle)
        }
        return 0 !== n && t.rotate(n), n
      }
      return 0
    }! function(t) {
      t[t.teamKick = 1] = "teamKick"
    }(id || (id = {})),
    function(t) {
      t[t.createTeam = 1] = "createTeam", t[t.teamApply = 2] = "teamApply", t[t.getTeamList = 3] = "getTeamList", t[t.getTeamMessage = 4] = "getTeamMessage", t[t.sendTeamRecruit = 5] = "sendTeamRecruit", t[t.getTeamRecruit = 6] = "getTeamRecruit", t[t.teamChangeInfo = 7] = "teamChangeInfo", t[t.quitTeam = 8] = "quitTeam", t[t.kickTeamMember = 9] = "kickTeamMember", t[t.teamChat = 10] = "teamChat", t[t.teamTransferLeader = 11] = "teamTransferLeader", t[t.searchTeam = 12] = "searchTeam", t[t.getCurTeam = 13] = "getCurTeam", t[t.getTeamMembers = 14] = "getTeamMembers", t[t.getTeamApplyList = 15] = "getTeamApplyList", t[t.getTeamApplyCnt = 16] = "getTeamApplyCnt", t[t.acceptTeamApply = 17] = "acceptTeamApply", t[t.refuseTeamApply = 18] = "refuseTeamApply", t[t.teamSetManager = 19] = "teamSetManager", t[t.teamCancelManager = 20] = "teamCancelManager", t[t.teamAutoOptimize = 21] = "teamAutoOptimize", t[t.getTeamShowInfo = 22] = "getTeamShowInfo", t[t.getUserShowInfo = 23] = "getUserShowInfo", t[t.teamInvite = 24] = "teamInvite", t[t.getTeamPersonTask = 25] = "getTeamPersonTask", t[t.getTeamPersonTaskReward = 26] = "getTeamPersonTaskReward", t[t.getTeamPersonTaskScoreReward = 27] = "getTeamPersonTaskScoreReward", t[t.saveDecorate = 28] = "saveDecorate", t[t.getDecorateList = 29] = "getDecorateList", t[t.getTeamTask = 30] = "getTeamTask", t[t.getDecorateShop = 31] = "getDecorateShop", t[t.buyDecoration = 32] = "buyDecoration", t[t.getTeamInviteList = 33] = "getTeamInviteList", t[t.acceptTeamInvite = 34] = "acceptTeamInvite", t[t.refuseTeamInvite = 35] = "refuseTeamInvite", t[t.getTeamDonation = 36] = "getTeamDonation", t[t.donate = 37] = "donate", t[t.videoTeamCoin = 38] = "videoTeamCoin", t[t.getTeamContributionRank = 39] = "getTeamContributionRank", t[t.getSelfShowMedals = 40] = "getSelfShowMedals", t[t.getSelfMedals = 41] = "getSelfMedals", t[t.setSelfShowMedals = 42] = "setSelfShowMedals"
    }(nd || (nd = {})),
    function(t) {
      t[t.NONE = 0] = "NONE", t[t.APPROVAL = 1] = "APPROVAL", t[t.DENY = 2] = "DENY"
    }(od || (od = {})),
    function(t) {
      t[t.Join = 1] = "Join", t[t.BeLeader = 2] = "BeLeader", t[t.Chat = 3] = "Chat"
    }(rd || (rd = {})),
    function(t) {
      t[t.Normal = 0] = "Normal", t[t.Manager = 1] = "Manager", t[t.Leader = 2] = "Leader"
    }(sd || (sd = {})),
    function(t) {
      t[t.RECRUIT = 1] = "RECRUIT", t[t.LOOK_CHANCE = 2] = "LOOK_CHANCE"
    }(ad || (ad = {})),
    function(t) {
      t[t.backLeft = 0] = "backLeft", t[t.backRight = 1] = "backRight", t[t.frontLeft = 2] = "frontLeft", t[t.frontRight = 3] = "frontRight", t[t.statue = 4] = "statue", t[t.bg = 5] = "bg", t[t.ground = 6] = "ground", t[t.floor = 7] = "floor"
    }(hd || (hd = {})),
    function(t) {
      t[t.Daily = 1] = "Daily", t[t.Weekly = 2] = "Weekly", t[t.Total = 3] = "Total"
    }(cd || (cd = {}));
    var pd, fd, gd, md, yd, vd, bd, wd, xd, Td, kd, Id, Cd, _d, Bd, Sd, Pd, Dd, Md, Fd, Ed, Ld, Od, Rd, Gd, Ad, Nd, jd, Vd, Ud, Wd, qd, Hd, $d, Xd, Yd, zd, Kd, Jd, Qd, Zd, tp, ep, ip, np, op, rp, sp, ap, hp, cp, up, lp, dp, pp, fp, gp, mp, yp, vp, bp, wp, xp, Tp, kp, Ip, Cp, _p, Bp, Sp, Pp, Dp, Mp, Fp, Ep, Lp, Op, Rp, Gp, Ap = __webpack_require__(946);
    ! function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.teamId = t.int32();
          else t.skipType(7 & o)
        }
        if (!Object.prototype.hasOwnProperty.call(n, "teamId")) throw new Ap.util.ProtocolError("missing required 'teamId'", {
          instance: n
        });
        return n
      }, t.__cmd = 1
    }(pd || (pd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(10).string(t.name), e.uint32(24).int32(t.joinLimit), e.uint32(32).int32(t.requireScore), e
      }
    }(fd || (fd = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.teamId = t.int32();
          else t.skipType(7 & o)
        }
        if (!Object.prototype.hasOwnProperty.call(n, "teamId")) throw new Ap.util.ProtocolError("missing required 'teamId'", {
          instance: n
        });
        return n
      }
    }(gd || (gd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.teamId), e.uint32(18).string(t.name), e.uint32(32).int32(t.joinLimit), e.uint32(40).int32(t.requireScore), e.uint32(48).int32(t.level), e.uint32(56).int32(t.memberCount), e.uint32(64).int32(t.memberMax), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.teamId = t.int32();
              break;
            case 2:
              n.name = t.string();
              break;
            case 4:
              n.joinLimit = t.int32();
              break;
            case 5:
              n.requireScore = t.int32();
              break;
            case 6:
              n.level = t.int32();
              break;
            case 7:
              n.memberCount = t.int32();
              break;
            case 8:
              n.memberMax = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "teamId")) throw new Ap.util.ProtocolError("missing required 'teamId'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "name")) throw new Ap.util.ProtocolError("missing required 'name'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "joinLimit")) throw new Ap.util.ProtocolError("missing required 'joinLimit'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "requireScore")) throw new Ap.util.ProtocolError("missing required 'requireScore'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "level")) throw new Ap.util.ProtocolError("missing required 'level'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "memberCount")) throw new Ap.util.ProtocolError("missing required 'memberCount'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "memberMax")) throw new Ap.util.ProtocolError("missing required 'memberMax'", {
          instance: n
        });
        return n
      }
    }(md || (md = {})),
    function(t) {
      t.encode = function(t, e) {
        if (e || (e = Ap.Writer.create()), e.uint32(8).int32(t.teamId), e.uint32(18).string(t.name), e.uint32(32).int32(t.joinLimit), e.uint32(40).int32(t.requireScore), e.uint32(48).int32(t.level), e.uint32(56).int32(t.memberCount), e.uint32(64).int32(t.memberMax), e.uint32(72).int32(t.exp), e.uint32(82).string(t.notice), e.uint32(88).int32(t.permission), null != t.decorates && t.decorates.length) {
          e.uint32(98).fork();
          for (var i = 0; i < t.decorates.length; ++i) e.int32(t.decorates[i]);
          e.ldelim()
        }
        return e.uint32(105).double(t.joinTime), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            decorates: []
          }; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.teamId = t.int32();
              break;
            case 2:
              n.name = t.string();
              break;
            case 4:
              n.joinLimit = t.int32();
              break;
            case 5:
              n.requireScore = t.int32();
              break;
            case 6:
              n.level = t.int32();
              break;
            case 7:
              n.memberCount = t.int32();
              break;
            case 8:
              n.memberMax = t.int32();
              break;
            case 9:
              n.exp = t.int32();
              break;
            case 10:
              n.notice = t.string();
              break;
            case 11:
              n.permission = t.int32();
              break;
            case 12:
              if (n.decorates && n.decorates.length || (n.decorates = []), 2 == (7 & o))
                for (var r = t.uint32() + t.pos; t.pos < r;) n.decorates.push(t.int32());
              else n.decorates.push(t.int32());
              break;
            case 13:
              n.joinTime = t.double();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "teamId")) throw new Ap.util.ProtocolError("missing required 'teamId'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "name")) throw new Ap.util.ProtocolError("missing required 'name'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "joinLimit")) throw new Ap.util.ProtocolError("missing required 'joinLimit'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "requireScore")) throw new Ap.util.ProtocolError("missing required 'requireScore'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "level")) throw new Ap.util.ProtocolError("missing required 'level'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "memberCount")) throw new Ap.util.ProtocolError("missing required 'memberCount'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "memberMax")) throw new Ap.util.ProtocolError("missing required 'memberMax'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "exp")) throw new Ap.util.ProtocolError("missing required 'exp'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "notice")) throw new Ap.util.ProtocolError("missing required 'notice'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "permission")) throw new Ap.util.ProtocolError("missing required 'permission'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "joinTime")) throw new Ap.util.ProtocolError("missing required 'joinTime'", {
          instance: n
        });
        return n
      }
    }(yd || (yd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), null != t.level && Object.hasOwnProperty.call(t, "level") && e.uint32(8).int32(t.level), null != t.memberMax && Object.hasOwnProperty.call(t, "memberMax") && e.uint32(16).int32(t.memberMax), null != t.exp && Object.hasOwnProperty.call(t, "exp") && e.uint32(24).int32(t.exp), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.level = t.int32();
              break;
            case 2:
              n.memberMax = t.int32();
              break;
            case 3:
              n.exp = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        return n
      }
    }(vd || (vd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e.uint32(18).string(t.avatar), e.uint32(26).string(t.nick), e.uint32(32).int32(t.permission), null != t.skin && Object.hasOwnProperty.call(t, "skin") && e.uint32(40).int32(t.skin), e.uint32(49).double(t.lastLoginTime), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.uid = t.double();
              break;
            case 2:
              n.avatar = t.string();
              break;
            case 3:
              n.nick = t.string();
              break;
            case 4:
              n.permission = t.int32();
              break;
            case 5:
              n.skin = t.int32();
              break;
            case 6:
              n.lastLoginTime = t.double();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "uid")) throw new Ap.util.ProtocolError("missing required 'uid'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "avatar")) throw new Ap.util.ProtocolError("missing required 'avatar'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "nick")) throw new Ap.util.ProtocolError("missing required 'nick'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "permission")) throw new Ap.util.ProtocolError("missing required 'permission'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "lastLoginTime")) throw new Ap.util.ProtocolError("missing required 'lastLoginTime'", {
          instance: n
        });
        return n
      }
    }(bd || (bd = {})),
    function(t) {
      t.encode = function(t, e) {
        if (e || (e = Ap.Writer.create()), null != t.teamIds && t.teamIds.length) {
          e.uint32(10).fork();
          for (var i = 0; i < t.teamIds.length; ++i) e.int32(t.teamIds[i]);
          e.ldelim()
        }
        return e
      }
    }(wd || (wd = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.info = yd.decode(t, t.uint32());
          else t.skipType(7 & o)
        }
        return n
      }
    }(xd || (xd = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            teams: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.teams && n.teams.length || (n.teams = []), n.teams.push(md.decode(t, t.uint32()));
          else t.skipType(7 & o)
        }
        return n
      }
    }(Td || (Td = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.type), e.uint32(16).int32(t.permission), e.uint32(25).double(t.uid), e.uint32(34).string(t.avatar), e.uint32(42).string(t.nick), e.uint32(49).double(t.time), e.uint32(58).string(t.content), e.uint32(65).double(t.id), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.type = t.int32();
              break;
            case 2:
              n.permission = t.int32();
              break;
            case 3:
              n.uid = t.double();
              break;
            case 4:
              n.avatar = t.string();
              break;
            case 5:
              n.nick = t.string();
              break;
            case 6:
              n.time = t.double();
              break;
            case 7:
              n.content = t.string();
              break;
            case 8:
              n.id = t.double();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "type")) throw new Ap.util.ProtocolError("missing required 'type'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "permission")) throw new Ap.util.ProtocolError("missing required 'permission'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "uid")) throw new Ap.util.ProtocolError("missing required 'uid'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "avatar")) throw new Ap.util.ProtocolError("missing required 'avatar'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "nick")) throw new Ap.util.ProtocolError("missing required 'nick'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "time")) throw new Ap.util.ProtocolError("missing required 'time'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "content")) throw new Ap.util.ProtocolError("missing required 'content'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "id")) throw new Ap.util.ProtocolError("missing required 'id'", {
          instance: n
        });
        return n
      }
    }(kd || (kd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), null != t.fromId && Object.hasOwnProperty.call(t, "fromId") && e.uint32(9).double(t.fromId), e
      }
    }(Id || (Id = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            messages: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.messages && n.messages.length || (n.messages = []), n.messages.push(kd.decode(t, t.uint32()));
          else t.skipType(7 & o)
        }
        return n
      }
    }(Cd || (Cd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.type), e.uint32(16).int32(t.msgId), e
      }
    }(_d || (_d = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.type), e.uint32(17).double(t.sendUid), e.uint32(24).int32(t.teamId), e.uint32(32).int32(t.msgId), e.uint32(41).double(t.time), e.uint32(50).string(t.avatar), e.uint32(58).string(t.nick), e.uint32(66).string(t.teamName), e.uint32(72).int32(t.score), e.uint32(80).int32(t.skin), e.uint32(89).double(t.id), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.type = t.int32();
              break;
            case 2:
              n.sendUid = t.double();
              break;
            case 3:
              n.teamId = t.int32();
              break;
            case 4:
              n.msgId = t.int32();
              break;
            case 5:
              n.time = t.double();
              break;
            case 6:
              n.avatar = t.string();
              break;
            case 7:
              n.nick = t.string();
              break;
            case 8:
              n.teamName = t.string();
              break;
            case 9:
              n.score = t.int32();
              break;
            case 10:
              n.skin = t.int32();
              break;
            case 11:
              n.id = t.double();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "type")) throw new Ap.util.ProtocolError("missing required 'type'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "sendUid")) throw new Ap.util.ProtocolError("missing required 'sendUid'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "teamId")) throw new Ap.util.ProtocolError("missing required 'teamId'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "msgId")) throw new Ap.util.ProtocolError("missing required 'msgId'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "time")) throw new Ap.util.ProtocolError("missing required 'time'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "avatar")) throw new Ap.util.ProtocolError("missing required 'avatar'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "nick")) throw new Ap.util.ProtocolError("missing required 'nick'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "teamName")) throw new Ap.util.ProtocolError("missing required 'teamName'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "score")) throw new Ap.util.ProtocolError("missing required 'score'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "skin")) throw new Ap.util.ProtocolError("missing required 'skin'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "id")) throw new Ap.util.ProtocolError("missing required 'id'", {
          instance: n
        });
        return n
      }
    }(Bd || (Bd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), null != t.fromId && Object.hasOwnProperty.call(t, "fromId") && e.uint32(9).double(t.fromId), e
      }
    }(Sd || (Sd = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            recruits: []
          }; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.recruits && n.recruits.length || (n.recruits = []), n.recruits.push(Bd.decode(t, t.uint32()));
              break;
            case 2:
              n.lastRecruitTime = t.double();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "lastRecruitTime")) throw new Ap.util.ProtocolError("missing required 'lastRecruitTime'", {
          instance: n
        });
        return n
      }
    }(Pd || (Pd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), null != t.notice && Object.hasOwnProperty.call(t, "notice") && e.uint32(10).string(t.notice), null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(18).string(t.name), null != t.joinLimit && Object.hasOwnProperty.call(t, "joinLimit") && e.uint32(24).int32(t.joinLimit), null != t.requireScore && Object.hasOwnProperty.call(t, "requireScore") && e.uint32(32).int32(t.requireScore), e
      }
    }(Dd || (Dd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e
      }
    }(Md || (Md = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(10).string(t.content), e
      }
    }(Fd || (Fd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e
      }
    }(Ed || (Ed = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.teamId), e
      }
    }(Ld || (Ld = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.team = md.decode(t, t.uint32());
          else t.skipType(7 & o)
        }
        return n
      }
    }(Od || (Od = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.team = yd.decode(t, t.uint32());
              break;
            case 2:
              n.createTeamTime = t.double();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "createTeamTime")) throw new Ap.util.ProtocolError("missing required 'createTeamTime'", {
          instance: n
        });
        return n
      }
    }(Rd || (Rd = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            members: []
          }; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.members && n.members.length || (n.members = []), n.members.push(bd.decode(t, t.uint32()));
              break;
            case 2:
              n.autoOptimize = t.bool();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "autoOptimize")) throw new Ap.util.ProtocolError("missing required 'autoOptimize'", {
          instance: n
        });
        return n
      }
    }(Gd || (Gd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e.uint32(18).string(t.avatar), e.uint32(26).string(t.nick), e.uint32(32).int32(t.score), e.uint32(40).int32(t.skin), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.uid = t.double();
              break;
            case 2:
              n.avatar = t.string();
              break;
            case 3:
              n.nick = t.string();
              break;
            case 4:
              n.score = t.int32();
              break;
            case 5:
              n.skin = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "uid")) throw new Ap.util.ProtocolError("missing required 'uid'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "avatar")) throw new Ap.util.ProtocolError("missing required 'avatar'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "nick")) throw new Ap.util.ProtocolError("missing required 'nick'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "score")) throw new Ap.util.ProtocolError("missing required 'score'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "skin")) throw new Ap.util.ProtocolError("missing required 'skin'", {
          instance: n
        });
        return n
      }
    }(Ad || (Ad = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            applyList: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.applyList && n.applyList.length || (n.applyList = []), n.applyList.push(Ad.decode(t, t.uint32()));
          else t.skipType(7 & o)
        }
        return n
      }
    }(Nd || (Nd = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.cnt = t.int32();
          else t.skipType(7 & o)
        }
        if (!Object.prototype.hasOwnProperty.call(n, "cnt")) throw new Ap.util.ProtocolError("missing required 'cnt'", {
          instance: n
        });
        return n
      }
    }(jd || (jd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e
      }
    }(Vd || (Vd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e
      }
    }(Ud || (Ud = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e
      }
    }(Wd || (Wd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e
      }
    }(qd || (qd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).bool(t.value), e
      }
    }(Hd || (Hd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.joinLimit), e.uint32(16).int32(t.requireScore), e.uint32(24).int32(t.level), e.uint32(32).int32(t.memberCount), e.uint32(40).int32(t.memberMax), e.uint32(48).int32(t.exp), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.joinLimit = t.int32();
              break;
            case 2:
              n.requireScore = t.int32();
              break;
            case 3:
              n.level = t.int32();
              break;
            case 4:
              n.memberCount = t.int32();
              break;
            case 5:
              n.memberMax = t.int32();
              break;
            case 6:
              n.exp = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "joinLimit")) throw new Ap.util.ProtocolError("missing required 'joinLimit'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "requireScore")) throw new Ap.util.ProtocolError("missing required 'requireScore'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "level")) throw new Ap.util.ProtocolError("missing required 'level'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "memberCount")) throw new Ap.util.ProtocolError("missing required 'memberCount'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "memberMax")) throw new Ap.util.ProtocolError("missing required 'memberMax'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "exp")) throw new Ap.util.ProtocolError("missing required 'exp'", {
          instance: n
        });
        return n
      }
    }($d || ($d = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.skinId), e.uint32(18).string(t.avatar), e.uint32(26).string(t.nick), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.skinId = t.int32();
              break;
            case 2:
              n.avatar = t.string();
              break;
            case 3:
              n.nick = t.string();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "skinId")) throw new Ap.util.ProtocolError("missing required 'skinId'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "avatar")) throw new Ap.util.ProtocolError("missing required 'avatar'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "nick")) throw new Ap.util.ProtocolError("missing required 'nick'", {
          instance: n
        });
        return n
      }
    }(Xd || (Xd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.teamId), e
      }
    }(Yd || (Yd = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            members: []
          }; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.team = $d.decode(t, t.uint32());
              break;
            case 2:
              n.members && n.members.length || (n.members = []), n.members.push(Xd.decode(t, t.uint32()));
              break;
            default:
              t.skipType(7 & o)
          }
        }
        return n
      }
    }(zd || (zd = {})),
    function(t) {
      t.encode = function(t, e) {
        if (e || (e = Ap.Writer.create()), e.uint32(8).int32(t.skinId), e.uint32(16).int32(t.skinCnt), e.uint32(24).int32(t.score), null != t.teamName && Object.hasOwnProperty.call(t, "teamName") && e.uint32(34).string(t.teamName), null != t.medals && t.medals.length)
          for (var i = 0; i < t.medals.length; ++i) Pp.encode(t.medals[i], e.uint32(42).fork()).ldelim();
        return e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            medals: []
          }; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.skinId = t.int32();
              break;
            case 2:
              n.skinCnt = t.int32();
              break;
            case 3:
              n.score = t.int32();
              break;
            case 4:
              n.teamName = t.string();
              break;
            case 5:
              n.medals && n.medals.length || (n.medals = []), n.medals.push(Pp.decode(t, t.uint32()));
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "skinId")) throw new Ap.util.ProtocolError("missing required 'skinId'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "skinCnt")) throw new Ap.util.ProtocolError("missing required 'skinCnt'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "score")) throw new Ap.util.ProtocolError("missing required 'score'", {
          instance: n
        });
        return n
      }
    }(Kd || (Kd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e
      }
    }(Jd || (Jd = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.user = Kd.decode(t, t.uint32());
          else t.skipType(7 & o)
        }
        return n
      }
    }(Qd || (Qd = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e
      }
    }(Zd || (Zd = {})),
    function(t) {
      t.encode = function(t, e) {
        if (e || (e = Ap.Writer.create()), e.uint32(8).int32(t.score), null != t.finishTasks && t.finishTasks.length) {
          e.uint32(18).fork();
          for (var i = 0; i < t.finishTasks.length; ++i) e.int32(t.finishTasks[i]);
          e.ldelim()
        }
        if (null != t.receivedTasks && t.receivedTasks.length) {
          e.uint32(26).fork();
          for (i = 0; i < t.receivedTasks.length; ++i) e.int32(t.receivedTasks[i]);
          e.ldelim()
        }
        if (null != t.scoreRewards && t.scoreRewards.length) {
          e.uint32(34).fork();
          for (i = 0; i < t.scoreRewards.length; ++i) e.int32(t.scoreRewards[i]);
          e.ldelim()
        }
        return e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            finishTasks: [],
            receivedTasks: [],
            scoreRewards: []
          }; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.score = t.int32();
              break;
            case 2:
              if (n.finishTasks && n.finishTasks.length || (n.finishTasks = []), 2 == (7 & o))
                for (var r = t.uint32() + t.pos; t.pos < r;) n.finishTasks.push(t.int32());
              else n.finishTasks.push(t.int32());
              break;
            case 3:
              if (n.receivedTasks && n.receivedTasks.length || (n.receivedTasks = []), 2 == (7 & o))
                for (r = t.uint32() + t.pos; t.pos < r;) n.receivedTasks.push(t.int32());
              else n.receivedTasks.push(t.int32());
              break;
            case 4:
              if (n.scoreRewards && n.scoreRewards.length || (n.scoreRewards = []), 2 == (7 & o))
                for (r = t.uint32() + t.pos; t.pos < r;) n.scoreRewards.push(t.int32());
              else n.scoreRewards.push(t.int32());
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "score")) throw new Ap.util.ProtocolError("missing required 'score'", {
          instance: n
        });
        return n
      }
    }(tp || (tp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.task = tp.decode(t, t.uint32());
          else t.skipType(7 & o)
        }
        if (!Object.prototype.hasOwnProperty.call(n, "task")) throw new Ap.util.ProtocolError("missing required 'task'", {
          instance: n
        });
        return n
      }
    }(ep || (ep = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.taskId), e
      }
    }(ip || (ip = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.task = tp.decode(t, t.uint32());
              break;
            case 2:
              n.team = vd.decode(t, t.uint32());
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "task")) throw new Ap.util.ProtocolError("missing required 'task'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "team")) throw new Ap.util.ProtocolError("missing required 'team'", {
          instance: n
        });
        return n
      }
    }(np || (np = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.id), e
      }
    }(op || (op = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), null != t.coin && Object.hasOwnProperty.call(t, "coin") && e.uint32(8).int32(t.coin), null != t.teamCoin && Object.hasOwnProperty.call(t, "teamCoin") && e.uint32(16).int32(t.teamCoin), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.coin = t.int32();
              break;
            case 2:
              n.teamCoin = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        return n
      }
    }(rp || (rp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.syncData = rp.decode(t, t.uint32());
              break;
            case 2:
              n.task = tp.decode(t, t.uint32());
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "syncData")) throw new Ap.util.ProtocolError("missing required 'syncData'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "task")) throw new Ap.util.ProtocolError("missing required 'task'", {
          instance: n
        });
        return n
      }
    }(sp || (sp = {})),
    function(t) {
      t.encode = function(t, e) {
        if (e || (e = Ap.Writer.create()), null != t.decorates && t.decorates.length) {
          e.uint32(10).fork();
          for (var i = 0; i < t.decorates.length; ++i) e.int32(t.decorates[i]);
          e.ldelim()
        }
        return e
      }
    }(ap || (ap = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            list: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1)
            if (n.list && n.list.length || (n.list = []), 2 == (7 & o))
              for (var r = t.uint32() + t.pos; t.pos < r;) n.list.push(t.int32());
            else n.list.push(t.int32());
          else t.skipType(7 & o)
        }
        return n
      }
    }(hp || (hp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(9).double(t.uid), e.uint32(16).int32(t.count), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.uid = t.double();
              break;
            case 2:
              n.count = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "uid")) throw new Ap.util.ProtocolError("missing required 'uid'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "count")) throw new Ap.util.ProtocolError("missing required 'count'", {
          instance: n
        });
        return n
      }
    }(cp || (cp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.type), e.uint32(17).double(t.taskValue), e.uint32(24).int32(t.giftExp), e.uint32(32).int32(t.giftCoupon), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.type = t.int32();
              break;
            case 2:
              n.taskValue = t.double();
              break;
            case 3:
              n.giftExp = t.int32();
              break;
            case 4:
              n.giftCoupon = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "type")) throw new Ap.util.ProtocolError("missing required 'type'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "taskValue")) throw new Ap.util.ProtocolError("missing required 'taskValue'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "giftExp")) throw new Ap.util.ProtocolError("missing required 'giftExp'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "giftCoupon")) throw new Ap.util.ProtocolError("missing required 'giftCoupon'", {
          instance: n
        });
        return n
      }
    }(up || (up = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            members: []
          }; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.task = up.decode(t, t.uint32());
              break;
            case 2:
              n.finish = t.int32();
              break;
            case 3:
              n.members && n.members.length || (n.members = []), n.members.push(cp.decode(t, t.uint32()));
              break;
            case 4:
              n.rewardCnt = t.int32();
              break;
            case 5:
              n.team = vd.decode(t, t.uint32());
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "task")) throw new Ap.util.ProtocolError("missing required 'task'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "finish")) throw new Ap.util.ProtocolError("missing required 'finish'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "rewardCnt")) throw new Ap.util.ProtocolError("missing required 'rewardCnt'", {
          instance: n
        });
        return n
      }
    }(lp || (lp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.id), e.uint32(16).int32(t.price), e.uint32(24).bool(t.owned), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.id = t.int32();
              break;
            case 2:
              n.price = t.int32();
              break;
            case 3:
              n.owned = t.bool();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "id")) throw new Ap.util.ProtocolError("missing required 'id'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "price")) throw new Ap.util.ProtocolError("missing required 'price'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "owned")) throw new Ap.util.ProtocolError("missing required 'owned'", {
          instance: n
        });
        return n
      }
    }(dp || (dp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            products: []
          }; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.coupon = t.int32();
              break;
            case 2:
              n.nextRefreshTime = t.double();
              break;
            case 3:
              n.products && n.products.length || (n.products = []), n.products.push(dp.decode(t, t.uint32()));
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "coupon")) throw new Ap.util.ProtocolError("missing required 'coupon'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "nextRefreshTime")) throw new Ap.util.ProtocolError("missing required 'nextRefreshTime'", {
          instance: n
        });
        return n
      }
    }(pp || (pp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.id), e
      }
    }(fp || (fp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.coupon = t.int32();
          else t.skipType(7 & o)
        }
        if (!Object.prototype.hasOwnProperty.call(n, "coupon")) throw new Ap.util.ProtocolError("missing required 'coupon'", {
          instance: n
        });
        return n
      }
    }(gp || (gp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.teamId), e.uint32(18).string(t.teamName), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.teamId = t.int32();
              break;
            case 2:
              n.teamName = t.string();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "teamId")) throw new Ap.util.ProtocolError("missing required 'teamId'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "teamName")) throw new Ap.util.ProtocolError("missing required 'teamName'", {
          instance: n
        });
        return n
      }
    }(mp || (mp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), null != t.offset && Object.hasOwnProperty.call(t, "offset") && e.uint32(8).int32(t.offset), null != t.limit && Object.hasOwnProperty.call(t, "limit") && e.uint32(16).int32(t.limit), e
      }
    }(yp || (yp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            list: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.list && n.list.length || (n.list = []), n.list.push(mp.decode(t, t.uint32()));
          else t.skipType(7 & o)
        }
        return n
      }
    }(vp || (vp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.teamId), e
      }
    }(bp || (bp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.info = yd.decode(t, t.uint32());
              break;
            case 2:
              n.errCode = t.int32();
              break;
            case 3:
              n.errMsg = t.string();
              break;
            case 4:
              n.del = t.bool();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        return n
      }
    }(wp || (wp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.teamId), e
      }
    }(xp || (xp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.progress = t.int32();
              break;
            case 2:
              n.todayCnt = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "progress")) throw new Ap.util.ProtocolError("missing required 'progress'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "todayCnt")) throw new Ap.util.ProtocolError("missing required 'todayCnt'", {
          instance: n
        });
        return n
      }
    }(Tp || (Tp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.cnt), e
      }
    }(kp || (kp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.progress = t.int32();
              break;
            case 2:
              n.todayCnt = t.int32();
              break;
            case 3:
              n.teamCoin = t.int32();
              break;
            case 4:
              n.decorate = t.int32();
              break;
            case 5:
              n.coupon = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "progress")) throw new Ap.util.ProtocolError("missing required 'progress'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "todayCnt")) throw new Ap.util.ProtocolError("missing required 'todayCnt'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "teamCoin")) throw new Ap.util.ProtocolError("missing required 'teamCoin'", {
          instance: n
        });
        return n
      }
    }(Ip || (Ip = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.add = t.int32();
              break;
            case 2:
              n.teamCoin = t.int32();
              break;
            case 3:
              n.dayVideoTeamCoin = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "add")) throw new Ap.util.ProtocolError("missing required 'add'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "teamCoin")) throw new Ap.util.ProtocolError("missing required 'teamCoin'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "dayVideoTeamCoin")) throw new Ap.util.ProtocolError("missing required 'dayVideoTeamCoin'", {
          instance: n
        });
        return n
      }
    }(Cp || (Cp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.type), e
      }
    }(_p || (_p = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), bd.encode(t.member, e.uint32(10).fork()).ldelim(), e.uint32(16).int32(t.value), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.member = bd.decode(t, t.uint32());
              break;
            case 2:
              n.value = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "member")) throw new Ap.util.ProtocolError("missing required 'member'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "value")) throw new Ap.util.ProtocolError("missing required 'value'", {
          instance: n
        });
        return n
      }
    }(Bp || (Bp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            rankList: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.rankList && n.rankList.length || (n.rankList = []), n.rankList.push(Bp.decode(t, t.uint32()));
          else t.skipType(7 & o)
        }
        return n
      }
    }(Sp || (Sp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.id), e.uint32(16).int32(t.count), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.id = t.int32();
              break;
            case 2:
              n.count = t.int32();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "id")) throw new Ap.util.ProtocolError("missing required 'id'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "count")) throw new Ap.util.ProtocolError("missing required 'count'", {
          instance: n
        });
        return n
      }
    }(Pp || (Pp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            medals: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.medals && n.medals.length || (n.medals = []), n.medals.push(Pp.decode(t, t.uint32()));
          else t.skipType(7 & o)
        }
        return n
      }
    }(Dp || (Dp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            medals: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.medals && n.medals.length || (n.medals = []), n.medals.push(Pp.decode(t, t.uint32()));
          else t.skipType(7 & o)
        }
        return n
      }
    }(Mp || (Mp = {})),
    function(t) {
      t.encode = function(t, e) {
        if (e || (e = Ap.Writer.create()), null != t.ids && t.ids.length) {
          e.uint32(10).fork();
          for (var i = 0; i < t.ids.length; ++i) e.int32(t.ids[i]);
          e.ldelim()
        }
        return e
      }
    }(Fp || (Fp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {
            medals: []
          }; t.pos < i;) {
          var o = t.uint32();
          if (o >>> 3 == 1) n.medals && n.medals.length || (n.medals = []), n.medals.push(Pp.decode(t, t.uint32()));
          else t.skipType(7 & o)
        }
        return n
      }
    }(Ep || (Ep = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e
      }, t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          t.skipType(7 & o)
        }
        return n
      }
    }(Lp || (Lp = {})),
    function(t) {
      t.encode = function(t, e) {
        return e || (e = Ap.Writer.create()), e.uint32(8).int32(t.cmd), e.uint32(18).bytes(t.body), e
      }
    }(Op || (Op = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.ret = t.int32();
              break;
            case 2:
              n.errorMsg = t.string();
              break;
            case 3:
              n.body = t.bytes();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        return n
      }
    }(Rp || (Rp = {})),
    function(t) {
      t.decode = function(t, e) {
        t instanceof Ap.Reader || (t = Ap.Reader.create(t));
        for (var i = void 0 === e ? t.len : t.pos + e, n = {}; t.pos < i;) {
          var o = t.uint32();
          switch (o >>> 3) {
            case 1:
              n.cmd = t.int32();
              break;
            case 2:
              n.body = t.bytes();
              break;
            default:
              t.skipType(7 & o)
          }
        }
        if (!Object.prototype.hasOwnProperty.call(n, "cmd")) throw new Ap.util.ProtocolError("missing required 'cmd'", {
          instance: n
        });
        if (!Object.prototype.hasOwnProperty.call(n, "body")) throw new Ap.util.ProtocolError("missing required 'body'", {
          instance: n
        });
        return n
      }
    }(Gp || (Gp = {}));
    var Np = {
        1: pd
      },
      jp = function() {
        function t(t) {
          this.request = t
        }
        return t.prototype.createTeam = function(t) {
          return this.request("createTeam", nd.createTeam, fd, t, gd)
        }, t.prototype.teamApply = function(t) {
          return this.request("teamApply", nd.teamApply, wd, t, xd)
        }, t.prototype.getTeamList = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamList", nd.getTeamList, Lp, t, Td)
        }, t.prototype.getTeamMessage = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamMessage", nd.getTeamMessage, Id, t, Cd)
        }, t.prototype.sendTeamRecruit = function(t) {
          return this.request("sendTeamRecruit", nd.sendTeamRecruit, _d, t, Lp)
        }, t.prototype.getTeamRecruit = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamRecruit", nd.getTeamRecruit, Sd, t, Pd)
        }, t.prototype.teamChangeInfo = function(t) {
          return void 0 === t && (t = {}), this.request("teamChangeInfo", nd.teamChangeInfo, Dd, t, Lp)
        }, t.prototype.quitTeam = function(t) {
          return void 0 === t && (t = {}), this.request("quitTeam", nd.quitTeam, Lp, t, Lp)
        }, t.prototype.kickTeamMember = function(t) {
          return this.request("kickTeamMember", nd.kickTeamMember, Md, t, Lp)
        }, t.prototype.teamChat = function(t) {
          return this.request("teamChat", nd.teamChat, Fd, t, Lp)
        }, t.prototype.teamTransferLeader = function(t) {
          return this.request("teamTransferLeader", nd.teamTransferLeader, Ed, t, Lp)
        }, t.prototype.searchTeam = function(t) {
          return this.request("searchTeam", nd.searchTeam, Ld, t, Od)
        }, t.prototype.getCurTeam = function(t) {
          return void 0 === t && (t = {}), this.request("getCurTeam", nd.getCurTeam, Lp, t, Rd)
        }, t.prototype.getTeamMembers = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamMembers", nd.getTeamMembers, Lp, t, Gd)
        }, t.prototype.getTeamApplyList = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamApplyList", nd.getTeamApplyList, Lp, t, Nd)
        }, t.prototype.getTeamApplyCnt = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamApplyCnt", nd.getTeamApplyCnt, Lp, t, jd)
        }, t.prototype.acceptTeamApply = function(t) {
          return this.request("acceptTeamApply", nd.acceptTeamApply, Vd, t, Lp)
        }, t.prototype.refuseTeamApply = function(t) {
          return this.request("refuseTeamApply", nd.refuseTeamApply, Ud, t, Lp)
        }, t.prototype.teamSetManager = function(t) {
          return this.request("teamSetManager", nd.teamSetManager, Wd, t, Lp)
        }, t.prototype.teamCancelManager = function(t) {
          return this.request("teamCancelManager", nd.teamCancelManager, qd, t, Lp)
        }, t.prototype.teamAutoOptimize = function(t) {
          return this.request("teamAutoOptimize", nd.teamAutoOptimize, Hd, t, Lp)
        }, t.prototype.getTeamShowInfo = function(t) {
          return this.request("getTeamShowInfo", nd.getTeamShowInfo, Yd, t, zd)
        }, t.prototype.getUserShowInfo = function(t) {
          return this.request("getUserShowInfo", nd.getUserShowInfo, Jd, t, Qd)
        }, t.prototype.teamInvite = function(t) {
          return this.request("teamInvite", nd.teamInvite, Zd, t, Lp)
        }, t.prototype.getTeamPersonTask = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamPersonTask", nd.getTeamPersonTask, Lp, t, ep)
        }, t.prototype.getTeamPersonTaskReward = function(t) {
          return this.request("getTeamPersonTaskReward", nd.getTeamPersonTaskReward, ip, t, np)
        }, t.prototype.getTeamPersonTaskScoreReward = function(t) {
          return this.request("getTeamPersonTaskScoreReward", nd.getTeamPersonTaskScoreReward, op, t, sp)
        }, t.prototype.saveDecorate = function(t) {
          return this.request("saveDecorate", nd.saveDecorate, ap, t, Lp)
        }, t.prototype.getDecorateList = function(t) {
          return void 0 === t && (t = {}), this.request("getDecorateList", nd.getDecorateList, Lp, t, hp)
        }, t.prototype.getTeamTask = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamTask", nd.getTeamTask, Lp, t, lp)
        }, t.prototype.getDecorateShop = function(t) {
          return void 0 === t && (t = {}), this.request("getDecorateShop", nd.getDecorateShop, Lp, t, pp)
        }, t.prototype.buyDecoration = function(t) {
          return this.request("buyDecoration", nd.buyDecoration, fp, t, gp)
        }, t.prototype.getTeamInviteList = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamInviteList", nd.getTeamInviteList, yp, t, vp)
        }, t.prototype.acceptTeamInvite = function(t) {
          return this.request("acceptTeamInvite", nd.acceptTeamInvite, bp, t, wp)
        }, t.prototype.refuseTeamInvite = function(t) {
          return this.request("refuseTeamInvite", nd.refuseTeamInvite, xp, t, Lp)
        }, t.prototype.getTeamDonation = function(t) {
          return void 0 === t && (t = {}), this.request("getTeamDonation", nd.getTeamDonation, Lp, t, Tp)
        }, t.prototype.donate = function(t) {
          return this.request("donate", nd.donate, kp, t, Ip)
        }, t.prototype.videoTeamCoin = function(t) {
          return void 0 === t && (t = {}), this.request("videoTeamCoin", nd.videoTeamCoin, Lp, t, Cp)
        }, t.prototype.getTeamContributionRank = function(t) {
          return this.request("getTeamContributionRank", nd.getTeamContributionRank, _p, t, Sp)
        }, t.prototype.getSelfShowMedals = function(t) {
          return void 0 === t && (t = {}), this.request("getSelfShowMedals", nd.getSelfShowMedals, Lp, t, Dp)
        }, t.prototype.getSelfMedals = function(t) {
          return void 0 === t && (t = {}), this.request("getSelfMedals", nd.getSelfMedals, Lp, t, Mp)
        }, t.prototype.setSelfShowMedals = function(t) {
          return this.request("setSelfShowMedals", nd.setSelfShowMedals, Fp, t, Ep)
        }, t
      }();
    const Vp = Object.create(null);
    Vp.open = "0", Vp.close = "1", Vp.ping = "2", Vp.pong = "3", Vp.message = "4", Vp.upgrade = "5", Vp.noop = "6";
    const Up = Object.create(null);
    Object.keys(Vp).forEach((t => {
      Up[Vp[t]] = t
    }));
    const Wp = {
        type: "error",
        data: "parser error"
      },
      qp = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === Object.prototype.toString.call(Blob),
      Hp = "function" == typeof ArrayBuffer,
      $p = t => "function" == typeof ArrayBuffer.isView ? ArrayBuffer.isView(t) : t && t.buffer instanceof ArrayBuffer,
      Xp = ({
        type: t,
        data: e
      }, i, n) => qp && e instanceof Blob ? i ? n(e) : Yp(e, n) : Hp && (e instanceof ArrayBuffer || $p(e)) ? i ? n(e) : Yp(new Blob([e]), n) : n(Vp[t] + (e || "")),
      Yp = (t, e) => {
        const i = new FileReader;
        return i.onload = function() {
          const t = i.result.split(",")[1];
          e("b" + (t || ""))
        }, i.readAsDataURL(t)
      };

    function zp(t) {
      return t instanceof Uint8Array ? t : t instanceof ArrayBuffer ? new Uint8Array(t) : new Uint8Array(t.buffer, t.byteOffset, t.byteLength)
    }
    let Kp;
    const Jp = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
      Qp = "undefined" == typeof Uint8Array ? [] : new Uint8Array(256);
    for (let t = 0; t < 64; t++) Qp[Jp.charCodeAt(t)] = t;
    const Zp = "function" == typeof ArrayBuffer,
      tf = (t, e) => {
        if ("string" != typeof t) return {
          type: "message",
          data: nf(t, e)
        };
        const i = t.charAt(0);
        if ("b" === i) return {
          type: "message",
          data: ef(t.substring(1), e)
        };
        return Up[i] ? t.length > 1 ? {
          type: Up[i],
          data: t.substring(1)
        } : {
          type: Up[i]
        } : Wp
      },
      ef = (t, e) => {
        if (Zp) {
          const i = (t => {
            let e, i, n, o, r, s = .75 * t.length,
              a = t.length,
              h = 0;
            "=" === t[t.length - 1] && (s--, "=" === t[t.length - 2] && s--);
            const c = new ArrayBuffer(s),
              u = new Uint8Array(c);
            for (e = 0; e < a; e += 4) i = Qp[t.charCodeAt(e)], n = Qp[t.charCodeAt(e + 1)], o = Qp[t.charCodeAt(e + 2)], r = Qp[t.charCodeAt(e + 3)], u[h++] = i << 2 | n >> 4, u[h++] = (15 & n) << 4 | o >> 2, u[h++] = (3 & o) << 6 | 63 & r;
            return c
          })(t);
          return nf(i, e)
        }
        return {
          base64: !0,
          data: t
        }
      },
      nf = (t, e) => "blob" === e ? t instanceof Blob ? t : new Blob([t]) : t instanceof ArrayBuffer ? t : t.buffer,
      of = String.fromCharCode(30);

    function rf() {
      return new TransformStream({
        transform(t, e) {
          ! function(t, e) {
            qp && t.data instanceof Blob ? t.data.arrayBuffer().then(zp).then(e) : Hp && (t.data instanceof ArrayBuffer || $p(t.data)) ? e(zp(t.data)) : Xp(t, !1, (t => {
              Kp || (Kp = new TextEncoder), e(Kp.encode(t))
            }))
          }(t, (i => {
            const n = i.length;
            let o;
            if (n < 126) o = new Uint8Array(1), new DataView(o.buffer).setUint8(0, n);
            else if (n < 65536) {
              o = new Uint8Array(3);
              const t = new DataView(o.buffer);
              t.setUint8(0, 126), t.setUint16(1, n)
            } else {
              o = new Uint8Array(9);
              const t = new DataView(o.buffer);
              t.setUint8(0, 127), t.setBigUint64(1, BigInt(n))
            }
            t.data && "string" != typeof t.data && (o[0] |= 128), e.enqueue(o), e.enqueue(i)
          }))
        }
      })
    }
    let sf;

    function af(t) {
      return t.reduce(((t, e) => t + e.length), 0)
    }

    function hf(t, e) {
      if (t[0].length === e) return t.shift();
      const i = new Uint8Array(e);
      let n = 0;
      for (let o = 0; o < e; o++) i[o] = t[0][n++], n === t[0].length && (t.shift(), n = 0);
      return t.length && n < t[0].length && (t[0] = t[0].slice(n)), i
    }

    function cf(t) {
      if (t) return function(t) {
        for (var e in cf.prototype) t[e] = cf.prototype[e];
        return t
      }(t)
    }
    cf.prototype.on = cf.prototype.addEventListener = function(t, e) {
      return this._callbacks = this._callbacks || {}, (this._callbacks["$" + t] = this._callbacks["$" + t] || []).push(e), this
    }, cf.prototype.once = function(t, e) {
      function i() {
        this.off(t, i), e.apply(this, arguments)
      }
      return i.fn = e, this.on(t, i), this
    }, cf.prototype.off = cf.prototype.removeListener = cf.prototype.removeAllListeners = cf.prototype.removeEventListener = function(t, e) {
      if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this;
      var i, n = this._callbacks["$" + t];
      if (!n) return this;
      if (1 == arguments.length) return delete this._callbacks["$" + t], this;
      for (var o = 0; o < n.length; o++)
        if ((i = n[o]) === e || i.fn === e) {
          n.splice(o, 1);
          break
        } return 0 === n.length && delete this._callbacks["$" + t], this
    }, cf.prototype.emit = function(t) {
      this._callbacks = this._callbacks || {};
      for (var e = new Array(arguments.length - 1), i = this._callbacks["$" + t], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
      if (i) {
        n = 0;
        for (var o = (i = i.slice(0)).length; n < o; ++n) i[n].apply(this, e)
      }
      return this
    }, cf.prototype.emitReserved = cf.prototype.emit, cf.prototype.listeners = function(t) {
      return this._callbacks = this._callbacks || {}, this._callbacks["$" + t] || []
    }, cf.prototype.hasListeners = function(t) {
      return !!this.listeners(t).length
    };
    const uf = "function" == typeof Promise && "function" == typeof Promise.resolve ? t => Promise.resolve().then(t) : (t, e) => e(t, 0),
      lf = "undefined" != typeof self ? self : "undefined" != typeof window ? window : Function("return this")();

    function df(t, ...e) {
      return e.reduce(((e, i) => (t.hasOwnProperty(i) && (e[i] = t[i]), e)), {})
    }
    const pf = lf.setTimeout,
      ff = lf.clearTimeout;

    function gf(t, e) {
      e.useNativeTimers ? (t.setTimeoutFn = pf.bind(lf), t.clearTimeoutFn = ff.bind(lf)) : (t.setTimeoutFn = lf.setTimeout.bind(lf), t.clearTimeoutFn = lf.clearTimeout.bind(lf))
    }

    function mf() {
      return Date.now().toString(36).substring(3) + Math.random().toString(36).substring(2, 5)
    }
    class yf extends Error {
      constructor(t, e, i) {
        super(t), this.description = e, this.context = i, this.type = "TransportError"
      }
    }
    class vf extends cf {
      constructor(t) {
        super(), this.writable = !1, gf(this, t), this.opts = t, this.query = t.query, this.socket = t.socket, this.supportsBinary = !t.forceBase64
      }
      onError(t, e, i) {
        return super.emitReserved("error", new yf(t, e, i)), this
      }
      open() {
        return this.readyState = "opening", this.doOpen(), this
      }
      close() {
        return "opening" !== this.readyState && "open" !== this.readyState || (this.doClose(), this.onClose()), this
      }
      send(t) {
        "open" === this.readyState && this.write(t)
      }
      onOpen() {
        this.readyState = "open", this.writable = !0, super.emitReserved("open")
      }
      onData(t) {
        const e = tf(t, this.socket.binaryType);
        this.onPacket(e)
      }
      onPacket(t) {
        super.emitReserved("packet", t)
      }
      onClose(t) {
        this.readyState = "closed", super.emitReserved("close", t)
      }
      pause(t) {}
      createUri(t, e = {}) {
        return t + "://" + this._hostname() + this._port() + this.opts.path + this._query(e)
      }
      _hostname() {
        const t = this.opts.hostname;
        return -1 === t.indexOf(":") ? t : "[" + t + "]"
      }
      _port() {
        return this.opts.port && (this.opts.secure && Number(443 !== this.opts.port) || !this.opts.secure && 80 !== Number(this.opts.port)) ? ":" + this.opts.port : ""
      }
      _query(t) {
        const e = function(t) {
          let e = "";
          for (let i in t) t.hasOwnProperty(i) && (e.length && (e += "&"), e += encodeURIComponent(i) + "=" + encodeURIComponent(t[i]));
          return e
        }(t);
        return e.length ? "?" + e : ""
      }
    }
    class bf extends vf {
      constructor() {
        super(...arguments), this._polling = !1
      }
      get name() {
        return "polling"
      }
      doOpen() {
        this._poll()
      }
      pause(t) {
        this.readyState = "pausing";
        const e = () => {
          this.readyState = "paused", t()
        };
        if (this._polling || !this.writable) {
          let t = 0;
          this._polling && (t++, this.once("pollComplete", (function() {
            --t || e()
          }))), this.writable || (t++, this.once("drain", (function() {
            --t || e()
          })))
        } else e()
      }
      _poll() {
        this._polling = !0, this.doPoll(), this.emitReserved("poll")
      }
      onData(t) {
        ((t, e) => {
          const i = t.split(of),
            n = [];
          for (let t = 0; t < i.length; t++) {
            const o = tf(i[t], e);
            if (n.push(o), "error" === o.type) break
          }
          return n
        })(t, this.socket.binaryType).forEach((t => {
          if ("opening" === this.readyState && "open" === t.type && this.onOpen(), "close" === t.type) return this.onClose({
            description: "transport closed by the server"
          }), !1;
          this.onPacket(t)
        })), "closed" !== this.readyState && (this._polling = !1, this.emitReserved("pollComplete"), "open" === this.readyState && this._poll())
      }
      doClose() {
        const t = () => {
          this.write([{
            type: "close"
          }])
        };
        "open" === this.readyState ? t() : this.once("open", t)
      }
      write(t) {
        this.writable = !1, ((t, e) => {
          const i = t.length,
            n = new Array(i);
          let o = 0;
          t.forEach(((t, r) => {
            Xp(t, !1, (t => {
              n[r] = t, ++o === i && e(n.join(of))
            }))
          }))
        })(t, (t => {
          this.doWrite(t, (() => {
            this.writable = !0, this.emitReserved("drain")
          }))
        }))
      }
      uri() {
        const t = this.opts.secure ? "https" : "http",
          e = this.query || {};
        return !1 !== this.opts.timestampRequests && (e[this.opts.timestampParam] = mf()), this.supportsBinary || e.sid || (e.b64 = 1), this.createUri(t, e)
      }
    }
    let wf = !1;
    try {
      wf = "undefined" != typeof XMLHttpRequest && "withCredentials" in new XMLHttpRequest
    } catch (t) {}
    const xf = wf;

    function Tf() {}
    class kf extends bf {
      constructor(t) {
        if (super(t), "undefined" != typeof location) {
          const e = "https:" === location.protocol;
          let i = location.port;
          i || (i = e ? "443" : "80"), this.xd = "undefined" != typeof location && t.hostname !== location.hostname || i !== t.port
        }
      }
      doWrite(t, e) {
        const i = this.request({
          method: "POST",
          data: t
        });
        i.on("success", e), i.on("error", ((t, e) => {
          this.onError("xhr post error", t, e)
        }))
      }
      doPoll() {
        const t = this.request();
        t.on("data", this.onData.bind(this)), t.on("error", ((t, e) => {
          this.onError("xhr poll error", t, e)
        })), this.pollXhr = t
      }
    }
    class If extends cf {
      constructor(t, e, i) {
        super(), this.createRequest = t, gf(this, i), this._opts = i, this._method = i.method || "GET", this._uri = e, this._data = void 0 !== i.data ? i.data : null, this._create()
      }
      _create() {
        var t;
        const e = df(this._opts, "agent", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "autoUnref");
        e.xdomain = !!this._opts.xd;
        const i = this._xhr = this.createRequest(e);
        try {
          i.open(this._method, this._uri, !0);
          try {
            if (this._opts.extraHeaders) {
              i.setDisableHeaderCheck && i.setDisableHeaderCheck(!0);
              for (let t in this._opts.extraHeaders) this._opts.extraHeaders.hasOwnProperty(t) && i.setRequestHeader(t, this._opts.extraHeaders[t])
            }
          } catch (t) {}
          if ("POST" === this._method) try {
            i.setRequestHeader("Content-type", "text/plain;charset=UTF-8")
          } catch (t) {}
          try {
            i.setRequestHeader("Accept", "*/*")
          } catch (t) {}
          null === (t = this._opts.cookieJar) || void 0 === t || t.addCookies(i), "withCredentials" in i && (i.withCredentials = this._opts.withCredentials), this._opts.requestTimeout && (i.timeout = this._opts.requestTimeout), i.onreadystatechange = () => {
            var t;
            3 === i.readyState && (null === (t = this._opts.cookieJar) || void 0 === t || t.parseCookies(i.getResponseHeader("set-cookie"))), 4 === i.readyState && (200 === i.status || 1223 === i.status ? this._onLoad() : this.setTimeoutFn((() => {
              this._onError("number" == typeof i.status ? i.status : 0)
            }), 0))
          }, i.send(this._data)
        } catch (t) {
          return void this.setTimeoutFn((() => {
            this._onError(t)
          }), 0)
        }
        "undefined" != typeof document && (this._index = If.requestsCount++, If.requests[this._index] = this)
      }
      _onError(t) {
        this.emitReserved("error", t, this._xhr), this._cleanup(!0)
      }
      _cleanup(t) {
        if (void 0 !== this._xhr && null !== this._xhr) {
          if (this._xhr.onreadystatechange = Tf, t) try {
            this._xhr.abort()
          } catch (t) {}
          "undefined" != typeof document && delete If.requests[this._index], this._xhr = null
        }
      }
      _onLoad() {
        const t = this._xhr.responseText;
        null !== t && (this.emitReserved("data", t), this.emitReserved("success"), this._cleanup())
      }
      abort() {
        this._cleanup()
      }
    }
    if (If.requestsCount = 0, If.requests = {}, "undefined" != typeof document)
      if ("function" == typeof attachEvent) attachEvent("onunload", Cf);
      else if ("function" == typeof addEventListener) {
      addEventListener("onpagehide" in lf ? "pagehide" : "unload", Cf, !1)
    }

    function Cf() {
      for (let t in If.requests) If.requests.hasOwnProperty(t) && If.requests[t].abort()
    }
    const _f = function() {
      const t = Bf({
        xdomain: !1
      });
      return t && null !== t.responseType
    }();

    function Bf(t) {
      const e = t.xdomain;
      try {
        if ("undefined" != typeof XMLHttpRequest && (!e || xf)) return new XMLHttpRequest
      } catch (t) {}
      if (!e) try {
        return new(lf[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")
      } catch (t) {}
    }
    const Sf = "undefined" != typeof navigator && "string" == typeof navigator.product && "reactnative" === navigator.product.toLowerCase();
    class Pf extends vf {
      get name() {
        return "websocket"
      }
      doOpen() {
        const t = this.uri(),
          e = this.opts.protocols,
          i = Sf ? {} : df(this.opts, "agent", "perMessageDeflate", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "localAddress", "protocolVersion", "origin", "maxPayload", "family", "checkServerIdentity");
        this.opts.extraHeaders && (i.headers = this.opts.extraHeaders);
        try {
          this.ws = this.createSocket(t, e, i)
        } catch (t) {
          return this.emitReserved("error", t)
        }
        this.ws.binaryType = this.socket.binaryType, this.addEventListeners()
      }
      addEventListeners() {
        this.ws.onopen = () => {
          this.opts.autoUnref && this.ws._socket.unref(), this.onOpen()
        }, this.ws.onclose = t => this.onClose({
          description: "websocket connection closed",
          context: t
        }), this.ws.onmessage = t => this.onData(t.data), this.ws.onerror = t => this.onError("websocket error", t)
      }
      write(t) {
        this.writable = !1;
        for (let e = 0; e < t.length; e++) {
          const i = t[e],
            n = e === t.length - 1;
          Xp(i, this.supportsBinary, (t => {
            try {
              this.doWrite(i, t)
            } catch (t) {}
            n && uf((() => {
              this.writable = !0, this.emitReserved("drain")
            }), this.setTimeoutFn)
          }))
        }
      }
      doClose() {
        void 0 !== this.ws && (this.ws.onerror = () => {}, this.ws.close(), this.ws = null)
      }
      uri() {
        const t = this.opts.secure ? "wss" : "ws",
          e = this.query || {};
        return this.opts.timestampRequests && (e[this.opts.timestampParam] = mf()), this.supportsBinary || (e.b64 = 1), this.createUri(t, e)
      }
    }
    const Df = lf.WebSocket || lf.MozWebSocket;
    const Mf = {
        websocket: class extends Pf {
          createSocket(t, e, i) {
            return Sf ? new Df(t, e, i) : e ? new Df(t, e) : new Df(t)
          }
          doWrite(t, e) {
            this.ws.send(e)
          }
        },
        webtransport: class extends vf {
          get name() {
            return "webtransport"
          }
          doOpen() {
            try {
              this._transport = new WebTransport(this.createUri("https"), this.opts.transportOptions[this.name])
            } catch (t) {
              return this.emitReserved("error", t)
            }
            this._transport.closed.then((() => {
              this.onClose()
            })).catch((t => {
              this.onError("webtransport error", t)
            })), this._transport.ready.then((() => {
              this._transport.createBidirectionalStream().then((t => {
                const e = function(t, e) {
                    sf || (sf = new TextDecoder);
                    const i = [];
                    let n = 0,
                      o = -1,
                      r = !1;
                    return new TransformStream({
                      transform(s, a) {
                        for (i.push(s);;) {
                          if (0 === n) {
                            if (af(i) < 1) break;
                            const t = hf(i, 1);
                            r = !(128 & ~t[0]), o = 127 & t[0], n = o < 126 ? 3 : 126 === o ? 1 : 2
                          } else if (1 === n) {
                            if (af(i) < 2) break;
                            const t = hf(i, 2);
                            o = new DataView(t.buffer, t.byteOffset, t.length).getUint16(0), n = 3
                          } else if (2 === n) {
                            if (af(i) < 8) break;
                            const t = hf(i, 8),
                              e = new DataView(t.buffer, t.byteOffset, t.length),
                              r = e.getUint32(0);
                            if (r > Math.pow(2, 21) - 1) {
                              a.enqueue(Wp);
                              break
                            }
                            o = r * Math.pow(2, 32) + e.getUint32(4), n = 3
                          } else {
                            if (af(i) < o) break;
                            const t = hf(i, o);
                            a.enqueue(tf(r ? t : sf.decode(t), e)), n = 0
                          }
                          if (0 === o || o > t) {
                            a.enqueue(Wp);
                            break
                          }
                        }
                      }
                    })
                  }(Number.MAX_SAFE_INTEGER, this.socket.binaryType),
                  i = t.readable.pipeThrough(e).getReader(),
                  n = rf();
                n.readable.pipeTo(t.writable), this._writer = n.writable.getWriter();
                const o = () => {
                  i.read().then((({
                    done: t,
                    value: e
                  }) => {
                    t || (this.onPacket(e), o())
                  })).catch((t => {}))
                };
                o();
                const r = {
                  type: "open"
                };
                this.query.sid && (r.data = `{"sid":"${this.query.sid}"}`), this._writer.write(r).then((() => this.onOpen()))
              }))
            }))
          }
          write(t) {
            this.writable = !1;
            for (let e = 0; e < t.length; e++) {
              const i = t[e],
                n = e === t.length - 1;
              this._writer.write(i).then((() => {
                n && uf((() => {
                  this.writable = !0, this.emitReserved("drain")
                }), this.setTimeoutFn)
              }))
            }
          }
          doClose() {
            var t;
            null === (t = this._transport) || void 0 === t || t.close()
          }
        },
        polling: class extends kf {
          constructor(t) {
            super(t);
            const e = t && t.forceBase64;
            this.supportsBinary = _f && !e
          }
          request(t = {}) {
            return Object.assign(t, {
              xd: this.xd
            }, this.opts), new If(Bf, this.uri(), t)
          }
        }
      },
      Ff = /^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
      Ef = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];

    function Lf(t) {
      if (t.length > 8e3) throw "URI too long";
      const e = t,
        i = t.indexOf("["),
        n = t.indexOf("]"); - 1 != i && -1 != n && (t = t.substring(0, i) + t.substring(i, n).replace(/:/g, ";") + t.substring(n, t.length));
      let o = Ff.exec(t || ""),
        r = {},
        s = 14;
      for (; s--;) r[Ef[s]] = o[s] || "";
      return -1 != i && -1 != n && (r.source = e, r.host = r.host.substring(1, r.host.length - 1).replace(/;/g, ":"), r.authority = r.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), r.ipv6uri = !0), r.pathNames = function(t, e) {
        const i = /\/{2,9}/g,
          n = e.replace(i, "/").split("/");
        "/" != e.slice(0, 1) && 0 !== e.length || n.splice(0, 1);
        "/" == e.slice(-1) && n.splice(n.length - 1, 1);
        return n
      }(0, r.path), r.queryKey = function(t, e) {
        const i = {};
        return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, (function(t, e, n) {
          e && (i[e] = n)
        })), i
      }(0, r.query), r
    }
    const Of = "function" == typeof addEventListener && "function" == typeof removeEventListener,
      Rf = [];
    Of && addEventListener("offline", (() => {
      Rf.forEach((t => t()))
    }), !1);
    class Gf extends cf {
      constructor(t, e) {
        if (super(), this.binaryType = "arraybuffer", this.writeBuffer = [], this._prevBufferLen = 0, this._pingInterval = -1, this._pingTimeout = -1, this._maxPayload = -1, this._pingTimeoutTime = 1 / 0, t && "object" == typeof t && (e = t, t = null), t) {
          const i = Lf(t);
          e.hostname = i.host, e.secure = "https" === i.protocol || "wss" === i.protocol, e.port = i.port, i.query && (e.query = i.query)
        } else e.host && (e.hostname = Lf(e.host).host);
        gf(this, e), this.secure = null != e.secure ? e.secure : "undefined" != typeof location && "https:" === location.protocol, e.hostname && !e.port && (e.port = this.secure ? "443" : "80"), this.hostname = e.hostname || ("undefined" != typeof location ? location.hostname : "localhost"), this.port = e.port || ("undefined" != typeof location && location.port ? location.port : this.secure ? "443" : "80"), this.transports = [], this._transportsByName = {}, e.transports.forEach((t => {
          const e = t.prototype.name;
          this.transports.push(e), this._transportsByName[e] = t
        })), this.opts = Object.assign({
          path: "/engine.io",
          agent: !1,
          withCredentials: !1,
          upgrade: !0,
          timestampParam: "t",
          rememberUpgrade: !1,
          addTrailingSlash: !0,
          rejectUnauthorized: !0,
          perMessageDeflate: {
            threshold: 1024
          },
          transportOptions: {},
          closeOnBeforeunload: !1
        }, e), this.opts.path = this.opts.path.replace(/\/$/, "") + (this.opts.addTrailingSlash ? "/" : ""), "string" == typeof this.opts.query && (this.opts.query = function(t) {
          let e = {},
            i = t.split("&");
          for (let t = 0, n = i.length; t < n; t++) {
            let n = i[t].split("=");
            e[decodeURIComponent(n[0])] = decodeURIComponent(n[1])
          }
          return e
        }(this.opts.query)), Of && (this.opts.closeOnBeforeunload && (this._beforeunloadEventListener = () => {
          this.transport && (this.transport.removeAllListeners(), this.transport.close())
        }, addEventListener("beforeunload", this._beforeunloadEventListener, !1)), "localhost" !== this.hostname && (this._offlineEventListener = () => {
          this._onClose("transport close", {
            description: "network connection lost"
          })
        }, Rf.push(this._offlineEventListener))), this.opts.withCredentials && (this._cookieJar = void 0), this._open()
      }
      createTransport(t) {
        const e = Object.assign({}, this.opts.query);
        e.EIO = 4, e.transport = t, this.id && (e.sid = this.id);
        const i = Object.assign({}, this.opts, {
          query: e,
          socket: this,
          hostname: this.hostname,
          secure: this.secure,
          port: this.port
        }, this.opts.transportOptions[t]);
        return new this._transportsByName[t](i)
      }
      _open() {
        if (0 === this.transports.length) return void this.setTimeoutFn((() => {
          this.emitReserved("error", "No transports available")
        }), 0);
        const t = this.opts.rememberUpgrade && Gf.priorWebsocketSuccess && -1 !== this.transports.indexOf("websocket") ? "websocket" : this.transports[0];
        this.readyState = "opening";
        const e = this.createTransport(t);
        e.open(), this.setTransport(e)
      }
      setTransport(t) {
        this.transport && this.transport.removeAllListeners(), this.transport = t, t.on("drain", this._onDrain.bind(this)).on("packet", this._onPacket.bind(this)).on("error", this._onError.bind(this)).on("close", (t => this._onClose("transport close", t)))
      }
      onOpen() {
        this.readyState = "open", Gf.priorWebsocketSuccess = "websocket" === this.transport.name, this.emitReserved("open"), this.flush()
      }
      _onPacket(t) {
        if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState) switch (this.emitReserved("packet", t), this.emitReserved("heartbeat"), t.type) {
          case "open":
            this.onHandshake(JSON.parse(t.data));
            break;
          case "ping":
            this._sendPacket("pong"), this.emitReserved("ping"), this.emitReserved("pong"), this._resetPingTimeout();
            break;
          case "error":
            const e = new Error("server error");
            e.code = t.data, this._onError(e);
            break;
          case "message":
            this.emitReserved("data", t.data), this.emitReserved("message", t.data)
        }
      }
      onHandshake(t) {
        this.emitReserved("handshake", t), this.id = t.sid, this.transport.query.sid = t.sid, this._pingInterval = t.pingInterval, this._pingTimeout = t.pingTimeout, this._maxPayload = t.maxPayload, this.onOpen(), "closed" !== this.readyState && this._resetPingTimeout()
      }
      _resetPingTimeout() {
        this.clearTimeoutFn(this._pingTimeoutTimer);
        const t = this._pingInterval + this._pingTimeout;
        this._pingTimeoutTime = Date.now() + t, this._pingTimeoutTimer = this.setTimeoutFn((() => {
          this._onClose("ping timeout")
        }), t), this.opts.autoUnref && this._pingTimeoutTimer.unref()
      }
      _onDrain() {
        this.writeBuffer.splice(0, this._prevBufferLen), this._prevBufferLen = 0, 0 === this.writeBuffer.length ? this.emitReserved("drain") : this.flush()
      }
      flush() {
        if ("closed" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {
          const t = this._getWritablePackets();
          this.transport.send(t), this._prevBufferLen = t.length, this.emitReserved("flush")
        }
      }
      _getWritablePackets() {
        if (!(this._maxPayload && "polling" === this.transport.name && this.writeBuffer.length > 1)) return this.writeBuffer;
        let t = 1;
        for (let i = 0; i < this.writeBuffer.length; i++) {
          const n = this.writeBuffer[i].data;
          if (n && (t += "string" == typeof(e = n) ? function(t) {
              let e = 0,
                i = 0;
              for (let n = 0, o = t.length; n < o; n++) e = t.charCodeAt(n), e < 128 ? i += 1 : e < 2048 ? i += 2 : e < 55296 || e >= 57344 ? i += 3 : (n++, i += 4);
              return i
            }(e) : Math.ceil(1.33 * (e.byteLength || e.size))), i > 0 && t > this._maxPayload) return this.writeBuffer.slice(0, i);
          t += 2
        }
        var e;
        return this.writeBuffer
      }
      _hasPingExpired() {
        if (!this._pingTimeoutTime) return !0;
        const t = Date.now() > this._pingTimeoutTime;
        return t && (this._pingTimeoutTime = 0, uf((() => {
          this._onClose("ping timeout")
        }), this.setTimeoutFn)), t
      }
      write(t, e, i) {
        return this._sendPacket("message", t, e, i), this
      }
      send(t, e, i) {
        return this._sendPacket("message", t, e, i), this
      }
      _sendPacket(t, e, i, n) {
        if ("function" == typeof e && (n = e, e = void 0), "function" == typeof i && (n = i, i = null), "closing" === this.readyState || "closed" === this.readyState) return;
        (i = i || {}).compress = !1 !== i.compress;
        const o = {
          type: t,
          data: e,
          options: i
        };
        this.emitReserved("packetCreate", o), this.writeBuffer.push(o), n && this.once("flush", n), this.flush()
      }
      close() {
        const t = () => {
            this._onClose("forced close"), this.transport.close()
          },
          e = () => {
            this.off("upgrade", e), this.off("upgradeError", e), t()
          },
          i = () => {
            this.once("upgrade", e), this.once("upgradeError", e)
          };
        return "opening" !== this.readyState && "open" !== this.readyState || (this.readyState = "closing", this.writeBuffer.length ? this.once("drain", (() => {
          this.upgrading ? i() : t()
        })) : this.upgrading ? i() : t()), this
      }
      _onError(t) {
        if (Gf.priorWebsocketSuccess = !1, this.opts.tryAllTransports && this.transports.length > 1 && "opening" === this.readyState) return this.transports.shift(), this._open();
        this.emitReserved("error", t), this._onClose("transport error", t)
      }
      _onClose(t, e) {
        if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState) {
          if (this.clearTimeoutFn(this._pingTimeoutTimer), this.transport.removeAllListeners("close"), this.transport.close(), this.transport.removeAllListeners(), Of && (this._beforeunloadEventListener && removeEventListener("beforeunload", this._beforeunloadEventListener, !1), this._offlineEventListener)) {
            const t = Rf.indexOf(this._offlineEventListener); - 1 !== t && Rf.splice(t, 1)
          }
          this.readyState = "closed", this.id = null, this.emitReserved("close", t, e), this.writeBuffer = [], this._prevBufferLen = 0
        }
      }
    }
    Gf.protocol = 4;
    class Af extends Gf {
      constructor() {
        super(...arguments), this._upgrades = []
      }
      onOpen() {
        if (super.onOpen(), "open" === this.readyState && this.opts.upgrade)
          for (let t = 0; t < this._upgrades.length; t++) this._probe(this._upgrades[t])
      }
      _probe(t) {
        let e = this.createTransport(t),
          i = !1;
        Gf.priorWebsocketSuccess = !1;
        const n = () => {
          i || (e.send([{
            type: "ping",
            data: "probe"
          }]), e.once("packet", (t => {
            if (!i)
              if ("pong" === t.type && "probe" === t.data) {
                if (this.upgrading = !0, this.emitReserved("upgrading", e), !e) return;
                Gf.priorWebsocketSuccess = "websocket" === e.name, this.transport.pause((() => {
                  i || "closed" !== this.readyState && (c(), this.setTransport(e), e.send([{
                    type: "upgrade"
                  }]), this.emitReserved("upgrade", e), e = null, this.upgrading = !1, this.flush())
                }))
              } else {
                const t = new Error("probe error");
                t.transport = e.name, this.emitReserved("upgradeError", t)
              }
          })))
        };

        function o() {
          i || (i = !0, c(), e.close(), e = null)
        }
        const r = t => {
          const i = new Error("probe error: " + t);
          i.transport = e.name, o(), this.emitReserved("upgradeError", i)
        };

        function s() {
          r("transport closed")
        }

        function a() {
          r("socket closed")
        }

        function h(t) {
          e && t.name !== e.name && o()
        }
        const c = () => {
          e.removeListener("open", n), e.removeListener("error", r), e.removeListener("close", s), this.off("close", a), this.off("upgrading", h)
        };
        e.once("open", n), e.once("error", r), e.once("close", s), this.once("close", a), this.once("upgrading", h), -1 !== this._upgrades.indexOf("webtransport") && "webtransport" !== t ? this.setTimeoutFn((() => {
          i || e.open()
        }), 200) : e.open()
      }
      onHandshake(t) {
        this._upgrades = this._filterUpgrades(t.upgrades), super.onHandshake(t)
      }
      _filterUpgrades(t) {
        const e = [];
        for (let i = 0; i < t.length; i++) ~this.transports.indexOf(t[i]) && e.push(t[i]);
        return e
      }
    }
    class Nf extends Af {
      constructor(t, e = {}) {
        const i = "object" == typeof t ? t : e;
        (!i.transports || i.transports && "string" == typeof i.transports[0]) && (i.transports = (i.transports || ["polling", "websocket", "webtransport"]).map((t => Mf[t])).filter((t => !!t))), super(t, i)
      }
    }
    const jf = "function" == typeof ArrayBuffer,
      Vf = Object.prototype.toString,
      Uf = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === Vf.call(Blob),
      Wf = "function" == typeof File || "undefined" != typeof File && "[object FileConstructor]" === Vf.call(File);

    function qf(t) {
      return jf && (t instanceof ArrayBuffer || (t => "function" == typeof ArrayBuffer.isView ? ArrayBuffer.isView(t) : t.buffer instanceof ArrayBuffer)(t)) || Uf && t instanceof Blob || Wf && t instanceof File
    }

    function Hf(t, e) {
      if (!t || "object" != typeof t) return !1;
      if (Array.isArray(t)) {
        for (let e = 0, i = t.length; e < i; e++)
          if (Hf(t[e])) return !0;
        return !1
      }
      if (qf(t)) return !0;
      if (t.toJSON && "function" == typeof t.toJSON && 1 === arguments.length) return Hf(t.toJSON(), !0);
      for (const e in t)
        if (Object.prototype.hasOwnProperty.call(t, e) && Hf(t[e])) return !0;
      return !1
    }

    function $f(t) {
      const e = [],
        i = t.data,
        n = t;
      return n.data = Xf(i, e), n.attachments = e.length, {
        packet: n,
        buffers: e
      }
    }

    function Xf(t, e) {
      if (!t) return t;
      if (qf(t)) {
        const i = {
          _placeholder: !0,
          num: e.length
        };
        return e.push(t), i
      }
      if (Array.isArray(t)) {
        const i = new Array(t.length);
        for (let n = 0; n < t.length; n++) i[n] = Xf(t[n], e);
        return i
      }
      if ("object" == typeof t && !(t instanceof Date)) {
        const i = {};
        for (const n in t) Object.prototype.hasOwnProperty.call(t, n) && (i[n] = Xf(t[n], e));
        return i
      }
      return t
    }

    function Yf(t, e) {
      return t.data = zf(t.data, e), delete t.attachments, t
    }

    function zf(t, e) {
      if (!t) return t;
      if (t && !0 === t._placeholder) {
        if ("number" == typeof t.num && t.num >= 0 && t.num < e.length) return e[t.num];
        throw new Error("illegal attachments")
      }
      if (Array.isArray(t))
        for (let i = 0; i < t.length; i++) t[i] = zf(t[i], e);
      else if ("object" == typeof t)
        for (const i in t) Object.prototype.hasOwnProperty.call(t, i) && (t[i] = zf(t[i], e));
      return t
    }
    const Kf = ["connect", "connect_error", "disconnect", "disconnecting", "newListener", "removeListener"],
      Jf = 5;
    var Qf;
    ! function(t) {
      t[t.CONNECT = 0] = "CONNECT", t[t.DISCONNECT = 1] = "DISCONNECT", t[t.EVENT = 2] = "EVENT", t[t.ACK = 3] = "ACK", t[t.CONNECT_ERROR = 4] = "CONNECT_ERROR", t[t.BINARY_EVENT = 5] = "BINARY_EVENT", t[t.BINARY_ACK = 6] = "BINARY_ACK"
    }(Qf || (Qf = {}));
    class Zf {
      constructor(t) {
        this.replacer = t
      }
      encode(t) {
        return t.type !== Qf.EVENT && t.type !== Qf.ACK || !Hf(t) ? [this.encodeAsString(t)] : this.encodeAsBinary({
          type: t.type === Qf.EVENT ? Qf.BINARY_EVENT : Qf.BINARY_ACK,
          nsp: t.nsp,
          data: t.data,
          id: t.id
        })
      }
      encodeAsString(t) {
        let e = "" + t.type;
        return t.type !== Qf.BINARY_EVENT && t.type !== Qf.BINARY_ACK || (e += t.attachments + "-"), t.nsp && "/" !== t.nsp && (e += t.nsp + ","), null != t.id && (e += t.id), null != t.data && (e += JSON.stringify(t.data, this.replacer)), e
      }
      encodeAsBinary(t) {
        const e = $f(t),
          i = this.encodeAsString(e.packet),
          n = e.buffers;
        return n.unshift(i), n
      }
    }

    function tg(t) {
      return "[object Object]" === Object.prototype.toString.call(t)
    }
    class eg extends cf {
      constructor(t) {
        super(), this.reviver = t
      }
      add(t) {
        let e;
        if ("string" == typeof t) {
          if (this.reconstructor) throw new Error("got plaintext data when reconstructing a packet");
          e = this.decodeString(t);
          const i = e.type === Qf.BINARY_EVENT;
          i || e.type === Qf.BINARY_ACK ? (e.type = i ? Qf.EVENT : Qf.ACK, this.reconstructor = new ig(e), 0 === e.attachments && super.emitReserved("decoded", e)) : super.emitReserved("decoded", e)
        } else {
          if (!qf(t) && !t.base64) throw new Error("Unknown type: " + t);
          if (!this.reconstructor) throw new Error("got binary data when not reconstructing a packet");
          e = this.reconstructor.takeBinaryData(t), e && (this.reconstructor = null, super.emitReserved("decoded", e))
        }
      }
      decodeString(t) {
        let e = 0;
        const i = {
          type: Number(t.charAt(0))
        };
        if (void 0 === Qf[i.type]) throw new Error("unknown packet type " + i.type);
        if (i.type === Qf.BINARY_EVENT || i.type === Qf.BINARY_ACK) {
          const n = e + 1;
          for (;
            "-" !== t.charAt(++e) && e != t.length;);
          const o = t.substring(n, e);
          if (o != Number(o) || "-" !== t.charAt(e)) throw new Error("Illegal attachments");
          i.attachments = Number(o)
        }
        if ("/" === t.charAt(e + 1)) {
          const n = e + 1;
          for (; ++e;) {
            if ("," === t.charAt(e)) break;
            if (e === t.length) break
          }
          i.nsp = t.substring(n, e)
        } else i.nsp = "/";
        const n = t.charAt(e + 1);
        if ("" !== n && Number(n) == n) {
          const n = e + 1;
          for (; ++e;) {
            const i = t.charAt(e);
            if (null == i || Number(i) != i) {
              --e;
              break
            }
            if (e === t.length) break
          }
          i.id = Number(t.substring(n, e + 1))
        }
        if (t.charAt(++e)) {
          const n = this.tryParse(t.substr(e));
          if (!eg.isPayloadValid(i.type, n)) throw new Error("invalid payload");
          i.data = n
        }
        return i
      }
      tryParse(t) {
        try {
          return JSON.parse(t, this.reviver)
        } catch (t) {
          return !1
        }
      }
      static isPayloadValid(t, e) {
        switch (t) {
          case Qf.CONNECT:
            return tg(e);
          case Qf.DISCONNECT:
            return void 0 === e;
          case Qf.CONNECT_ERROR:
            return "string" == typeof e || tg(e);
          case Qf.EVENT:
          case Qf.BINARY_EVENT:
            return Array.isArray(e) && ("number" == typeof e[0] || "string" == typeof e[0] && -1 === Kf.indexOf(e[0]));
          case Qf.ACK:
          case Qf.BINARY_ACK:
            return Array.isArray(e)
        }
      }
      destroy() {
        this.reconstructor && (this.reconstructor.finishedReconstruction(), this.reconstructor = null)
      }
    }
    class ig {
      constructor(t) {
        this.packet = t, this.buffers = [], this.reconPack = t
      }
      takeBinaryData(t) {
        if (this.buffers.push(t), this.buffers.length === this.reconPack.attachments) {
          const t = Yf(this.reconPack, this.buffers);
          return this.finishedReconstruction(), t
        }
        return null
      }
      finishedReconstruction() {
        this.reconPack = null, this.buffers = []
      }
    }

    function ng(t, e, i) {
      return t.on(e, i),
        function() {
          t.off(e, i)
        }
    }
    const og = Object.freeze({
      connect: 1,
      connect_error: 1,
      disconnect: 1,
      disconnecting: 1,
      newListener: 1,
      removeListener: 1
    });
    class rg extends cf {
      constructor(t, e, i) {
        super(), this.connected = !1, this.recovered = !1, this.receiveBuffer = [], this.sendBuffer = [], this._queue = [], this._queueSeq = 0, this.ids = 0, this.acks = {}, this.flags = {}, this.io = t, this.nsp = e, i && i.auth && (this.auth = i.auth), this._opts = Object.assign({}, i), this.io._autoConnect && this.open()
      }
      get disconnected() {
        return !this.connected
      }
      subEvents() {
        if (this.subs) return;
        const t = this.io;
        this.subs = [ng(t, "open", this.onopen.bind(this)), ng(t, "packet", this.onpacket.bind(this)), ng(t, "error", this.onerror.bind(this)), ng(t, "close", this.onclose.bind(this))]
      }
      get active() {
        return !!this.subs
      }
      connect() {
        return this.connected || (this.subEvents(), this.io._reconnecting || this.io.open(), "open" === this.io._readyState && this.onopen()), this
      }
      open() {
        return this.connect()
      }
      send(...t) {
        return t.unshift("message"), this.emit.apply(this, t), this
      }
      emit(t, ...e) {
        var i, n, o;
        if (og.hasOwnProperty(t)) throw new Error('"' + t.toString() + '" is a reserved event name');
        if (e.unshift(t), this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) return this._addToQueue(e), this;
        const r = {
          type: Qf.EVENT,
          data: e,
          options: {}
        };
        if (r.options.compress = !1 !== this.flags.compress, "function" == typeof e[e.length - 1]) {
          const t = this.ids++,
            i = e.pop();
          this._registerAckCallback(t, i), r.id = t
        }
        const s = null === (n = null === (i = this.io.engine) || void 0 === i ? void 0 : i.transport) || void 0 === n ? void 0 : n.writable,
          a = this.connected && !(null === (o = this.io.engine) || void 0 === o ? void 0 : o._hasPingExpired());
        return this.flags.volatile && !s || (a ? (this.notifyOutgoingListeners(r), this.packet(r)) : this.sendBuffer.push(r)), this.flags = {}, this
      }
      _registerAckCallback(t, e) {
        var i;
        const n = null !== (i = this.flags.timeout) && void 0 !== i ? i : this._opts.ackTimeout;
        if (void 0 === n) return void(this.acks[t] = e);
        const o = this.io.setTimeoutFn((() => {
            delete this.acks[t];
            for (let e = 0; e < this.sendBuffer.length; e++) this.sendBuffer[e].id === t && this.sendBuffer.splice(e, 1);
            e.call(this, new Error("operation has timed out"))
          }), n),
          r = (...t) => {
            this.io.clearTimeoutFn(o), e.apply(this, t)
          };
        r.withError = !0, this.acks[t] = r
      }
      emitWithAck(t, ...e) {
        return new Promise(((i, n) => {
          const o = (t, e) => t ? n(t) : i(e);
          o.withError = !0, e.push(o), this.emit(t, ...e)
        }))
      }
      _addToQueue(t) {
        let e;
        "function" == typeof t[t.length - 1] && (e = t.pop());
        const i = {
          id: this._queueSeq++,
          tryCount: 0,
          pending: !1,
          args: t,
          flags: Object.assign({
            fromQueue: !0
          }, this.flags)
        };
        t.push(((t, ...n) => {
          if (i !== this._queue[0]) return;
          return null !== t ? i.tryCount > this._opts.retries && (this._queue.shift(), e && e(t)) : (this._queue.shift(), e && e(null, ...n)), i.pending = !1, this._drainQueue()
        })), this._queue.push(i), this._drainQueue()
      }
      _drainQueue(t = !1) {
        if (!this.connected || 0 === this._queue.length) return;
        const e = this._queue[0];
        e.pending && !t || (e.pending = !0, e.tryCount++, this.flags = e.flags, this.emit.apply(this, e.args))
      }
      packet(t) {
        t.nsp = this.nsp, this.io._packet(t)
      }
      onopen() {
        "function" == typeof this.auth ? this.auth((t => {
          this._sendConnectPacket(t)
        })) : this._sendConnectPacket(this.auth)
      }
      _sendConnectPacket(t) {
        this.packet({
          type: Qf.CONNECT,
          data: this._pid ? Object.assign({
            pid: this._pid,
            offset: this._lastOffset
          }, t) : t
        })
      }
      onerror(t) {
        this.connected || this.emitReserved("connect_error", t)
      }
      onclose(t, e) {
        this.connected = !1, delete this.id, this.emitReserved("disconnect", t, e), this._clearAcks()
      }
      _clearAcks() {
        Object.keys(this.acks).forEach((t => {
          if (!this.sendBuffer.some((e => String(e.id) === t))) {
            const e = this.acks[t];
            delete this.acks[t], e.withError && e.call(this, new Error("socket has been disconnected"))
          }
        }))
      }
      onpacket(t) {
        if (t.nsp === this.nsp) switch (t.type) {
          case Qf.CONNECT:
            t.data && t.data.sid ? this.onconnect(t.data.sid, t.data.pid) : this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
            break;
          case Qf.EVENT:
          case Qf.BINARY_EVENT:
            this.onevent(t);
            break;
          case Qf.ACK:
          case Qf.BINARY_ACK:
            this.onack(t);
            break;
          case Qf.DISCONNECT:
            this.ondisconnect();
            break;
          case Qf.CONNECT_ERROR:
            this.destroy();
            const e = new Error(t.data.message);
            e.data = t.data.data, this.emitReserved("connect_error", e)
        }
      }
      onevent(t) {
        const e = t.data || [];
        null != t.id && e.push(this.ack(t.id)), this.connected ? this.emitEvent(e) : this.receiveBuffer.push(Object.freeze(e))
      }
      emitEvent(t) {
        if (this._anyListeners && this._anyListeners.length) {
          const e = this._anyListeners.slice();
          for (const i of e) i.apply(this, t)
        }
        super.emit.apply(this, t), this._pid && t.length && "string" == typeof t[t.length - 1] && (this._lastOffset = t[t.length - 1])
      }
      ack(t) {
        const e = this;
        let i = !1;
        return function(...n) {
          i || (i = !0, e.packet({
            type: Qf.ACK,
            id: t,
            data: n
          }))
        }
      }
      onack(t) {
        const e = this.acks[t.id];
        "function" == typeof e && (delete this.acks[t.id], e.withError && t.data.unshift(null), e.apply(this, t.data))
      }
      onconnect(t, e) {
        this.id = t, this.recovered = e && this._pid === e, this._pid = e, this.connected = !0, this.emitBuffered(), this.emitReserved("connect"), this._drainQueue(!0)
      }
      emitBuffered() {
        this.receiveBuffer.forEach((t => this.emitEvent(t))), this.receiveBuffer = [], this.sendBuffer.forEach((t => {
          this.notifyOutgoingListeners(t), this.packet(t)
        })), this.sendBuffer = []
      }
      ondisconnect() {
        this.destroy(), this.onclose("io server disconnect")
      }
      destroy() {
        this.subs && (this.subs.forEach((t => t())), this.subs = void 0), this.io._destroy(this)
      }
      disconnect() {
        return this.connected && this.packet({
          type: Qf.DISCONNECT
        }), this.destroy(), this.connected && this.onclose("io client disconnect"), this
      }
      close() {
        return this.disconnect()
      }
      compress(t) {
        return this.flags.compress = t, this
      }
      get volatile() {
        return this.flags.volatile = !0, this
      }
      timeout(t) {
        return this.flags.timeout = t, this
      }
      onAny(t) {
        return this._anyListeners = this._anyListeners || [], this._anyListeners.push(t), this
      }
      prependAny(t) {
        return this._anyListeners = this._anyListeners || [], this._anyListeners.unshift(t), this
      }
      offAny(t) {
        if (!this._anyListeners) return this;
        if (t) {
          const e = this._anyListeners;
          for (let i = 0; i < e.length; i++)
            if (t === e[i]) return e.splice(i, 1), this
        } else this._anyListeners = [];
        return this
      }
      listenersAny() {
        return this._anyListeners || []
      }
      onAnyOutgoing(t) {
        return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.push(t), this
      }
      prependAnyOutgoing(t) {
        return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.unshift(t), this
      }
      offAnyOutgoing(t) {
        if (!this._anyOutgoingListeners) return this;
        if (t) {
          const e = this._anyOutgoingListeners;
          for (let i = 0; i < e.length; i++)
            if (t === e[i]) return e.splice(i, 1), this
        } else this._anyOutgoingListeners = [];
        return this
      }
      listenersAnyOutgoing() {
        return this._anyOutgoingListeners || []
      }
      notifyOutgoingListeners(t) {
        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {
          const e = this._anyOutgoingListeners.slice();
          for (const i of e) i.apply(this, t.data)
        }
      }
    }

    function sg(t) {
      t = t || {}, this.ms = t.min || 100, this.max = t.max || 1e4, this.factor = t.factor || 2, this.jitter = t.jitter > 0 && t.jitter <= 1 ? t.jitter : 0, this.attempts = 0
    }
    sg.prototype.duration = function() {
      var t = this.ms * Math.pow(this.factor, this.attempts++);
      if (this.jitter) {
        var e = Math.random(),
          i = Math.floor(e * this.jitter * t);
        t = 1 & Math.floor(10 * e) ? t + i : t - i
      }
      return 0 | Math.min(t, this.max)
    }, sg.prototype.reset = function() {
      this.attempts = 0
    }, sg.prototype.setMin = function(t) {
      this.ms = t
    }, sg.prototype.setMax = function(t) {
      this.max = t
    }, sg.prototype.setJitter = function(t) {
      this.jitter = t
    };
    class ag extends cf {
      constructor(e, i) {
        var n;
        super(), this.nsps = {}, this.subs = [], e && "object" == typeof e && (i = e, e = void 0), (i = i || {}).path = i.path || "/socket.io", this.opts = i, gf(this, i), this.reconnection(!1 !== i.reconnection), this.reconnectionAttempts(i.reconnectionAttempts || 1 / 0), this.reconnectionDelay(i.reconnectionDelay || 1e3), this.reconnectionDelayMax(i.reconnectionDelayMax || 5e3), this.randomizationFactor(null !== (n = i.randomizationFactor) && void 0 !== n ? n : .5), this.backoff = new sg({
          min: this.reconnectionDelay(),
          max: this.reconnectionDelayMax(),
          jitter: this.randomizationFactor()
        }), this.timeout(null == i.timeout ? 2e4 : i.timeout), this._readyState = "closed", this.uri = e;
        const o = i.parser || t;
        this.encoder = new o.Encoder, this.decoder = new o.Decoder, this._autoConnect = !1 !== i.autoConnect, this._autoConnect && this.open()
      }
      reconnection(t) {
        return arguments.length ? (this._reconnection = !!t, t || (this.skipReconnect = !0), this) : this._reconnection
      }
      reconnectionAttempts(t) {
        return void 0 === t ? this._reconnectionAttempts : (this._reconnectionAttempts = t, this)
      }
      reconnectionDelay(t) {
        var e;
        return void 0 === t ? this._reconnectionDelay : (this._reconnectionDelay = t, null === (e = this.backoff) || void 0 === e || e.setMin(t), this)
      }
      randomizationFactor(t) {
        var e;
        return void 0 === t ? this._randomizationFactor : (this._randomizationFactor = t, null === (e = this.backoff) || void 0 === e || e.setJitter(t), this)
      }
      reconnectionDelayMax(t) {
        var e;
        return void 0 === t ? this._reconnectionDelayMax : (this._reconnectionDelayMax = t, null === (e = this.backoff) || void 0 === e || e.setMax(t), this)
      }
      timeout(t) {
        return arguments.length ? (this._timeout = t, this) : this._timeout
      }
      maybeReconnectOnOpen() {
        !this._reconnecting && this._reconnection && 0 === this.backoff.attempts && this.reconnect()
      }
      open(t) {
        if (~this._readyState.indexOf("open")) return this;
        this.engine = new Nf(this.uri, this.opts);
        const e = this.engine,
          i = this;
        this._readyState = "opening", this.skipReconnect = !1;
        const n = ng(e, "open", (function() {
            i.onopen(), t && t()
          })),
          o = e => {
            this.cleanup(), this._readyState = "closed", this.emitReserved("error", e), t ? t(e) : this.maybeReconnectOnOpen()
          },
          r = ng(e, "error", o);
        if (!1 !== this._timeout) {
          const t = this._timeout,
            i = this.setTimeoutFn((() => {
              n(), o(new Error("timeout")), e.close()
            }), t);
          this.opts.autoUnref && i.unref(), this.subs.push((() => {
            this.clearTimeoutFn(i)
          }))
        }
        return this.subs.push(n), this.subs.push(r), this
      }
      connect(t) {
        return this.open(t)
      }
      onopen() {
        this.cleanup(), this._readyState = "open", this.emitReserved("open");
        const t = this.engine;
        this.subs.push(ng(t, "ping", this.onping.bind(this)), ng(t, "data", this.ondata.bind(this)), ng(t, "error", this.onerror.bind(this)), ng(t, "close", this.onclose.bind(this)), ng(this.decoder, "decoded", this.ondecoded.bind(this)))
      }
      onping() {
        this.emitReserved("ping")
      }
      ondata(t) {
        try {
          this.decoder.add(t)
        } catch (t) {
          this.onclose("parse error", t)
        }
      }
      ondecoded(t) {
        uf((() => {
          this.emitReserved("packet", t)
        }), this.setTimeoutFn)
      }
      onerror(t) {
        this.emitReserved("error", t)
      }
      socket(t, e) {
        let i = this.nsps[t];
        return i ? this._autoConnect && !i.active && i.connect() : (i = new rg(this, t, e), this.nsps[t] = i), i
      }
      _destroy(t) {
        const e = Object.keys(this.nsps);
        for (const t of e) {
          if (this.nsps[t].active) return
        }
        this._close()
      }
      _packet(t) {
        const e = this.encoder.encode(t);
        for (let i = 0; i < e.length; i++) this.engine.write(e[i], t.options)
      }
      cleanup() {
        this.subs.forEach((t => t())), this.subs.length = 0, this.decoder.destroy()
      }
      _close() {
        this.skipReconnect = !0, this._reconnecting = !1, this.onclose("forced close")
      }
      disconnect() {
        return this._close()
      }
      onclose(t, e) {
        var i;
        this.cleanup(), null === (i = this.engine) || void 0 === i || i.close(), this.backoff.reset(), this._readyState = "closed", this.emitReserved("close", t, e), this._reconnection && !this.skipReconnect && this.reconnect()
      }
      reconnect() {
        if (this._reconnecting || this.skipReconnect) return this;
        const t = this;
        if (this.backoff.attempts >= this._reconnectionAttempts) this.backoff.reset(), this.emitReserved("reconnect_failed"), this._reconnecting = !1;
        else {
          const e = this.backoff.duration();
          this._reconnecting = !0;
          const i = this.setTimeoutFn((() => {
            t.skipReconnect || (this.emitReserved("reconnect_attempt", t.backoff.attempts), t.skipReconnect || t.open((e => {
              e ? (t._reconnecting = !1, t.reconnect(), this.emitReserved("reconnect_error", e)) : t.onreconnect()
            })))
          }), e);
          this.opts.autoUnref && i.unref(), this.subs.push((() => {
            this.clearTimeoutFn(i)
          }))
        }
      }
      onreconnect() {
        const t = this.backoff.attempts;
        this._reconnecting = !1, this.backoff.reset(), this.emitReserved("reconnect", t)
      }
    }
    const hg = {};

    function cg(t, e) {
      "object" == typeof t && (e = t, t = void 0);
      const i = function(t, e = "", i) {
          let n = t;
          i = i || "undefined" != typeof location && location, null == t && (t = i.protocol + "//" + i.host), "string" == typeof t && ("/" === t.charAt(0) && (t = "/" === t.charAt(1) ? i.protocol + t : i.host + t), /^(https?|wss?):\/\//.test(t) || (t = void 0 !== i ? i.protocol + "//" + t : "https://" + t), n = Lf(t)), n.port || (/^(http|ws)$/.test(n.protocol) ? n.port = "80" : /^(http|ws)s$/.test(n.protocol) && (n.port = "443")), n.path = n.path || "/";
          const o = -1 !== n.host.indexOf(":") ? "[" + n.host + "]" : n.host;
          return n.id = n.protocol + "://" + o + ":" + n.port + e, n.href = n.protocol + "://" + o + (i && i.port === n.port ? "" : ":" + n.port), n
        }(t, (e = e || {}).path || "/socket.io"),
        n = i.source,
        o = i.id,
        r = i.path,
        s = hg[o] && r in hg[o].nsps;
      let a;
      return e.forceNew || e["force new connection"] || !1 === e.multiplex || s ? a = new ag(n, e) : (hg[o] || (hg[o] = new ag(n, e)), a = hg[o]), i.query && !e.query && (e.query = i.queryKey), a.socket(i.path, e)
    }
    Object.assign(cg, {
      Manager: ag,
      Socket: rg,
      io: cg,
      connect: cg
    });
    var ug, lg, dg = __webpack_require__(129);
    ! function(t) {
      t[t.ErrUnknown = -1] = "ErrUnknown", t[t.ErrTimeout = 100] = "ErrTimeout"
    }(lg || (lg = {}));
    var pg, fg = function(t) {
      function e(e, i) {
        var n = t.call(this, i) || this;
        return n.code = e, n.name = "GameServerError", n
      }
      return i(e, t), e
    }(St);
    ! function(t) {
      t[t.EmptyIds = 2e4] = "EmptyIds", t[t.NotFriend = 20001] = "NotFriend", t[t.TargetInBlack = 20002] = "TargetInBlack", t[t.TargetIsFriend = 20003] = "TargetIsFriend", t[t.SelfFriendFull = 20004] = "SelfFriendFull", t[t.TargetFriendFull = 20005] = "TargetFriendFull", t[t.DailyAddFriendLimit = 20006] = "DailyAddFriendLimit", t[t.TargetFriendRequestFull = 20007] = "TargetFriendRequestFull", t[t.BlackFull = 20008] = "BlackFull", t[t.RequestTargetIsSelf = 20009] = "RequestTargetIsSelf", t[t.BlackTargetIsSelf = 20010] = "BlackTargetIsSelf", t[t.ReceiveDailyLimit = 20011] = "ReceiveDailyLimit", t[t.AlreadyReceived = 20012] = "AlreadyReceived", t[t.SendDailyLimit = 20013] = "SendDailyLimit"
    }(pg || (pg = {}));
    var gg;
    (ug = {})[pg.EmptyIds] = "", ug[pg.NotFriend] = "", ug[pg.TargetInBlack] = ",", ug[pg.TargetIsFriend] = "", ug[pg.SelfFriendFull] = "", ug[pg.TargetFriendFull] = "", ug[pg.DailyAddFriendLimit] = "", ug[pg.TargetFriendRequestFull] = "", ug[pg.BlackFull] = "", ug[pg.RequestTargetIsSelf] = "", ug[pg.BlackTargetIsSelf] = "", ug[pg.ReceiveDailyLimit] = "", ug[pg.AlreadyReceived] = "", ug[pg.SendDailyLimit] = "";
    ! function(t) {
      t[t.OK = 0] = "OK", t[t.GuildInMaintenance = 3e4] = "GuildInMaintenance", t[t.NotInGuild = 30001] = "NotInGuild", t[t.NoPermission = 30002] = "NoPermission", t[t.GuildNotFound = 30003] = "GuildNotFound", t[t.AlreadyInGuild = 30004] = "AlreadyInGuild", t[t.NameInvalid = 30005] = "NameInvalid", t[t.AnnouncementInvalid = 30006] = "AnnouncementInvalid", t[t.NameExist = 30007] = "NameExist", t[t.NeedWait = 30008] = "NeedWait", t[t.PowerNotEnough = 30009] = "PowerNotEnough", t[t.MemberFull = 30010] = "MemberFull", t[t.AlreadyApply = 30011] = "AlreadyApply", t[t.ApplyListFull = 30012] = "ApplyListFull", t[t.ApplyNotFound = 30013] = "ApplyNotFound", t[t.TargetNotInGuild = 30014] = "TargetNotInGuild", t[t.LeaderCanNotLeave = 30015] = "LeaderCanNotLeave", t[t.ViceLeaderCountLimit = 30016] = "ViceLeaderCountLimit", t[t.TodaySigned = 31e3] = "TodaySigned", t[t.GuildBossDailyLimit = 32e3] = "GuildBossDailyLimit", t[t.GuildBossNeedKill = 32001] = "GuildBossNeedKill", t[t.HelpDataInvalid = 35002] = "HelpDataInvalid"
    }(gg || (gg = {}));
    var mg, yg = function() {
        function t(t) {
          var e = this;
          this.notifyEventManager = t, this.logger = m.getLogger("ConnectService"), this.socket = null, this.callbackTimeout = 15e3, this._onNotify = function(t) {
            if (t instanceof ArrayBuffer) {
              var i = Gp.decode(new Uint8Array(t));
              e.handleNotify(i)
            } else e.logger.error("unknown message:", t)
          }
        }
        return Object.defineProperty(t.prototype, "connected", {
          get: function() {
            return !!this.socket && this.socket.connected
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.init = function(t, e, i, n) {
          var o = this;
          if (this.socket) {
            if (this.url === t && this.gatePath === e) return void this.logger.info("reinit SocketGameServer same url and gatePath, ignore");
            this.logger.warn("reinit SocketGameServer, close old socket"), this.socket.close()
          }
          this.url = t, this.gatePath = e;
          var r = this.socket = cg(t, {
            path: "".concat(e, "/socket.io/"),
            transports: ["websocket"],
            parser: dg,
            auth: i,
            reconnection: !0,
            autoConnect: !1
          });
          this.logger.info("init SocketGameServer url=".concat(t, ", gatePath=").concat(e)), r.on("n", this._onNotify), r.on("disconnect", (function(t, e) {
            o.logger.info("socket disconnect ".concat(r.active, " ").concat(t, " ").concat(e)), null == n || n(t)
          })), r.on("connect", (function() {
            o.logger.info("socket connect ".concat(r.recovered ? "recovered" : ""))
          })), r.on("connect_error", (function(t) {
            o.logger.error("socket connect_error", t), t && t.description && o.logger.error("socket connect_error description ".concat(t.description))
          }))
        }, t.prototype.connect = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              if (!(t = this.socket)) throw new Error("need init first");
              return t.connected ? (this.logger.info("connect when socket is connected"), [2]) : (this.logger.info("connect"), [2, new Promise((function(e, i) {
                var n = function() {
                    t.off("connect_error", o), e()
                  },
                  o = function(e) {
                    t.off("connect", n), t.disconnect(), i(e)
                  };
                t.once("connect", n), t.once("connect_error", o), t.connect()
              }))])
            }))
          }))
        }, t.prototype.request = function(e, i, n, o, a) {
          return r(this, void 0, void 0, (function() {
            var r, h, c, u, l, d, p;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  if (!this.socket) return [2, null]; /* LOCAL MODE: skip socket requests */
                  return this.socket.active ? [3, 2] : (this.logger.info("socket not active when request, ensureRelogin"), [4, yC()]);
                case 1:
                  s.sent(), s.label = 2;
                case 2:
                  r = this.socket, h = n.encode(o).finish(), c = {
                    cmd: i,
                    body: h
                  }, u = Op.encode(c).finish(), "heartBeat" !== e && this.logger.debug("request ".concat(e), o), s.label = 3;
                case 3:
                  return s.trys.push([3, 5, , 6]), [4, r.timeout(this.callbackTimeout).emitWithAck("r", (f = u, f.buffer.slice(f.byteOffset, f.byteLength + f.byteOffset)))];
                case 4:
                  return l = s.sent(), [3, 6];
                case 5:
                  throw d = s.sent(), this.logger.error("request timeout", e, d), new fg(lg.ErrTimeout, "timeout");
                case 6:
                  try {
                    return p = t.onResponse(a, l), "heartBeat" !== e && this.logger.debug("response ".concat(e), p), [2, p]
                  } catch (t) {
                    throw this.logger.error("response error", e, t), t
                  }
              }
              var f
            }))
          }))
        }, t.onResponse = function(t, e) {
          if (!(e instanceof ArrayBuffer)) throw new fg(lg.ErrUnknown, "unknown message");
          var i, n = Rp.decode(new Uint8Array(e)),
            o = n.ret,
            r = n.errorMsg,
            s = n.body;
          if (o) throw new fg(o, r || "");
          if (!s) throw new fg(lg.ErrUnknown, "");
          try {
            i = t.decode(s)
          } catch (t) {
            throw new fg(lg.ErrUnknown, "," + t)
          }
          return i
        }, t.prototype.handleNotify = function(t) {
          var e, i = t.cmd,
            n = Np[i];
          if (n) {
            var o;
            try {
              o = n.decode(t.body)
            } catch (t) {
              throw this.logger.error("handleNotify decode body fail:".concat(i), t), new fg(lg.ErrUnknown, "")
            }
            this.logger.debug("on notify ".concat(i), o), null === (e = this.notifyEventManager) || void 0 === e || e.emit(i.toString(), o)
          } else this.logger.warn("cmd", i)
        }, t
      }(),
      vg = function() {
        function t(t, e) {
          this.onServerDisconnect = t, this.logger = m.getLogger("SocketGameServer"), this.connectService = new yg(e), this.gameServer = new jp(this.connectService.request.bind(this.connectService))
        }
        return Object.defineProperty(t.prototype, "connected", {
          get: function() {
            return this.connectService.connected
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.connect = function(t, e, i) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return this.connectService.init(t, e, (function(t) {
                    return t({
                      uid: i.uid,
                      token: i.token,
                      ct: i.connectToken,
                      version: "1.0.0"
                    })
                  }), this.onServerDisconnect), [4, this.connectService.connect()];
                case 1:
                  return n.sent(), this.logger.info("socket connect"), [2]
              }
            }))
          }))
        }, t
      }();

    function bg(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          return m.info("onServerDisconnect", t), [2]
        }))
      }))
    }

    function wg() {
      if (!$hostDef.limitGift) return !1;
      var t = uC.limitGift;
      if (t.received && t.id >= ph.maxId) return !1;
      if (t.received) return Je.curTime - t.time > $hostDef.limitGiftNextShowTime;
      if (t.time > 0) {
        var e = Je.curTime - t.time;
        if ($hostDef.limitGiftTime - e <= 0) return e >= $hostDef.limitGiftMissShowTime
      }
      return !0
    }

    function xg() {
      if (!$hostDef.limitGift) return !1;
      var t = uC.limitGift;
      if (t.received && t.id >= ph.maxId) return !1;
      if (0 === t.time) return !0;
      var e = Je.curTime - t.time;
      return t.received ? e >= $hostDef.limitGiftNextShowTime : e > $hostDef.limitGiftTime && e > $hostDef.limitGiftMissShowTime
    }

    function Tg() {
      var t = uC.limitGift;
      if (!t) return 0;
      var e = $hostDef.limitGiftTime - (Je.curTime - t.time);
      return e < 0 && (e = 0), e
    }

    function kg() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, GP({})];
            case 1:
              return (t = e.sent()).syncData && uC.syncData(t.syncData), [2, t];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function Ig() {
      return r(this, void 0, void 0, (function() {
        var t, e, i;
        return s(this, (function(n) {
          switch (n.label) {
            case 0:
              return n.trys.push([0, 2, , 3]), [4, AP({})];
            case 1:
              return (t = n.sent()).syncData && uC.syncData(t.syncData), (e = t.gift) && e.items && e.items.length > 0 && (i = oh.getItem(e.items[0][0]).name, e.gold > 0 ? rc("".concat(i, "x").concat(e.gold)) : rc("".concat(i))), [3, 3];
            case 2:
              return oc(n.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function Cg(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              return i.trys.push([0, 2, , 3]), [4, NP({
                type: t
              })];
            case 1:
              return (e = i.sent()).syncData && uC.syncData(e.syncData), [2, e];
            case 2:
              return oc(i.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }
    var _g = "newSystemNotice",
      Bg = "reviveCoinHide",
      Sg = "useCoinRevive",
      Pg = "showChallenge",
      Dg = "hideChallenge",
      Mg = "showRelay",
      Fg = "hideRelay",
      Eg = "loadingUserUid",
      Lg = new Ll,
      Og = function() {
        function t() {
          this._relayData = null
        }
        return t.prototype.setRelayData = function(t) {
          return r(this, void 0, void 0, (function() {
            var e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return t && "" !== t ? [4, XP({
                    relayId: t
                  })] : [2];
                case 1:
                  return (e = i.sent()) && e.uid !== uC.uid && (Ag.cleanInfo(), this._relayData = e, this._relayData.nick = Vc.decodeURIComponent(e.nick), this._relayData.relayId = t, this._relayData.isFinish = !1, DEVELOP && console.log("relay info:", JSON.stringify(this._relayData)), Lg.dispatchEvent(Mg)), [2]
              }
            }))
          }))
        }, t.prototype.getRelayId = function() {
          return this._relayData && !this._relayData.isFinish ? this._relayData.relayId : ""
        }, t.prototype.clearRelayData = function() {
          this._relayData && this._relayData.isFinish && (this._relayData = null), Lg.dispatchEvent(Fg)
        }, t.prototype.isRelaying = function() {
          return this._relayData && !this._relayData.isFinish
        }, t.prototype.getRelayData = function() {
          return this._relayData
        }, t.prototype.onGameOver = function() {
          this._relayData && (this._relayData.isFinish = !0)
        }, t.prototype.createRelayRace = function(t) {
          return r(this, void 0, void 0, (function() {
            var e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return i.trys.push([0, 2, , 3]), [4, $P({
                    score: t
                  })];
                case 1:
                  return (e = i.sent()) && e.relayId ? [2, e.relayId] : [3, 3];
                case 2:
                  return oc(i.sent()), [3, 3];
                case 3:
                  return [2]
              }
            }))
          }))
        }, t.prototype.refreshMyBestRelay = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return e.trys.push([0, 2, , 3]), [4, YP({})];
                case 1:
                  return (t = e.sent()).syncData && uC.syncData(t.syncData), [3, 3];
                case 2:
                  return oc(e.sent()), [3, 3];
                case 3:
                  return [2]
              }
            }))
          }))
        }, t
      }(),
      Rg = new Og,
      Gg = function() {
        function t() {
          this.newChallengeInfo = null, this.curChallengeInfo = null, this.isFinishCurChallenge = !1
        }
        return t.prototype.cleanInfo = function() {
          this.newChallengeInfo = null, this.curChallengeInfo = null, this.isFinishCurChallenge = !1, Lg.dispatchEvent(Dg)
        }, t.prototype.onLogin = function(t, e, i) {
          if (t !== uC.uid && e.nick && e.score) {
            var n = Vc.decodeURIComponent(e.nick),
              o = Number(e.score),
              r = e.map ? Number(e.map) : 0;
            i ? RI.isGaming && !tc.hasPanel("MenuView") || (null !== this.curChallengeInfo && (this.isFinishCurChallenge || this.curChallengeInfo.nick === n && this.curChallengeInfo.score === o) ? this.newChallengeInfo && this.newChallengeInfo.nick === n && this.newChallengeInfo.score === o || (this.newChallengeInfo = {
              uid: t,
              nick: n,
              score: o,
              map: r
            }, Lg.dispatchEvent(Pg, this.newChallengeInfo)) : (this.isFinishCurChallenge = !1, this.curChallengeInfo = {
              uid: t,
              nick: n,
              score: o,
              map: r
            }, Lg.dispatchEvent(Pg, this.curChallengeInfo))) : (this.isFinishCurChallenge = !1, this.curChallengeInfo = {
              uid: t,
              score: o,
              nick: n,
              map: r
            }, this.newChallengeInfo = null), Rg.clearRelayData()
          }
        }, t.prototype.restartGame = function() {
          this.isFinishCurChallenge && (this.newChallengeInfo ? (this.curChallengeInfo = this.newChallengeInfo, this.newChallengeInfo = null) : this.curChallengeInfo = null, this.isFinishCurChallenge = !1)
        }, t.prototype.onGameOver = function() {
          this.curChallengeInfo && (this.isFinishCurChallenge = !0)
        }, t.prototype.getCurChallenge = function() {
          return this.curChallengeInfo
        }, t.prototype.hasNewChallenge = function() {
          return null !== this.newChallengeInfo
        }, t.prototype.needShowChallenge = function() {
          return null !== this.newChallengeInfo || this.curChallengeInfo && !this.isFinishCurChallenge
        }, t.prototype.getNewChallenge = function() {
          return this.newChallengeInfo
        }, t.prototype.challengeExpertSuccess = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return n.trys.push([0, 2, , 3]), [4, OP({
                    score: t
                  })];
                case 1:
                  return (e = n.sent()).syncData && (i = uC.ticket, uC.syncData(e.syncData), uC.ticket > i && rc("")), [2, e];
                case 2:
                  return oc(n.sent()), [3, 3];
                case 3:
                  return [2]
              }
            }))
          }))
        }, t
      }(),
      Ag = new Gg,
      Ng = function() {
        function t() {}
        return t.prototype.checkRaceQuery = function(t, e, i) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  if (!t.relayId || "" === t.relayId || RI.isGaming && !tc.hasPanel("MenuView")) return [3, 5];
                  n.label = 1;
                case 1:
                  return n.trys.push([1, 3, , 4]), [4, Rg.setRelayData(t.relayId)];
                case 2:
                  return n.sent(), [3, 4];
                case 3:
                  return oc(n.sent()), [3, 4];
                case 4:
                  return [3, 6];
                case 5:
                  Ag.onLogin(e, t, i), n.label = 6;
                case 6:
                  return [2]
              }
            }))
          }))
        }, t.prototype.checkShowRace = function() {
          Rg.isRelaying() ? Lg.dispatchEvent(Mg) : Ag.isFinishCurChallenge ? Ag.getNewChallenge() && Lg.dispatchEvent(Pg, Ag.getNewChallenge()) : Ag.getCurChallenge() && Lg.dispatchEvent(Pg, Ag.getCurChallenge())
        }, t
      }(),
      jg = new Ng,
      Vg = "scoreChange",
      Ug = "gameDead",
      Wg = "gameEnd",
      qg = "gameRevive",
      Hg = "gameStart",
      $g = "floorChange",
      Xg = "curFloorChange",
      Yg = "bloodChange",
      zg = "scoreProgressChange",
      Kg = "costScoreChange";

    function Jg() {
      if ("function" == typeof wx.openCustomerServiceConversation) try {
        wx.openCustomerServiceConversation({
          sessionFrom: "game",
          fail: function(t) {}
        })
      } catch (t) {}
    }
    var Qg = function(t) {
        function e(e, i) {
          var n = t.call(this, !0, e) || this;
          return n.canTapMaskClose = void 0 !== i && i, n
        }
        return i(e, t), e.prototype.addCloseButton = function() {
          var t = this;
          this.closeButton = new Qu, this.bg ? this.closeButton.x = this.bg.width - 15 : this.closeButton.x = this.width - 15, this.closeButton.y = (this.bg ? this.bg.y : 0) + 15, this.closeButton.on(Tu, (function() {
            t.close()
          }), this), this.addSkin(this.closeButton)
        }, e.prototype.addTitle = function(t, e, i) {
          void 0 === e && (e = "#FFFFFF"), void 0 === i && (i = 40);
          var n = this.titleText = Xh(t, e, !0, "left", i);
          n.y = 30, n.x = (this.bg.width - n.width) / 2, this.addChild(n)
        }, e.prototype.updateTitle = function(t) {
          this.titleText && (this.titleText.text = t, this.titleText.x = (this.bg.width - this.titleText.width) / 2)
        }, e.prototype.onShow = function(t) {}, e.prototype.onHide = function() {}, e.prototype.onDestroy = function() {
          this.closeButton && (this.closeButton.destroy(), this.closeButton = null)
        }, e.prototype.centerWindow = function() {
          this.bg && (this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.y < Mu.top + 30 && (this.y = Mu.top + 30))
        }, e
      }(Eu),
      Zg = function(t) {
        function e(e, i, n) {
          var o = t.call(this) || this;
          return o.items = [], o.horizontalCount = 1, o.vGap = 5, o.gridWidth = 0, o.itemWidth = 0, o.gridWidth = e, o.horizontalCount = i, o.vGap = n, o
        }
        return i(e, t), e.prototype.addItem = function(t) {
          this.addChild(t);
          var e = this.items.indexOf(t); - 1 !== e && this.items.splice(e, 1), this.items.push(t), this.reLayout()
        }, e.prototype.removeItem = function(t) {
          this.removeChild(t);
          var e = this.items.indexOf(t); - 1 !== e && this.items.splice(e, 1), this.reLayout()
        }, e.prototype.reLayout = function() {
          for (var t = 0, e = 0, i = 0, n = 0, o = [], r = 0; r < this.items.length; r++) {
            var s = this.items[r];
            if (s.y = t, o.push(s), i = Math.max(s.width, i), e = Math.max(s.height, e), this.itemWidth > 0 && (i = this.itemWidth), ++n >= this.horizontalCount) {
              for (var a = (this.gridWidth - i * this.horizontalCount) / (this.horizontalCount - 1), h = 0; h < o.length; h++) o[h].x = h * a + h * i;
              n = 0, t += e + this.vGap, o.length = 0, i = 0, e = 0
            }
          }
          if (0 !== n) {
            for (a = (this.gridWidth - i * this.horizontalCount) / (this.horizontalCount - 1), h = 0; h < o.length; h++) o[h].x = h * a + h * i;
            o.length = 0
          }
        }, e.prototype.destroy = function(e) {
          this.items && (this.items.length = 0, this.items = null), t.prototype.destroy.call(this, e)
        }, e.prototype.removeAllItems = function() {
          this.removeChildren(), this.items.length = 0
        }, Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return 0 - this.y
          },
          set: function(t) {
            this.y = 0 - t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this.height + 0 + 0
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      tm = function(t) {
        function e(e, i, n) {
          void 0 === n && (n = 1);
          var o = t.call(this) || this;
          return o.container = new PIXI.Container, o.container.scale.x = n || 1, o.container.scale.y = n || 1, o.bg = jh(e), o.bg.anchor.set(0, 0), o.container.addChild(o.bg), o.thumb = jh(i), o.thumb.anchor.set(0, 0), o.thumb.y = (o.bg.height - o.thumb.height) / 2, o.thumb.x = (o.bg.width - o.thumb.width) / 2, o.container.addChild(o.thumb), o.thumbMask = new PIXI.Graphics, o.thumbMask.x = o.thumb.x, o.thumbMask.y = o.thumb.y, o.thumbMask.beginFill(0), o.thumbMask.drawRect(0, 0, o.thumb.width, o.thumb.height), o.thumbMask.endFill(), o.container.addChild(o.thumbMask), o.thumb.mask = o.thumbMask, o.progress = 0, o
        }
        return i(e, t), Object.defineProperty(e.prototype, "progress", {
          get: function() {
            return this.thumbMask.scale.x
          },
          set: function(t) {
            t < 0 && (t = 0), this.thumbMask.scale.x = Math.min(t, 1)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          t.prototype.destroy.call(this)
        }, e
      }(Lu),
      em = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.sprite = new PIXI.Container, e.sprite.interactive = !0, e.bg = jh("button_gold.png"), e.bg.anchor.set(.5, .5), e.sprite.addChild(e.bg), e.goldText = Xh("0", "#FFFFFF", !0, "left", 32), e.goldText.x = 78 - e.bg.width / 2, e.goldText.y = 56 + (52 - e.goldText.height) / 2 - e.bg.height / 2, e.sprite.addChild(e.goldText), e.sprite.on(Tu, e.onTapDown, e), e.sprite.on(ku, e.onTapUp, e), e.sprite.on(Cu, e.onTapUp, e), e.sprite.on(_u, e.onTapUp, e), e.sprite.on(Bu, e.onTapUp, e), e
        }
        return i(e, t), Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.sprite
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "gold", {
          get: function() {
            return parseInt(this.goldText.text, 10)
          },
          set: function(t) {
            this.goldText.text = t + "", this.bg.texture = uC.gold >= t ? Vh("button_gold.png") : PIXI.Texture.fromFrame("button_gold_gray.png")
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onTapUp = function() {
          this._destroyed || this.sprite && this.sprite.scale && this.sprite.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this._destroyed || this.sprite && this.sprite.scale && this.sprite.scale.set(.9, .9)
        }, e.prototype.destroy = function() {
          this.sprite && this.sprite.removeAllListeners(), t.prototype.destroy.call(this), this.sprite = null
        }, e
      }(Lu),
      im = function(t) {
        function e(e, i) {
          void 0 === i && (i = !0);
          var n = t.call(this) || this;
          return n.items = [], n.gap = e, n.isHorizontal = i, n
        }
        return i(e, t), e.prototype.addButton = function(t) {
          t instanceof Lu ? this.addChild(t.skin) : this.addChild(t);
          var e = this.items.indexOf(t); - 1 !== e && this.items.splice(e, 1), this.items.push(t), this.reLayout()
        }, e.prototype.removeButton = function(t) {
          if (t instanceof Lu ? this.removeChild(t.skin) : this.removeChild(t), 1 === arguments.length) {
            var e = this.items.indexOf(t); - 1 !== e && this.items.splice(e, 1), this.reLayout()
          }
        }, e.prototype.reLayout = function() {
          for (var t = 0, e = 0; e < this.items.length; e++) {
            var i = this.items[e];
            i.visible && (this.isHorizontal ? (i.x = t, t += i.width) : (i.y = t, t += i.height), e !== this.items.length - 1 && (t += this.gap))
          }
        }, e.prototype.destroy = function() {
          this.items && (this.items.length = 0), t.prototype.destroy.call(this)
        }, e
      }(PIXI.Container),
      nm = function(t) {
        function e(e, i, n, o) {
          void 0 === n && (n = !0), void 0 === o && (o = 28);
          var r = t.call(this) || this;
          return void 0 === n && (n = !0), r._center = n, r.sprite = new PIXI.Container, r.sprite.interactive = !0, r.bg = jh(e), r._width = r.bg.width, r._height = r.bg.height, n && r.bg.anchor.set(.5, .5), r.sprite.addChild(r.bg), r.labelText = Xh(i, "#FFFFFF", !0, "left", o), n ? (r.labelText.x = -r.labelText.width / 2, r.labelText.y = -r.labelText.height / 2) : (r.labelText.x = (r.width - r.labelText.width) / 2, r.labelText.y = (r.height - r.labelText.height) / 2), r.sprite.addChild(r.labelText), r.redPoint = jh("redpoint2.png"), r.redPoint.x = n ? r._width / 2 - r.redPoint.width / 2 : r._width - r.redPoint.width / 2, r.redPoint.y = n ? -r._height / 2 : -r._height, r.sprite.addChild(r.redPoint), r.sprite.on(Tu, r.onTapDown, r), r.sprite.on(ku, r.onTapUp, r), r.sprite.on(Cu, r.onTapUp, r), r.sprite.on(_u, r.onTapUp, r), r.sprite.on(Bu, r.onTapUp, r), r.showRed(!1), r
        }
        return i(e, t), e.prototype.showRed = function(t) {
          this.redPoint.visible = t
        }, e.prototype.setFrameId = function(t) {
          this.bg.texture = Vh(t)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.sprite
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "labelColor", {
          set: function(t) {
            this.labelText.style.fill = t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "label", {
          get: function() {
            return this.labelText.text
          },
          set: function(t) {
            this.labelText.text = t
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onTapUp = function() {
          this.setScale(1)
        }, e.prototype.onTapDown = function() {
          this.setScale(.9)
        }, e.prototype.destroy = function() {
          this.sprite && this.sprite.removeAllListeners(), t.prototype.destroy.call(this), this.sprite = null
        }, e
      }(Ou),
      om = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          i.skinId = 0, i.interactive = e, i.interactiveChildren = e;
          var n = jh("icon_circle_bg.png");
          return n.interactive = !0, i.addChild(n), i.skinIcon = jh("empty.png"), i.skinIcon.interactive = !1, i.skinIcon.width = 80, i.skinIcon.height = 80, i.skinIcon.anchor.set(.5, .5), i.skinIcon.x = n.width / 2, i.skinIcon.y = n.height / 2, i.addChild(i.skinIcon), i.selectIcon = jh("icon_select.png"), i.selectIcon.anchor.set(.5, .5), i.selectIcon.x = n.width / 2, i.selectIcon.y = n.height - i.selectIcon.height / 2, i.addChild(i.selectIcon), i.selectIcon.visible = !1, i.selectIcon.interactive = !1, i.redIcon = jh("red_point.png"), i.redIcon.interactive = !1, i.redIcon.x = n.width - i.redIcon.width, i.redIcon.y = 0, i.addChild(i.redIcon), i.redIcon.visible = !1, i
        }
        return i(e, t), Object.defineProperty(e.prototype, "data", {
          get: function() {
            return this.skin
          },
          set: function(t) {
            if (this.skin = t, this.skin) {
              this.visible = !0;
              var e = uC.items.get(this.skin.id);
              if (e) this.redIcon.visible = uC.usedSkins.indexOf(this.skin.id) < 0, this.redIcon.visible && (this.redIcon.texture = Vh("redpoint2.png"));
              else {
                var i = oh.getItem(this.skin.id);
                i.gold > 0 && uC.gold >= i.gold ? (this.redIcon.visible = !0, this.redIcon.texture = Vh("greenpoint.png")) : this.redIcon.visible = !1
              }
              this.skinIcon.alpha = e && !e.isExpired ? 1 : .3;
              var n = this.skin.skinType;
              0 === n ? this.selected = uC.skin === this.skin.id : 1 === n ? this.selected = uC.paint === this.skin.id : 2 === n && (this.selected = uC.trail === this.skin.id), this.skinId !== this.skin.id && (this.skinId = this.skin.id, this.skinIcon.texture = Vh("item".concat(this.skin.id, ".png")))
            } else this.visible = !1
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.refresh = function() {
          this.data = this.data
        }, e.prototype.setActive = function(t) {
          this.skinIcon.alpha = t ? 1 : .3
        }, Object.defineProperty(e.prototype, "isActive", {
          get: function() {
            return 1 === this.skinIcon.alpha
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "selected", {
          get: function() {
            return this.selectIcon.visible
          },
          set: function(t) {
            this.selectIcon.visible = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      rm = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.unlockIcon = null, e.nameText = null;
          var i = e.background = Hh(560, 640);
          e.addChild(i), e.skinItem = new om(!1), e.skinItem.x = (i.width - e.skinItem.width) / 2, e.skinItem.y = 40, e.addChild(e.skinItem), e.nameText = Xh("", "#FFFFFF", !1, "left", 32), e.nameText.x = (i.width - e.nameText.width) / 2, e.nameText.y = e.skinItem.y + e.skinItem.height + 10, e.addChild(e.nameText);
          var n = jh("title_bg.png");
          n.anchor.set(.5, .5), n.x = i.width / 2, n.y = e.nameText.y + 80, e.addChild(n);
          var o = Xh("", "#FFFFFF", !0);
          o.anchor.set(.5, .5), o.x = i.width / 2, o.y = n.y, e.addChild(o);
          var r = new PIXI.Graphics;
          return r.beginFill(1579554), r.drawRect(0, 0, i.width - 60, 180), r.endFill(), r.x = 30, r.y = n.y + 50, e.addChild(r), e.unlockIcon = jh("icon_unlock.png"), e.unlockIcon.anchor.set(.5, .5), e.unlockIcon.x = i.width - 90, e.unlockIcon.y = r.y + 100, e.unlockIcon.visible = !1, e.addChild(e.unlockIcon), e.descText = Yh("", "#FFFFFF", 360, 28, !1), e.descText.x = 40, e.descText.y = r.y + 80, e.addChild(e.descText), e.addCloseButton(), e.okButton = new nm("button_blue.png", "", !1), e.okButton.on(Tu, (function() {
            e.close()
          }), e), e.useButton = new nm("button_orange.png", "", !1), e.useButton.on(Tu, e.onUse, e), e.useButton.visible = !0, e.shareButton = new nm("button_orange.png", "", !1), e.shareButton.on(Tu, e.onShare, e), e.shareButton.visible = !0, e.buttonGroup = new im(20), e.buttonGroup.addButton(e.okButton), e.buttonGroup.addButton(e.shareButton), e.buttonGroup.addButton(e.useButton), e.addChild(e.buttonGroup), e.buttonGroup.x = (i.width - e.buttonGroup.width) / 2, e.buttonGroup.y = r.y + r.height + 30, e.goldButton = new em, e.goldButton.x = i.width / 2, e.goldButton.y = r.y + r.height + e.goldButton.height / 2 + 20, e.goldButton.on(Tu, e.onGold, e), e.addChild(e.goldButton.skin), e
        }
        return i(e, t), e.prototype.onShow = function(e) {
          if (t.prototype.onShow.call(this), this.skin = e, this.skinItem.data = e, this.itemInfo = oh.getItem(e.id), this.nameText.text = this.itemInfo.name, this.nameText.x = (this.background.width - this.nameText.width) / 2, this.itemInfo.gold < 0 ? this.descText.text = "" : this.descText.text = "~~", uC.items.get(this.skin.id)) {
            switch (this.goldButton.visible = !1, this.buttonGroup.visible = !0, this.shareButton.visible = !0, this.itemInfo.skinType) {
              case 1:
                this.useButton.visible = uC.paint !== this.itemInfo.id;
                break;
              case 2:
                this.useButton.visible = uC.trail !== this.itemInfo.id;
                break;
              case 0:
                this.useButton.visible = uC.skin !== this.itemInfo.id
            }
            this.unlockIcon.visible = !0, this.buttonGroup.reLayout(), this.buttonGroup.x = (this.background.width - this.buttonGroup.width) / 2
          } else this.goldButton.visible = this.itemInfo.gold > 0, this.goldButton.visible && (this.goldButton.gold = this.itemInfo.gold), this.buttonGroup.visible = !1, this.unlockIcon.visible = !1
        }, e.prototype.onUse = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, eC(this.skin.id)];
                case 1:
                  return t.sent(), this.close(), [2]
              }
            }))
          }))
        }, e.prototype.onShare = function() {
          var t = this;
          NI("".concat(this.skin.id, "")), $c(this.skin.id).then((function(e) {
            Uc(e) && jI("".concat(t.skin.id, ""))
          }))
        }, e.prototype.onGold = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return this.itemInfo ? this.itemInfo.gold > uC.gold ? (rc("".concat(this.itemInfo.gold, "")), [2]) : [4, iC(this.itemInfo.id)] : [2];
                case 1:
                  return t.sent(), this.close(), [2]
              }
            }))
          }))
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), this.okButton.resetScale(), this.useButton.resetScale(), this.shareButton.resetScale(), this.goldButton.resetScale()
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.okButton && (this.okButton.destroy(), this.okButton = null), this.useButton && (this.useButton.destroy(), this.useButton = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.goldButton && (this.goldButton.destroy(), this.goldButton = null), this.skinItem && (this.skinItem.destroy(), this.skinItem = null)
        }, e.clsName = "GoldSkinDescView", e
      }(Qg),
      sm = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.unlockIcon = null, e.nameText = null;
          var i = e.background = Hh(560, 640);
          e.addChild(i), e.skinItem = new om(!1), e.skinItem.x = (i.width - e.skinItem.width) / 2, e.skinItem.y = 40, e.addChild(e.skinItem), e.nameText = Xh("", "#FFFFFF", !1, "left", 32), e.nameText.x = (i.width - e.nameText.width) / 2, e.nameText.y = e.skinItem.y + e.skinItem.height + 10, e.addChild(e.nameText);
          var n = jh("title_bg.png");
          n.anchor.set(.5, .5), n.x = i.width / 2, n.y = e.nameText.y + 80, e.addChild(n);
          var o = Xh("", "#FFFFFF", !0);
          o.anchor.set(.5, .5), o.x = i.width / 2, o.y = n.y, e.addChild(o);
          var r = new PIXI.Graphics;
          return r.beginFill(1579554), r.drawRect(0, 0, i.width - 60, 180), r.endFill(), r.x = 30, r.y = n.y + 50, e.addChild(r), e.leftTimeText = Xh("12:00:00", "#FFFFFF", !0), e.leftTimeText.anchor.set(.5, .5), e.leftTimeText.x = i.width / 2, e.leftTimeText.y = r.y + 30, e.addChild(e.leftTimeText), e.unlockIcon = jh("icon_unlock.png"), e.unlockIcon.anchor.set(.5, .5), e.unlockIcon.x = i.width - 90, e.unlockIcon.y = r.y + 100, e.unlockIcon.visible = !1, e.addChild(e.unlockIcon), e.descText = Yh("", "#FFFFFF", 360, 28, !1), e.descText.x = 40, e.descText.y = r.y + 80, e.addChild(e.descText), e.addCloseButton(), e.okButton = new nm("button_blue.png", "", !1), e.okButton.on(Tu, (function() {
            e.close()
          }), e), e.useButton = new nm("button_orange.png", "", !1), e.useButton.on(Tu, e.onUse, e), e.useButton.visible = !0, e.shareButton = new nm("button_orange.png", "", !1), e.shareButton.on(Tu, e.onShare, e), e.shareButton.visible = !0, e.buttonGroup = new im(20), e.buttonGroup.addButton(e.okButton), e.buttonGroup.addButton(e.shareButton), e.buttonGroup.addButton(e.useButton), e.addChild(e.buttonGroup), e.buttonGroup.x = (i.width - e.buttonGroup.width) / 2, e.buttonGroup.y = r.y + r.height + 30, e
        }
        return i(e, t), e.prototype.updateLeftTime = function(t) {
          this.leftTimeText.text = t <= 0 ? "" : "" + ri(t)
        }, e.prototype.onShow = function(e) {
          var i;
          t.prototype.onShow.call(this), this.skin = e, this.skinItem.data = e, this.itemDef = oh.getItem(e.id), this.nameText.text = this.itemDef.name, this.nameText.x = (this.background.width - this.nameText.width) / 2, this.descText.text = null !== (i = this.itemDef.desc) && void 0 !== i ? i : "", this.itemInfo = uC.items.get(this.skin.id), this.itemInfo ? (this.buttonGroup.visible = !0, this.checkLeftTime()) : (this.buttonGroup.visible = !1, this.unlockIcon.visible = !1, this.leftTimeText.visible = !1)
        }, e.prototype.getLeftTime = function() {
          return this.itemInfo ? this.itemInfo.expire - Je.curTime : 0
        }, e.prototype.checkLeftTime = function() {
          this.leftTimeText.visible = !0;
          var t = this.getLeftTime();
          this.stopTick(), t > 0 && !this.intervalId && (this.intervalId = setInterval(this.onTick.bind(this), 200)), this.onTick()
        }, e.prototype.onTick = function() {
          var t = this.getLeftTime();
          this.updateLeftTime(t), this.checkUseButton()
        }, e.prototype.checkUseButton = function() {
          var t = this.getLeftTime() > 0;
          switch (this.itemDef.skinType) {
            case 1:
              this.useButton.visible = t && uC.paint !== this.itemDef.id;
              break;
            case 2:
              this.useButton.visible = t && uC.trail !== this.itemDef.id;
              break;
            case 0:
              this.useButton.visible = t && uC.skin !== this.itemDef.id
          }
          this.unlockIcon.visible = t, this.shareButton.visible = t, this.buttonGroup.reLayout(), this.buttonGroup.x = (this.background.width - this.buttonGroup.width) / 2
        }, e.prototype.stopTick = function() {
          this.intervalId && (clearInterval(this.intervalId), this.intervalId = null)
        }, e.prototype.onUse = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, eC(this.skin.id)];
                case 1:
                  return t.sent(), this.close(), [2]
              }
            }))
          }))
        }, e.prototype.onShare = function() {
          var t = this;
          NI("".concat(this.skin.id, "")), $c(this.skin.id).then((function(e) {
            Uc(e) && jI("".concat(t.skin.id, ""))
          }))
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), this.okButton.resetScale(), this.useButton.resetScale(), this.shareButton.resetScale()
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.stopTick(), this.okButton && (this.okButton.destroy(), this.okButton = null), this.useButton && (this.useButton.destroy(), this.useButton = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.skinItem && (this.skinItem.destroy(), this.skinItem = null)
        }, e.clsName = "LimitTimeSkinDescView", e
      }(Qg),
      am = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.unlockIcon = null, e.nameText = null, e.bg = Hh(560, 640), e.addChild(e.bg), e.skinItem = new om(!1), e.skinItem.x = (e.bg.width - e.skinItem.width) / 2, e.skinItem.y = 40, e.addChild(e.skinItem), e.nameText = Xh("", "#FFFFFF", !1, "left", 32), e.nameText.x = (e.bg.width - e.nameText.width) / 2, e.nameText.y = e.skinItem.y + e.skinItem.height + 10, e.addChild(e.nameText);
          var i = jh("title_bg.png");
          i.anchor.set(.5, .5), i.x = e.bg.width / 2, i.y = e.nameText.y + 80, e.addChild(i);
          var n = Xh("", "#FFFFFF", !0);
          n.anchor.set(.5, .5), n.x = e.bg.width / 2, n.y = i.y, e.addChild(n);
          var o = new PIXI.Graphics;
          return o.beginFill(1579554), o.drawRect(0, 0, e.bg.width - 60, 180), o.endFill(), o.x = 30, o.y = i.y + 50, e.addChild(o), e.progressBar = new tm("progress_bg2.png", "progress_green_thumb.png"), e.progressBar.x = (e.bg.width - e.progressBar.width) / 2, e.progressBar.y = o.y + 20, e.addSkin(e.progressBar), e.unlockIcon = jh("icon_unlock.png"), e.unlockIcon.anchor.set(.5, .5), e.unlockIcon.x = e.bg.width - 90, e.unlockIcon.y = o.y + 100, e.unlockIcon.visible = !1, e.addChild(e.unlockIcon), e.descText = Yh("", "#FFFFFF", 360, 28, !1), e.descText.x = 40, e.descText.y = o.y + 80, e.addChild(e.descText), e.addCloseButton(), e.okButton = new nm("button_blue.png", "", !1), e.okButton.on(Tu, (function() {
            e.close()
          }), e), e.useButton = new nm("button_orange.png", "", !1), e.useButton.on(Tu, e.onUse, e), e.useButton.visible = !0, e.shareButton = new nm("button_orange.png", "", !1), e.shareButton.on(Tu, e.onShare, e), e.shareButton.visible = !0, e.buttonGroup = new im(20), e.buttonGroup.addButton(e.okButton), e.buttonGroup.addButton(e.shareButton), e.buttonGroup.addButton(e.useButton), e.addChild(e.buttonGroup), e.buttonGroup.x = (e.bg.width - e.buttonGroup.width) / 2, e.buttonGroup.y = o.y + o.height + 30, e
        }
        return i(e, t), e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.skin = e, this.skinItem.data = e;
          var i = oh.getItem(e.id);
          this.nameText.text = i.name, this.nameText.x = (this.bg.width - this.nameText.width) / 2;
          var n = sh.getTaskByItemId(e.id);
          if (n) {
            this.progressBar.visible = !0;
            var o = uC.taskModel.getTask(n.id),
              r = (o ? o.progress : 0) / n.value;
            if (r > 0 && r < .01 && (r = .01), o && o.isReward && (r = 1), this.progressBar.progress = r, n.showNeed && !uC.taskModel.isTaskRewarded(n.showNeed)) {
              var s = sh.getTask(n.showNeed),
                a = oh.getItem(s.item);
              this.descText.text = "[".concat(a.name, "]")
            } else n.hide ? this.descText.text = "" : this.descText.text = n.des
          } else this.progressBar.visible = !1, this.descText.text = i.desc && 0 === i.hide ? i.desc : "";
          var h = uC.items.get(this.skin.id);
          if (this.shareButton.visible = n && !n.hide && !!h, this.useButton.visible = !1, h) {
            var c = oh.getItem(this.skin.id);
            switch (c.skinType) {
              case 1:
                this.useButton.visible = uC.paint !== c.id;
                break;
              case 2:
                this.useButton.visible = uC.trail !== c.id;
                break;
              case 0:
                this.useButton.visible = uC.skin !== c.id
            }
            this.unlockIcon.visible = !0
          } else this.unlockIcon.visible = !1;
          this.buttonGroup.reLayout(), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2
        }, e.prototype.onUse = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, eC(this.skin.id)];
                case 1:
                  return t.sent(), this.close(), [2]
              }
            }))
          }))
        }, e.prototype.onShare = function() {
          var t = this;
          NI("".concat(this.skin.id, "")), $c(this.skin.id).then((function(e) {
            Uc(e) && jI("".concat(t.skin.id, ""))
          }))
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), this.okButton.resetScale(), this.useButton.resetScale(), this.shareButton.resetScale()
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.okButton && (this.okButton.destroy(), this.okButton = null), this.useButton && (this.useButton.destroy(), this.useButton = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.skinItem && (this.skinItem.destroy(), this.skinItem = null), this.progressBar && (this.progressBar.destroy(), this.progressBar = null)
        }, e.clsName = "SkinDescView", e
      }(Qg),
      hm = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !0, e.activeTab = jh("skin_tab_active.png"), e.addChild(e.activeTab), e.unactiveTab = jh("skin_tab_unactive.png"), e.unactiveTab.y = e.activeTab.height - e.unactiveTab.height, e.addChild(e.unactiveTab), e.redPoint = jh("redpoint2.png"), e.redPoint.x = e.unactiveTab.x + e.unactiveTab.width - e.redPoint.width, e.redPoint.y = e.unactiveTab.y, e.addChild(e.redPoint), e.title = Xh("", "#ffffff", !1, "left", 26), e.title.x = e.activeTab.x + (e.activeTab.width - e.title.width) / 2, e.title.y = e.activeTab.y + (e.activeTab.height - e.title.height) / 2, e.addChild(e.title), e.selected = !1, e
        }
        return i(e, t), e.prototype.setTitle = function(t) {
          this.title.text = t, this.title.x = this.activeTab.x + (this.activeTab.width - this.title.width) / 2
        }, Object.defineProperty(e.prototype, "selected", {
          get: function() {
            return this.activeTab.visible
          },
          set: function(t) {
            this.activeTab.visible = t, this.unactiveTab.visible = !t, t ? (this.title.style.fill = "#813808", this.title.y = this.activeTab.y + (this.activeTab.height - this.title.height) / 2, this.redPoint.visible = !1) : (this.title.style.fill = "#bcbfcd", this.title.y = this.unactiveTab.y + (this.unactiveTab.height - this.title.height) / 2)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "redType", {
          set: function(t) {
            0 !== t ? (this.redPoint.visible = !0, this.redPoint.texture = Vh(1 === t ? "redpoint2.png" : "greenpoint.png")) : this.redPoint.visible = !1
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(Fl),
      cm = function(t) {
        function e() {
          var e = t.call(this, 2, !1) || this;
          e.unlockIcon = null, e.nameText = null;
          var i = e.background = Hh(560, 640);
          e.addChild(i), e.skinItem = new om(!1), e.skinItem.x = (i.width - e.skinItem.width) / 2, e.skinItem.y = 40, e.addChild(e.skinItem), e.nameText = Xh("", "#FFFFFF", !1, "left", 32), e.nameText.x = (i.width - e.nameText.width) / 2, e.nameText.y = e.skinItem.y + e.skinItem.height + 10, e.addChild(e.nameText);
          var n = jh("title_bg.png");
          n.anchor.set(.5, .5), n.x = i.width / 2, n.y = e.nameText.y + 80, e.addChild(n);
          var o = Xh("", "#FFFFFF", !0);
          o.anchor.set(.5, .5), o.x = i.width / 2, o.y = n.y, e.addChild(o);
          var r = new PIXI.Graphics;
          return r.beginFill(1579554), r.drawRect(0, 0, i.width - 60, 180), r.endFill(), r.x = 30, r.y = n.y + 50, e.addChild(r), e.unlockIcon = jh("icon_unlock.png"), e.unlockIcon.anchor.set(.5, .5), e.unlockIcon.x = i.width - 90, e.unlockIcon.y = r.y + 100, e.unlockIcon.visible = !1, e.addChild(e.unlockIcon), e.descText = Yh("", "#FFFFFF", 360, 28, !1), e.descText.x = 40, e.descText.y = r.y + 80, e.addChild(e.descText), e.addCloseButton(), e.okButton = new nm("button_blue.png", "", !1), e.okButton.on(Tu, (function() {
            e.close()
          }), e), e.useButton = new nm("button_orange.png", "", !1), e.useButton.on(Tu, e.onUse, e), e.useButton.visible = !0, e.shareButton = new nm("button_orange.png", "", !1), e.shareButton.on(Tu, e.onShare, e), e.shareButton.visible = !0, e.buttonGroup = new im(20), e.buttonGroup.addButton(e.okButton), e.buttonGroup.addButton(e.shareButton), e.buttonGroup.addButton(e.useButton), e.addChild(e.buttonGroup), e.buttonGroup.x = (i.width - e.buttonGroup.width) / 2, e.buttonGroup.y = r.y + r.height + 30, e.videoButton = new Ru("button_video_unlock.png", !0), e.videoButton.x = i.width / 2, e.videoButton.y = r.y + r.height + e.videoButton.height / 2 + 20, e.videoButton.on(Iu, e.onVideo, e), e.addChild(e.videoButton.skin), e
        }
        return i(e, t), e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.skinItem.data = e, this.itemInfo = oh.getItem(e.id), this.nameText.text = this.itemInfo.name, this.nameText.x = (this.background.width - this.nameText.width) / 2, this.refresh()
        }, e.prototype.refresh = function() {
          var t = uC.videoSkins.get(this.itemInfo.id);
          if (this.descText.text = "".concat(t ? t.count : 0, "/").concat(this.itemInfo.video, ""), uC.items.get(this.itemInfo.id)) {
            switch (this.videoButton.visible = !1, this.buttonGroup.visible = !0, this.shareButton.visible = !0, this.itemInfo.skinType) {
              case 1:
                this.useButton.visible = uC.paint !== this.itemInfo.id;
                break;
              case 2:
                this.useButton.visible = uC.trail !== this.itemInfo.id;
                break;
              case 0:
                this.useButton.visible = uC.skin !== this.itemInfo.id
            }
            this.unlockIcon.visible = !0, this.buttonGroup.reLayout(), this.buttonGroup.x = (this.background.width - this.buttonGroup.width) / 2
          } else this.videoButton.visible = !0, this.buttonGroup.visible = !1, this.unlockIcon.visible = !1
        }, e.prototype.onUse = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, eC(this.itemInfo.id)];
                case 1:
                  return t.sent(), this.close(), [2]
              }
            }))
          }))
        }, e.prototype.onShare = function() {
          var t = this;
          NI("".concat(this.itemInfo.id, "")), $c(this.itemInfo.id).then((function(e) {
            Uc(e) && jI("".concat(t.itemInfo.id, ""))
          }))
        }, e.prototype.onVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  if (!this.itemInfo) return [2];
                  if ((t = Date.now() - ws.lastSkinVideoTime) < 1e3 * $hostDef.skinVideoDuration) return [2, rc("".concat($hostDef.skinVideoDuration - Math.floor(t / 1e3), ""))];
                  o.label = 1;
                case 1:
                  return o.trys.push([1, , 3, 4]), [4, mu(7)];
                case 2:
                  return (e = o.sent()) === ve.cancel ? [2, gu("")] : e === ve.fail ? [2, rc(fu)] : [3, 4];
                case 3:
                  return this.isDisposed || (this.closeButton.visible = !0, this.videoButton && (this.videoButton.interactive = !0)), [7];
                case 4:
                  ! function(t, e) {
                    0;
                    X.logEvent("-".concat(Ps[t], "-").concat(e))
                  }(7, this.itemInfo.id), ws.lastSkinVideoTime = Date.now(), o.label = 5;
                case 5:
                  return o.trys.push([5, 7, , 8]), [4, tD({
                    skin: this.itemInfo.id
                  })];
                case 6:
                  return (i = o.sent()) && (uC.syncData(i.syncData), this.refresh(), n = uC.videoSkins.get(this.itemInfo.id).count, rc("".concat(n, "/").concat(this.itemInfo.video)), n >= this.itemInfo.video && this.close()), [3, 8];
                case 7:
                  return oc(o.sent()), [3, 8];
                case 8:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.okButton && (this.okButton.destroy(), this.okButton = null), this.useButton && (this.useButton.destroy(), this.useButton = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.skinItem && (this.skinItem.destroy(), this.skinItem = null)
        }, e.clsName = "VideoSkinDescView", e
      }(Qg),
      um = ["", "", "", ""],
      lm = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.curTab = -1, e.curTabButton = null, e.progressBar = null, e.tabButtons = [], e.skinItems = [], e.bg = $h(620, 960), e.addChild(e.bg), e.addTitle(""), e.goldGroup = new PIXI.Container;
          var i = jh("bg_gold.png");
          e.goldGroup.addChild(i);
          var n = jh("gold.png");
          n.x = i.x + 5, n.y = i.y + (i.height - n.height) / 2, e.goldGroup.addChild(n), e.goldLabel = Xh("1000", "#ffff00", !0, "left", 36), e.goldLabel.x = n.x + n.width + 5, e.goldLabel.y = n.y + (n.height - e.goldLabel.height) / 2, e.goldGroup.addChild(e.goldLabel), e.goldGroup.x = 20, e.goldGroup.y = 100, e.addChild(e.goldGroup), e.progressBar = new tm("progress_bg.png", "progress_thumb.png"), e.progressBar.x = e.bg.width - 320, e.progressBar.y = e.goldGroup.y + (e.goldGroup.height - e.progressBar.height) / 2, e.addSkin(e.progressBar), e.countLabel = Xh("", "#ffffff", !1, "left", 32), e.countLabel.x = e.progressBar.x + e.progressBar.width + 20, e.countLabel.y = e.progressBar.y + (e.progressBar.height - e.countLabel.height) / 2, e.addChild(e.countLabel);
          for (var o = 0; o < um.length; o++) {
            var r = um[o],
              s = new hm;
            s.setTitle(r), s.x = 20 + (s.width + 10) * o, s.y = 180, e.addChild(s), e.tabButtons.push(s), s.on(Tu, e.onClickTab, e)
          }
          var a = jh("skin_tab_line.png");
          a.y = 235, a.x = 10, e.addChild(a), e.addCloseButton(), e.scroller = new Wu(560, e.bg.height - 270), e.scroller.y = 250, e.scroller.x = 30;
          var h = oh.getSkins();
          e.gridContainer = new Zg(560, 4, 10);
          for (o = 0; o < h.length; o++) {
            var c = h[o],
              u = new om(!0);
            u.data = c, e.gridContainer.addItem(u), u.on(Iu, e.onTapItem, e), e.skinItems.push(u)
          }
          e.scroller.setContent(e.gridContainer), e.addChild(e.scroller), e.addToDestroy = mr((function() {
            e.goldLabel.text = uC.gold + "", e.refreshSkinList()
          }));
          var l = -1,
            d = -1,
            p = -1,
            f = -1;
          e.addToDestroy = mr((function() {
            if (l !== uC.skin || d !== uC.paint || p !== uC.trail || f !== uC.usedSkins.length) {
              l = uC.skin, d = uC.paint, p = uC.trail, f = uC.usedSkins.length;
              for (var t = 0; t < e.skinItems.length; t++) {
                e.skinItems[t].refresh()
              }
            }
          }));
          var g = -1;
          return e.addToDestroy = mr((function() {
            g !== uC.skinCount && (g = uC.skinCount, e.refreshSkinList())
          })), e
        }
        return i(e, t), e.prototype.onClickTab = function(t) {
          var e = t.currentTarget,
            i = this.tabButtons.indexOf(e);
          i >= 0 && this.setSelectedTab(i)
        }, e.prototype.setSelectedTab = function(t) {
          t !== this.curTab && (this.curTabButton && (this.curTabButton.selected = !1), this.curTab = t, this.curTabButton = this.tabButtons[t], this.curTabButton && (this.curTabButton.selected = !0), this.refreshSkinList(), this.scroller.scrollV = 0, this.refreshTabPoints())
        }, e.prototype.refreshTabPoints = function() {
          for (var t = 0; t < 4; t++)
            if (t !== this.curTab) {
              var e = 0;
              switch (t) {
                case 0:
                  for (var i = oh.getNormalSkinsByType(!1), n = 0; n < i.length; n++) {
                    var o = i[n];
                    if ((h = uC.items.get(o.id)) && (h && uC.usedSkins.indexOf(o.id) < 0)) {
                      e = 1;
                      break
                    }
                  }
                  break;
                case 1:
                  var r = oh.getNormalSkinsByType(!0);
                  for (n = 0; n < r.length; n++) {
                    o = r[n];
                    if (!(h = uC.items.get(o.id)) && o.gold > 0 && o.gold <= uC.gold) {
                      e = 2;
                      break
                    }
                    if (h && uC.usedSkins.indexOf(o.id) < 0) {
                      e = 1;
                      break
                    }
                  }
                  break;
                case 2:
                  var s = oh.getPaintSkins();
                  for (n = 0; n < s.length; n++) {
                    o = s[n];
                    if ((h = uC.items.get(o.id)) && uC.usedSkins.indexOf(o.id) < 0) {
                      e = 1;
                      break
                    }
                  }
                  break;
                case 3:
                  var a = oh.getTrailSkins();
                  for (n = 0; n < a.length; n++) {
                    var h;
                    o = a[n];
                    if ((h = uC.items.get(o.id)) && uC.usedSkins.indexOf(o.id) < 0) {
                      e = 1;
                      break
                    }
                  }
              }
              this.tabButtons[t].redType = e
            }
        }, e.prototype.onGoldChange = function() {
          this.goldLabel.text = uC.gold + "", this.refreshSkinList()
        }, e.prototype.refreshSkinList = function() {
          if (!(this.curTab < 0)) {
            var t, e = 0,
              i = 0,
              n = 0;
            switch (this.curTab) {
              case 0:
                t = oh.getNormalSkinsByType(!1);
                break;
              case 1:
                t = oh.getNormalSkinsByType(!0);
                break;
              case 2:
                t = oh.getPaintSkins();
                break;
              case 3:
                t = oh.getTrailSkins()
            }
            for (var o = 0; o < t.length; o++) {
              var r = t[o],
                s = uC.items.get(r.id);
              if ((!r.hide || s) && ($hostDef.showLimitSkin || !(r.minuteLimit > 0))) {
                var a = this.skinItems[i];
                a.data = r, a.visible = !0, a.isActive && e++, i++, n++
              }
            }
            for (o = i; o < this.skinItems.length; o++) this.skinItems[o].data = null;
            this.gridContainer.reLayout(), this.scroller.updateMaxScrollV(), this.countLabel.text = "".concat(e, "/").concat(n), this.progressBar.progress = e / n, this.refreshTabPoints()
          }
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onTapItem = function(t) {
          var e = t.currentTarget;
          e && e.data && this.tapItem(e.data.id)
        }, e.prototype.tapItem = function(t) {
          var e = oh.getItem(t),
            i = uC.items.get(t);
          i && i.expire > 0 ? tc.showPanel(sm, e) : 0 !== e.video ? tc.showPanel(cm, e) : 0 !== e.gold ? tc.showPanel(rm, e) : tc.showPanel(am, e)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.y < 50 && (this.y = 50), this.scroller.interactive = !0, e && e.hasOwnProperty("tab") ? (this.setSelectedTab(e.tab), e.skinId && this.tapItem(e.skinId)) : this.setSelectedTab(0)
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this)
        }, e.prototype.onDestroy = function() {
          if (this.skinItems) {
            for (var e = 0; e < this.skinItems.length; e++) this.skinItems[e].off(Iu, this.onTapItem, this);
            this.skinItems.length = 0, this.skinItems = null
          }
          if (this.tabButtons) {
            for (e = 0; e < this.tabButtons.length; e++) this.tabButtons[e].off(Tu, this.onClickTab, this);
            this.tabButtons.length = 0, this.tabButtons = null
          }
          this.progressBar && (this.progressBar.destroy(), this.progressBar = null), this.scroller && (this.scroller.destroy(), this.scroller = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "SkinView", e
      }(Qg),
      dm = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.bg = $h(556, 597), e.addChild(e.bg), e.addTitle("");
          var i = new PIXI.Container,
            n = Xh("", 9092672, !0, "left", 36);
          i.addChild(n);
          var o = Xh("".concat(uC.bestScore), uC.bestScore >= $hostDef.challengeOpenScore ? 16777215 : 16711680, !0, "left", 36);
          o.x = n.x + n.width, i.addChild(o);
          var r = Xh("/".concat($hostDef.challengeOpenScore, ""), 9092672, !0, "left", 36);
          r.x = o.x + o.width, i.addChild(r), i.y = 220, i.x = (e.bg.width - i.width) / 2;
          var s = bw(),
            a = new PIXI.Container,
            h = Xh("", 9092672, !0, "left", 36);
          a.addChild(h);
          var c = Xh("".concat(s), s >= $hostDef.challengeOpenVideoCount ? 16777215 : 16711680, !0, "left", 36);
          c.x = h.x + h.width, a.addChild(c);
          var u = Xh("/".concat($hostDef.challengeOpenVideoCount, ""), 9092672, !0, "left", 36);
          return u.x = c.x + c.width, a.addChild(u), a.y = 300, a.x = (e.bg.width - a.width) / 2, e.addChild(i), e.addChild(a), e.addCloseButton(), e.videoButton = new Ru("button_video_skin.png"), e.videoButton.x = e.bg.width / 2, e.videoButton.y = 480, e.videoButton.on(Tu, e.onVideo, e), e.addSkin(e.videoButton), e
        }
        return i(e, t), e.prototype.onVideo = function() {
          this.close();
          for (var t = [], e = oh.getSkins(), i = 0; i < e.length; i++) {
            var n = e[i];
            if (!uC.hasSkin(n.id) && 0 !== n.video) {
              var o = uC.videoSkins.get(n.id);
              t.push({
                skinId: n.id,
                percent: (o ? o.count : 0) / n.video
              })
            }
          }
          if (t.length > 1 && t.sort((function(t, e) {
              return e.percent - t.percent
            })), t.length > 0) {
            n = t[0].skinId;
            var r = oh.getItem(n),
              s = 0;
            switch (r.skinType) {
              case 1:
                s = 2;
                break;
              case 2:
                s = 3;
                break;
              default:
                s = 0 !== r.gold ? 1 : 0
            }
            tc.showPanel(lm, {
              tab: s,
              skinId: n
            })
          } else tc.showPanel(lm)
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.videoButton && (this.videoButton.destroy(), this.videoButton = null)
        }, e.clsName = "ChallengeUnlockView", e
      }(Qg),
      pm = 864e5;

    function fm(t) {
      var e, i, n, o = new Date(t),
        r = (e = Qe(), i = e.getDay(), n = e.getTime() - (i - 1) * pm, new Date(n)),
        s = function() {
          var t = Qe(),
            e = t.getDay(),
            i = t.getTime() + (7 - e) * pm;
          return new Date(i)
        }(),
        a = s.getTime() + pm;
      return o.getTime() >= r.getTime() && o.getTime() < a
    }
    var gm = function(t) {
      function e() {
        var e = t.call(this) || this;
        return e.container = new PIXI.Container, e.container.interactive = !0, e.bg = jh("team_icon.png"), e.bg.anchor.set(.5, .5), e.container.addChild(e.bg), e.tip = jh("team_task_tip.png"), e.tip.anchor.set(.5, .5), e.tip.y = -e.bg.height / 2, e.container.addChild(e.tip), e.container.on(Tu, e.onTapDown, e), e.container.on(ku, e.onTapUp, e), e.container.on(Cu, e.onTapUp, e), e.container.on(_u, e.onTapUp, e), e.container.on(Bu, e.onTapUp, e), e.addToDestroy = mr((function() {
          e.tip.visible = mx.hasPersonTaskNoReceived
        })), e
      }
      return i(e, t), e.prototype.onTapUp = function() {
        this._destroyed || this.container.scale.set(1, 1)
      }, e.prototype.onTapDown = function() {
        this._destroyed || this.container.scale.set(.9, .9)
      }, Object.defineProperty(e.prototype, "skin", {
        get: function() {
          return this.container
        },
        enumerable: !1,
        configurable: !0
      }), e.prototype.destroy = function() {
        t.prototype.destroy.call(this)
      }, e
    }(Lu);
    var mm, ym = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this,
            e = jh("title_adcardshare.png");
          e.y = 0, e.x = (645 - e.width) / 2, e.interactive = !0, this.addChild(e), this.bg = Hh(645, 720), this.bg.interactive = !0, this.bg.y = e.height + 40, this.addChild(this.bg), this.addCloseButton();
          var i = jh("bg_dailyreward_item.png");
          i.x = (this.bg.width - i.width) / 2, i.y = this.bg.y + 60, this.addChild(i), this.itemBg = i, this.skinIcon = jh("empty.png"), this.skinIcon.interactive = !1, this.skinIcon.width = 120, this.skinIcon.height = 120, this.skinIcon.anchor.set(.5, .5), this.skinIcon.x = i.width / 2, this.skinIcon.y = 140, this.itemBg.addChild(this.skinIcon), this.typeText = Xh("", "#FFFFFF", !0, "left", 28), this.typeText.x = i.x + 10, this.typeText.y = i.y + 50, this.typeText.rotation = -45 * Math.PI / 180, this.addChild(this.typeText), this.nameText = Xh("", "#FFFFFF", !0, "left", 28), this.nameText.x = (this.bg.width - this.nameText.width) / 2, this.nameText.y = i.y + 260, this.addChild(this.nameText), this.progressText = Xh("0/5", 16764232, !0, "left", 32), this.progressText.x = (this.bg.width - this.progressText.width) / 2, this.progressText.y = this.nameText.y + 50, this.addChild(this.progressText), this.videoButton = new Ru("button_adcardlist_video.png", !0), this.videoButton.on(Iu, this.onVideo, this), this.addChild(this.videoButton.skin), this.videoButton.y = this.progressText.y + 230, this.videoButton.x = this.bg.width / 2, this.useButton = new Ru("button_adcard_useskin.png", !0), this.useButton.on(Tu, this.onUse, this), this.addChild(this.useButton.skin), this.useButton.y = this.videoButton.y, this.useButton.x = this.bg.width / 2, this.usedButton = new Ru("button_adcard_inUse.png", !0), this.addChild(this.usedButton.skin), this.usedButton.y = this.videoButton.y, this.usedButton.x = this.bg.width / 2;
          var n = uC.skin,
            o = uC.paint,
            r = uC.trail;
          this.addToDestroy = mr((function() {
            n === uC.skin && o === uC.paint && r === uC.trail || (n = uC.skin, o = uC.paint, r = uC.trail, t.updateUI())
          }))
        }, e.prototype.setDailyGood = function(t) {
          if (t) {
            this.type = 1, this.curGoodId = t.id, this.visible = !0;
            var i = fh.getItem(t.id),
              n = i.cost;
            if (i.skin) {
              this.skinId = i.skin, this.nameText.text = i.name, this.skinIcon.texture = Vh("item".concat(i.skin, ".png"));
              var o = oh.getItem(this.skinId);
              o ? (n = o.video, 0 == o.skinType ? this.typeText.text = "" : 1 == o.skinType ? this.typeText.text = "" : 2 == o.skinType && (this.typeText.text = "")) : n = 1e4
            } else i.gold ? (this.typeText.text = "", this.skinIcon.texture = Vh("big_gold.png"), this.nameText.text = i.name + "x" + i.gold) : i.ticket && (this.typeText.text = "", this.skinIcon.texture = Vh("ticket_icon.png"), this.nameText.text = i.name + "x" + i.ticket);
            if (this.nameText.x = (this.bg.width - this.nameText.width) / 2, t.received ? (this.progressText.text = "", this.videoButton.visible = !1) : (this.progressText.text = "".concat(t.process, "/").concat(n), this.videoButton.visible = !0), this.progressText.x = (this.bg.width - this.progressText.width) / 2, i.skin) uC.hasSkin(i.skin) ? (this.videoButton.visible = !1, this.usedButton.visible = e.isUsingSkin(i.skin), this.useButton.visible = !this.usedButton.visible) : this.useButton.visible = this.usedButton.visible = !1;
            else this.useButton.visible = this.usedButton.visible = !1
          } else this.visible = !1
        }, e.isUsingSkin = function(t) {
          var e = oh.getItem(t);
          return !!e && (0 == e.skinType ? uC.skin === t : 1 == e.skinType ? uC.paint === t : 2 == e.skinType && uC.trail === t)
        }, e.prototype.onVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  if ((t = Date.now() - ws.lastSkinVideoTime) < 1e3 * $hostDef.skinVideoDuration) return [2, rc("".concat($hostDef.skinVideoDuration - Math.floor(t / 1e3), ""))];
                  WI("", {
                    id: this.curGoodId
                  }), i.label = 1;
                case 1:
                  return i.trys.push([1, , 3, 4]), [4, mu(9)];
                case 2:
                  return (e = i.sent()) === ve.cancel ? [2, gu("")] : e === ve.fail ? [2, rc(fu)] : [3, 4];
                case 3:
                  return this.isDisposed || this.enableClose(), [7];
                case 4:
                  return ws.lastSkinVideoTime = Date.now(), rc("+1"), this.onVideoSuccess(), [2]
              }
            }))
          }))
        }, e.prototype.onVideoSuccess = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  WI("", {
                    id: this.curGoodId
                  }), e.label = 1;
                case 1:
                  return e.trys.push([1, 3, , 4]), [4, VP({
                    type: this.type
                  })];
                case 2:
                  return (t = e.sent()) && (uC.syncData(t.syncData), t.gift && WI("", {
                    id: this.curGoodId
                  }), this.updateUI()), [3, 4];
                case 3:
                  return oc(e.sent()), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype.updateUI = function() {
          return r(this, void 0, void 0, (function() {
            var t = this;
            return s(this, (function(e) {
              return this.isDisposed || function() {
                return r(this, void 0, void 0, (function() {
                  var t, e;
                  return s(this, (function(i) {
                    switch (i.label) {
                      case 0:
                        return i.trys.push([0, 2, , 3]), [4, jP({})];
                      case 1:
                        return (t = i.sent()) ? (DEVELOP && console.log("get_daily_goods:", JSON.stringify(t)), [2, t.goods]) : [3, 3];
                      case 2:
                        return e = i.sent(), DEVELOP && console.log("get_daily_goods err:", JSON.stringify(e)), [3, 3];
                      case 3:
                        return [2, null]
                    }
                  }))
                }))
              }().then((function(e) {
                t.isDisposed || (e && (WI("", {
                  id: e.good1.id
                }), t.setDailyGood(e.good1)), t.y = Mu.top + (De - t.height - Mu.bottom) / 2 - 80, t.visible = !0)
              })), [2]
            }))
          }))
        }, e.prototype.onUse = function() {
          var t = this;
          eC(this.skinId).then((function() {
            t.updateUI()
          }))
        }, e.prototype.disableClose = function() {
          this.closeButton.visible = !1, this.canTapMaskClose = !1
        }, e.prototype.enableClose = function() {
          this.closeButton.visible = !0, this.canTapMaskClose = !0
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.y = Mu.top + (De - this.height - Mu.bottom) / 2 - 80, this.visible = !1, this.updateUI()
        }, e.prototype.onDestroy = function() {
          this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.usedButton && (this.usedButton.destroy(), this.usedButton = null), this.useButton && (this.useButton.destroy(), this.useButton = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "DailyRewardView", e
      }(Qg),
      vm = function() {
        function t(t) {
          this.width = 0, this.height = 0, this.frequency = 1, this.frame = 0, this.sprite = t
        }
        return t.prototype.update = function() {
          ++this.frame >= this.frequency && (this.frame = 0, this.updateTexture())
        }, t.prototype.updateTexture = function() {
          this.sprite && this.sprite.texture && this.sprite.texture.update()
        }, t.prototype.getMessage = function(t) {}, t.prototype.save = function() {
          this.sprite && (this.sprite.visible = !1)
        }, t.prototype.restore = function() {
          this.sprite && (this.sprite.visible = !0)
        }, t.prototype.destroy = function() {
          this.sprite = null
        }, t
      }(),
      bm = function(t) {
        function e(e, i) {
          var n = t.call(this, e) || this;
          return n.width = 476, n.height = 98, n.frequency = 10, n.frame = 0, n.oldScore = i, n
        }
        return i(e, t), e.prototype.update = function() {
          ++this.frame >= this.frequency && (this.frame = 0, this.frequency += 10, this.updateTexture())
        }, e.prototype.restore = function() {
          t.prototype.restore.call(this), this.frame = this.frequency - 3
        }, e.prototype.getMessage = function(t) {
          return void 0 === t && (t = !1), {
            type: lc,
            oldScore: this.oldScore,
            refresh: !t
          }
        }, e
      }(vm),
      wm = function(t) {
        function e() {
          var e = t.call(this, !0, 2) || this;
          return e.maxScoreLayer = null, e.canTapMaskClose = !0, e.createMaxScoreUI(), e
        }
        return i(e, t), e.prototype.createMaxScoreUI = function() {
          this.maxScoreLayer = new PIXI.Container, this.addChild(this.maxScoreLayer);
          var t = Hh(552, 790, !1);
          t.x = 0, t.y = 0, this.maxBg = t, this.maxScoreLayer.addChild(t);
          var e = jh("new.png");
          e.x = (t.width - e.width) / 2, e.y = 92, this.maxScoreLayer.addChild(e);
          var i = jh("title_bg.png");
          i.x = (t.width - i.width) / 2, i.y = 162, this.maxScoreLayer.addChild(i);
          var n = Xh("", "#FFFFFF", !0);
          n.anchor.set(.5, 0), n.x = t.width / 2, n.y = 170, this.maxScoreLayer.addChild(n), this.maxScoreText = new PIXI.extras.BitmapText("0", {
            font: "40px DigitalSerial",
            align: "center",
            tint: 16777215
          }), this.maxScoreText.scale.x = 2, this.maxScoreText.scale.y = 2, this.maxScoreText.x = (t.width - 2 * this.maxScoreText.textWidth) / 2, this.maxScoreText.y = 240, this.maxScoreLayer.addChild(this.maxScoreText);
          var o = Wh("dlc/ui/new_score_particle.png");
          o.width = 369, o.height = 180, o.anchor.set(.5, 0), o.x = t.width / 2, o.y = 202, this.maxScoreLayer.addChild(o), this.share2Button = new Ru("button_share.png"), this.share2Button.x = t.width / 2, this.share2Button.y = 480, this.share2Button.on(Tu, this._onShare, this), this.addSkinTo(this.share2Button, this.maxScoreLayer), this.surpassRankSprite = new PIXI.Sprite(Cc), this.surpassRankSprite.x = 30, this.surpassRankSprite.y = this.share2Button.y + 120, this.surpassRankSprite.visible = kc, this.maxScoreLayer.addChild(this.surpassRankSprite), this.closeButton = new Qu, this.closeButton.x = t.x + t.width - 10, this.closeButton.y = t.y, this.closeButton.on(Tu, this.onCloseMax, this), this.addSkinTo(this.closeButton, this.maxScoreLayer)
        }, e.prototype._onShare = function() {
          Hc(this.maxScoreText.text)
        }, e.prototype.onCloseMax = function() {
          this.close()
        }, e.prototype.onShow = function(t) {
          this.x = (Pe - this.maxBg.width) / 2, this.y = (De - this.maxBg.height) / 2, this.maxScoreText.text = t + "", this.maxScoreText.x = (this.maxBg.width - 2 * this.maxScoreText.textWidth) / 2, this._openData = new bm(this.surpassRankSprite, t), Fc(this._openData)
        }, e.prototype.onHide = function() {
          this._openData && (Ec(this._openData), this._openData = null)
        }, e.prototype.onDestroy = function() {
          this.closeButton && (this.closeButton.destroy(), this.closeButton = null), this.share2Button && (this.share2Button.destroy(), this.share2Button = null)
        }, e.clsName = "HighScoreView", e
      }(Eu),
      xm = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = !$hostDef.censor && $hostDef.shareFriendGift && !fm(uC.lastShareFriendTime);
          this.bg = Wh("dlc/ui/share/bg_sharefriend".concat(t ? 1 : 2, ".png")), this.bg.width = 557, this.bg.height = t ? 597 : 348, this.bg.interactive = !0, this.addChild(this.bg), this.addCloseButton(), "function" == typeof wx.onShareTimeline && wx.onShareTimeline((function() {
            return Yc()
          }))
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), UI("")
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this)
        }, e.clsName = "ShareFriendView", e
      }(Qg),
      Tm = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.bg = $h(556, 597), e.addChild(e.bg), e.addTitle("");
          var i = new PIXI.Container,
            n = Xh("", 9092672, !0, "left", 36);
          i.addChild(n);
          var o = Xh("".concat(uC.bestScore), uC.bestScore >= 500 ? 16777215 : 16711680, !0, "left", 36);
          o.x = n.x + n.width, i.addChild(o);
          var r = Xh("/".concat(500, ""), 9092672, !0, "left", 36);
          r.x = o.x + o.width, i.addChild(r), i.y = 220, i.x = (e.bg.width - i.width) / 2;
          var s = Am(),
            a = new PIXI.Container,
            h = Xh("", 9092672, !0, "left", 36);
          a.addChild(h);
          var c = Xh("".concat(s), s >= Gm ? 16777215 : 16711680, !0, "left", 36);
          c.x = h.x + h.width, a.addChild(c);
          var u = Xh("/20", 9092672, !0, "left", 36);
          return u.x = c.x + c.width, a.addChild(u), a.y = 300, a.x = (e.bg.width - a.width) / 2, e.addChild(i), e.addChild(a), e.addCloseButton(), e.videoButton = new Ru("button_video_skin.png"), e.videoButton.x = e.bg.width / 2, e.videoButton.y = 480, e.videoButton.on(Tu, e.onVideo, e), e.addSkin(e.videoButton), e
        }
        return i(e, t), e.prototype.onVideo = function() {
          this.close();
          for (var t = [], e = oh.getSkins(), i = 0; i < e.length; i++) {
            var n = e[i];
            if (!uC.hasSkin(n.id) && 0 !== n.video) {
              var o = uC.videoSkins.get(n.id);
              t.push({
                skinId: n.id,
                percent: (o ? o.count : 0) / n.video
              })
            }
          }
          if (t.length > 1 && t.sort((function(t, e) {
              return e.percent - t.percent
            })), t.length > 0) {
            n = t[0].skinId;
            var r = oh.getItem(n),
              s = 0;
            switch (r.skinType) {
              case 1:
                s = 2;
                break;
              case 2:
                s = 3;
                break;
              default:
                s = 0 !== r.gold ? 1 : 0
            }
            tc.showPanel(lm, {
              tab: s,
              skinId: n
            })
          } else tc.showPanel(lm)
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.videoButton && (this.videoButton.destroy(), this.videoButton = null)
        }, e.clsName = "ExpertUnlockView", e
      }(Qg),
      km = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.bg = Wh("dlc/ui/expert_desc.png"), e.bg.width = 557, e.bg.height = 619, e.bg.interactive = !0, e.addChild(e.bg), e.addCloseButton(), e
        }
        return i(e, t), e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null)
        }, e.clsName = "ExpertDescView", e
      }(Qg),
      Im = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentHeight = 0, e.name = "ExpertList", e.y = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return -this.y
          },
          set: function(t) {
            this.y = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this._contentHeight
          },
          set: function(t) {
            this._contentHeight = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      Cm = {},
      _m = new WeakMap;

    function Bm(t, e) {
      if (e) {
        var i = Cm[e];
        if (!1 !== i) {
          if ("string" == typeof i) {
            if (function(t) {
                mm || (mm = wx.getFileSystemManager());
                try {
                  return mm.accessSync(t), !0
                } catch (t) {
                  return !1
                }
              }(i)) return void Sm(t, i);
            delete Cm[e]
          }! function(t, e) {
            _m.set(e, t), wx.downloadFile({
              url: t,
              success: function(i) {
                var n;
                _m.get(e) === t && ((null === (n = i.header) || void 0 === n ? void 0 : n["X-ErrNo"]) ? (Cm[t] = !1, Sm(e, "dlc/ui/default_avatar.png")) : (Cm[t] = i.tempFilePath, Sm(e, i.tempFilePath)))
              },
              fail: function() {}
            })
          }(e, t)
        } else Sm(t, "dlc/ui/default_avatar.png")
      } else Sm(t, "dlc/ui/default_avatar.png")
    }

    function Sm(t, e) {
      t.destroyed || (t.texture = PIXI.Texture.fromImage(e))
    }
    var Pm = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentHeight = 0, e.name = "ExpertRankList", e.y = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return -this.y
          },
          set: function(t) {
            this.y = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this._contentHeight
          },
          set: function(t) {
            this._contentHeight = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      Dm = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.myRank = -1, e.myScore = 0, e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = jh("expert_rank_bg.png");
          t.width = 580, t.height = 96, this.addChild(t), this.rankImage = new PIXI.Sprite, this.rankImage.x = 20, this.rankImage.y = 23, this.addChild(this.rankImage), this.rankText = Xh("", "#00FF00", !1, "left", 24), this.rankText.x = 42, this.rankText.y = (t.height - this.rankText.height) / 2, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 60, this.avatarImage.height = 60, this.avatarImage.x = 90, this.avatarImage.y = (t.height - this.avatarImage.height) / 2, this.addChild(this.avatarImage), this.nameText = Xh("", "#00FF00", !1, "left", 28), this.nameText.x = 165, this.nameText.y = 30, this.addChild(this.nameText), this.scoreText = Xh("100%", "#00FF00", !1, "left", 30), this.scoreText.x = 500, this.scoreText.y = 30, this.addChild(this.scoreText)
        }, e.prototype.setRankInfo = function(t, e, i) {
          this.mapId = t, this.myRank = e, this.myScore = i, this.refreshData()
        }, e.prototype.refreshData = function() {
          this.myRank > 0 && this.myRank <= 3 ? (this.rankImage.visible = !0, this.rankText.visible = !1, this.rankImage.texture = PIXI.Texture.fromImage("res/rank/rank".concat(this.myRank, ".png"))) : (this.rankImage.visible = !1, this.rankText.visible = !0, (uC.expertBestScores[this.mapId] || 0) < vh.getExpertMode(this.mapId).finishFloor ? this.rankText.text = "" : this.rankText.text = this.myRank < 0 ? "" : "".concat(Math.max(1, this.myRank)), this.rankText.x = 42 - this.rankText.width / 2);
          this.nameText.text = hn(uC.nick, 8), this.scoreText.text = this.myScore + "", Bm(this.avatarImage, uC.image)
        }, e.ITEM_HEIGHT = 110, e
      }(PIXI.Container),
      Mm = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.rank = 0, e.inited = !1, e.interactive = !0, e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = jh("expert_rank_bg.png");
          t.width = 580, t.height = 96, this.addChild(t), this.rankImage = new PIXI.Sprite, this.rankImage.x = 20, this.rankImage.y = 23, this.addChild(this.rankImage), this.rankText = Xh("", "#FFFFFF", !1, "left", 30), this.rankText.x = 40, this.rankText.y = 30, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 60, this.avatarImage.height = 60, this.avatarImage.x = 90, this.avatarImage.y = (t.height - this.avatarImage.height) / 2, this.addChild(this.avatarImage), this.nameText = Xh("", "#FFFFFF", !1, "left", 28), this.nameText.x = 165, this.nameText.y = 30, this.addChild(this.nameText), this.scoreText = Xh("100%", "#FFFFFF", !1, "left", 30), this.scoreText.x = 500, this.scoreText.y = 30, this.addChild(this.scoreText), this.inited = !0
        }, e.prototype.setRankInfo = function(t) {
          this.inited && this.rankInfo === t || (this.rankInfo = t, this.rank = this.rankInfo.rank, this.inited ? this.refreshUI() : this.visible = !1)
        }, e.prototype.refreshUI = function() {
          this.rankInfo.uid === uC.uid ? (this.rankText.style.fill = "#00FF00", this.nameText.style.fill = "#00FF00", this.scoreText.style.fill = "#00FF00") : (this.rankText.style.fill = "#FFFFFF", this.nameText.style.fill = "#FFFFFF", this.scoreText.style.fill = "#FFFFFF"), this.rank > 0 && this.rank <= 3 ? (this.rankImage.visible = !0, this.rankText.visible = !1, this.rankImage.texture = PIXI.Texture.fromImage("res/rank/rank".concat(this.rank, ".png"))) : (this.rankImage.visible = !1, this.rankText.visible = !0, this.rankText.text = "".concat(this.rank), this.rankText.x = 40 - this.rankText.width / 2), this.nameText.text = hn(this.rankInfo.nick, 10), this.scoreText.text = this.rankInfo.score, Bm(this.avatarImage, this.rankInfo.image)
        }, e.prototype.update = function(t, i) {
          var n = e.ITEM_REAL_HEIGHT,
            o = this.rank * n - t;
          o >= -n && o <= i + n ? (this.inited || (this.createContents(), this.refreshUI()), this.visible = !0) : this.visible = !1
        }, e.ITEM_HEIGHT = 96, e.ITEM_GAP = 10, e.ITEM_REAL_HEIGHT = e.ITEM_HEIGHT + e.ITEM_GAP, e
      }(PIXI.Container),
      Fm = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.rankItems = [], e.rankList = [], e.rankSet = new Set, e.selfRank = -1, e.selfScore = 0, e.rankLoading = !1, e.rankLoadError = !1, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = $h(635, 1036), this.addChild(this.bg);
          var e = this.leftTitleText = Xh("", 16777215, !0, "center", 32);
          e.x = 20, e.y = 30, this.addChild(e), this.scroller = new Wu(580, 800), this.scroller.x = 26, this.scroller.y = 100, this.expertRankList = new Pm, this.scroller.setContent(this.expertRankList), this.addChild(this.scroller), this.scroller.on(ku, this._onTouchEnd, this), this.scroller.on(Bu, this._onTouchEnd, this), this.scroller.on(Cu, this._onTouchEnd, this), this.scroller.interactive = !1, this.myRankItem = new Dm, this.myRankItem.x = 26, this.myRankItem.y = 920, this.addChild(this.myRankItem), this.addCloseButton();
          var i = function(e) {
            if (!t.isDisposed) {
              for (var n = t.scroller.scrollV, o = t.scroller.visibleHeight, r = t.rankItems.length - 1; r >= 0; r--) t.rankItems[r].update(n, o);
              requestAnimationFrame(i)
            }
          };
          requestAnimationFrame(i)
        }, e.prototype.updateRankListView = function() {
          var t = this.rankItems.slice();
          this.rankItems.length = 0;
          for (var e = this.rankList, i = 0, n = 0; n < e.length; n++) {
            var o = e[n],
              r = void 0;
            (r = t.length > 0 ? t.pop() : new Mm).setRankInfo(o), r.y = i, this.rankItems.push(r), r.parent !== this.expertRankList && this.expertRankList.addChild(r), n < e.length - 1 && (i += Mm.ITEM_HEIGHT + Mm.ITEM_GAP)
          }
          for (n = 0; n < t.length; n++) {
            (r = t[n]).destroy()
          }
          t.length = 0, this.expertRankList.contentHeight = i + Mm.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0, this.myRankItem.setRankInfo(this.mapId, this.selfRank, this.selfScore)
        }, e.prototype._onTouchEnd = function() {
          this.rankLoadError && (this.rankLoadError = !1, this.loadRankData(this.mapId).catch((function() {})))
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.mapId = e, this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.y < Mu.top + 30 && (this.y = Mu.top + 30), this.scroller.interactive = !1, this.scroller.scrollV = 0, this.leftTitleText.text = "-[".concat(vh.getExpertMode(e).name, "]"), this.loadRankData(e)
        }, e.prototype.hasRankData = function(t) {
          return this.rankSet.has(t.uid)
        }, e.prototype.loadRankData = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return this.rankLoading = !0, this.rankLoadError = !1, [4, jm(t, 10)];
                case 1:
                  if (e = o.sent(), this.isDisposed) return [2];
                  if (e) {
                    for (this.selfScore = uC.expertBestScores[t] || 0, i = 0; i < e.length; i++) n = e[i], this.hasRankData(n) || (this.rankList.push(n), this.rankSet.add(n.uid)), n.uid == uC.uid && (this.selfRank = n.rank);
                    this.rankList.sort((function(t, e) {
                      return t.rank - e.rank
                    })), this.rankList.length > 10 && (this.rankList.length = 10), this.updateRankListView()
                  } else this.rankLoadError = !0;
                  return this.rankLoading = !1, [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          for (var e = 0; e < this.rankItems.length; e++) {
            this.rankItems[e].destroy()
          }
          this.rankItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "ExpertRankView", e
      }(Qg),
      Em = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.mapId = 0, e.expertMode = null, e.inited = !1, e.rankLoaded = !1, e.myRank = -1, e.interactive = !0, e
        }
        return i(e, t), e.prototype.createImages = function() {
          var t = this.bg = jh("expert_list_bg.png");
          t.width = 580, t.height = 180, this.addChild(t), this.goImage = jh("expert_go.png"), this.goImage.x = 210, this.goImage.y = 25, this.addChild(this.goImage)
        }, e.prototype.createTexts = function() {
          this.nameText = Xh("", "#FFFF00", !0, "left", 40), this.nameText.x = 20, this.nameText.y = 25, this.addChild(this.nameText)
        }, e.prototype.setMapId = function(t, e) {
          this.index = t, this.mapId = e, this.expertMode = vh.getExpertMode(e), this.visible = !1
        }, e.prototype.loadRank = function() {
          var t = this;
          this.rankLoaded || (this.rankLoaded = !0, jm(this.mapId, 3).then((function(e) {
            t.rankData = e, t.myRank = -1;
            for (var i = 0; i < e.length; i++) e[i].uid == uC.uid && (t.myRank = i);
            t.updateRankView(), t.onRankLoaded()
          })))
        }, e.prototype.onRankLoaded = function() {}, e.prototype.updateRankView = function() {
          for (var t = 70, e = new PIXI.Container, i = Math.min(3, this.rankData.length), n = 0; n < i; n++) {
            var o = new PIXI.Sprite;
            o.width = t, o.height = t, o.x = 75 * n, o.y = 0, Bm(o, this.rankData[n].image), e.addChild(o)
          }
          var r = 75 * i,
            s = Xh(0 === i ? "" : "", "#FFFF00", !1, "left", 24);
          s.x = r, s.y = (t - s.height) / 2, e.addChild(s);
          var a = new Ru("button_expert_rank.png");
          a.x = s.x + s.width + a.width / 2 + 10, a.y = 35, a.on(Tu, this.onTapRank, this), e.addChild(a.skin), this.addChild(e), e.y = 95, e.x = this.bg.width - e.width - 20
        }, e.prototype.onTapRank = function() {
          tc.showPanel(Fm, this.mapId)
        }, e.prototype.refreshData = function() {
          this.expertMode ? this.nameText.text = this.expertMode.name : this.nameText.text = ""
        }, e.prototype.update = function(t, e) {
          var i = 190 * this.index - t;
          i >= -180 && i <= e + 180 ? (this.inited || (this.createImages(), this.createTexts(), this.inited = !0, this.refreshData(), this.loadRank()), this.visible = !0) : this.visible = !1
        }, e.prototype.cleanUp = function() {
          this.expertMode = null, this.rankBtn && (this.rankBtn.destroy(), this.rankBtn = null)
        }, e
      }(PIXI.Container),
      Lm = function(t) {
        function e() {
          return t.call(this) || this
        }
        return i(e, t), e.prototype.createImages = function() {
          t.prototype.createImages.call(this), this.expertMapFinish = jh("expert_map_finish.png"), this.expertMapFinish.x = 440, this.expertMapFinish.y = 25, this.addChild(this.expertMapFinish), this.progressLabel = jh("expert_map_progress.png"), this.progressLabel.x = 350, this.progressLabel.y = 35, this.addChild(this.progressLabel), this.rankIcon = new PIXI.Sprite, this.rankIcon.width = 97, this.rankIcon.height = 67, this.rankIcon.x = 330, this.rankIcon.y = 10, this.addChild(this.rankIcon)
        }, e.prototype.createTexts = function() {
          t.prototype.createTexts.call(this), this.progressText = Xh("0%", "#FFFF00", !0, "left", 36), this.progressText.x = 480, this.progressText.y = 25, this.addChild(this.progressText)
        }, e.prototype.setMapId = function(e, i) {
          t.prototype.setMapId.call(this, e, i)
        }, e.prototype.refreshData = function() {
          t.prototype.refreshData.call(this), this.updateProgress()
        }, e.prototype.onRankLoaded = function() {
          var t = uC.mapBestFloors[this.mapId] >= this.expertMode.finishFloor;
          this.rankIcon.visible = t, t && (this.myRank >= 0 && this.myRank <= 2 ? this.rankIcon.texture = Vh("rank_".concat(this.myRank + 1, ".png")) : this.rankIcon.texture = Vh("rank_none.png"))
        }, e.prototype.updateProgress = function() {
          if (this.expertMode) {
            var t = uC.mapBestFloors[this.mapId],
              e = t >= this.expertMode.finishFloor;
            if (this.expertMapFinish.visible = e, this.progressText.visible = !e, this.progressLabel.visible = !e, !e) {
              var i = 0;
              this.expertMode.finishFloor > 0 && t && (i = Math.floor(Math.min(100, 100 * t / this.expertMode.finishFloor))), this.progressText.text = i + "%"
            }
          } else this.expertMapFinish.visible = !1, this.progressText.visible = !0, this.progressLabel.visible = !0, this.progressText.text = "0%", this.rankIcon.visible = !1
        }, e
      }(Em),
      Om = function(t) {
        function e() {
          return t.call(this) || this
        }
        return i(e, t), e.prototype.createImages = function() {
          t.prototype.createImages.call(this), this.rankIcon = new PIXI.Sprite, this.rankIcon.width = 97, this.rankIcon.height = 67, this.rankIcon.x = 330, this.rankIcon.y = 10, this.addChild(this.rankIcon)
        }, e.prototype.onRankLoaded = function() {
          this.myRank >= 0 && this.myRank <= 2 ? this.rankIcon.texture = Vh("rank_".concat(this.myRank + 1, ".png")) : this.rankIcon.texture = Vh("rank_none.png")
        }, e
      }(Em),
      Rm = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.mapItems = [], e.mapIds = [], e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = $h(635, 1036), this.bg.interactive = !0, this.addChild(this.bg), this.ticket = jh("expert_ticket.png"), this.ticket.width = 71, this.ticket.height = 53, this.ticket.x = 39, this.ticket.y = 121, this.addChild(this.ticket), this.videoButton = new Ru("expert_video.png", !1), this.videoButton.x = 430, this.videoButton.y = 113, this.addSkin(this.videoButton), this.videoButton.on(Iu, this._onPlayVideo, this), this.tipButton = new Ru("expert_notice.png", !1), this.tipButton.x = 406, this.tipButton.y = 980, this.addSkin(this.tipButton), this.tipButton.on(Tu, (function() {
            tc.showPanel(km)
          }), this), this.addTitle(""), this.ticketText = Xh("1", "#FFFF00", !0, "left", 60), this.ticketText.x = 120, this.ticketText.y = 95, this.addChild(this.ticketText), this.scroller = new Wu(580, 760), this.scroller.x = 26, this.scroller.y = 204, this.expertList = new Im, this.initMapItems(), this.scroller.setContent(this.expertList), this.addChild(this.scroller), this.addCloseButton(), this.addToDestroy = mr((function() {
            t.ticketText.text = uC.ticket + "", t.ticketText.y = t.ticket.y + (t.ticket.height - t.ticketText.height) / 2
          }));
          var e = function(i) {
            if (!t.isDisposed) {
              for (var n = t.scroller.scrollV, o = t.scroller.visibleHeight, r = t.mapItems.length - 1; r >= 0; r--) t.mapItems[r].update(n, o);
              requestAnimationFrame(e)
            }
          };
          requestAnimationFrame(e)
        }, e.prototype.initMapItems = function() {
          var t = 0;
          if (Zi())
            for (var e in this.mapIds = [], vh.expertModeMap) this.mapIds.push(Number(e));
          else {
            this.mapIds = $hostDef.expertMapIds.concat();
            for (var i = $hostDef.expertOpenList, n = 0; n < i.length; n++) {
              var o = i[n];
              new Date(o.openTime).getTime() <= Je.curTime && this.mapIds.indexOf(o.mapId) < 0 && this.mapIds.push(o.mapId)
            }
          }
          this.mapIds.sort((function(t, e) {
            return e - t
          }));
          for (n = 0; n < this.mapIds.length; n++) {
            var r = this.mapIds[n],
              s = 1 === r ? new Om : new Lm;
            s.setMapId(n, r), s.y = t, s.mapId = r, s.on(Iu, this.startExpertGame, this), this.mapItems.push(s), t += 190, this.expertList.addChild(s)
          }
          this.expertList.contentHeight = 190 * this.mapIds.length
        }, e.prototype._onPlayVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  if (uC.ticket >= lh.maxTicketCount) return rc(""), [2];
                  if (uC.ticketVideoAd >= lh.maxExpertVideoCount) return rc("".concat(lh.maxExpertVideoCount, "")), [2];
                  if ((t = Je.curTime - ws.lastVideoTime) < 6e4) return rc("".concat(60 - Math.floor(t / 1e3), "")), [2];
                  i.label = 1;
                case 1:
                  return i.trys.push([1, , 3, 4]), [4, mu(3)];
                case 2:
                  return (e = i.sent()) === ve.cancel ? [2, gu("")] : e === ve.fail ? [2, rc(fu)] : [3, 4];
                case 3:
                  return this.isDisposed || this.videoButton && (this.videoButton.interactive = !0), [7];
                case 4:
                  return this.onVideoSuccess(), [2]
              }
            }))
          }))
        }, e.prototype.close = function() {
          RI.isExpert && RI.cleanGameOver(), t.prototype.close.call(this), aw()
        }, e.prototype.startGame = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i = this;
            return s(this, (function(n) {
              return (e = vh.getExpertMode(t)) ? uC.ticket <= 0 ? (rc(""), [2]) : (ic("", "".concat(e.name, ""), !0, "", "", (function(t) {
                t.confirm && i.realStartGame(e)
              })), [2]) : (rc(""), [2])
            }))
          }))
        }, e.prototype.realStartGame = function(t) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  this.expertList.interactive = !1, i.label = 1;
                case 1:
                  return i.trys.push([1, 3, , 4]), tc.destroyPanel(this), [4, _I(Jh.Expert, t.id)];
                case 2:
                  return i.sent(), [3, 4];
                case 3:
                  return oc(i.sent()), tc.showPanel(e), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype.startExpertGame = function(t) {
          return r(this, void 0, void 0, (function() {
            var e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return e = t.target, [4, this.startGame(e.mapId)];
                case 1:
                  return i.sent(), [2]
              }
            }))
          }))
        }, e.prototype.onVideoSuccess = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return ws.lastVideoTime = Je.curTime, [4, el()];
                case 1:
                  return t.sent(), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.y < Mu.top + 30 && (this.y = Mu.top + 30), this.scroller.scrollV = 0
        }, e.prototype.onHide = function() {}, e.prototype.onDestroy = function() {
          this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.tipButton && (this.tipButton.destroy(), this.tipButton = null);
          for (var e = 0; e < this.mapItems.length; e++) {
            var i = this.mapItems[e];
            i.off(Iu, this.startExpertGame, this), i.cleanUp()
          }
          this.mapItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "ExpertView", e
      }(Qg),
      Gm = 20;

    function Am() {
      return uC.videoCnt
    }

    function Nm() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return Am() >= Gm || uC.bestScore >= 500 ? [4, Bi("expert")] : [3, 2];
            case 1:
              return t.sent(), tc.showPanel(Rm), [3, 3];
            case 2:
              tc.showPanel(Tm), t.label = 3;
            case 3:
              return [2]
          }
        }))
      }))
    }

    function jm(t, e) {
      return r(this, arguments, void 0, (function(t, e, i) {
        var n;
        return void 0 === i && (i = !1), s(this, (function(i) {
          switch (i.label) {
            case 0:
              return i.trys.push([0, 2, , 3]), [4, cD({
                map: t,
                begin: 0,
                len: e
              })];
            case 1:
              return [2, i.sent().list];
            case 2:
              return n = i.sent(), console.warn(n), [2, []];
            case 3:
              return [2]
          }
        }))
      }))
    }
    var Vm = 200,
      Um = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          this.rankText = Xh("", "#FFFFFF", !1, "left", 30), this.rankText.x = 100 - this.rankText.width / 2, this.rankText.y = 5, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 80, this.avatarImage.height = 80, this.avatarImage.x = (Vm - this.avatarImage.width) / 2, this.avatarImage.y = 50, this.addChild(this.avatarImage), this.nameText = Xh("", "#FFFFFF", !1, "left", 28), this.nameText.x = 100 - this.nameText.width / 2, this.nameText.y = this.avatarImage.y + this.avatarImage.height + 20, this.addChild(this.nameText), this.scoreText = Xh("", "#FFFFFF", !1, "left", 30), this.scoreText.x = 100 - this.scoreText.width / 2, this.scoreText.y = 200, this.addChild(this.scoreText)
        }, e.prototype.setRankInfo = function(t, e) {
          if (t) {
            var i = t.rank,
              n = t.uid == uC.uid;
            this.rankText.style.fill = n ? "#00FF00" : "#FFFFFF", this.nameText.style.fill = n ? "#00FF00" : "#FFFFFF", this.scoreText.style.fill = n ? "#00FF00" : "#FFFFFF", this.rankText.text = i < 0 ? "" : "".concat(i), this.rankText.x = (Vm - this.rankText.width) / 2, this.nameText.text = hn(t.nick, 10), this.nameText.x = (Vm - this.nameText.width) / 2, this.scoreText.text = t.score + "", this.scoreText.x = (Vm - this.scoreText.width) / 2, Bm(this.avatarImage, n ? uC.image : t.image), this.visible = !0
          } else this.visible = !1
        }, e
      }(PIXI.Container),
      Wm = function(t) {
        function e() {
          var e = t.call(this, !0, 1) || this;
          return e.lastScore = 0, e.rankItems = [], e._playScore = 0, e.createChildren(), e
        }
        return i(e, t), e.prototype.createChildren = function() {
          var t = this;
          this.centerLayer = new PIXI.Container, this.addChild(this.centerLayer);
          var e = 375;
          this.mapNameText = Xh("", "#FFFFFF", !0, "center", 36), this.mapNameText.anchor.set(.5, .5), this.mapNameText.x = e, this.mapNameText.y = 0, this.centerLayer.addChild(this.mapNameText);
          var i = jh("title_bg.png");
          i.anchor.set(.5, .5), i.x = e, i.y = 50, this.centerLayer.addChild(i);
          var n = Xh("", "#FFFFFF", !0);
          n.anchor.set(.5, .5), n.x = e, n.y = i.y, this.centerLayer.addChild(n), this.scoreText = zh("0", 60, 16777215, "center"), this.scoreText.scale.x = 2, this.scoreText.scale.y = 2, this.scoreText.x = (Pe - 2 * this.scoreText.textWidth) / 2, this.scoreText.y = i.y + 10, this.centerLayer.addChild(this.scoreText);
          var o, r = _e / Be,
            s = new PIXI.Container;
          if (this.centerLayer.addChild(s), r < .7) {
            o = this.rankBg = jh("rank_bg_new.png"), this.rankBg.interactive = !0, o.width = 651, o.height = 317, o.x = 0, o.y = 0, s.addChild(o), this.rankBg.on(Tu, this._openRankView, this);
            var a = new Ru("button_allrank.png");
            a.x = o.x + o.width - a.width / 2 - 20, a.y = 36, a.interactive = !1, s.addChild(a.skin);
            var h = [{
              x: 14,
              y: 62
            }, {
              x: 225,
              y: 62
            }, {
              x: 436,
              y: 62
            }];
            this.rankItems = [];
            for (var c = 0; c < 3; c++) {
              var u = new Um;
              u.x = h[c].x, u.y = h[c].y, this.rankItems.push(u), s.addChild(u), u.visible = !1
            }
          }
          s.x = o ? (Pe - o.width) / 2 : e, s.y = this.scoreText.y + this.scoreText.height / 2 + 100, !$hostDef.censor && $hostDef.gamesIcon && (this.tryGame = new Ml, this.tryGame.x = Pe - this.tryGame.width, this.tryGame.y = s.y - this.tryGame.height / 2 - 50, this.centerLayer.addChild(this.tryGame)), this.settingSkin = new rk(2), this.settingSkin.x = (Pe - this.settingSkin.realWidth) / 2, this.settingSkin.y = o ? s.y + o.height + 80 : s.y + 50 + 80, this.centerLayer.addChild(this.settingSkin.skin), this.shareButton = new Ru("button_flaunt.png"), this.shareButton.x = e, this.shareButton.y = this.settingSkin.y + this.settingSkin.height / 2 + 60, this.shareButton.on("tap", this._onShare, this), this.centerLayer.addChild(this.shareButton.skin), Ju.supportRequestSubscribe && !Ju.subscribedNotice ? (this.subscribeButton = new Ru("btn_subscribe_map.png"), this.subscribeButton.x = e, this.subscribeButton.y = this.shareButton.y + this.shareButton.height / 2 + 60, this.subscribeButton.on(Iu, this.onTapSubscribe, this), this.centerLayer.addChild(this.subscribeButton.skin)) : (this.backButton = new Ru("button_back.png"), this.backButton.x = e, this.backButton.y = this.shareButton.y + this.shareButton.height / 2 + 60, this.backButton.on(Tu, this._backExpert, this), this.centerLayer.addChild(this.backButton.skin)), this.dailyRewardButton = new Ru("icon_dailyreward.png"), this.dailyRewardButton.x = this.shareButton.x - 250, this.dailyRewardButton.y = this.shareButton.y, this.dailyRewardButton.on(Tu, (function() {
            tc.showPanel(ym)
          }), this), this.centerLayer.addChild(this.dailyRewardButton.skin), this.dailyRewardButton.visible = !0, this.teamButton = new gm, this.teamButton.x = this.dailyRewardButton.x, this.teamButton.y = this.dailyRewardButton.y + 150, this.teamButton.on(Tu, this._tabTeam, this), this.centerLayer.addChild(this.teamButton.skin), this.teamButton.visible = $hostDef.team;
          var l = Math.min(900, this.centerLayer.height);
          if (this.centerLayer.y = (De - l) / 2, this.centerLayer.y + l > De - 0 - 20 && (this.centerLayer.y = De - 0 - l - 20), this.centerLayer.y < Mu.top && (this.centerLayer.y = Mu.top), Dl.canShow() && (this.leftBanner = new Dl, this.leftBanner.x = -10, this.leftBanner.y = 230, this.addChild(this.leftBanner)), this.programIcon = new El, "function" == typeof wx.getMenuButtonBoundingClientRect) {
            var d = wx.getMenuButtonBoundingClientRect(),
              p = (d.top + d.height / 2) / tc.uiScale,
              f = d.left / tc.uiScale;
            this.programIcon.y = p - this.programIcon.height / 2, this.programIcon.defaultX = this.programIcon.x = f - this.programIcon.width
          } else this.programIcon.defaultX = this.programIcon.x = Pe - this.programIcon.width - 200, this.programIcon.y = 21 + Math.max(0, Mu.top > 0 ? Mu.top - 30 : 0);
          this.addChild(this.programIcon), this.programIcon.visible = !$hostDef.censor && !tn(), this.topBackButton = new Ru("btn_back.png"), this.topBackButton.x = Mu.left + 50, this.topBackButton.y = Mu.top + 50, this.topBackButton.on(Tu, this._backExpert, this), this.addChild(this.topBackButton.skin), cn() && (this.clubButton = lC(this.topBackButton.x - 45, this.topBackButton.y + 80), this.addToDestroy = mr((function() {
            tc.openedPopUpPanelCount > 1 ? t.clubButton.hide() : t.clubButton.show()
          })))
        }, e.prototype._tabTeam = function() {
          _w()
        }, e.prototype._openRankView = function() {
          tc.showPanel(Fm, RI.mapId)
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype._backExpert = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              return this.close(), Nm(), [2]
            }))
          }))
        }, e.prototype.onTapSubscribe = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return Ju.subscribedNotice ? [2] : [4, Ju.requestSubscribe($u, "")];
                case 1:
                  return "accept" === t.sent() && (nD({
                    templateId: $u
                  }), Ju.subscribedNotice = !0, rc(""), this.isDisposed || (this.subscribeButton.visible = !1)), [2]
              }
            }))
          }))
        }, e.prototype._onShare = function() {
          var t = vh.getExpertMode(RI.mapId);
          t && t.finishFloor > 0 && RI.curFloor >= t.finishFloor ? (NI("".concat(RI.mapId, "")), function(t, e) {
            return r(this, void 0, void 0, (function() {
              var i, n, o;
              return s(this, (function(r) {
                return (i = vh.getExpertFinishShareWord(e)) ? (n = i ? i.desc : "", o = n.replace("{score}", t + ""), [2, Xc(i.type, o, i.image, null, i.id)]) : [2, qc()]
              }))
            }))
          }(this.lastScore, RI.mapId).then((function(t) {
            Uc(t) && jI("".concat(RI.mapId, ""))
          }))) : (NI("".concat(RI.mapId, "")), function(t, e) {
            return r(this, void 0, void 0, (function() {
              var i;
              return s(this, (function(n) {
                return (i = vh.getExpertShareWord(e)) ? [2, iu(i, t).then((function(e) {
                  var i = (e && e.conf ? e.conf.desc : "").replace("{score}", t);
                  return Xc(e.conf.type, i, e.image || e.conf.image, null, e.conf.id)
                }))] : [2, qc()]
              }))
            }))
          }(this.lastScore, RI.mapId).then((function(t) {
            Uc(t) && jI("".concat(RI.mapId, ""))
          })))
        }, e.prototype.onShow = function(t) {
          this.x = 0, this.y = 0, this.mapNameText.text = "-".concat(vh.getExpertMode(RI.mapId).name), this.tryGame && this.tryGame.showGameIcon();
          var e, i, n = !1;
          if (uu() && !fm(uC.lastShareFriendTime) && (n = !0), !this.sharefriendIcon && n) {
            var o = !$hostDef.censor && $hostDef.shareFriendGift && !fm(uC.lastShareFriendTime);
            this.sharefriendIcon = jh(o ? "icon_sharefriend1.png" : "icon_sharefriend2.png"), this.sharefriendIcon.interactive = !0, this.sharefriendIcon.anchor.set(.5, .5), this.sharefriendIcon.x = this.shareButton.x + this.shareButton.width / 2 + 100, this.sharefriendIcon.y = this.shareButton.y, this.sharefriendIcon.on(Tu, (function() {
              tc.showPanel(xm)
            }), this), this.centerLayer.addChild(this.sharefriendIcon), UI("")
          }
          t ? (e = t.score, i = t.showMax) : (e = RI.curScore, i = !1), this.lastScore = e;
          var r = uC.expertBestScores[RI.mapId] || 0;
          this.playScoreTween(i && e > r), this.programIcon.visible && this.programIcon.startTween(), this.loadRank(), wx.triggerGC()
        }, e.prototype.loadRank = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return [4, jm(RI.mapId, 10, !0)];
                case 1:
                  if (t = o.sent(), this.isDisposed) return [2];
                  if (t) {
                    for (e = -1, n = 0; n < t.length; n++)
                      if (t[n].uid == uC.uid) {
                        e = n;
                        break
                      } for (i = [], 0 == t.length ? i.push({
                        uid: uC.uid,
                        nick: uC.nick,
                        image: uC.image,
                        rank: -1,
                        score: uC.expertBestScores[RI.mapId] || 0
                      }) : -1 == e ? (i.push(t[t.length - 1]), t.length >= 2 && i.unshift(t[t.length - 2]), i.push({
                        uid: uC.uid,
                        nick: uC.nick,
                        image: uC.image,
                        rank: -1,
                        score: uC.expertBestScores[RI.mapId] || 0
                      })) : e > 1 && e < 9 ? (i.push(t[e - 1]), i.push(t[e]), t.length > e && i.push(t[e + 1])) : 9 === e ? (i.push(t[e - 2]), i.push(t[e - 1]), i.push(t[e])) : (i.push(t[0]), t.length >= 2 && i.push(t[1]), t.length >= 3 && i.push(t[2])), n = 0; n < this.rankItems.length; n++) this.rankItems[n].setRankInfo(i[n], RI.mapId)
                  }
                  return [2]
              }
            }))
          }))
        }, e.prototype.playScoreTween = function(t) {
          this.scoreText.text = "0", this._playScore = 0;
          var e = this;
          new TWEEN.Tween(this).to({
            _playScore: this.lastScore
          }, 1e3).onUpdate((function(t) {
            !e.isDisposed && e.scoreText ? (e.scoreText.text = e._playScore.toFixed(), e.scoreText.x = (Pe - 2 * e.scoreText.textWidth) / 2) : TWEEN.killTweensOf(e)
          })).onComplete((function() {
            e.isDisposed || t && tc.showPanel(wm, e.lastScore)
          })).easing(TWEEN.Easing.Circular.Out).start()
        }, e.prototype.onHide = function() {
          TWEEN.killTweensOf(this), this.tryGame && this.tryGame.stopGameIconTween(), this.programIcon.stopTween()
        }, e.prototype.onDestroy = function() {
          TWEEN.killTweensOf(this), this.rankBg && this.rankBg.off(Tu, this._openRankView, this), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.backButton && (this.backButton.destroy(), this.backButton = null), this.settingSkin && (this.settingSkin.destroy(), this.settingSkin = null), this.tryGame && (this.tryGame.destroy(), this.tryGame = null), this.leftBanner && (this.leftBanner.destroy(), this.leftBanner = null), this.topBackButton && (this.topBackButton.destroy(), this.topBackButton = null), this.subscribeButton && (this.subscribeButton.destroy(), this.subscribeButton = null), this.dailyRewardButton && (this.dailyRewardButton.destroy(), this.dailyRewardButton = null), this.clubButton && (this.clubButton.destroy(), this.clubButton = null), this.teamButton && (this.teamButton.destroy(), this.teamButton = null), this.scoreText = null
        }, e.clsName = "ExpertGameOverView", e
      }(Eu);

    function qm(t) {
      switch (t) {
        case sd.Leader:
          return "";
        case sd.Manager:
          return "";
        default:
          return ""
      }
    }

    function Hm(t) {
      var e = Je.curTime - t;
      if (e <= 0 || ti(new Date(Je.curTime), new Date(t))) return "";
      var i = Math.round(e / ei);
      return "".concat(i, "")
    }

    function $m(t, e, i) {
      switch (i) {
        case 1:
          return 0 === e ? "".concat(t, "~") : "".concat(t, "").concat(e, "~");
        case 2:
          return "".concat(t, "");
        case 3:
          return "".concat(t, "~");
        default:
          return "".concat(t, "~")
      }
    }

    function Xm(t, e) {
      switch (t) {
        case 1:
          return "".concat(e, "");
        case 2:
          var i = YT(WT().type, e);
          return "".concat(i);
        case 3:
          return "".concat(Math.floor(100 * e), "%")
      }
      return ""
    }

    function Ym(t) {
      switch (t) {
        case "back":
          return "";
        case "front":
          return "";
        case "statue":
          return "";
        case "bg":
          return "";
        case "ground":
          return "";
        case "floor":
          return ""
      }
    }

    function zm(t, e) {
      void 0 === t && (t = 580), void 0 === e && (e = 126);
      var i = qh("team_join_rank_item_bg.png", 10, 10, 10, 10);
      return i.width = t, i.height = e, i
    }

    function Km(t, e) {
      void 0 === t && (t = 580), void 0 === e && (e = 124);
      var i = qh("team_desc_bg.png", 10, 10, 10, 10);
      return i.width = t, i.height = e, i
    }

    function Jm(t) {
      var e = t.taskValue;
      return t.taskType === Sa.DailyGame && (e = Mh.getMode(WT().type).targetValue), e
    }
    var Qm, Zm = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.isDisposed = !1, e.teamTip = jh("gameover_team_task_tip.png"), e.teamTip.x = -e.teamTip.width / 2, e.teamTip.y = 0, e.addChild(e.teamTip), e.teamTipText = Xh("100050%", 8468488, !0, "left", 24), e.teamTipText.x = e.teamTip.x + (e.teamTip.width - e.teamTipText.width) / 2, e.teamTipText.y = e.teamTip.y + (e.teamTip.height - e.teamTipText.height) / 2 - 10, e.addChild(e.teamTipText), e
        }
        return i(e, t), e.prototype.refreshTeamTip = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n, o, r, a, h;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  return this.teamTip.visible = !1, this.teamTipText.visible = !1, mx.hasTeam ? t === Sa.DailyGame && RI.mode < Jh.Collection || t === Sa.ClassicsGame && RI.mode !== Jh.Classics || t === Sa.ExpertGame && RI.mode !== Jh.Expert ? [2, !1] : [4, mx.loadPersonTask()] : [2, !1];
                case 1:
                  if (s.sent(), this.isDisposed) return [2, !1];
                  if (e = !1, i = 0, n = Bh.getTasks().find((function(e) {
                      return e.taskType === t && (!mx.isPersonTaskFinished(e.id) && (t === Sa.DailyGame ? !zT(RI.mode) : e.taskValue > RI.curScore))
                    })))
                    for (o = [30, 50, 75, 90], e = !0, h = Jm(n), r = 100 * RI.gameModeScore / h, i = o[0], a = 0; a < o.length; a++) r >= o[a] && (i = o[a]);
                  return this.teamTip.visible = e, this.teamTipText.visible = e, e && (h = Jm(n), RI.mode === Jh.FastDrop ? this.teamTipText.text = "".concat(YT(RI.mode, h), "") : this.teamTipText.text = "".concat(YT(RI.mode, h), "").concat(i, "%"), this.teamTipText.x = this.teamTip.x + (this.teamTip.width - this.teamTipText.width) / 2), [2, e]
              }
            }))
          }))
        }, e.prototype.destroy = function(e) {
          this.isDisposed = !0, t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      ty = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.container = new PIXI.Container, e.container.interactive = !0, e.container.width = 311, e.container.height = 117, e.button = new Ru("gamemode_start.png"), e.container.addChild(e.button.skin);
          var i = jh("gamemode_arrow.png");
          return i.x = -e.button.width / 2 + 30, i.y = -i.height / 2 - 10, e.container.addChild(i), e.nameText = Xh(VT(), 8468488, !0, "center", 40), e.container.addChild(e.nameText), e.nameText.x = -e.nameText.width / 2 + 30, e.nameText.y = -e.nameText.height / 2 - 10, e.countText = Xh("", 8468488, !0, "center", 24), e.container.addChild(e.countText), e.countText.y = 117 - e.countText.height - 70, e.videoIcon = jh(uC.teamCoin >= 200 ? "gamemode_goldadd.png" : "gamemode_videoadd.png"), e.videoIcon.x = 50, e.videoIcon.y = 117 - e.videoIcon.height - 75, e.container.addChild(e.videoIcon), e.addToDestroy = mr((function() {
            var t = 2 - uC.speGameCnt;
            t > 0 ? (e.countText.text = ":".concat(t, "/").concat(2), e.countText.x = -e.countText.width / 2, e.countText.visible = !0, e.videoIcon.visible = !1) : (e.countText.visible = !1, e.videoIcon.visible = !0)
          })), e
        }
        return i(e, t), e.prototype.update = function() {
          this.nameText.text = VT(), this.nameText.x = -this.nameText.width / 2 + 30
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.button && (this.button.destroy(), this.button = null), t.prototype.destroy.call(this), this.container = null
        }, e
      }(Lu),
      ey = function(t) {
        function e(e, i, n) {
          void 0 === n && (n = !0);
          var o = t.call(this) || this;
          return void 0 === n && (n = !0), o._center = n, o.sprite = new PIXI.Container, o.sprite.interactive = !0, o.bg = jh(e), o._width = o.bg.width, o._height = o.bg.height, n && o.bg.anchor.set(.5, .5), o.sprite.addChild(o.bg), o.labelText = jh(i), o.labelText.anchor.set(.5, .5), n || (o.labelText.x = o.bg.width / 2, o.labelText.y = o.bg.height / 2), o.sprite.addChild(o.labelText), o.sprite.on(Tu, o.onTapDown, o), o.sprite.on(ku, o.onTapUp, o), o.sprite.on(Cu, o.onTapUp, o), o.sprite.on(_u, o.onTapUp, o), o.sprite.on(Bu, o.onTapUp, o), o
        }
        return i(e, t), e.prototype.setFrameId = function(t) {
          this.bg.texture = Vh(t)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.sprite
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onTapUp = function() {
          this.setScale(1)
        }, e.prototype.onTapDown = function() {
          this.setScale(.9)
        }, e.prototype.destroy = function() {
          this.sprite && this.sprite.removeAllListeners(), t.prototype.destroy.call(this), this.sprite = null
        }, e
      }(Ou),
      iy = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(557, 591), this.addChild(this.bg), this.addTitle("");
          var t = uC.teamCoin >= 200 ? "200" : "";
          this.descText = Yh("".concat(VT(), "\n").concat(t, "2"), 16777215, 450, 30, !1, "left", 20), this.descText.x = (this.bg.width - this.descText.width) / 2, this.descText.y = (this.bg.width - this.descText.height) / 2, this.addChild(this.descText), this.addCloseButton(), this.buttonGroup = new im(20), uC.teamCoin >= 200 ? (this.normalButton = new ey("gamemode_yellow_button.png", "gamemode_exchange_button.png", !1), this.normalButton.on(Iu, this._onNormal, this), this.buttonGroup.addButton(this.normalButton)) : (this.videoButton = new Ru("button_video_coin.png", !1), this.videoButton.on(Iu, this._watchVideo, this), this.buttonGroup.addButton(this.videoButton)), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.y + this.bg.height - 150, this.addChild(this.buttonGroup)
        }, e.prototype._onNormal = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return uC.teamCoin >= 200 ? [4, KT(1)] : [3, 2];
                case 1:
                  return t.sent(), this.close(), [2];
                case 2:
                  return [2]
              }
            }))
          }))
        }, e.prototype._watchVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return $hostDef.noGameModeVideo ? [3, 2] : [4, mu(13)];
                case 1:
                  if ((t = e.sent()) === ve.cancel) return [2, gu("")];
                  if (t === ve.fail) return [2, rc(fu)];
                  e.label = 2;
                case 2:
                  return [4, KT(0)];
                case 3:
                  return e.sent(), this.close(), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), e && (this.descText.text = e.text)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.normalButton && (this.normalButton.destroy(), this.normalButton = null), this.buttonGroup && (this.buttonGroup.destroy(), this.buttonGroup = null)
        }, e.clsName = "GameModeVideoNoticeView", e
      }(Qg),
      ny = PIXI.Sprite,
      oy = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.name = "GameModeDescView", e.descImage = new ny, e.descImage.y = 30, e.addChild(e.descImage), e.timeText = Xh("", 16777215, !1, "left", 26), e.timeText.x = (e.descImage.width - e.timeText.width) / 2, e.timeText.y = 650, e.addChild(e.timeText), e.gameModeButton = new ty, e.addChild(e.gameModeButton.skin), e.gameModeButton.x = e.descImage.width / 2, e.gameModeButton.y = 780, e.gameModeButton.on(Tu, e._onTapOk, e), e
        }
        return i(e, t), e.prototype._onTapOk = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  if (!(t = WT())) return rc(""), [2];
                  if (uC.speGameCnt >= 2) return tc.showPanel(iy), [2];
                  e = t.type, n.label = 1;
                case 1:
                  return n.trys.push([1, 3, , 4]), [4, _I(e)];
                case 2:
                  return n.sent(), [3, 4];
                case 3:
                  return oc(i = n.sent()), DEVELOP && console.warn("e:", i), tc.showPanel(Cw), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype.show = function(t) {
          this.descImage.texture = function(t) {
            try {
              return PIXI.Texture.fromImage(t)
            } catch (t) {
              return PIXI.Texture.EMPTY
            }
          }("dlc/ui/gamemode/gamemode_desc_".concat(t.type, ".png")), t.type === Jh.Collection ? (this.descImage.width = 518, this.descImage.height = 551) : t.type === Jh.FastDrop ? (this.descImage.width = 531, this.descImage.height = 586) : t.type === Jh.Blood || t.type === Jh.Mutation ? (this.descImage.width = 531, this.descImage.height = 587) : t.type === Jh.Punch ? (this.descImage.width = 534, this.descImage.height = 586) : t.type === Jh.Power && (this.descImage.width = 534, this.descImage.height = 563), this.timeText.text = "".concat(WT().name, "").concat(function() {
            var t = UT(),
              e = (Math.floor(t / pm) + 1) % lh.dailyModeOrders.length,
              i = lh.dailyModeOrders[e];
            return Mh.getMode(i)
          }().name), this.timeText.x = (this.descImage.width - this.timeText.width) / 2, this.gameModeButton.x = this.descImage.width / 2, this.gameModeButton.update()
        }, e.prototype.destroy = function(e) {
          this.isDisposed || (this.isDisposed = !0, this.gameModeButton && (this.gameModeButton.destroy(), this.gameModeButton = null), this.descImage && (this.descImage.destroy({
            children: !0,
            texture: !0,
            baseTexture: !0
          }), this.descImage = null), t.prototype.destroy.call(this, e))
        }, e
      }(PIXI.Container),
      ry = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.bg = $h(650, 700), e.addChild(e.bg), e.addTitle("", "#f19d07"), e.addCloseButton(), e.descText = Yh("", 12369869, 590, 28, !1, "left", 10), e.addChild(e.descText), e
        }
        return i(e, t), e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.descText.text = e.msg, this.descText.x = (this.bg.width - this.descText.width) / 2, this.descText.y = 45 + (this.bg.height - this.descText.height) / 2, this.updateTitle(e.title)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null)
        }, e.clsName = "GameModeDescView", e
      }(Qg),
      sy = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.rank = 0, e.inited = !1, e.interactive = !0, e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = Wh("dlc/ui/challenge/challenge_rank_bg.png");
          t.width = 580, t.height = 96, this.addChild(t), this.rankImage = new PIXI.Sprite, this.rankImage.x = 20, this.rankImage.y = 23, this.addChild(this.rankImage), this.rankText = Xh("", "#FFFFFF", !1, "left", 30), this.rankText.x = 40, this.rankText.y = 30, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 60, this.avatarImage.height = 60, this.avatarImage.x = 90, this.avatarImage.y = (t.height - this.avatarImage.height) / 2, this.addChild(this.avatarImage), this.nameText = Xh("", "#FFFFFF", !1, "left", 28), this.nameText.x = 165, this.nameText.y = 30, this.addChild(this.nameText), this.scoreText = Xh("100%", "#FFFFFF", !1, "left", 30), this.scoreText.x = 510, this.scoreText.y = 30, this.addChild(this.scoreText), this.inited = !0
        }, e.prototype.setRankInfo = function(t) {
          this.inited && this.rankInfo === t || (this.rankInfo = t, this.rank = this.rankInfo.rank, this.inited ? this.refreshUI() : this.visible = !1)
        }, e.prototype.refreshUI = function() {
          this.rankInfo.uid === uC.uid ? (this.rankText.style.fill = "#00FF00", this.nameText.style.fill = "#00FF00", this.scoreText.style.fill = "#00FF00") : (this.rankText.style.fill = "#FFFFFF", this.nameText.style.fill = "#FFFFFF", this.scoreText.style.fill = "#FFFFFF"), this.rank > 0 && this.rank <= 3 ? (this.rankImage.visible = !0, this.rankText.visible = !1, this.rankImage.texture = PIXI.Texture.fromImage("res/rank/rank".concat(this.rank, ".png"))) : (this.rankImage.visible = !1, this.rankText.visible = !0, this.rankText.text = "".concat(this.rank), this.rankText.x = 40 - this.rankText.width / 2), this.nameText.text = hn(this.rankInfo.nick, 10), this.scoreText.text = this.rankInfo.score, Bm(this.avatarImage, this.rankInfo.image)
        }, e.prototype.update = function(t, i) {
          var n = e.ITEM_REAL_HEIGHT,
            o = this.rank * n - t;
          o >= -n && o <= i + n ? (this.inited || (this.createContents(), this.refreshUI()), this.visible = !0) : this.visible = !1
        }, e.ITEM_HEIGHT = 96, e.ITEM_GAP = 10, e.ITEM_REAL_HEIGHT = e.ITEM_HEIGHT + e.ITEM_GAP, e
      }(PIXI.Container),
      ay = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.myRank = -1, e.myScore = 0, e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this.bg = qh("gamemode_rank_bg.png", 10, 10, 10, 10);
          t.width = 580, t.height = 96, this.addChild(t), this.rankImage = new PIXI.Sprite, this.rankImage.x = 20, this.rankImage.y = 23, this.addChild(this.rankImage), this.rankText = Xh("", "#00FF00", !1, "left", 24), this.rankText.x = 42, this.rankText.y = (t.height - this.rankText.height) / 2, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 60, this.avatarImage.height = 60, this.avatarImage.x = 90, this.avatarImage.y = (t.height - this.avatarImage.height) / 2, this.addChild(this.avatarImage), this.nameText = Xh("", "#00FF00", !1, "left", 28), this.nameText.x = 165, this.nameText.y = 30, this.addChild(this.nameText), this.scoreText = Xh("100%", "#00FF00", !1, "left", 30), this.scoreText.x = 500, this.scoreText.y = 30, this.addChild(this.scoreText)
        }, e.prototype.setRankInfo = function(t, e, i) {
          this.gameMode = t, this.myRank = e, this.myScore = i, this.refreshData()
        }, e.prototype.refreshData = function() {
          this.myRank > 0 && this.myRank <= 3 ? (this.rankImage.visible = !0, this.rankText.visible = !1, this.rankImage.texture = PIXI.Texture.fromImage("res/rank/rank".concat(this.myRank, ".png"))) : (this.rankImage.visible = !1, this.rankText.visible = !0, this.rankText.text = this.myRank < 0 ? "" : "".concat(Math.max(1, this.myRank)), this.rankText.x = 42 - this.rankText.width / 2), this.nameText.text = hn(uC.nick, 8), this.scoreText.text = XT(this.gameMode, this.myScore), this.scoreText.x = this.bg.width - this.scoreText.width - 30, Bm(this.avatarImage, uC.image)
        }, e.ITEM_HEIGHT = 110, e
      }(PIXI.Container),
      hy = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.rank = 0, e.inited = !1, e.interactive = !0, e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this.bg = qh("gamemode_rank_bg.png", 10, 10, 10, 10);
          t.width = 580, t.height = 96, this.addChild(t), this.rankImage = new PIXI.Sprite, this.rankImage.x = 20, this.rankImage.y = 23, this.addChild(this.rankImage), this.rankText = Xh("", "#FFFFFF", !1, "left", 30), this.rankText.x = 40, this.rankText.y = 30, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 60, this.avatarImage.height = 60, this.avatarImage.x = 90, this.avatarImage.y = (t.height - this.avatarImage.height) / 2, this.addChild(this.avatarImage), this.nameText = Xh("", "#FFFFFF", !1, "left", 28), this.nameText.x = 165, this.nameText.y = 30, this.addChild(this.nameText), this.scoreText = Xh("100%", "#FFFFFF", !1, "left", 30), this.scoreText.x = 500, this.scoreText.y = 30, this.addChild(this.scoreText), this.inited = !0
        }, e.prototype.setRankInfo = function(t, e) {
          this.inited && this.rankInfo === t || (this.gameMode = e, this.rankInfo = t, this.rank = this.rankInfo.rank, this.inited ? this.refreshUI() : this.visible = !1)
        }, e.prototype.refreshUI = function() {
          this.rankInfo.uid === uC.uid ? (this.rankText.style.fill = "#00FF00", this.nameText.style.fill = "#00FF00", this.scoreText.style.fill = "#00FF00") : (this.rankText.style.fill = "#FFFFFF", this.nameText.style.fill = "#FFFFFF", this.scoreText.style.fill = "#FFFFFF"), this.rank > 0 && this.rank <= 3 ? (this.rankImage.visible = !0, this.rankText.visible = !1, this.rankImage.texture = PIXI.Texture.fromImage("res/rank/rank".concat(this.rank, ".png"))) : (this.rankImage.visible = !1, this.rankText.visible = !0, this.rankText.text = "".concat(this.rank), this.rankText.x = 40 - this.rankText.width / 2), this.nameText.text = hn(this.rankInfo.nick, 8), this.scoreText.text = XT(this.gameMode, this.rankInfo.score), this.scoreText.x = this.bg.width - this.scoreText.width - 30, Bm(this.avatarImage, this.rankInfo.image)
        }, e.prototype.update = function(t, i) {
          var n = e.ITEM_REAL_HEIGHT,
            o = this.rank * n - t;
          o >= -n && o <= i + n ? (this.inited || (this.createContents(), this.refreshUI()), this.visible = !0) : this.visible = !1
        }, e.ITEM_HEIGHT = 96, e.ITEM_GAP = 10, e.ITEM_REAL_HEIGHT = e.ITEM_HEIGHT + e.ITEM_GAP, e
      }(PIXI.Container),
      cy = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentHeight = 0, e.name = "GameModeRankList", e.y = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return -this.y
          },
          set: function(t) {
            this.y = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this._contentHeight
          },
          set: function(t) {
            this._contentHeight = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      uy = function() {
        function t(t) {
          this.rankList = [], this.rankSet = new Set, this.selfRank = -1, this.selfScore = 0, this.begin = 0, this.loading = !1, this.loadError = !1, this.loadCompleted = !1, this.mode = t
        }
        return t.prototype.hasRankData = function(t) {
          return this.rankSet.has(t.uid)
        }, t.prototype.load = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return this.loadCompleted ? [2] : (this.loading = !0, this.loadError = !1, [4, JT(qT(this.mode).getTime(), this.begin, 20, !0)]);
                case 1:
                  if (t = o.sent()) {
                    for (this.selfScore = t.selfScore, this.selfRank = t.selfRank, this.mode = t.mode, e = t.list, this.loadCompleted = e.length < 20, i = 0; i < e.length; i++) n = e[i], this.hasRankData(n) || (this.rankList.push(n), this.rankSet.add(n.uid));
                    this.rankList.sort((function(t, e) {
                      return t.rank - e.rank
                    })), this.rankList.length > 100 && (this.rankList.length = 100), this.begin = this.rankList.length
                  } else this.loadError = !0;
                  return this.loading = !1, [2]
              }
            }))
          }))
        }, Object.defineProperty(t.prototype, "canContinueLoad", {
          get: function() {
            return this.rankList.length < 100 && this.rankList.length > 0 && !this.loadCompleted && !this.loading && !this.loadError
          },
          enumerable: !1,
          configurable: !0
        }), t
      }(),
      ly = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.rankItems = [], e._rankInfoMap = new Map, e._gameMode = Jh.Collection, e.isDisposed = !1, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.width = 580, this.prevBtn = new Ru("gamemode_btn_left.png"), this.prevBtn.x = 100 - this.prevBtn.width / 2, this.prevBtn.y = 35, this.addChild(this.prevBtn.skin), this.prevBtn.on(Tu, this.onPrev, this), this.nextBtn = new Ru("gamemode_btn_right.png"), this.nextBtn.x = 580 + this.nextBtn.width / 2 - 100, this.nextBtn.y = 35, this.addChild(this.nextBtn.skin), this.nextBtn.on(Tu, this.onNext, this), this.modeTitle = Xh("1", "#FFFFFF", !1, "let", 30), this.modeTitle.y = this.prevBtn.y - this.modeTitle.height / 2, this.addChild(this.modeTitle);
          this.scroller = new Wu(580, 660), this.scroller.x = 0, this.scroller.y = 80, this.gameModeRankList = new cy, this.scroller.setContent(this.gameModeRankList), this.addChild(this.scroller), this.scroller.on(ku, this._onTouchEnd, this), this.scroller.on(Bu, this._onTouchEnd, this), this.scroller.on(Cu, this._onTouchEnd, this), this.scroller.interactive = !1, this.myRankItem = new ay, this.myRankItem.x = 0, this.myRankItem.y = 760, this.addChild(this.myRankItem);
          var e = function(i) {
            if (!t.isDisposed) {
              for (var n = t.scroller.scrollV, o = t.scroller.visibleHeight, r = t.rankItems.length - 1; r >= 0; r--) t.rankItems[r].update(n, o);
              t._curRankInfo && t._curRankInfo.canContinueLoad && n + o >= t.gameModeRankList.contentHeight - 4 * sy.ITEM_HEIGHT && t.loadRankData(t._gameMode).catch((function() {})), requestAnimationFrame(e)
            }
          };
          requestAnimationFrame(e)
        }, e.prototype.refreshBtnStates = function() {
          var t = this._selectModeIndex - 1;
          t < 0 && (t += lh.dailyModeOrders.length);
          var e = qT(lh.dailyModeOrders[t]).getTime();
          this.prevBtn.visible = e >= new Date(lh.dailyModeStartTime).getTime() && this._selectModeIndex <= this._activeModeIndex && this._activeModeIndex - this._selectModeIndex < lh.dailyModeOrders.length - 1, this.nextBtn.visible = this._selectModeIndex < this._activeModeIndex
        }, e.prototype.onPrev = function() {
          this._selectModeIndex--;
          var t = this._selectModeIndex;
          t < 0 && (t += lh.dailyModeOrders.length);
          var e = lh.dailyModeOrders[t];
          this._gameMode = e, this.refreshBtnStates(), this.loadRankData(e).catch((function() {}))
        }, e.prototype.onNext = function() {
          this._selectModeIndex++;
          var t = this._selectModeIndex;
          t < 0 && (t += lh.dailyModeOrders.length);
          var e = lh.dailyModeOrders[t];
          this._gameMode = e, this.refreshBtnStates(), this.loadRankData(e).catch((function() {}))
        }, e.prototype.setModeTitle = function(t) {
          this.modeTitle.text = t, this.modeTitle.x = (this.width - this.modeTitle.width) / 2
        }, e.prototype.updateRankListView = function() {
          if (this._curRankInfo) {
            var t = this.rankItems.slice();
            this.rankItems.length = 0;
            for (var e = this._curRankInfo.rankList, i = 0, n = 0; n < e.length; n++) {
              var o = e[n],
                r = void 0;
              (r = t.length > 0 ? t.pop() : new hy).setRankInfo(o, this._curRankInfo.mode), r.y = i, this.rankItems.push(r), r.parent !== this.gameModeRankList && this.gameModeRankList.addChild(r), n < e.length - 1 && (i += hy.ITEM_HEIGHT + hy.ITEM_GAP)
            }
            for (n = 0; n < t.length; n++) {
              (r = t[n]).destroy()
            }
            t.length = 0, this.gameModeRankList.contentHeight = i + hy.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0, this.myRankItem.setRankInfo(this._curRankInfo.mode, this._curRankInfo.selfRank, this._curRankInfo.selfScore)
          }
        }, e.prototype._onTouchEnd = function() {
          this._curRankInfo && (this._curRankInfo.loadError = !1)
        }, e.prototype.show = function(t) {
          this._gameMode = t.type, this._selectModeIndex = lh.dailyModeOrders.indexOf(this._gameMode), this._activeModeIndex = this._selectModeIndex, this.scroller.interactive = !1, this.scroller.scrollV = 0, this.refreshBtnStates(), this.setModeTitle("".concat(HT(t.type), " ").concat(Mh.getMode(t.type).name)), this.loadRankData(this._gameMode).catch((function() {}))
        }, e.prototype.loadRankData = function(t) {
          return r(this, void 0, void 0, (function() {
            var e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return this._rankInfoMap.has(t) || this._rankInfoMap.set(t, new uy(t)), this._curRankInfo = this._rankInfoMap.get(t), [4, this._curRankInfo.load()];
                case 1:
                  return i.sent(), this.isDisposed ? [2] : (e = this._curRankInfo.mode, this.setModeTitle("".concat(HT(e), " ").concat(Mh.getMode(e).name)), this.updateRankListView(), [2])
              }
            }))
          }))
        }, e.prototype.destroy = function(e) {
          if (!this.isDisposed) {
            this.isDisposed = !0;
            for (var i = 0; i < this.rankItems.length; i++) {
              this.rankItems[i].destroy()
            }
            this.rankItems.length = 0, this._rankInfoMap.clear(), this._curRankInfo = null, this.scroller && (this.scroller.destroy(), this.scroller = null), this.prevBtn && (this.prevBtn.destroy(), this.prevBtn = null), this.nextBtn && (this.nextBtn.destroy(), this.nextBtn = null), t.prototype.destroy.call(this, e)
          }
        }, e
      }(PIXI.Container),
      dy = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.selectTab = -1, e.bg = $h(620, 1040), e.addChild(e.bg), e.addTitle("".concat(VT())), e.buttonBg = jh("gamemode_tab_bg.png"), e.buttonBg.x = (e.bg.width - e.buttonBg.width) / 2, e.buttonBg.y = 102, e.addChild(e.buttonBg), e.buttonBg.interactive = !0, e.buttonBg.on(Tu, e.onTapRank, e), e.selecteBg = jh("gamemode_tab_selected.png"), e.selecteBg.x = e.buttonBg.x, e.selecteBg.y = e.buttonBg.y + (e.buttonBg.height - e.selecteBg.height) / 2, e.addChild(e.selecteBg), e.descButton = jh("gamemode_tab_desc.png"), e.descButton.x = e.selecteBg.x + (e.selecteBg.width - e.descButton.width) / 2, e.descButton.y = e.selecteBg.y + (e.selecteBg.height - e.descButton.height) / 2, e.addChild(e.descButton), e.rankButton = jh("gamemode_tab_rank.png"), e.rankButton.x = e.selecteBg.x + e.selecteBg.width + (e.selecteBg.width - e.rankButton.width) / 2, e.rankButton.y = e.selecteBg.y + (e.selecteBg.height - e.rankButton.height) / 2, e.addChild(e.rankButton), e.addCloseButton(), e.descContainer = new oy, e.descContainer.x = (e.bg.width - e.descContainer.width) / 2, e.descContainer.y = 170, e.addChild(e.descContainer), e.rankContainer = new ly, e.rankContainer.x = (e.bg.width - e.rankContainer.width) / 2, e.rankContainer.y = 170, e.addChild(e.rankContainer), e.questBtn = new Ru("gamemode_btn_quest.png"), e.questBtn.x = e.bg.width - e.questBtn.width - 10, e.questBtn.y = 130, e.addChild(e.questBtn.skin), e.questBtn.on(Tu, e.onQuest, e), e
        }
        return i(e, t), e.prototype.onQuest = function() {
          tc.showPanel(ry, {
            msg: "100:00\n22025528\n31310100510100\n4\n5\n6",
            title: ""
          })
        }, e.prototype.updateTabPos = function() {
          var t = this.buttonBg.x + 10,
            e = this.buttonBg.x + this.buttonBg.width - this.selecteBg.width - 10;
          this.selecteBg.x = 1 === this.selectTab ? e : t, this.descButton.x = t + (this.selecteBg.width - this.descButton.width) / 2, this.rankButton.x = e + (this.selecteBg.width - this.rankButton.width) / 2
        }, e.prototype.onTapRank = function() {
          0 === this.selectTab ? this.setCurTab(1) : this.setCurTab(0)
        }, e.prototype.setCurTab = function(t) {
          t !== this.selectTab && (this.selectTab = t, this.updateTabPos(), this.descContainer.visible = 0 == t, this.rankContainer.visible = 1 == t, this.rankContainer.visible ? (qI(""), this.rankContainer.show(this._modeInfo)) : this.descContainer.visible && (this.descContainer.show(this._modeInfo), this.descContainer.x = (this.bg.width - this.descContainer.width) / 2))
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.questBtn && (this.questBtn.destroy(), this.questBtn = null)
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), this.selectTab = -1
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.y < Mu.top + 30 && (this.y = Mu.top + 30), this.buttonBg.interactive = !0, this._modeInfo = WT();
          var i = e && e.hasOwnProperty("tab") ? e.tab : 0;
          this.setCurTab(i)
        }, e.clsName = "GameModeView", e
      }(Qg),
      py = 200,
      fy = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          this.rankText = Xh("", "#FFFFFF", !1, "left", 30), this.rankText.x = 100 - this.rankText.width / 2, this.rankText.y = 5, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 80, this.avatarImage.height = 80, this.avatarImage.x = (py - this.avatarImage.width) / 2, this.avatarImage.y = 50, this.addChild(this.avatarImage), this.nameText = Xh("", "#FFFFFF", !1, "left", 24), this.nameText.x = 100 - this.nameText.width / 2, this.nameText.y = this.avatarImage.y + this.avatarImage.height + 20, this.addChild(this.nameText), this.scoreText = Xh("", "#FFFFFF", !1, "left", 30), this.scoreText.x = 100 - this.scoreText.width / 2, this.scoreText.y = 200, this.addChild(this.scoreText)
        }, e.prototype.setRankInfo = function(t, e) {
          if (t) {
            var i = t.rank,
              n = t.uid == uC.uid;
            this.rankText.style.fill = n ? "#00FF00" : "#FFFFFF", this.nameText.style.fill = n ? "#00FF00" : "#FFFFFF", this.scoreText.style.fill = n ? "#00FF00" : "#FFFFFF", this.rankText.text = i < 0 ? "" : "".concat(i), this.rankText.x = (py - this.rankText.width) / 2, this.nameText.text = hn(t.nick, 8), this.nameText.x = (py - this.nameText.width) / 2, this.scoreText.text = XT(e, t.score), this.scoreText.x = (py - this.scoreText.width) / 2, Bm(this.avatarImage, n ? uC.image : t.image), this.visible = !0
          } else this.visible = !1
        }, e
      }(PIXI.Container),
      gy = function(t) {
        function e() {
          var e = t.call(this, !0, 1) || this;
          return e.lastScore = 0, e.rankItems = [], e._playScore = 0, e.createChildren(), e
        }
        return i(e, t), e.prototype.createChildren = function() {
          var t = this;
          this.centerLayer = new PIXI.Container, this.addChild(this.centerLayer), this.mapNameText = Xh("", "#FFFFFF", !0, "center", 36), this.mapNameText.anchor.set(.5, .5), this.mapNameText.x = 375, this.mapNameText.y = 0, this.centerLayer.addChild(this.mapNameText);
          var e = jh("title_bg.png");
          e.anchor.set(.5, .5), e.x = 375, e.y = 50, this.centerLayer.addChild(e);
          var i = Xh(RI.mode === Jh.FastDrop ? "" : RI.mode === Jh.Blood ? "" : "", "#FFFFFF", !0);
          i.anchor.set(.5, .5), i.x = 375, i.y = e.y, this.centerLayer.addChild(i), this.scoreText = Xh("", 16776960, !0, "left", 40), this.scoreText.y = 250, this.centerLayer.addChild(this.scoreText), this.scoreText.y = e.y + 30, this.centerLayer.addChild(this.scoreText);
          var n, o = _e / Be,
            r = new PIXI.Container;
          if (this.centerLayer.addChild(r), o < .7) {
            n = this.rankBg = jh("rank_bg_new.png"), this.rankBg.interactive = !0, n.width = 651, n.height = 317, n.x = 0, n.y = 0, r.addChild(n), this.rankBg.on(Tu, this._openRankView, this);
            var s = new Ru("button_allrank.png");
            s.x = n.x + n.width - s.width / 2 - 20, s.y = 36, s.interactive = !1, r.addChild(s.skin);
            var a = [{
              x: 14,
              y: 62
            }, {
              x: 225,
              y: 62
            }, {
              x: 436,
              y: 62
            }];
            this.rankItems = [];
            for (var h = 0; h < 3; h++) {
              var c = new fy;
              c.x = a[h].x, c.y = a[h].y, this.rankItems.push(c), r.addChild(c), c.visible = !1
            }
          }
          r.x = n ? (Pe - n.width) / 2 : 375, r.y = this.scoreText.y + this.scoreText.height / 2 + 50, !$hostDef.censor && $hostDef.gamesIcon && (this.tryGame = new Ml, this.tryGame.x = Pe - this.tryGame.width, this.tryGame.y = r.y - this.tryGame.height / 2 - 50, this.centerLayer.addChild(this.tryGame)), this.settingSkin = new rk(1), this.settingSkin.x = (Pe - this.settingSkin.realWidth) / 2, this.settingSkin.y = n ? r.y + n.height + 80 : r.y + 50 + 80, this.centerLayer.addChild(this.settingSkin.skin), this.shareButton = new Ru("button_flaunt.png"), this.shareButton.x = 375, this.shareButton.y = this.settingSkin.y + this.settingSkin.height / 2 + 60, this.shareButton.on("tap", this._onShare, this), this.centerLayer.addChild(this.shareButton.skin);
          this.expertButton = new Ru("button_small_expert.png"), this.expertButton.x = this.shareButton.x - this.shareButton.width / 2 - this.expertButton.width / 2 - 30, this.expertButton.y = this.shareButton.y, this.expertButton.on(Tu, this._tapExpert, this), this.centerLayer.addChild(this.expertButton.skin), this.teamButton = new gm, this.teamButton.x = this.expertButton.x, this.teamButton.y = this.expertButton.y + 150, this.teamButton.on(Tu, this._tabTeam, this), this.centerLayer.addChild(this.teamButton.skin), this.teamButton.visible = $hostDef.team, this.gameModeButton = new ty, this.gameModeButton.x = 375, this.gameModeButton.y = this.shareButton.y + this.shareButton.height / 2 + this.gameModeButton.height / 2 + 20, this.gameModeButton.on(Tu, this._onOpenGameMode, this), this.centerLayer.addChild(this.gameModeButton.skin), this.teamPersonTaskTip = new Zm, this.teamPersonTaskTip.x = this.gameModeButton.x, this.teamPersonTaskTip.y = this.gameModeButton.y - this.gameModeButton.height / 2 - 40, this.centerLayer.addChild(this.teamPersonTaskTip), this.dailyRewardButton = new Ru("icon_dailyreward.png"), this.dailyRewardButton.x = this.shareButton.x + this.shareButton.width / 2 + this.dailyRewardButton.width / 2 + 30, this.dailyRewardButton.y = this.teamButton.y, this.dailyRewardButton.on(Tu, (function() {
            tc.showPanel(ym)
          }), this), this.centerLayer.addChild(this.dailyRewardButton.skin), this.dailyRewardButton.visible = !0;
          var u = Math.min(900, this.centerLayer.height);
          if (this.centerLayer.y = (De - u) / 2, this.centerLayer.y + u > De - 0 - 20 && (this.centerLayer.y = De - 0 - u - 20), this.centerLayer.y < Mu.top && (this.centerLayer.y = Mu.top), Dl.canShow() && (this.leftBanner = new Dl, this.leftBanner.x = -10, this.leftBanner.y = 230, this.addChild(this.leftBanner)), this.programIcon = new El, "function" == typeof wx.getMenuButtonBoundingClientRect) {
            var l = wx.getMenuButtonBoundingClientRect(),
              d = (l.top + l.height / 2) / tc.uiScale,
              p = l.left / tc.uiScale;
            this.programIcon.y = d - this.programIcon.height / 2, this.programIcon.defaultX = this.programIcon.x = p - this.programIcon.width
          } else this.programIcon.defaultX = this.programIcon.x = Pe - this.programIcon.width - 200, this.programIcon.y = 21 + Math.max(0, Mu.top > 0 ? Mu.top - 30 : 0);
          this.addChild(this.programIcon), this.programIcon.visible = !$hostDef.censor && !tn(), this.topBackButton = new Ru("btn_back.png"), this.topBackButton.x = Mu.left + 50, this.topBackButton.y = Mu.top + 50, this.topBackButton.on(Tu, this._onBack, this), this.addChild(this.topBackButton.skin), cn() && (this.clubButton = lC(this.topBackButton.x - 45, this.topBackButton.y + 80), this.addToDestroy = mr((function() {
            tc.openedPopUpPanelCount > 1 ? t.clubButton.hide() : t.clubButton.show()
          })))
        }, e.prototype._tabTeam = function() {
          _w()
        }, e.prototype._onOpenGameMode = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  if (!(t = WT())) return rc(""), [2];
                  if (e = t.type, uC.speGameCnt >= 2) return tc.showPanel(iy), [2];
                  n.label = 1;
                case 1:
                  return n.trys.push([1, 3, , 4]), [4, _I(e)];
                case 2:
                  return n.sent(), [3, 4];
                case 3:
                  return oc(i = n.sent()), DEVELOP && console.warn("e:", i), tc.showPanel(Cw), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype._tapExpert = function() {
          Nm()
        }, e.prototype._openRankView = function() {
          tc.showPanel(dy, {
            tab: 1
          })
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype._onBack = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              return this.close(), RI.cleanGameOver(), tc.showPanel(Cw), [2]
            }))
          }))
        }, e.prototype._onShare = function() {
          if (RI.mode === Jh.Collection) NI("".concat(xs[bs.collectMode], "")),
            function(t) {
              return r(this, void 0, void 0, (function() {
                return s(this, (function(e) {
                  return [2, nu(uh.getRandomInviteWordByType(bs.collectMode), t).then((function(e) {
                    var i = (e && e.conf ? e.conf.desc : "").replace("{score}", t);
                    return Xc(e.conf.type, i, e.image || e.conf.image, null, e.conf.id)
                  }))]
                }))
              }))
            }(this.lastScore).then((function(t) {
              Uc(t) && jI("".concat(xs[bs.collectMode], ""))
            }));
          else if (RI.mode === Jh.FastDrop) RI.isPassed ? (NI("".concat(xs[bs.speedModePassed], "")), function(t) {
            return r(this, void 0, void 0, (function() {
              return s(this, (function(e) {
                return [2, ou(uh.getRandomInviteWordByType(bs.speedModePassed), t).then((function(e) {
                  var i = (e && e.conf ? e.conf.desc : "").replace("{score}", oi(t));
                  return Xc(e.conf.type, i, e.image || e.conf.image, null, e.conf.id)
                }))]
              }))
            }))
          }(Math.floor(1e3 * RI.gameTime)).then((function(t) {
            Uc(t) && jI("".concat(xs[bs.speedModePassed], ""))
          }))) : (NI("".concat(xs[bs.speedModeFailed], "")), function() {
            return r(this, void 0, void 0, (function() {
              var t;
              return s(this, (function(e) {
                return [2, Xc((t = uh.getRandomInviteWordByType(bs.speedModeFailed)).type, t.desc, t.image, null, t.id)]
              }))
            }))
          }().then((function(t) {
            Uc(t) && jI("".concat(xs[bs.speedModeFailed], ""))
          })));
          else if (RI.mode === Jh.Blood) {
            var t = RI.blood > 0 ? bs.hpModeFailed : bs.hpModeNoHpFailed;
            NI("".concat(xs[t], "")),
              function(t, e) {
                return r(this, void 0, void 0, (function() {
                  var i;
                  return s(this, (function(n) {
                    return i = e > 0 ? bs.hpModeFailed : bs.hpModeNoHpFailed, [2, ru(uh.getRandomInviteWordByType(i), t).then((function(e) {
                      var i = (e && e.conf ? e.conf.desc : "").replace("{score}", t);
                      return Xc(e.conf.type, i, e.image || e.conf.image, null, e.conf.id)
                    }))]
                  }))
                }))
              }(RI.maxFloor, RI.blood).then((function(e) {
                Uc(e) && jI("".concat(xs[t], ""))
              }))
          } else if (RI.mode === Jh.Mutation) {
            var e = bs.mutationMode;
            NI("".concat(xs[e], "")),
              function(t) {
                return r(this, void 0, void 0, (function() {
                  return s(this, (function(e) {
                    return [2, su(uh.getRandomInviteWordByType(bs.mutationMode), t).then((function(e) {
                      var i = (e && e.conf ? e.conf.desc : "").replace("{score}", t);
                      return Xc(e.conf.type, i, e.image || e.conf.image, null, e.conf.id)
                    }))]
                  }))
                }))
              }(RI.maxFloor).then((function(t) {
                Uc(t) && jI("".concat(xs[e], ""))
              }))
          } else if (RI.mode === Jh.Punch) {
            var i = bs.punchMode;
            NI("".concat(xs[i], "")),
              function(t) {
                return r(this, void 0, void 0, (function() {
                  return s(this, (function(e) {
                    return [2, au(uh.getRandomInviteWordByType(bs.punchMode), t).then((function(e) {
                      var i = (e && e.conf ? e.conf.desc : "").replace("{score}", t);
                      return Xc(e.conf.type, i, e.image || e.conf.image, null, e.conf.id)
                    }))]
                  }))
                }))
              }(RI.curScore).then((function(t) {
                Uc(t) && jI("".concat(xs[i], ""))
              }))
          } else if (RI.mode === Jh.Power) {
            var n = bs.powerMode;
            NI("".concat(xs[n], "")),
              function(t) {
                return r(this, void 0, void 0, (function() {
                  return s(this, (function(e) {
                    return [2, su(uh.getRandomInviteWordByType(bs.powerMode), t).then((function(e) {
                      var i = (e && e.conf ? e.conf.desc : "").replace("{score}", t);
                      return Xc(e.conf.type, i, e.image || e.conf.image, null, e.conf.id)
                    }))]
                  }))
                }))
              }(RI.curScore).then((function(t) {
                Uc(t) && jI("".concat(xs[n], ""))
              }))
          }
        }, e.prototype.onShow = function(t) {
          this.x = 0, this.y = 0, this.mapNameText.text = "".concat(VT()), this.tryGame && this.tryGame.showGameIcon(), this.gameModeButton.update();
          var e = !1;
          if (uu() && !fm(uC.lastShareFriendTime) && (e = !0), !this.sharefriendIcon && e) {
            var i = !$hostDef.censor && $hostDef.shareFriendGift && !fm(uC.lastShareFriendTime);
            this.sharefriendIcon = jh(i ? "icon_sharefriend1.png" : "icon_sharefriend2.png"), this.sharefriendIcon.interactive = !0, this.sharefriendIcon.anchor.set(.5, .5), this.sharefriendIcon.x = this.shareButton.x + this.shareButton.width / 2 + this.sharefriendIcon.width / 2 + 30, this.sharefriendIcon.y = this.shareButton.y, this.sharefriendIcon.on(Tu, (function() {
              tc.showPanel(xm)
            }), this), this.centerLayer.addChild(this.sharefriendIcon), UI("")
          }
          this.lastScore = t ? t.score : 0, this.playScoreTween(), this.programIcon.visible && this.programIcon.startTween(), this.loadRank(), this.refreshTeamTip(), wx.triggerGC()
        }, e.prototype.refreshTeamTip = function() {
          var t = this;
          this.teamPersonTaskTip.refreshTeamTip(Sa.DailyGame).then((function(e) {
            t.isDisposed || (e ? (t.gameModeButton.y = t.shareButton.y + t.shareButton.height / 2 + t.gameModeButton.height / 2 + 50, t.teamPersonTaskTip.y = t.gameModeButton.y - t.gameModeButton.height / 2 - 40) : t.gameModeButton.y = t.shareButton.y + t.shareButton.height / 2 + t.gameModeButton.height / 2 + 20)
          }))
        }, e.prototype.loadRank = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n, o, r, a, h;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  return [4, JT(t = qT(RI.mode).getTime(), 0, 1, !0)];
                case 1:
                  return !(e = s.sent()) || this.isDisposed ? [2] : (i = e.selfRank, n = e.selfScore, -1 == i || i > 100 ? [4, JT(t, 99, 1, !1)] : [3, 3]);
                case 2:
                  return r = s.sent(), o = r.list, [3, 5];
                case 3:
                  return [4, JT(t, Math.max(0, i - 2), 3, !1)];
                case 4:
                  r = s.sent(), o = r.list, s.label = 5;
                case 5:
                  if (this.isDisposed) return [2];
                  for (a = [], h = 0; h < o.length; h++) a.push(o[h]);
                  for (a.length < 3 && (-1 == i || i > 100) && a.push({
                      uid: uC.uid,
                      nick: uC.nick,
                      image: uC.image,
                      rank: i,
                      score: n
                    }), a.length >= 3 && (a.length = 3), h = 0; h < this.rankItems.length; h++) this.rankItems[h].setRankInfo(a[h], RI.mode);
                  return [2]
              }
            }))
          }))
        }, e.prototype.playScoreTween = function() {
          this._playScore = 0;
          var t = this.scoreText;
          if (t.text = XT(RI.mode, this._playScore), t.x = (Pe - t.width) / 2, this.lastScore > this._playScore) {
            var e = this;
            new TWEEN.Tween(this).to({
              _playScore: this.lastScore
            }, 1e3).onUpdate((function(i) {
              if (e.isDisposed) TWEEN.killTweensOf(e);
              else {
                var n = Math.floor(e._playScore);
                t.text = XT(RI.mode, n), t.x = (Pe - t.width) / 2
              }
            })).easing(TWEEN.Easing.Circular.Out).start()
          }
        }, e.prototype.onHide = function() {
          TWEEN.killTweensOf(this), this.tryGame && this.tryGame.stopGameIconTween(), this.programIcon.stopTween()
        }, e.prototype.onDestroy = function() {
          this.rankBg && this.rankBg.off(Tu, this._openRankView, this), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.gameModeButton && (this.gameModeButton.destroy(), this.gameModeButton = null), this.settingSkin && (this.settingSkin.destroy(), this.settingSkin = null), this.tryGame && (this.tryGame.destroy(), this.tryGame = null), this.leftBanner && (this.leftBanner.destroy(), this.leftBanner = null), this.topBackButton && (this.topBackButton.destroy(), this.topBackButton = null), this.dailyRewardButton && (this.dailyRewardButton.destroy(), this.dailyRewardButton = null), this.clubButton && (this.clubButton.destroy(), this.clubButton = null), this.expertButton && (this.expertButton.destroy(), this.expertButton = null), this.teamButton && (this.teamButton.destroy(), this.teamButton = null), this.teamPersonTaskTip && (this.teamPersonTaskTip.destroy(), this.teamPersonTaskTip = null), this.scoreText = null
        }, e.clsName = "GameModeGameOverView", e
      }(Eu),
      my = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.bg = Hh(650, 720), e.addChild(e.bg);
          var i = Wh("dlc/ui/friendInteraction_info.png");
          return i.width = 551, i.height = 542, i.x = (e.bg.width - i.width) / 2, i.y = 50, e.addChild(i), e.addCloseButton(), e.okButton = new Ru("button_ok.png"), e.okButton.x = e.bg.width / 2, e.okButton.y = e.bg.y + e.bg.height - 70, e.okButton.on(Iu, e._tapOK, e), e.addSkin(e.okButton), e
        }
        return i(e, t), e.prototype._tapOK = function() {
          void 0 !== wx.openSetting && wx.openSetting({
            success: function(t) {
              console.log(t.authSetting), t && Iy(t.authSetting)
            }
          }), this.close()
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.okButton && (this.okButton.destroy(), this.okButton = null)
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this)
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this)
        }, e.clsName = "FriendInteractionView", e
      }(Qg),
      yy = 0,
      vy = function(t) {
        function e(e, i, n) {
          var o = t.call(this, e) || this;
          return o.width = 618, o.height = 910, o.screenX = 0, o.screenY = 0, o.shareTicket = null, o._dirty = !0, o.screenX = i.x, o.screenY = i.y, o.shareTicket = n, o.frequency = zi ? 2 : 1, o.frame = 0, Date.now() - yy > 12e4 && (yy = Date.now(), wx.showToast({
            title: "...",
            icon: "loading",
            duration: 500
          })), o
        }
        return i(e, t), e.prototype.update = function() {
          this._dirty ? (this._dirty = !1, Tc && (Tc.postMessage(this.getMessage()), this.updateTexture())) : t.prototype.update.call(this)
        }, e.prototype.getMessage = function(t) {
          if (this.shareTicket) return {
            type: cc,
            shareTicket: this.shareTicket,
            screenX: this.screenX,
            screenY: this.screenY
          };
          var e = void 0,
            i = Date.now();
          return i - yy > 12e4 ? (e = !0, DEVELOP && console.log("", i - yy), yy = i) : e = !1, {
            type: hc,
            screenX: this.screenX,
            screenY: this.screenY,
            refresh: e
          }
        }, e
      }(vm),
      by = 0,
      wy = function(t) {
        function e(e, i, n) {
          var o = t.call(this, e) || this;
          return o.width = 618, o.height = 820, o.screenX = 0, o.screenY = 0, o.shareTicket = null, o._dirty = !0, o.screenX = i.x, o.screenY = i.y, o.shareTicket = n, o.frequency = zi ? 2 : 1, o.frame = 0, Date.now() - by > 12e4 && (by = Date.now(), wx.showToast({
            title: "...",
            icon: "loading",
            duration: 300
          })), o
        }
        return i(e, t), e.prototype.update = function() {
          this._dirty ? (this._dirty = !1, Tc && (Tc.postMessage(this.getMessage()), this.updateTexture())) : t.prototype.update.call(this)
        }, e.prototype.getMessage = function(t) {
          return this.shareTicket ? {
            type: bc,
            shareTicket: this.shareTicket,
            screenX: this.screenX,
            screenY: this.screenY
          } : {
            type: vc,
            screenX: this.screenX,
            screenY: this.screenY
          }
        }, e
      }(vm),
      xy = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.rankSprite = null, e.selectRank = -1, e.relayIconLayer = null, e.isRefreshRelay = !1, e.bg = Hh(650, 1010), e.addChild(e.bg), e.buttonBg = jh("button_bg2.png"), e.buttonBg.x = 23, e.buttonBg.y = 22, e.addChild(e.buttonBg), e.buttonBg.interactive = !0, e.buttonBg.on(Tu, e.onTapRank, e), e.selecteBg = jh("button_bg_rank.png"), e.selecteBg.x = 29, e.selecteBg.y = 27, e.addChild(e.selecteBg), e.singleButton = jh("label_singlerank.png"), e.singleButton.x = 54, e.singleButton.y = 36, e.addChild(e.singleButton), e.relayButton = jh("label_relayrank.png"), e.relayButton.x = 273, e.relayButton.y = 36, e.addChild(e.relayButton), e.relayIconLayer = new PIXI.Container;
          var i = jh("icon_sponsor.png");
          return i.x = 6, i.y = 0, e.relayIconLayer.addChild(i), (i = jh("icon_relay.png")).x = 185, i.y = 0, e.relayIconLayer.addChild(i), (i = jh("icon_score.png")).x = 390, i.y = 0, e.relayIconLayer.addChild(i), e.relayIconLayer.y = 92, e.relayIconLayer.x = 130, e.addChild(e.relayIconLayer), e.rankSprite = new PIXI.Sprite(Cc), e.rankSprite.x = 16, e.rankSprite.y = 90, e.addChild(e.rankSprite), e.addCloseButton(), e.groupRankButton = new Ru("button_group_rank.png"), e.groupRankButton.x = e.bg.width / 2, e.groupRankButton.y = e.bg.y + e.bg.height + 70, e.groupRankButton.on(Tu, e._tapShare, e), e.addSkin(e.groupRankButton), e
        }
        return i(e, t), e.prototype.onTapRank = function() {
          0 === this.selectRank ? this.setRank(1) : this.setRank(0)
        }, e.prototype.setRank = function(t) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return t === this.selectRank ? [2] : (this.selectRank = t, this.selecteBg.x = 0 === t ? 29 : 247, this.rankSprite.y = 0 === t ? 90 : 176, this.relayIconLayer.visible = 1 === this.selectRank, this._openData && (Ec(this._openData), this._openData = null), 0 !== this.selectRank ? [3, 1] : (this._openData = new vy(this.rankSprite, this.rankSprite.toGlobal({
                    x: 0,
                    y: 0
                  })), [3, 4]));
                case 1:
                  return this.isRefreshRelay ? [3, 3] : [4, Rg.refreshMyBestRelay()];
                case 2:
                  e.sent(), Rc(uC.bestRelayFirst, uC.bestRelaySec), this.isRefreshRelay = !0, e.label = 3;
                case 3:
                  if (this.isDisposed) return [2];
                  this._openData = new wy(this.rankSprite, this.rankSprite.toGlobal({
                    x: 0,
                    y: 0
                  })), e.label = 4;
                case 4:
                  return Fc(this._openData), [2]
              }
            }))
          }))
        }, e.prototype._tapShare = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return $hostDef.censor || !$hostDef.showGroupText ? [3, 2] : (rc(""), [4, lu(500)]);
                case 1:
                  t.sent(), t.label = 2;
                case 2:
                  return NI(""), qc().then((function(t) {
                    Uc(t) && jI("")
                  })), [2]
              }
            }))
          }))
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.groupRankButton && (this.groupRankButton.destroy(), this.groupRankButton = null)
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), this.selectRank = -1, this._openData && (Ec(this._openData), this._openData = null)
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.y < Mu.top + 30 && (this.y = Mu.top + 30), this.isRefreshRelay = !1, this.buttonBg.interactive = !0, this.setRank(0)
        }, e.clsName = "FriendRankView", e
      }(Qg),
      Ty = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.rankSprite = null, e.selectRank = -1, e.relayIconLayer = null, e.isRefreshRelay = !1, e.bg = $h(650, 1010), e.bg.interactive = !0, e.addChild(e.bg), e.buttonBg = jh("button_bg2.png"), e.buttonBg.x = 23, e.buttonBg.y = 22, e.addChild(e.buttonBg), e.buttonBg.interactive = !0, e.buttonBg.on(Tu, e.onTapRank, e), e.selecteBg = jh("button_bg_rank.png"), e.selecteBg.x = 29, e.selecteBg.y = 27, e.addChild(e.selecteBg);
          var i = jh("label_singlerank.png");
          i.x = 54, i.y = 36, e.addChild(i);
          var n = jh("label_relayrank.png");
          n.x = 273, n.y = 36, e.addChild(n), e.relayIconLayer = new PIXI.Container;
          var o = jh("icon_sponsor.png");
          return o.x = 6, o.y = 0, e.relayIconLayer.addChild(o), (o = jh("icon_relay.png")).x = 185, o.y = 0, e.relayIconLayer.addChild(o), (o = jh("icon_score.png")).x = 390, o.y = 0, e.relayIconLayer.addChild(o), e.relayIconLayer.y = 92, e.relayIconLayer.x = 130, e.addChild(e.relayIconLayer), e.rankSprite = new PIXI.Sprite(Cc), e.rankSprite.x = 16, e.rankSprite.y = 90, e.addChild(e.rankSprite), e.addCloseButton(), e
        }
        return i(e, t), e.prototype.onTapRank = function() {
          0 === this.selectRank ? this.setRank(1) : this.setRank(0)
        }, e.prototype.setRank = function(t) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return t === this.selectRank ? [2] : (this.selectRank = t, this.selecteBg.x = 0 === t ? 29 : 247, this.rankSprite.y = 0 === t ? 90 : 176, this.relayIconLayer.visible = 1 === this.selectRank, this._openData && (Ec(this._openData), this._openData = null), 0 !== this.selectRank ? [3, 1] : (this._openData = new vy(this.rankSprite, this.rankSprite.toGlobal({
                    x: 0,
                    y: 0
                  }), this.shareTicket), [3, 4]));
                case 1:
                  return this.isRefreshRelay ? [3, 3] : [4, Rg.refreshMyBestRelay()];
                case 2:
                  e.sent(), Rc(uC.bestRelayFirst, uC.bestRelaySec), this.isRefreshRelay = !0, e.label = 3;
                case 3:
                  if (this.isDisposed) return [2];
                  this._openData = new wy(this.rankSprite, this.rankSprite.toGlobal({
                    x: 0,
                    y: 0
                  }), this.shareTicket), e.label = 4;
                case 4:
                  return Fc(this._openData), [2]
              }
            }))
          }))
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this)
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), this.selectRank = -1, this._openData && (Ec(this._openData), this._openData = null)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.shareTicket = e, this.isRefreshRelay = !1, this.buttonBg.interactive = !0, this.setRank(0)
        }, e.clsName = "GroupRankView", e
      }(Qg);
    ! function(t) {
      t[t.None = 0] = "None", t[t.Reject = 1] = "Reject", t[t.Accept = 2] = "Accept"
    }(Qm || (Qm = {}));
    var ky = Qm.None;

    function Iy(t) {
      t && (ky = t.hasOwnProperty("scope.WxFriendInteraction") ? t["scope.WxFriendInteraction"] ? Qm.Accept : Qm.Reject : Qm.None)
    }

    function Cy() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          return [2, new Promise((function(t) {
            if (void 0 === wx.getSetting) return ky = Qm.None, void t(ky);
            ky !== Qm.Accept ? wx.getSetting({
              success: function(e) {
                e && Iy(e.authSetting), t(ky)
              },
              fail: function(e) {
                ky = Qm.Reject, t(ky)
              }
            }) : t(ky)
          }))]
        }))
      }))
    }

    function _y() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return kc ? tc.hasPanel("FriendRankView") ? [2] : [4, Cy()] : (ec("", _c), [2]);
            case 1:
              return t.sent() === Qm.Reject ? (tc.showPanel(my), [2]) : (tc.showPanel(xy), [2])
          }
        }))
      }))
    }
    var By = function() {
        function t() {}
        return t.prototype.start = function() {
          this.stop(), this.heartBeatIntervalId = window.setInterval(this.sendHeartBeat.bind(this), 1e4)
        }, t.prototype.stop = function() {
          this.heartBeatIntervalId && (clearInterval(this.heartBeatIntervalId), this.heartBeatIntervalId = void 0)
        }, t.prototype.sendHeartBeat = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  if (ws.isOffline || !ws.isShow) return [2];
                  e.label = 1;
                case 1:
                  return e.trys.push([1, 3, , 4]), [4, kP({})];
                case 2:
                  return (t = e.sent()) && (t.syncData && uC.syncData(t.syncData), Je.syncServerTime(t.now)), [3, 4];
                case 3:
                  return e.sent(), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, t
      }(),
      Sy = new By,
      Py = 0;

    function Dy() {
      return r(this, void 0, void 0, (function() {
        var t, e, i, n, o;
        return s(this, (function(r) {
          return $hostDef.coinEnable ? (t = 0, e = wx.getStorageSync("lastCoinTime"), i = e && e.time ? e.time : 0, Py = Je.curTime, n = new Date(i), o = new Date(Je.curTime), ti(n, o) || (uC.coin < 3 && (t = 3 - uC.coin), Py = Je.curTime), Py > 0 && (s = Py, wx.setStorage({
            key: "lastCoinTime",
            data: {
              time: s
            }
          })), t > 0 && Fy(t).then((function() {})), [2]) : [2];
          var s
        }))
      }))
    }

    function My(t, e, i) {
      t > 0 && ("packet" === i ? function(t, e) {
        r(this, void 0, void 0, (function() {
          var i;
          return s(this, (function(n) {
            switch (n.label) {
              case 0:
                if (Math.floor(Je.curTime / 1e3) - e > $hostDef.packetTime) return rc(""), [2];
                if (uC.coin >= 5) return rc(""), [2];
                n.label = 1;
              case 1:
                return n.trys.push([1, 3, , 4]), [4, RP({
                  uid: t,
                  time: e
                })];
              case 2:
                if ((i = n.sent()).syncData) switch (uC.syncData(i.syncData), i.result) {
                  case 0:
                    rc("", 1e3);
                    break;
                  case 1:
                    rc("");
                    break;
                  case 2:
                    rc("");
                    break;
                  case 3:
                    rc("")
                }
                return [2, i];
              case 3:
                return n.sent(), [3, 4];
              case 4:
                return [2]
            }
          }))
        }))
      }(t, Math.floor(e / 1e3)) : function(t, e) {
        r(this, void 0, void 0, (function() {
          var i;
          return s(this, (function(n) {
            switch (n.label) {
              case 0:
                if (uC.uid === t) return [2];
                DEVELOP && console.log("---sendHelpAddCoin----" + t), n.label = 1;
              case 1:
                return n.trys.push([1, 3, , 4]), [4, MP({
                  targetUid: t,
                  time: e
                })];
              case 2:
                return (i = n.sent()).syncData && uC.syncData(i.syncData), [2, i];
              case 3:
                return n.sent(), [3, 4];
              case 4:
                return [2]
            }
          }))
        }))
      }(t, Math.floor(e / 1e3)))
    }

    function Fy(t) {
      return r(this, void 0, void 0, (function() {
        var e, i;
        return s(this, (function(n) {
          switch (n.label) {
            case 0:
              return n.trys.push([0, 2, , 3]), [4, FP({
                count: t
              })];
            case 1:
              return (e = n.sent()).syncData && (i = uC.coin, uC.syncData(e.syncData), uC.coin > i && rc("", 1e3)), [2, e];
            case 2:
              return n.sent(), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function Ey() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, EP({})];
            case 1:
              return (t = e.sent()).syncData && uC.syncData(t.syncData), [2, t];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }
    var Ly = -1,
      Oy = -1;

    function Ry() {
      if (Oy < 1) return !1;
      if (uC.coin >= 5) return !1;
      if (-1 != Gy && ti(new Date(Gy), new Date(Je.curTime))) return !1;
      var t = function(t) {
        var e = 0;
        1 == t ? e = lh.addItemRate1 : 2 == t ? e = lh.addItemRate2 : 3 == t ? e = lh.addItemRate3 : 4 == t ? e = lh.addItemRate4 : 5 == t ? e = lh.addItemRate5 : 6 == t ? e = lh.addItemRate6 : 7 == t ? e = lh.addItemRate7 : t >= 8 && (e = lh.addItemRate8);
        return e / 100
      }(Oy) > Math.random();
      return DEVELOP && console.log("".concat(Oy, ",").concat(t ? "" : "")), t
    }
    var Gy = -1;
    var Ay = function() {
      function t() {
        this.isFirstLogin = !0
      }
      return t.prototype.checkQuery = function(t, e) {
        return r(this, arguments, void 0, (function(t, e, i) {
          var n, o;
          return void 0 === i && (i = !0), s(this, (function(r) {
            switch (r.label) {
              case 0:
                return t ? (DEVELOP && console.log("---checkQuery---", t), n = t.time ? Number(t.time) : 0, My(o = t.fuid ? Number(t.fuid) : 0, n, t.type), function(t) {
                  if (!$hostDef.canMp) return;
                  if (t.from && ("mp" === t.from || "mao_mp" === t.from)) try {
                    DP({
                      type: 1
                    }).then((function(t) {
                      t && uC.syncData(t.syncData)
                    }))
                  } catch (t) {}
                }(t), this.checkGroupRank(e, t), [4, jg.checkRaceQuery(t, o, i)]) : [2];
              case 1:
                return r.sent(), [2]
            }
          }))
        }))
      }, t.prototype.checkGroupRank = function(t, e) {
        if (t && e.fuid) {
          if (this.isFirstLogin) try {
            "" !== wx.getStorageSync("firstLoginTime") ? this.isFirstLogin = !1 : (this.isFirstLogin = !0, wx.setStorage({
              key: "firstLoginTime",
              data: Je.curTime
            }))
          } catch (t) {}
          this.isFirstLogin || !kc || "packet" === e.type || RI.isGaming && !tc.hasPanel("MenuView") || function(t) {
            r(this, void 0, void 0, (function() {
              return s(this, (function(e) {
                switch (e.label) {
                  case 0:
                    return kc ? tc.hasPanel("GroupRankView") ? [2] : [4, Cy()] : (ec("", ""), [2]);
                  case 1:
                    return e.sent() === Qm.Reject ? (tc.showPanel(my), [2]) : (tc.showPanel(Ty, t), [2])
                }
              }))
            }))
          }(t)
        }
      }, t
    }();
    var Ny = new Ay;

    function jy() {
      $y.setup(), wx.onShow((function(t) {
        console.log("onShow:", JSON.stringify(t)), ws.isShow = !0, ws.shareTicket = t.shareTicket;
        var e, i = ws.query = t.query || {},
          n = ws.scene = t.scene;
        if (i.wxgamechallengeid && (en() || ec("", "", "")), e = i.linkKey, x.setLinkKey(e), Vy().then((function() {
            i.shareSource && function(t) {
              DEVELOP && GI.info("".concat(xs[t], "-").concat(""));
              X.logEvent("".concat(xs[t], "-").concat("")), uC.isNewPlayer && X.logEvent("".concat(xs[t], "-").concat(""))
            }(Number(i.shareSource)), i.shareId && function(t) {
              0;
              X.logEvent("-".concat(t)), uC.isNewPlayer && X.logEvent("-".concat(t))
            }(i.shareId);
            var t = i.fuid ? Number(i.fuid) : 0;
            1155 === Number(n) && UI(""), t === uC.uid && Uy(n)
          })), uC.uid && uC.token) {
          var o = i.fuid ? Number(i.fuid) : 0;
          (i.fuid || i.from) && (DEVELOP && console.log("token:".concat(uC.token, ",uid:").concat(uC.uid)), function(t, e, i) {
            return r(this, void 0, void 0, (function() {
              var n;
              return s(this, (function(o) {
                switch (o.label) {
                  case 0:
                    return o.trys.push([0, 2, , 3]), [4, CP({
                      token: t,
                      uid: e,
                      fuid: i
                    })];
                  case 1:
                    return (n = o.sent()).userInfo && uC.syncData(n.userInfo), Je.syncServerTime(n.now), n.hasMinigameGifts && pC().catch((function(t) {})), [3, 3];
                  case 2:
                    return o.sent(), [3, 3];
                  case 3:
                    return [2]
                }
              }))
            }))
          }(uC.token, uC.uid, o).then((function(t) {})));
          var a = void 0;
          t.shareTicket && !RI.isGaming && (a = t.shareTicket), o === uC.uid && Uy(n), Ny.checkQuery(i, a, !0), Sy.start()
        }
      })), wx.onHide((function() {
        ws.isShow = !1, DEVELOP && console.log("onHide"), Sy.stop()
      })), wx.onError((function(t) {
        DEVELOP && console.log("onWxError:", t), t.message && t.message.indexOf("appServiceSDKScriptError") >= 0 || rc("" + t.message)
      }))
    }

    function Vy() {
      return ws.gameInitialized ? Promise.resolve() : Sr((function() {
        return ws.gameInitialized
      }))
    }

    function Uy(t) {
      if (1155 === Number(t)) try {
        DP({
          type: 2
        }).then((function(t) {
          t && (t.result > 0 && UI(""), uC.syncData(t.syncData), t.gift && t.gift.gold > 0 && rc("+" + t.gift.gold, 1e3))
        }))
      } catch (t) {}
    }
    var Wy = void 0 !== wx.getRankManager;

    function qy() {
      return !(!an(3, 13, 1) || !Wy) && (en() && $hostDef.wxChallenge)
    }
    var Hy = function() {
        function t() {
          this._isInWxChallenge = !1, this._retrySendEndTimeOut = null, this.lastAutoCreateChallengeTime = -1, this.todayAutoCreateCount = -1, this._createScore = 0, this._createLimit = 0
        }
        return t.prototype.setup = function() {
          var t = this;
          an(3, 13, 1) && Wy && (this.readAutoCreateCount(), this.rankManager = wx.getRankManager(), this.rankManager.onChallengeStart((function(e) {
            if (RI.isGaming) return rc("", 1e3), void t.abortWxChallenge();
            t._isInWxChallenge = !0, t._joinKey = e.scoreKey, console.log("" + JSON.stringify(e)), sc("..."), Vy().then((function() {
              return r(t, void 0, void 0, (function() {
                var t;
                return s(this, (function(e) {
                  switch (e.label) {
                    case 0:
                      ac(), rw(), e.label = 1;
                    case 1:
                      return e.trys.push([1, 3, , 4]), [4, _I(Jh.Classics)];
                    case 2:
                      return e.sent(),
                        function() {
                          0;
                          X.logEvent("-")
                        }(), [3, 4];
                    case 3:
                      return t = e.sent(), this._isInWxChallenge = !1, oc(t), DEVELOP && console.warn("e:", t), tc.showPanel(Cw), [3, 4];
                    case 4:
                      return [2]
                  }
                }))
              }))
            }))
          })), wx.onOfficialComponentsInfoChange((function(t) {
            var e, i = null === (e = t.challengeRewardsComponentInfo) || void 0 === e ? void 0 : e.receiveDetail;
            if (i) {
              switch (i.awardResult) {
                case 1:
                  console.log(""), rc("");
                  break;
                case 2:
                  console.log(""), rc("");
                  break;
                case 3:
                  console.log(""), rc("")
              }
              var n = !1;
              if (!0 === i.receivedRareReward && (console.log(""), rc(""), n = !0), i.userSourceList.forEach((function(t, e) {
                  var i;
                  t.source && (console.log("".concat(e + 1, ":")), null === (i = t.source.propList) || void 0 === i || i.forEach((function(t) {
                    console.log("".concat(t.propName, " x").concat(t.propNum))
                  })))
                })), 1 === i.awardResult) ! function(t) {
                0;
                X.logEvent("-", {
                  type: t
                })
              }(n ? LI.rare : LI.normal)
            }
          })), RI.addListener(Hg, (function() {
            t.clearSendEndTimeOut()
          }), this))
        }, t.prototype.setCreateCondition = function(t, e) {
          this._createKey = t, this._createLimit = e, console.log("", t, e)
        }, Object.defineProperty(t.prototype, "isInWxChallenge", {
          get: function() {
            return this._isInWxChallenge
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "createKey", {
          get: function() {
            return this._createKey
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.clearSendEndTimeOut = function() {
          this._retrySendEndTimeOut && (clearTimeout(this._retrySendEndTimeOut), this._retrySendEndTimeOut = null)
        }, t.prototype.updateScore = function(t, e) {
          var i, n = this;
          e ? (i = this._joinKey, console.log("" + t)) : (i = this._createKey, console.log("" + t));
          var o = !1;
          return new Promise((function(e, r) {
            n.rankManager.update({
              scoreKey: i,
              score: t,
              success: function(t) {
                o || (o = !0, console.log("" + JSON.stringify(t)), e())
              },
              fail: function(t) {
                o = !1, console.log("" + JSON.stringify(t)), r(t)
              }
            })
          }))
        }, t.prototype.resetWxChallenge = function() {
          this._createScore = 0, this._createKey = "", this._createLimit = 0
        }, t.prototype.createWxChallenge = function(t) {
          var e = this;
          qy() && (t < this._createLimit || (this._createKey === $hostDef.wxChallengeRewardScoreKey && this.isOfficeEnd ? this.showOfficeEndTip() : this._createScore !== t ? this.updateScore(t, !1).then((function() {
            e._createScore = t, e.internalCreateChallenge(t)
          })) : this.internalCreateChallenge(t)))
        }, t.prototype.internalCreateChallenge = function(t) {
          this.rankManager.createChallenge({
            scoreKey: this._createKey,
            success: function(e) {
              ! function(t) {
                0;
                X.logEvent("-", {
                  score: t
                })
              }(t), console.log("" + JSON.stringify(e))
            },
            fail: function(t) {
              console.log("")
            }
          })
        }, t.prototype.abortWxChallenge = function() {
          qy() && this.rankManager.abort({
            success: function(t) {
              console.log("" + JSON.stringify(t))
            },
            fail: function(t) {
              console.log("" + JSON.stringify(t))
            }
          })
        }, t.prototype.middleUpdateScore = function(t) {
          qy() && this.isInWxChallenge && this.rankManager.middleUpdate({
            scoreKey: this._joinKey,
            score: t,
            success: function(t) {},
            fail: function(t) {}
          })
        }, t.prototype.sendEndWxChallenge = function(t) {
          var e = this;
          qy() && (this.clearSendEndTimeOut(), this._isInWxChallenge = !1, this.updateScore(t, !0).then((function() {
            ! function(t) {
              0;
              X.logEvent("-", {
                score: t
              })
            }(t)
          })).catch((function() {
            RI.isGaming || (console.log("..."), e._retrySendEndTimeOut = setTimeout((function() {
              e.sendEndWxChallenge(t)
            }), 1e3))
          })))
        }, t.prototype.onFightEnd = function() {
          RI.mode === Jh.Classics && ($y.isInWxChallenge ? $y.sendEndWxChallenge(RI.curScore) : $y.canAutoCreateChallenge(RI.curScore) && $y.autoCreateChallenge(RI.curScore))
        }, t.prototype.tryCreateChallenge = function(t) {
          if (t < this._createLimit) return QI(""), void(this._createKey === $hostDef.wxChallengeRewardScoreKey ? rc("".concat(this._createLimit, ""), 600) : rc("".concat(this._createLimit, ""), 600));
          $y.isInWxChallenge ? rc("") : $y.createWxChallenge(RI.curScore)
        }, t.prototype.readAutoCreateCount = function() {
          this.lastAutoCreateChallengeTime < 0 && (this.lastAutoCreateChallengeTime = wx.getStorageSync("lastAutoCreateChallengeTime"), this.lastAutoCreateChallengeTime && !isNaN(this.lastAutoCreateChallengeTime) || (this.lastAutoCreateChallengeTime = Je.curTime)), this.todayAutoCreateCount < 0 && (this.todayAutoCreateCount = wx.getStorageSync("todayAutoCreateCount"), this.todayAutoCreateCount && !isNaN(this.todayAutoCreateCount) || (this.todayAutoCreateCount = 0)), gt(new Date(this.lastAutoCreateChallengeTime), new Date(Je.curTime)) || (this.todayAutoCreateCount = 0)
        }, t.prototype.autoCreateChallenge = function(t) {
          gt(new Date(this.lastAutoCreateChallengeTime), new Date(Je.curTime)) || (this.todayAutoCreateCount = 0), this.lastAutoCreateChallengeTime = Je.curTime, this.todayAutoCreateCount++, DEVELOP && console.log("" + this.todayAutoCreateCount), DEVELOP && console.log("" + this.lastAutoCreateChallengeTime), Nh("todayAutoCreateCount", this.todayAutoCreateCount), Nh("lastAutoCreateChallengeTime", this.lastAutoCreateChallengeTime), QI(""), this.createWxChallenge(t)
        }, t.prototype.canAutoCreateChallenge = function(t) {
          return !!qy() && (!(t < this._createLimit) && (this._createKey === $hostDef.wxChallengeRewardScoreKey || (gt(new Date(this.lastAutoCreateChallengeTime), new Date(Je.curTime)) || (this.todayAutoCreateCount = 0), this.todayAutoCreateCount < $hostDef.autoCreateChallengeCount)))
        }, Object.defineProperty(t.prototype, "isOfficeEnd", {
          get: function() {
            if (!qy() || !$hostDef.wxChallenge || !$hostDef.wxChallengeReward) return !0;
            var t = new Date("2026-03-03T23:59:00+08:00").getTime();
            return Je.curTime >= t
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.showOfficeEndTip = function() {
          rc("2026332359", 1e3)
        }, t
      }(),
      $y = new Hy,
      Xy = function(t) {
        function e(e) {
          var i = t.call(this, e) || this;
          return i.width = 630, i.height = 248, i.frequency = 10, i.frame = 0, i
        }
        return i(e, t), e.prototype.update = function() {
          ++this.frame >= this.frequency && (this.frame = 0, this.frequency += 30, this.updateTexture())
        }, e.prototype.restore = function() {
          t.prototype.restore.call(this), this.frame = this.frequency - 3
        }, e.prototype.getMessage = function(t) {
          return {
            type: uc,
            refresh: !t
          }
        }, e
      }(vm),
      Yy = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.container = null, e.container = new PIXI.Container, e.container.interactive = !0, e.light = jh("light.png"), e.light.anchor.set(.5, .5), e.container.addChild(e.light), e.icon = jh("icon_packet.png"), e.icon.anchor.set(.5, .5), e.icon.x = 0, e.icon.y = 10, e.container.addChild(e.icon), e.container.on(Tu, e.onTapDown, e), e.container.on(ku, e.onTapUp, e), e.container.on(Cu, e.onTapUp, e), e.container.on(_u, e.onTapUp, e), e.container.on(Bu, e.onTapUp, e), e
        }
        return i(e, t), e.prototype.showTween = function() {
          TWEEN.killTweensOf(this.light), this.light.rotation = 0, new TWEEN.Tween(this.light).to({
            rotation: 2 * Math.PI
          }, 3e3).easing(TWEEN.Easing.Linear.None).repeat(1 / 0).start()
        }, e.prototype.hideTween = function() {
          TWEEN.killTweensOf(this.light)
        }, e.prototype.onTapUp = function() {
          this._destroyed || this.container.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this._destroyed || this.container.scale.set(.9, .9)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.hideTween(), this.container && this.container.removeAllListeners(), t.prototype.destroy.call(this), this.container = null
        }, e
      }(Lu),
      zy = function(t) {
        function e(e, i, n, o) {
          void 0 === o && (o = !0);
          var r = t.call(this) || this;
          return void 0 === o && (o = !0), r._center = o, r.sprite = new PIXI.Sprite, i && n && (r.sprite.width = i, r.sprite.height = n), r.sprite.interactive = !0, r._width = r.sprite.width, r._height = r.sprite.height, o && r.sprite.anchor.set(.5, .5), e.startsWith("res/") || e.startsWith("".concat(ci, "/")) || e.startsWith("".concat(ui, "/")) ? r.sprite.texture = PIXI.Texture.fromImage(e) : function(t) {
            return Pi(t)
          }(e).then((function(t) {
            r.sprite && (r.sprite.texture = PIXI.Texture.fromImage(t))
          })), r.sprite.on(Tu, r.onTapDown, r), r.sprite.on(ku, r.onTapUp, r), r.sprite.on(Cu, r.onTapUp, r), r.sprite.on(_u, r.onTapUp, r), r.sprite.on(Bu, r.onTapUp, r), r
        }
        return i(e, t), Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.sprite
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onTapUp = function() {
          this.setScale(1)
        }, e.prototype.onTapDown = function() {
          this.setScale(.9)
        }, e.prototype.destroy = function() {
          this.sprite && (this.sprite.removeAllListeners(), this.sprite.destroy({
            texture: !0,
            baseTexture: !0
          }), this.sprite = null), t.prototype.destroy.call(this)
        }, e
      }(Ou),
      Ky = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.container = new PIXI.Container, e.container.interactive = !0, e.bg = jh("icon_limitgift.png"), e.bg.anchor.set(0, 0), e.container.addChild(e.bg), e.cdText = Xh("12:00:00", "#FFFFFF", !0, "left", 28), e.cdText.x = (e.bg.width - e.cdText.width) / 2, e.cdText.y = -e.cdText.height / 2, e.container.addChild(e.cdText), e.container.on(Tu, e.onTapDown, e), e.container.on(ku, e.onTapUp, e), e.container.on(Cu, e.onTapUp, e), e.container.on(_u, e.onTapUp, e), e.container.on(Bu, e.onTapUp, e), e
        }
        return i(e, t), e.prototype.checkLeftTime = function() {
          var t = Tg();
          this.stopTick(), t > 0 && !this.intervalId && (this.intervalId = setInterval(this.onTick.bind(this), 200)), this.onTick()
        }, e.prototype.onTick = function() {
          var t = Tg();
          this.visible = wg(), this.cdText.visible = t > 0, this.cdText.text = ni(t), this.cdText.x = (this.bg.width - this.cdText.width) / 2, this.visible || this.stopTick()
        }, e.prototype.stopTick = function() {
          this.intervalId && (clearInterval(this.intervalId), this.intervalId = null)
        }, e.prototype.onTapUp = function() {
          this._destroyed || this.container.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this._destroyed || this.container.scale.set(.9, .9)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.stopTick(), t.prototype.destroy.call(this)
        }, e
      }(Lu),
      Jy = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.container = new PIXI.Container, e.container.interactive = !0, e.light = jh("light.png"), e.light.scale = new PIXI.Point(1.1, 1.1), e.light.anchor.set(.5, .5), e.container.addChild(e.light), e.button = new Ru("button_gamemode.png"), e.container.addChild(e.button.skin);
          var i = WT();
          return i && (e.tipSprite = jh("gamemode_tip_".concat(i.type, ".png")), e.tipSprite.anchor.set(.5, .5), e.tipSprite.x = 0, e.tipSprite.y = 45, e.container.addChild(e.tipSprite)), e.showTween(), e
        }
        return i(e, t), e.prototype.showTween = function() {
          TWEEN.killTweensOf(this.light), this.light.rotation = 0, new TWEEN.Tween(this.light).to({
            rotation: 2 * Math.PI
          }, 3e3).easing(TWEEN.Easing.Linear.None).repeat(1 / 0).start()
        }, e.prototype.hideTween = function() {
          TWEEN.killTweensOf(this.light)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.hideTween(), this.button && (this.button.destroy(), this.button = null), t.prototype.destroy.call(this), this.container = null
        }, e
      }(Lu),
      Qy = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.name = "GiftPacketView", e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = Wh("dlc/ui/packet/bg_packet.png"), this.bg.width = 620, this.bg.height = 548, this.bg.interactive = !0, this.addChild(this.bg), this.addCloseButton(), this.shareButton = new Ru("bg_packet_button.png"), this.shareButton.on(Tu, this.onShare, this), this.shareButton.x = this.bg.width / 2, this.shareButton.y = this.bg.height - 100, this.addSkin(this.shareButton)
        }, e.prototype.onShare = function() {
          NI(""),
            function() {
              return r(this, void 0, void 0, (function() {
                var t;
                return s(this, (function(e) {
                  return [2, Xc((t = uh.getRandomInviteWordByType(bs.coinPacket)).type, t.desc, t.image, {
                    type: "packet",
                    time: RI.endTimeStamp
                  }, t.id)]
                }))
              }))
            }().then((function(t) {
              Uc(t) ? jI("") : $hostDef.showGroupText && rc("", 2100)
            })), this.close()
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e)
        }, e.prototype.onDestroy = function() {
          this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "GiftPacketView", e
      }(Qg),
      Zy = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.isVideo = !1, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = jh("title_limtgift.png");
          t.y = 0, t.x = (645 - t.width) / 2, t.interactive = !0, this.addChild(t), this.bg = Hh(645, 720), this.bg.y = t.height + 50, this.addChild(this.bg), this.addCloseButton(), this.itemBg1 = jh("itembg_limitgift.png"), this.itemBg1.y = 327, this.itemBg1.x = 65, this.addChild(this.itemBg1);
          var e = jh("itembg_limitgift.png");
          e.y = 327, e.x = 395, this.addChild(e);
          var i = jh("icon_add.png");
          i.y = 400, i.x = 303, this.addChild(i), this.skinIcon = jh("empty.png"), this.skinIcon.interactive = !1, this.skinIcon.width = 80, this.skinIcon.height = 80, this.skinIcon.anchor.set(.5, .5), this.skinIcon.x = this.itemBg1.x + this.itemBg1.width / 2, this.skinIcon.y = this.itemBg1.y + this.itemBg1.height / 2 - 10, this.addChild(this.skinIcon), this.skinIcon.texture = Vh("item".concat(1041, ".png"));
          var n = jh("big_gold.png");
          n.x = (e.width - n.width) / 2, n.y = (e.height - n.height) / 2, e.addChild(n), this.leftTimeText = Xh("12:00:00", "#FFFFFF", !1, "left", 42), this.leftTimeText.x = (this.bg.width - this.leftTimeText.width) / 2, this.leftTimeText.y = 219, this.addChild(this.leftTimeText), this.itemCountText = Xh("x1", 16777215, !1, "center", 32), this.itemCountText.x = (this.itemBg1.width - this.itemCountText.width) / 2, this.itemCountText.y = this.itemBg1.height - 50, this.itemBg1.addChild(this.itemCountText), this.goldCountText = Xh("x1", 16777215, !1, "center", 32), this.goldCountText.x = (e.width - this.itemCountText.width) / 2, this.goldCountText.y = e.height - 50, e.addChild(this.goldCountText), this.itemBg2 = e, this.videoCountText = Xh("3", 16776960, !0, "left", 36), this.videoCountText.x = 50, this.videoCountText.y = this.bg.height - 320, this.bg.addChild(this.videoCountText);
          var o = Xh("", 16776960, !0, "right", 36);
          o.x = this.bg.width - 300, o.y = this.bg.height - 280, this.bg.addChild(o), this.progressText = Xh("0/3", 16777215, !1, "left", 32), this.progressText.x = (this.bg.width - this.progressText.width) / 2, this.progressText.y = this.bg.height - 200, this.bg.addChild(this.progressText), this.videoButton = new Ru("button_video_unlock2.png", !0), this.videoButton.on(Iu, this.onVideo, this), this.videoButton.y = this.bg.height - 100, this.videoButton.x = this.bg.width / 2, this.bg.addChild(this.videoButton.skin), this.giftButton = new Ru("button_get.png", !0), this.giftButton.on(Tu, this.onGetGift, this), this.giftButton.y = this.bg.height - 100, this.giftButton.x = this.bg.width / 2, this.bg.addChild(this.giftButton.skin), this.giftButton.visible = !1
        }, e.prototype.updateUI = function() {
          for (var t, e, i = uC.limitGift.id, n = ph.getLimitGift(i), o = 0; o < n.gifts.length; o++) {
            var r = ch.getGift(n.gifts[o]);
            r.gold > 0 ? e = r.gold : r.items.length > 0 && (t = r.items[0].id)
          }
          this.itemCountText.text = "".concat(n.name), this.itemCountText.x = (this.itemBg1.width - this.itemCountText.width) / 2, this.skinIcon.texture = Vh("item".concat(t, ".png")), this.goldCountText.text = "x".concat(e), this.goldCountText.x = (this.itemBg2.width - this.goldCountText.width) / 2, this.videoCountText.text = "".concat(n.cost, "");
          var s = uC.limitGift.process >= n.cost;
          this.leftTimeText.visible = !s, s ? (this.stopTick(), this.progressText.visible = !1, this.videoButton.visible = !1, this.giftButton.visible = 0 === uC.limitGift.received) : (this.progressText.visible = !0, this.videoButton.visible = !0, this.giftButton.visible = !1, this.progressText.text = "".concat(uC.limitGift.process, "/").concat(n.cost), this.progressText.x = (this.bg.width - this.progressText.width) / 2, this.startTick())
        }, e.prototype.startTick = function() {
          this.stopTick(), this.intervalId = setInterval(this.onTick.bind(this), 200), this.onTick()
        }, e.prototype.onTick = function() {
          if (!this.isDisposed) {
            var t = Tg();
            this.leftTimeText.text = "".concat(ni(t)), this.leftTimeText.x = (this.bg.width - this.leftTimeText.width) / 2, t <= 0 && this.close()
          }
        }, e.prototype.stopTick = function() {
          this.intervalId && (clearInterval(this.intervalId), this.intervalId = null)
        }, e.prototype.onVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  if (this.isDisposed) return [2];
                  if (t = $hostDef.limitGiftVideoCD1, (e = Je.curTime - uC.lastLimitGiftTime) < t) return rc("".concat(Math.floor((t - e) / 1e3), "")), [2];
                  this.stopTick(), n.label = 1;
                case 1:
                  return n.trys.push([1, , 3, 4]), [4, mu(8)];
                case 2:
                  return (i = n.sent()) === ve.cancel ? [2, gu("")] : i === ve.fail ? [2, rc(fu)] : [3, 4];
                case 3:
                  return this.isDisposed || (this.startTick(), this.setButtonInteractive(!0), this.setClosable(!0)), [7];
                case 4:
                  return uC.lastLimitGiftTime = Je.curTime, this.onSuccess(!0), [2]
              }
            }))
          }))
        }, e.prototype.setButtonInteractive = function(t) {
          this.isDisposed || this.videoButton && (this.videoButton.interactive = t)
        }, e.prototype.setClosable = function(t) {
          this.isDisposed || (this.closeButton.visible = t, this.canTapMaskClose = t)
        }, e.prototype.onGetGift = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return function(t, e) {
                    0;
                    X.logEvent("-".concat(t), e)
                  }("", {
                    id: uC.limitGift.id
                  }), this.giftButton.interactive = !1, [4, Ig()];
                case 1:
                  return t.sent(), this.giftButton && (this.giftButton.interactive = !0, this.close()), [2]
              }
            }))
          }))
        }, e.prototype.onSuccess = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return this.isVideo = t, e = uC.limitGift.process, [4, Cg(this.isVideo ? 1 : 2)];
                case 1:
                  return o.sent(), rc("+" + (uC.limitGift.process - e)), this.isDisposed ? [2] : (this.updateUI(), wg() ? (i = uC.limitGift.id, n = ph.getLimitGift(i), uC.limitGift.process >= n.cost && 0 === uC.limitGift.received && this.onGetGift()) : this.close(), [2])
              }
            }))
          }))
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.y -= 80, this.updateUI()
        }, e.prototype.onDestroy = function() {
          this.stopTick(), this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.giftButton && (this.giftButton.destroy(), this.giftButton = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "LimitGiftView", e
      }(Qg),
      tv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = jh("sign_item.png"), e.bg.width = 161, e.bg.height = 201, e.addChild(e.bg), e.icon = jh("gold.png"), e.icon.interactive = !1, e.icon.scale.set(1.5, 1.5), e.icon.anchor.set(.5, .5), e.icon.x = e.bg.width / 2, e.icon.y = e.bg.height / 2, e.addChild(e.icon), e.nameText = Xh("", "#FFFFFF", !0, "left", 24), e.nameText.x = (e.bg.width - e.nameText.width) / 2, e.nameText.y = 5, e.addChild(e.nameText), e.countText = Xh("x500", "#000000", !0, "left", 28), e.countText.x = (e.bg.width - e.countText.width) / 2, e.countText.y = 165, e.addChild(e.countText), e.rewarded = jh("sign_rewarded.png"), e.rewarded.x = (e.bg.width - e.rewarded.width) / 2, e.rewarded.y = (e.bg.height - e.rewarded.height) / 2, e.addChild(e.rewarded), e.rewarded.visible = !1, e
        }
        return i(e, t), e.prototype.setDay = function(t) {
          var e = uC.signDay % 7 + 1;
          uC.isSign > 0 && uC.signDay >= 7 && uC.signDay % 7 == 0 && (e = 7), this.rewarded.visible = t < e, uC.isSign > 0 && (e -= 1), (t === e || this.rewarded.visible) && (this.bg.texture = Vh("sign_item_cur.png")), this.nameText.text = "".concat(t, "");
          var i, n = dh.getItem(t);
          if (uC.gameVersion < 2 && n.alterGiftId > 0) i = ch.getGift(n.alterGiftId);
          else if (n.giftId && (i = ch.getGift(n.giftId)).items.length > 0) {
            var o = i.items[0].id;
            uC.hasSkin(o) && (i = ch.getGift(n.alterGiftId))
          }
          i && (i.items && i.items.length > 0 ? (this.countText.visible = !1, this.icon.texture = Vh("item".concat(i.items[0].id, ".png"))) : (this.icon.texture = Vh("gold.png"), this.countText.visible = !0, this.countText.text = "x" + i.gold))
        }, e
      }(PIXI.Container),
      ev = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = jh("sign_item_seven.png"), e.bg.width = 304, e.bg.height = 209, e.addChild(e.bg), e.icon = jh("empty.png"), e.icon.interactive = !1, e.icon.scale.set(1.5, 1.5), e.icon.anchor.set(.5, .5), e.icon.x = e.bg.width / 2, e.icon.y = e.bg.height / 2, e.addChild(e.icon), e.nameText = Xh("", "#FFFF00", !0, "left", 24), e.nameText.x = 30, e.nameText.y = 10, e.addChild(e.nameText), e.countText = Xh("x1", "#000000", !0, "left", 28), e.countText.x = (e.bg.width - e.countText.width) / 2, e.countText.y = 165, e.addChild(e.countText), e.rewarded = jh("sign_rewarded.png"), e.rewarded.x = (e.bg.width - e.rewarded.width) / 2, e.rewarded.y = (e.bg.height - e.rewarded.height) / 2, e.addChild(e.rewarded), e.rewarded.visible = !1, e
        }
        return i(e, t), e.prototype.setDay = function(t) {
          var e = uC.signDay % 7 + 1;
          uC.isSign > 0 && uC.signDay >= 7 && uC.signDay % 7 == 0 && (e = 7), this.rewarded.visible = t === e && uC.isSign > 0, this.nameText.text = "".concat(t, "");
          var i, n = dh.getItem(t);
          if (uC.gameVersion < 2 && n.alterGiftId > 0) i = ch.getGift(n.alterGiftId);
          else if (n.giftId && (i = ch.getGift(n.giftId)).items.length > 0) {
            var o = i.items[0].id;
            uC.hasSkin(o) && (i = ch.getGift(n.alterGiftId))
          }
          i && (i.items && i.items.length > 0 ? (this.countText.visible = !1, this.icon.texture = Vh("item".concat(i.items[0].id, ".png"))) : (this.icon.texture = Vh("gold.png"), this.countText.visible = !0, this.countText.text = "x" + i.gold, this.countText.x = (this.bg.width - this.countText.width) / 2))
        }, e
      }(PIXI.Container),
      iv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.check = !0, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(620, 824), this.addChild(this.bg);
          var t = Xh("", 16777215, !0, "center", 40);
          t.x = (this.bg.width - t.width) / 2, t.y = 30, this.addChild(t), this.addCloseButton();
          var e = [],
            i = new tv;
          i.x = 40, i.y = 120, this.addChild(i), e.push(i);
          var n = new tv;
          n.x = i.x + i.width + 30, n.y = 120, this.addChild(n), e.push(n);
          var o = new tv;
          o.x = n.x + n.width + 30, o.y = 120, this.addChild(o), e.push(o);
          var r = new tv;
          r.x = 40, r.y = 350, this.addChild(r), e.push(r);
          var s = new tv;
          s.x = r.x + r.width + 30, s.y = 350, this.addChild(s), e.push(s);
          var a = new tv;
          a.x = s.x + s.width + 30, a.y = 350, this.addChild(a), e.push(a);
          var h = new ev;
          h.x = 40, h.y = 580, this.addChild(h), e.push(h), Ju.supportRequestSubscribe && !Ju.subscribedNotice && (this.check = ws.signSubscribeCheck, this.checkbox = jh(this.check ? "subscribe_check_selected.png" : "subscribe_check.png"), this.checkbox.x = this.bg.width - this.checkbox.width - 25, this.checkbox.y = 570, this.addChild(this.checkbox), this.checkbox.interactive = !0, this.checkbox.on(Tu, this.onCheck, this), this.subscribeButton = new Ru("btn_subscribe_sign.png"), this.subscribeButton.x = this.bg.width - this.subscribeButton.width / 2 - 30, this.subscribeButton.y = 730, this.subscribeButton.on(Iu, this.onTapSubscribe, this), this.addChild(this.subscribeButton.skin)), this.normalButton = new Ru("button_sign_normal.png", !0), this.normalButton.on(Iu, this.onGetNormal, this), this.normalButton.x = 480, this.normalButton.y = 660, this.addSkin(this.normalButton), this.videoButton = new Ru("button_sign.png", !0), this.videoButton.on(Iu, this.onGetVideo, this), this.videoButton.x = 480, this.videoButton.y = 760, this.addSkin(this.videoButton), this.tipText = Xh("", "#FFFFFF", !1, "left", 36), this.tipText.x = this.videoButton.x - this.videoButton.width / 2 + 20, this.tipText.y = this.videoButton.y - this.videoButton.height / 2 - 90, this.addChild(this.tipText), this.tipText.visible = !1;
          for (var c = 1; c <= 7; c++) e[c - 1].setDay(c)
        }, e.prototype.onCheck = function() {
          this.check = !this.check, this.checkbox.texture = Vh(this.check ? "subscribe_check_selected.png" : "subscribe_check.png"), ws.signSubscribeCheck = this.check
        }, e.prototype.onGetNormal = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return this.check ? [4, this.onTapSubscribe()] : [3, 2];
                case 1:
                  e.sent(), e.label = 2;
                case 2:
                  return t = !Ju.supportRequestSubscribe || Ju.subscribedSign, this.sendSign(0, t), [2]
              }
            }))
          }))
        }, e.prototype.onGetVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return [4, mu(5)];
                case 1:
                  return (t = i.sent()) === ve.cancel ? [2, gu("")] : t === ve.fail ? (rc(fu), [2]) : (e = !Ju.supportRequestSubscribe || Ju.subscribedSign, this.sendSign(1, e), [2])
              }
            }))
          }))
        }, e.prototype.sendSign = function(t, e) {
          return r(this, void 0, void 0, (function() {
            var i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return n.trys.push([0, 2, , 3]), [4, iD({
                    type: t
                  })];
                case 1:
                  return (i = n.sent()).syncData && uC.syncData(i.syncData), i.gift && i.gift.gold > 0 && nl(i.gift.gold), e ? this.close() : this.refreshButtons(), [3, 3];
                case 2:
                  return n.sent(), [3, 3];
                case 3:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onTapSubscribe = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return Ju.subscribedNotice ? [2] : [4, Ju.requestSubscribe(Hu, "")];
                case 1:
                  return "accept" === e.sent() ? ((t = new Date(Je.curTime)).setDate(t.getDate() + 1), nD({
                    templateId: Hu,
                    sendTime: t.getTime()
                  }), Ju.subscribedSign = !0, this.refreshButtons(), rc("")) : this.checkbox && (this.check = !1, this.checkbox.texture = Vh("subscribe_check.png")), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.refreshButtons()
        }, e.prototype.refreshButtons = function() {
          this.isDisposed || (this.normalButton && (this.normalButton.visible = 0 === uC.isSign), this.videoButton && (this.videoButton.visible = 0 === uC.isSign), this.tipText && (this.tipText.visible = uC.isSign > 0), this.checkbox && (this.checkbox.visible = 0 === uC.isSign), this.subscribeButton && (uC.isSign > 0 ? this.subscribeButton.visible = !Ju.subscribedSign : this.subscribeButton.visible = !1))
        }, e.prototype.addPromise = function() {
          return r(this, void 0, void 0, (function() {
            var t = this;
            return s(this, (function(e) {
              return [2, new Promise((function(e) {
                t.resolve = e
              }))]
            }))
          }))
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.normalButton && (this.normalButton.destroy(), this.normalButton = null), this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.subscribeButton && (this.subscribeButton.destroy(), this.subscribeButton = null), this.checkbox && (this.checkbox.off(Tu, this.onCheck, this), this.checkbox = null), this.resolve && (this.resolve(), this.resolve = void 0)
        }, e.clsName = "SignView", e
      }(Qg),
      nv = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.container = new PIXI.Container, e.container.interactive = !0, e.container.width = 160, e.container.height = 118;
          var i = new PIXI.Container;
          return e.itemBg = jh("sign_skin_bg.png"), e.itemBg.anchor.set(.5, .5), i.addChild(e.itemBg), e.light = jh("sign_light.png"), e.light.anchor.set(.5, .5), i.addChild(e.light), e.icon = jh("empty.png"), e.icon.anchor.set(.5, .5), i.addChild(e.icon), e.tipBg = jh("sign_tip.png"), e.tipBg.anchor.set(0, .5), e.tipBg.x = e.itemBg.width / 2 + 10, i.addChild(e.tipBg), e.tipText = Xh("10", "#813915", !1, "left", 18), e.tipText.x = e.tipBg.x + 15, e.tipText.y = e.tipBg.y - e.tipText.height / 2, i.addChild(e.tipText), i.x = 0, i.y = 0, e.container.addChild(i), e.interactive = !0, e.on(Tu, e._tapSkin, e), e.showTween(), e
        }
        return i(e, t), e.prototype.setSkin = function(t, e) {
          if (t <= 0) return this.tipText.visible = !1, this.tipBg.visible = !1, this.light.visible = !1, void(this.icon.texture = Vh("icon_sign.png"));
          this.icon.texture = Vh("item".concat(t, ".png")), this.tipText.text = "".concat(e, "")
        }, e.prototype.showTween = function() {
          TWEEN.killTweensOf(this.light), this.light.rotation = 0, new TWEEN.Tween(this.light).to({
            rotation: 2 * Math.PI
          }, 3e3).easing(TWEEN.Easing.Linear.None).repeat(1 / 0).start()
        }, e.prototype.hideTween = function() {
          TWEEN.killTweensOf(this.light)
        }, e.prototype._tapSkin = function() {
          tc.showPanel(iv)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.off(Tu, this._tapSkin, this), this.hideTween(), t.prototype.destroy.call(this), this.container = null
        }, e
      }(Lu),
      ov = function(t) {
        function e() {
          var e = t.call(this, !0, 1) || this;
          return e.lastScore = 0, e._playScore = 0, e.createChildren(), e
        }
        return i(e, t), e.prototype.createChildren = function() {
          var t = this;
          this.centerLayer = new PIXI.Container, this.addChild(this.centerLayer);
          var e = jh("title_bg.png");
          e.anchor.set(.5, .5), e.x = 375, e.y = 0, this.centerLayer.addChild(e);
          var i = Xh("", "#FFFFFF", !0);
          i.anchor.set(.5, .5), i.x = 375, i.y = e.y, this.centerLayer.addChild(i), this.scoreText = zh("0", 60, 16777215, "center"), this.scoreText.scale.x = 2, this.scoreText.scale.y = 2, this.scoreText.x = (Pe - 2 * this.scoreText.textWidth) / 2, this.scoreText.y = e.y + 10, this.centerLayer.addChild(this.scoreText), this.shareGroup = new im(20, !0), this.wxChallengeButton = new Ru("button_wx_challenge.png", !1), this.wxChallengeButton.on(Tu, this._onChallengeShare, this), this.shareGroup.addButton(this.wxChallengeButton), this.officeChallengeButton = new Ru("button_office_challenge.png", !1), this.officeChallengeButton.on(Tu, this._onChallengeShare, this), this.shareGroup.addButton(this.officeChallengeButton), this.shareButton = new Ru("button_share.png", !1), this.shareButton.on(Tu, this._onShare, this), this.shareGroup.addButton(this.shareButton), this.updateShareGroupPosition(), this.shareGroup.y = this.scoreText.y + 130, this.centerLayer.addChild(this.shareGroup);
          var n = Mu.top + 60;
          $hostDef.showCustomer && !$hostDef.censor && (this.kefuButton = new Ru("button_kefu.png"), this.kefuButton.on(Tu, (function() {
            Jg()
          }), this), this.kefuButton.x = 60, this.kefuButton.y = n, this.addSkin(this.kefuButton), n += this.kefuButton.height + 10), $hostDef.censor || (this.signIcon = new nv, this.signIcon.x = 60, this.signIcon.y = n, this.addSkin(this.signIcon), n += 70);
          var o, r = _e / Be,
            s = this.rankLayer = new PIXI.Container;
          if (this.centerLayer.addChild(s), r < .7) {
            if (o = this.rankBg = jh("rank_bg_new.png"), this.rankBg.interactive = !0, o.width = 651, o.height = 317, o.x = 0, o.y = 0, s.addChild(o), this.rankBg.on(Tu, this._checkOpenDataAndOpenFriendRank, this), this.allRankButton = new Ru("button_allrank.png"), this.allRankButton.x = o.x + o.width - this.allRankButton.width / 2 - 20, this.allRankButton.y = 36, this.allRankButton.on(Tu, this._checkOpenDataAndOpenFriendRank, this), s.addChild(this.allRankButton.skin), this.rankSprite = new PIXI.Sprite(Cc), this.rankSprite.x = 10, this.rankSprite.y = 70, this.rankSprite.visible = kc, s.addChild(this.rankSprite), !kc) {
              var a = Yh(_c, "#FFFFFF", 400, 26, !0);
              a.anchor.set(.5, .5), a.x = o.x + o.width / 2, a.y = o.y + 200, s.addChild(a)
            }
          } else this.allRankButton = new Ru("button_allrank.png"), this.allRankButton.x = 0, this.allRankButton.y = 36, this.allRankButton.on(Tu, this._checkOpenDataAndOpenFriendRank, this), s.addChild(this.allRankButton.skin);
          s.x = o ? (Pe - o.width) / 2 : 375, s.y = this.shareGroup.y + this.shareGroup.height + 20, !$hostDef.censor && $hostDef.gamesIcon && (this.tryGame = new Ml, this.tryGame.x = Pe - this.tryGame.width, this.tryGame.y = s.y - this.tryGame.height / 2 - 110, this.centerLayer.addChild(this.tryGame)), this.settingSkin = new rk(1), this.settingSkin.x = (Pe - this.settingSkin.realWidth) / 2, this.settingSkin.y = o ? s.y + o.height + 80 : s.y + 50 + 80, this.centerLayer.addChild(this.settingSkin.skin), this.relayButton = new Ru("button_relay.png"), this.relayButton.x = 375, this.relayButton.y = this.settingSkin.y + this.settingSkin.height / 2 + 60, this.relayButton.on(Tu, this._onRelay, this), this.centerLayer.addChild(this.relayButton.skin), this.restartGroup = new PIXI.Container, this.restartGroup.x = 375, this.restartGroup.y = this.relayButton.y + this.relayButton.height / 2 + 90, this.centerLayer.addChild(this.restartGroup), this.restartNormalButton = new Ru("button_restart.png"), this.restartNormalButton.on(Tu, this._restartGame, this), this.restartGroup.addChild(this.restartNormalButton.skin), this.teamPersonTaskTip = new Zm, this.teamPersonTaskTip.x = this.restartNormalButton.x, this.teamPersonTaskTip.y = this.restartNormalButton.y - this.restartNormalButton.height / 2 - 40, this.restartGroup.addChild(this.teamPersonTaskTip);
          var h = this.goldRate = jh("game_gold_rate.png");
          h.x = this.restartNormalButton.x - h.width / 2, h.y = this.restartNormalButton.y - this.restartNormalButton.height / 2 - 20, this.restartGroup.addChild(this.goldRate), this.maxScoreTxt = Xh(":0", "#FFFFFF", !0, "left", 28), this.maxScoreTxt.anchor.set(.5, .5), this.maxScoreTxt.x = 0, this.maxScoreTxt.y = this.restartNormalButton.y + this.restartNormalButton.height / 2 + 20, this.restartGroup.addChild(this.maxScoreTxt);
          this.gameModeButton = new Jy, this.gameModeButton.x = this.relayButton.x + this.relayButton.width / 2 + this.gameModeButton.width / 2 + 30, this.gameModeButton.y = this.relayButton.y, this.gameModeButton.on(Tu, this._openGameMode, this), this.centerLayer.addChild(this.gameModeButton.skin), this.gameModeButton.visible = $T(), this.expertButton = new Ru("button_small_expert.png"), this.expertButton.x = this.relayButton.x - this.relayButton.width / 2 - this.expertButton.width / 2 - 30, this.expertButton.y = this.relayButton.y, this.expertButton.on(Tu, this._tapExpert, this), this.centerLayer.addChild(this.expertButton.skin), this.teamButton = new gm, this.teamButton.x = this.expertButton.x, this.teamButton.y = this.expertButton.y + 150, this.teamButton.on(Tu, this._tabTeam, this), this.centerLayer.addChild(this.teamButton.skin), this.teamButton.visible = $hostDef.team, this.giftPacketButton = new Yy, this.giftPacketButton.x = this.gameModeButton.x, this.giftPacketButton.y = this.teamButton.y, this.giftPacketButton.on(Tu, (function() {
            tc.showPanel(Qy)
          }), this), this.centerLayer.addChild(this.giftPacketButton.skin), this.giftPacketButton.visible = !1, this.limitGiftButton = new Ky, this.limitGiftButton.x = this.gameModeButton.x - this.limitGiftButton.width / 2, this.limitGiftButton.y = this.teamButton.y - 50, this.limitGiftButton.on(Tu, (function() {
            tc.showPanel(Zy)
          }), this), this.centerLayer.addChild(this.limitGiftButton.skin), this.dailyRewardButton = new Ru("icon_dailyreward.png"), this.dailyRewardButton.x = this.gameModeButton.x, this.dailyRewardButton.y = this.teamButton.y, this.dailyRewardButton.on(Tu, (function() {
            tc.showPanel(ym)
          }), this), this.centerLayer.addChild(this.dailyRewardButton.skin), this.challengeButton = new zy("dlc/ui/challenge/button_small_challenge.png", 131, 115), this.challengeButton.x = this.expertButton.x, this.challengeButton.y = this.expertButton.y + 150, this.challengeButton.on(Tu, this._tapChallenge, this), this.challengeButton.visible = xw(), this.centerLayer.addChild(this.challengeButton.skin);
          var c = Math.min(1e3, this.centerLayer.height);
          if (this.centerLayer.y = (De - c) / 2 - 50, this.centerLayer.y + c > De - 0 - 20 && (this.centerLayer.y = De - 0 - c - 20), this.centerLayer.y < Mu.top && (this.centerLayer.y = Mu.top), Dl.canShow() && (this.leftBanner = new Dl, this.leftBanner.x = -10, this.signIcon ? this.leftBanner.y = this.signIcon.y + 68 : this.leftBanner.y = n, this.addChild(this.leftBanner)), this.programIcon = new El, "function" == typeof wx.getMenuButtonBoundingClientRect) {
            var u = wx.getMenuButtonBoundingClientRect(),
              l = (u.top + u.height / 2) / tc.uiScale,
              d = u.left / tc.uiScale;
            this.programIcon.y = l - this.programIcon.height / 2, this.programIcon.defaultX = this.programIcon.x = d - this.programIcon.width
          } else this.programIcon.defaultX = this.programIcon.x = Pe - this.programIcon.width - 200, this.programIcon.y = 21 + Math.max(0, Mu.top > 0 ? Mu.top - 30 : 0);
          this.addChild(this.programIcon), this.programIcon.visible = !$hostDef.censor && !tn(), this.addToDestroy = mr((function() {
            t.goldRate.visible = $hostDef.gameRate && !$hostDef.censor && uC.goldRate > 0
          })), !$hostDef.censor && this.signIcon && (this.addToDestroy = mr((function() {
            var e = uC.signDay;
            if (e > 6) return t.signIcon.setSkin(0, 0), void(t.signIcon.visible = 0 === uC.isSign);
            var i = e % 7 + 1,
              n = -1,
              o = -1;
            if (uC.gameVersion >= 2)
              for (var r = i; r <= 7; r++) {
                var s = dh.getItem(r),
                  a = ch.getGift(s.giftId);
                if (a.items && a.items.length > 0) {
                  var h = a.items[0].id;
                  if (!uC.hasSkin(h)) {
                    n = h, o = r;
                    break
                  }
                }
              }
            if (n > 0) {
              var c = o - i;
              1 === uC.isSign && (c += 1), t.signIcon.setSkin(n, c)
            } else t.signIcon.setSkin(0, 0)
          }))), cn() && (this.clubButton = lC(this.signIcon.x - 45, this.signIcon.y + 70), this.addToDestroy = mr((function() {
            tc.openedPopUpPanelCount > 1 ? t.clubButton.hide() : t.clubButton.show()
          })))
        }, e.prototype._checkOpenDataAndOpenFriendRank = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return this.isFriendInteractionTextVisible() ? [4, this.checkFriendInteraction()] : [3, 2];
                case 1:
                  t.sent(), t.label = 2;
                case 2:
                  return this.isDisposed ? [2] : [4, _y()];
                case 3:
                  return t.sent(), [2]
              }
            }))
          }))
        }, e.prototype._tapExpert = function() {
          Nm()
        }, e.prototype._tabTeam = function() {
          _w()
        }, e.prototype._tapChallenge = function() {
          ww() || (this.challengeButton.visible = xw())
        }, e.prototype._restartGame = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  this.close(), t.label = 1;
                case 1:
                  return t.trys.push([1, 3, , 4]), [4, _I(Jh.Classics)];
                case 2:
                  return t.sent(), [3, 4];
                case 3:
                  return t.sent(), tc.showPanel(e), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype._openGameMode = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              return (t = WT()) ? (jT(t.type), [2]) : (rc(""), this.gameModeButton.visible = !1, [2])
            }))
          }))
        }, e.prototype._onRelay = function() {
          return r(this, void 0, void 0, (function() {
            var t, e = this;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return [4, Rg.createRelayRace(this.lastScore)];
                case 1:
                  return (t = i.sent()) && (DEVELOP && console.log("------relayId--------", t), NI(""), function(t, e) {
                    return r(this, void 0, void 0, (function() {
                      return s(this, (function(i) {
                        return [2, cu(t).then((function(i) {
                          var n = (i && i.conf ? i.conf.desc : "").replace("{score}", t);
                          return Xc(i.conf.type, n, i.image || i.conf.image, {
                            relayId: e
                          }, i.conf.id)
                        }))]
                      }))
                    }))
                  }(this.lastScore, t).then((function(t) {
                    Uc(t) && (jI(""), e._onShareSuccess())
                  }))), [2]
              }
            }))
          }))
        }, e.prototype._onShare = function() {
          var t = this;
          if (NI(""), Ag.isFinishCurChallenge && Ag.getCurChallenge()) {
            var e = Ag.getCurChallenge();
            (function(t, e, i, n) {
              return r(this, void 0, void 0, (function() {
                return s(this, (function(o) {
                  return [2, eu(t, e).then((function(o) {
                    var r = o.conf,
                      s = r ? r.desc : "";
                    return s = (s = (s = (s = s.replace("{score}", t)).replace("{diff}", t - e + "")).replace("{player}", Vc.decodeURIComponent(uC.nick))).replace("{player2}", Vc.decodeURIComponent(i)), Xc(r.type, s, o.image || r.image, {
                      score: t,
                      nick: Vc.encodeURIComponent(uC.nick),
                      map: n
                    }, r.id)
                  }))]
                }))
              }))
            })(this.lastScore, e.score, e.nick, e.map).then((function(e) {
              Uc(e) && (jI(""), t._onShareSuccess())
            }))
          } else Hc(this.lastScore + "").then((function(e) {
            Uc(e) && (jI(""), t._onShareSuccess())
          }))
        }, e.prototype._onChallengeShare = function() {
          $y.tryCreateChallenge(RI.curScore)
        }, e.prototype._onShareSuccess = function() {
          this.isDisposed || this._restartGame()
        }, e.prototype.checkDailyRewardAndLimitGiftVisible = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return this.giftPacketButton.visible = !1, this.limitGiftButton.visible = !1, this.dailyRewardButton.visible = !1, t = !xw() && $hostDef.packetEnable && !$hostDef.censor && this.lastScore >= $hostDef.packetScore, this.giftPacketButton.visible = t, t ? (this.giftPacketButton.showTween(), [2]) : (DEVELOP && console.log("limitGiftData:", JSON.stringify(uC.limitGift)), (e = wg()) ? xg() ? [4, kg()] : [3, 2] : [3, 3]);
                case 1:
                  i.sent(), i.label = 2;
                case 2:
                  e = wg(), i.label = 3;
                case 3:
                  return this.isDisposed || this.limitGiftButton && (this.limitGiftButton.visible = e, e && this.limitGiftButton.checkLeftTime(), this.dailyRewardButton.visible = !this.limitGiftButton.visible), [2]
              }
            }))
          }))
        }, e.prototype.isFriendInteractionTextVisible = function() {
          return this.friendInteractionText && this.friendInteractionText.visible
        }, e.prototype.checkFriendInteraction = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return kc && this.rankSprite ? tc.hasPanel("FriendRankView") || tc.hasPanel("GroupRankView") ? [2] : (!this.friendInteractionText && this.rankBg && (this.friendInteractionText = Yh("", "#FFFFFF", 400, 36, !0), this.friendInteractionText.anchor.set(.5, .5), this.friendInteractionText.x = this.rankBg.x + this.rankBg.width / 2, this.friendInteractionText.y = this.rankBg.y + 180, this.friendInteractionText.visible = !1, this.friendInteractionText.interactive = !1, this.rankLayer.addChild(this.friendInteractionText)), [4, Cy()]) : [2];
                case 1:
                  return t = e.sent(), this.isDisposed ? [2] : (this.friendInteractionText && (this.friendInteractionText.visible = !t), this.rankSprite.visible = t === Qm.Accept, t ? (Tc && Tc.postMessage({
                    type: xc
                  }), [4, lu(100)]) : [3, 3]);
                case 2:
                  if (e.sent(), this.isDisposed) return [2];
                  this._openData && Ec(this._openData), this._openData = new Xy(this.rankSprite), Fc(this._openData), e.label = 3;
                case 3:
                  return [2]
              }
            }))
          }))
        }, e.prototype.removeOnShowListener = function() {
          this.wxShowBind && (wx.offShow(this.wxShowBind), this.wxShowBind = null)
        }, e.prototype.onWxShow = function(t) {
          this.checkFriendInteraction()
        }, e.prototype.updateOpenData = function() {
          var t = this;
          Mc(), this.rankSprite && (this._openData && Ec(this._openData), this.checkFriendInteraction(), this.removeOnShowListener(), this.wxShowBind = this.onWxShow.bind(this), wx.onShow(this.wxShowBind));
          var e = tc.openedPopUpPanelCount;
          this.addToDestroy = mr((function() {
            e !== tc.openedPopUpPanelCount && 1 === (e = tc.openedPopUpPanelCount) && t.isFriendInteractionTextVisible() && t.checkFriendInteraction()
          }))
        }, e.prototype.updateWxChallenge = function() {
          var t = qy() && !$y.isInWxChallenge;
          this.wxChallengeButton.visible = t && $y.createKey === $hostDef.wxChallengeScoreKey, this.officeChallengeButton.visible = t && $y.createKey === $hostDef.wxChallengeRewardScoreKey, this.updateShareGroupPosition(), $y.onFightEnd()
        }, e.prototype.onShow = function(t) {
          var e, i;
          if (this.x = 0, this.y = 0, this.tryGame && this.tryGame.showGameIcon(), this.challengeButton.visible = xw(), this.checkDailyRewardAndLimitGiftVisible(), t ? (e = t.score, i = t.showMax) : (e = RI.curScore, i = !1), this.lastScore = e, this.maxScoreTxt.text = ":" + uC.bestScore, this.playScoreTween(i && e > uC.bestScore), this.updateOpenData(), this.updateShareButton(), Ag.isFinishCurChallenge && Ag.getCurChallenge()) {
            var n = Ag.getCurChallenge();
            this.lastScore > n.score && uC.ticket < lh.maxTicketCount && uC.ticketChallenge <= 0 && Ag.challengeExpertSuccess(this.lastScore)
          }
          Lg.addListener(Pg, this.onShowChallenge, this), Lg.addListener(Mg, this.onShowRelay, this), jg.checkShowRace(), this.updateStartButtonFrame(), this.programIcon.visible && this.programIcon.startTween(), this.refreshTeamTip(), this.updateWxChallenge(), wx.triggerGC()
        }, e.prototype.updateShareGroupPosition = function() {
          this.shareGroup.reLayout(), this.shareGroup.x = (Pe - this.shareGroup.width) / 2
        }, e.prototype.refreshTeamTip = function() {
          var t = this;
          this.teamPersonTaskTip.refreshTeamTip(Sa.ClassicsGame).then((function(e) {
            t.isDisposed || (t.restartGroup.y = e ? t.relayButton.y + t.relayButton.height / 2 + 90 : t.relayButton.y + t.relayButton.height / 2 + 60)
          }))
        }, e.prototype.playScoreTween = function(t) {
          var e = this;
          this.scoreText.text = "0", this._playScore = 0, new TWEEN.Tween(this).to({
            _playScore: this.lastScore
          }, 1e3).onUpdate((function(t) {
            !e.isDisposed && e.scoreText ? (e.scoreText.text = e._playScore.toFixed(), e.scoreText.x = (Pe - 2 * e.scoreText.textWidth) / 2) : TWEEN.killTweensOf(e)
          })).onComplete((function() {
            t && tc.showPanel(wm, e.lastScore)
          })).easing(TWEEN.Easing.Circular.Out).start()
        }, e.prototype.onShowChallenge = function() {
          this.updateStartButtonFrame()
        }, e.prototype.updateShareButton = function() {
          if (Ag.isFinishCurChallenge && Ag.getCurChallenge()) {
            var t = Ag.getCurChallenge();
            this.lastScore > t.score ? this.shareButton.setFrameId("button_expert_share.png") : this.shareButton.setFrameId("button_compare.png")
          } else this.shareButton.setFrameId("button_share.png")
        }, e.prototype.updateStartButtonFrame = function() {
          Rg.isRelaying() ? this.restartNormalButton.setFrameId("button_restart_relay.png") : Ag.needShowChallenge() ? this.restartNormalButton.setFrameId("button_restart2.png") : this.restartNormalButton.setFrameId("button_restart.png")
        }, e.prototype.onShowRelay = function() {
          this.updateStartButtonFrame()
        }, e.prototype.onHide = function() {
          TWEEN.killTweensOf(this), this._openData && (Ec(this._openData), this._openData = null), this.giftPacketButton.hideTween(), this.tryGame && this.tryGame.stopGameIconTween(), Lg.removeListener(Pg, this.onShowChallenge), Lg.removeListener(Mg, this.onShowRelay), Lg.dispatchEvent(Dg), Rg.clearRelayData(), this.programIcon.stopTween()
        }, e.prototype.onDestroy = function() {
          this.removeOnShowListener(), TWEEN.killTweensOf(this), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.wxChallengeButton && (this.wxChallengeButton.destroy(), this.wxChallengeButton = null), this.officeChallengeButton && (this.officeChallengeButton.destroy(), this.officeChallengeButton = null), this.allRankButton && (this.allRankButton.destroy(), this.allRankButton = null), this.tryGame && (this.tryGame.destroy(), this.tryGame = null), this.relayButton && (this.relayButton.destroy(), this.relayButton = null), this.expertButton && (this.expertButton.destroy(), this.expertButton = null), this.teamButton && (this.teamButton.destroy(), this.teamButton = null), this.limitGiftButton && (this.limitGiftButton.destroy(), this.limitGiftButton = null), this.restartNormalButton && (this.restartNormalButton.destroy(), this.restartNormalButton = null), this.gameModeButton && (this.gameModeButton.destroy(), this.gameModeButton = null), this.settingSkin && (this.settingSkin.destroy(), this.settingSkin = null), this.giftPacketButton && (this.giftPacketButton.destroy(), this.giftPacketButton = null), this.leftBanner && (this.leftBanner.destroy(), this.leftBanner = null), this.signIcon && (this.signIcon.destroy(), this.signIcon = null), this.kefuButton && (this.kefuButton.destroy(), this.kefuButton = null), this.dailyRewardButton && (this.dailyRewardButton.destroy(), this.dailyRewardButton = null), this.challengeButton && (this.challengeButton.destroy(), this.challengeButton = null), this.clubButton && (this.clubButton.destroy(), this.clubButton = null), this.teamPersonTaskTip && (this.teamPersonTaskTip.destroy(), this.teamPersonTaskTip = null), this.scoreText = null
        }, e.clsName = "GameOverView", e
      }(Eu),
      rv = function(t) {
        function e() {
          var e = t.apply(this, c([], h(arguments), !1)) || this;
          return e.isDestroyed = !1, e._destroyBag = [], e
        }
        return i(e, t), Object.defineProperty(e.prototype, "addToDestroy", {
          set: function(t) {
            this._destroyBag.push(t)
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.show = function() {
          this.visible = !0
        }, e.prototype.hide = function() {
          this.visible = !1
        }, e.prototype.destroy = function(e) {
          this.isDestroyed = !0, this._destroyBag.forEach((function(t) {
            return t()
          })), this._destroyBag.length = 0, t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      sv = 1e5,
      av = "team_exchange_event",
      hv = "team_invite_change_event",
      cv = ["", "", ""],
      uv = ["", "300", "1000", "5000"],
      lv = [0, 300, 1e3, 5e3],
      dv = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          i._selectIndex = 0, i.isScoreLimit = e, i.limitArray = e ? uv : cv, i.leftBtn = new Ru("team_button_left.png"), i.addChild(i.leftBtn.skin), i.leftBtn.x = i.leftBtn.width / 2, i.leftBtn.y = 32;
          var n = i.bg = jh("team_option_bg.png");
          return n.x = i.leftBtn.width + 20, i.addChild(n), i.conditionText = Xh("test", 16777215, !0, "left", 32), i.conditionText.x = n.x + (n.width - i.conditionText.width) / 2, i.conditionText.y = n.y + (n.height - i.conditionText.height) / 2, i.addChild(i.conditionText), i.rightBtn = new Ru("team_button_right.png"), i.addChild(i.rightBtn.skin), i.rightBtn.x = n.x + n.width + 20 + i.rightBtn.width / 2, i.rightBtn.y = 32, i.leftBtn.on(Tu, i.onLeft, i), i.rightBtn.on(Tu, i.onRight, i), i
        }
        return i(e, t), e.prototype.setEnable = function(t) {
          this.leftBtn.visible = t, this.rightBtn.visible = t
        }, e.prototype.setSelectIndex = function(t) {
          this._selectIndex = t, this.conditionText.text = this.limitArray[t], this.conditionText.x = this.bg.x + (this.bg.width - this.conditionText.width) / 2
        }, e.prototype.getSelectIndex = function() {
          return this._selectIndex
        }, e.prototype.onLeft = function() {
          var t = this._selectIndex - 1;
          t < 0 && (t = this.limitArray.length - 1), this.setSelectIndex(t)
        }, e.prototype.onRight = function() {
          var t = this._selectIndex + 1;
          t >= this.limitArray.length && (t = 0), this.setSelectIndex(t)
        }, e.prototype.destroy = function(e) {
          this.leftBtn && (this.leftBtn.destroy(), this.leftBtn = null), this.rightBtn && (this.rightBtn.destroy(), this.rightBtn = null), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      pv = function(t) {
        function e(e, i) {
          void 0 === i && (i = 0);
          var n = t.call(this) || this,
            o = jh(0 === i ? "team_label_bg_green.png" : "team_label_bg_orange.png");
          return n.addChild(o), n.labelText = Xh(e, 16777215, !0, "center", 30), n.labelText.x = o.x + (o.width - n.labelText.width) / 2, n.labelText.y = o.y + (o.height - n.labelText.height) / 2, n.addChild(n.labelText), n
        }
        return i(e, t), e
      }(PIXI.Container),
      fv = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.teamName = "";
          var i = 635,
            n = Xh("", 16737792, !0, "left", 24);
          n.x = (i - n.width) / 2, n.y = 60, e.addChild(n);
          var o = Xh("14", 16737792, !0, "left", 24);
          o.x = (i - o.width) / 2, o.y = 90, e.addChild(o);
          var r = new pv("");
          r.x = 40, r.y = 160, e.addChild(r);
          var s = jh("team_name_bg.png");
          s.y = r.y + 80, s.x = r.x, e.addChild(s), s.interactive = !0, s.on(Tu, e.onNameInput, e), e.nameText = Xh("", "#8e8e8e", !0, "left", 32), e.nameText.x = s.x + 20, e.nameText.y = s.y + (s.height - e.nameText.height) / 2, e.addChild(e.nameText);
          var a = new pv("");
          a.x = 40, a.y = 340, e.addChild(a), e.joinCondition = new dv(!1), e.joinCondition.x = (i - e.joinCondition.width) / 2, e.joinCondition.y = a.y + 100, e.addChild(e.joinCondition);
          var h = new pv("");
          h.x = 40, h.y = 560, e.addChild(h), e.scoreCondition = new dv(!0), e.scoreCondition.x = (i - e.scoreCondition.width) / 2, e.scoreCondition.y = h.y + 100, e.addChild(e.scoreCondition), e.createButton = new Ru("team_button_create.png"), e.createButton.x = 317.5, e.createButton.y = 850, e.createButton.on(Tu, e._createTeam, e), e.addChild(e.createButton.skin);
          var c = Xh("31", "#8e8e8e", !1, "left", 24);
          return c.x = (i - c.width) / 2, c.y = 910, e.addChild(c), e
        }
        return i(e, t), e.prototype.show = function() {
          t.prototype.show.call(this), this.scoreCondition.setSelectIndex(0), this.joinCondition.setSelectIndex(0), this.nameText.text = "", this.teamName = ""
        }, e.prototype._createTeam = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return 0 === this.teamName.length ? (rc(""), [2]) : ($I(""), t = this.teamName, e = this.joinCondition.getSelectIndex(), i = this.scoreCondition.getSelectIndex(), [4, Dw(t, e, lv[i])]);
                case 1:
                  return n.sent() > 0 && (rc(""), hw(), _w().then((function() {}))), [2]
              }
            }))
          }))
        }, e.prototype.onNameInput = function() {
          var t = this;
          Hl(this.teamName, 8, !1, (function(e) {
            t.isDisposed || (t.teamName = e, t.nameText.text = e)
          }))
        }, e.prototype.destroy = function(e) {
          this.isDestroyed = !0, this.createButton && (this.createButton.destroy(), this.createButton = null), t.prototype.destroy.call(this, e)
        }, e
      }(rv),
      gv = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = e.bg = jh("team_rank_level_icon.png");
          return i.scale.set(.8, .8), e.addChild(i), e.labelText = Xh("", 15432715, !0, "left", 20), e.labelText.x = i.x + (i.width - e.labelText.width) / 2, e.labelText.y = i.height - 42, e.addChild(e.labelText), e
        }
        return i(e, t), e.prototype.setLevel = function(t) {
          this.labelText.text = "" + t, this.labelText.x = this.bg.x + (this.bg.width - this.labelText.width) / 2
        }, e
      }(PIXI.Container),
      mv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.inited = !1, e.interactive = !0, e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this.bg = zm(600);
          this.addChild(t), this.rankImage = new gv, this.rankImage.x = 10, this.rankImage.y = (t.height - this.rankImage.height) / 2 - 5, this.addChild(this.rankImage);
          this.nameText = Xh("", "#ff6600", !1, "left", 28), this.nameText.x = 130, this.nameText.y = 10, this.addChild(this.nameText), this.conditionText = Xh("", "#bbbbbb", !1, "left", 24), this.conditionText.x = 130, this.conditionText.y = 55, this.addChild(this.conditionText), this.scoreText = Xh("", "#bbbbbb", !1, "left", 24), this.scoreText.x = 130, this.scoreText.y = 90, this.addChild(this.scoreText);
          var e = Xh("", "#FFFFFF", !1, "left", 24);
          e.x = 420, e.y = 30, this.addChild(e);
          var i = this.countBg = jh("team_join_rank_item_count_bg.png");
          i.x = e.x + e.width / 2 - i.width / 2, i.y = 70, this.addChild(i), this.countText = Xh("1/1", "#bbbbbb", !1, "left", 20), this.countText.x = i.x + (i.width - this.countText.width) / 2, this.countText.y = i.y + (i.height - this.countText.height) / 2, this.addChild(this.countText), this.joinBtn = new Ru("team_button_join.png"), this.joinBtn.x = t.width - 60, this.joinBtn.y = t.height / 2, this.addChild(this.joinBtn.skin), this.joinBtn.on(Tu, this.onJoin, this), this.inited = !0
        }, e.prototype.onJoin = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return 2 === this.rankInfo.joinLimit ? (rc(""), [2]) : uC.bestScore < this.rankInfo.requireScore ? (rc(""), [2]) : [4, qw([this.rankInfo.teamId])];
                case 1:
                  return t.sent(), [2]
              }
            }))
          }))
        }, e.prototype.setRankInfo = function(t, e) {
          this.inited && this.rankInfo === e || (this.rank = t, this.rankInfo = e, this.inited ? this.refreshUI() : this.visible = !1)
        }, e.prototype.refreshUI = function() {
          this.rankImage.setLevel(this.rankInfo.level), this.nameText.text = hn(this.rankInfo.name, 8), this.conditionText.text = "".concat(cv[this.rankInfo.joinLimit]), this.scoreText.text = "".concat(this.rankInfo.requireScore), this.countText.text = "".concat(this.rankInfo.memberCount, "/").concat(this.rankInfo.memberMax), this.countText.x = this.countBg.x + (this.countBg.width - this.countText.width) / 2
        }, e.prototype.update = function(t, i) {
          var n = e.ITEM_REAL_HEIGHT,
            o = this.rank * n - t;
          o >= -n && o <= i + n ? (this.inited || (this.createContents(), this.refreshUI()), this.visible = !0) : this.visible = !1
        }, e.ITEM_HEIGHT = 126, e.ITEM_GAP = 10, e.ITEM_REAL_HEIGHT = e.ITEM_HEIGHT + e.ITEM_GAP, e
      }(PIXI.Container),
      yv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentHeight = 0, e.name = "TeamRankList", e.y = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return -this.y
          },
          set: function(t) {
            this.y = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this._contentHeight
          },
          set: function(t) {
            this._contentHeight = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      vv = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          i._selected = !1, i.type = e;
          var n = qh("team_chat_msg_bg.png", 30, 30, 30, 30);
          return n.width = 476, n.x = 0, n.y = 0, i.addChild(n), i.conditionText = Xh("", "#000000", !1, "left", 24), i.conditionText.x = 20, i.conditionText.y = (n.height - i.conditionText.height) / 2, i.addChild(i.conditionText), i.uncheckedIcon = jh("team_icon_uncheck.png"), i.uncheckedIcon.x = n.width - 60, i.uncheckedIcon.y = (n.height - i.uncheckedIcon.height) / 2, i.addChild(i.uncheckedIcon), i.checkedIcon = jh("team_icon_checked.png"), i.checkedIcon.x = n.width - 60, i.checkedIcon.y = (n.height - i.checkedIcon.height) / 2, i.addChild(i.checkedIcon), i.conditionText.text = function(t) {
            switch (t) {
              case 1:
                return "";
              case 2:
                return "";
              case 3:
                return "";
              default:
                return ""
            }
          }(e), i.selected = !1, i.interactive = !0, i
        }
        return i(e, t), Object.defineProperty(e.prototype, "selected", {
          get: function() {
            return this._selected
          },
          set: function(t) {
            this._selected = t, this.uncheckedIcon.visible = !t, this.checkedIcon.visible = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      bv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.recruitItems = [], e._recruit = !1, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = $h(635, 936), this.addChild(this.bg), this.addTitle(""), this.addCloseButton();
          var e = new pv("", 1);
          e.x = 85, e.y = 130, this.addChild(e);
          for (var i = function(e) {
              var i = new vv(e);
              i.y = 200 + e * (i.height + 20), i.x = (n.bg.width - i.width) / 2, n.addChild(i), i.on(Tu, (function() {
                t.selectRecruitItem(i)
              }), n), n.recruitItems.push(i)
            }, n = this, o = 0; o < 4; o++) i(o);
          var r = this.descBg = Km();
          r.y = this.recruitItems[this.recruitItems.length - 1].y + 100, r.x = (this.bg.width - r.width) / 2, r.interactive = !0, this.addChild(r), this.descText = Xh("", "#8e8e8e", !0, "left", 24), this.descText.x = r.x + 20, this.descText.y = r.y + (r.height - this.descText.height) / 2, this.addChild(this.descText), this.buttonGroup = new im(20), this.addChild(this.buttonGroup), this.recruitButton = new Ru("team_btn_recruit.png", !1), this.buttonGroup.addButton(this.recruitButton), this.recruitButton.on(Tu, this.onRecruit, this), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.height - 150, this.selectRecruitItem(this.recruitItems[0])
        }, e.prototype.selectRecruitItem = function(t) {
          this.selectItem = t, t.selected = !0;
          for (var e = 0; e < this.recruitItems.length; e++) {
            var i = this.recruitItems[e];
            i !== t && (i.selected = !1)
          }
          var n = mx.teamInfo.requireScore;
          this.descText.text = $m(mx.teamName, n, this.selectItem.type), this.descText.y = this.descBg.y + (this.descBg.height - this.descText.height) / 2
        }, e.prototype.onRecruit = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, Hw(ad.RECRUIT, this.selectItem.type)];
                case 1:
                  return t.sent() && (this._recruit = !0, rc(""), this.close()), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow()
        }, e.prototype.addPromise = function() {
          return r(this, void 0, void 0, (function() {
            var t = this;
            return s(this, (function(e) {
              return [2, new Promise((function(e) {
                t.resolve = e
              }))]
            }))
          }))
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.resolve && (this.resolve(this._recruit), this.resolve = void 0)
        }, e.clsName = "TeamRecruitView", e
      }(Qg),
      wv = function(t) {
        function e(e, i) {
          void 0 === e && (e = 5), void 0 === i && (i = !1);
          var n = t.call(this) || this;
          return n.items = [], n.gap = e, n.verticalCenter = i, n._realWidth = 0, n
        }
        return i(e, t), e.prototype.addSkin = function(t) {
          t instanceof Lu ? this.addChild(t.skin) : this.addChild(t);
          var e = this.items.indexOf(t); - 1 !== e && this.items.splice(e, 1), this.items.push(t), this.reLayout()
        }, e.prototype.removeSkin = function(t) {
          if (t instanceof Lu ? this.removeChild(t.skin) : this.removeChild(t), 1 === arguments.length) {
            var e = this.items.indexOf(t); - 1 !== e && this.items.splice(e, 1), this.reLayout()
          }
        }, e.prototype.reLayout = function() {
          for (var t = 0, e = 0; e < this.items.length; e++) {
            (i = this.items[e]).visible && (i.width, e !== this.items.length - 1 && this.gap, i.height > t && (t = i.height))
          }
          this._realWidth = 0;
          for (e = 0; e < this.items.length; e++) {
            var i;
            (i = this.items[e]).visible && (i.x = this._realWidth, this.verticalCenter && (i.y = (t - i.height) / 2), this._realWidth += i.width, e !== this.items.length - 1 && (this._realWidth += this.gap))
          }
        }, e.prototype.removeAllItems = function() {
          this.removeChildren(), this.items.length = 0
        }, Object.defineProperty(e.prototype, "realWidth", {
          get: function() {
            return this._realWidth
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.items && (this.items.length = 0, this.items = null), t.prototype.destroy.call(this)
        }, e
      }(PIXI.Container),
      xv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.width = 80, e.height = 80, e.bg = jh("medal_level1.png"), e.addChild(e.bg), e.mode = jh("medal_mode3.png"), e.addChild(e.mode), e.mode.x = (e.bg.width - e.mode.width) / 2, e.mode.y = (e.bg.height - e.mode.height) / 2, e.tipText = Xh("", "#FFFFFF", !1, "left", 18), e.tipText.x = e.bg.x + (e.bg.width - e.tipText.width) / 2, e.tipText.y = e.bg.y + (e.bg.height - e.tipText.height) / 2, e.tipText.visible = !1, e.addChild(e.tipText), e
        }
        return i(e, t), e.prototype.setInfo = function(t) {
          if (!t) return this.tipText.visible = !0, this.bg.visible = !1, void(this.mode.visible = !1);
          this.tipText.visible = !1, this.bg.visible = !0, this.mode.visible = !0;
          var e = Fh.getLevel(t.id);
          this.bg.texture = Vh("medal_level".concat(e, ".png")), this.mode.texture = Vh("medal_mode".concat(t.type, ".png"));
          var i = 0;
          switch (t.type) {
            case Jh.Collection:
              switch (e) {
                case 4:
                case 3:
                  break;
                case 2:
                  i = -6;
                  break;
                case 1:
                  i = -5
              }
              break;
            case Jh.FastDrop:
              switch (e) {
                case 4:
                case 3:
                  i = -2;
                  break;
                case 2:
                  i = -6;
                  break;
                case 1:
                  i = -5
              }
              break;
            case Jh.Blood:
              switch (e) {
                case 4:
                case 3:
                  break;
                case 2:
                  i = -6;
                  break;
                case 1:
                  i = -5
              }
              break;
            case Jh.Mutation:
              switch (e) {
                case 4:
                case 3:
                  i = -2;
                  break;
                case 2:
                  i = -6;
                  break;
                case 1:
                  i = -5
              }
              break;
            case Jh.Punch:
              switch (e) {
                case 4:
                case 3:
                  break;
                case 2:
                  i = -3;
                  break;
                case 1:
                  i = -2
              }
              break;
            case Jh.Power:
              switch (e) {
                case 4:
                case 3:
                  i = -2;
                  break;
                case 2:
                  i = -6;
                  break;
                case 1:
                  i = -5
              }
          }
          this.mode.x = (this.bg.width - this.mode.width) / 2 + 0, this.mode.y = (this.bg.height - this.mode.height) / 2 + i
        }, e
      }(PIXI.Container),
      Tv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.modeText = Xh("", "#bcbfcd", !1, "left", 22), e.addChild(e.modeText), e.rankText = Xh("", "#bcbfcd", !1, "left", 22), e.rankText.y = e.modeText.y + e.modeText.height + 3, e.addChild(e.rankText), e.bg = jh("medal_icon_bg.png"), e.bg.width = 87, e.bg.height = 87, e.addChild(e.bg), e.bg.y = e.rankText.y + e.rankText.height + 3, e.icon = new xv, e.icon.width = 100, e.icon.height = 100, e.icon.x = e.bg.x + (e.bg.width - e.icon.width) / 2, e.icon.y = e.bg.y + (e.bg.height - e.icon.height) / 2, e.addChild(e.icon), e.countText = Xh("0", "#ffcd48", !1, "left", 24), e.countText.x = e.bg.x + (e.bg.width - e.countText.width) / 2, e.countText.y = e.bg.y + e.bg.height + 3, e.addChild(e.countText), e.setModeText(""), e.setRankText(""), e
        }
        return i(e, t), e.prototype.setModeText = function(t) {
          this.modeText.text = t, this.modeText.x = (this.bg.width - this.modeText.width) / 2
        }, e.prototype.setCount = function(t) {
          this.countText.text = t.toString(), this.countText.x = (this.bg.width - this.countText.width) / 2
        }, e.prototype.setRankText = function(t) {
          this.rankText.text = t, this.rankText.x = (this.bg.width - this.rankText.width) / 2
        }, e.prototype.setInfo = function(t) {
          var e = Fh.getMedal(t.id);
          this.icon.setInfo(e);
          var i = Mh.getMode(e.type).name;
          this.setModeText("".concat(i)), e.rank[1] <= 1 ? this.setRankText("1") : this.setRankText("".concat(e.rank[1])), this.setCount(t.count)
        }, e
      }(PIXI.Container),
      kv = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = e.bg = Km(580, 150);
          i.y = 0, i.x = 0, e.addChild(i);
          var n = e.avatarBg = jh("dlc/ui/default_avatar.png");
          return n.x = 30, n.y = (i.height - n.height) / 2, e.addChild(n), e.avatarIcon = new PIXI.Sprite, e.avatarIcon.width = 100, e.avatarIcon.height = 100, e.avatarIcon.x = n.x + (n.width - e.avatarIcon.width) / 2, e.avatarIcon.y = n.y + (n.height - e.avatarIcon.height) / 2, e.addChild(e.avatarIcon), e.nameText = Xh("", "#ff9933", !0, "left", 32), e.nameText.x = e.avatarIcon.width + 50, e.nameText.y = e.avatarIcon.y - 5, e.addChild(e.nameText), e.descText = Yh("", "#898989", 400, 28, !1), e.descText.x = e.nameText.x, e.descText.y = e.nameText.y + e.nameText.height + 10, e.addChild(e.descText), e
        }
        return i(e, t), e.prototype.setMessage = function(t) {
          Bm(this.avatarIcon, t.avatar), this.nameText.text = t.nick
        }, e.prototype.setUserInfo = function(t) {
          this.descText.text = "".concat(t.teamName ? ":" + t.teamName : "", "\n").concat(t.score, "\n").concat(t.skinCnt), this.bg.height = Math.max(150, this.descText.height + 80), this.avatarBg.y = (this.bg.height - this.avatarBg.height) / 2, this.avatarIcon.y = this.avatarBg.y + (this.avatarBg.height - this.avatarIcon.height) / 2
        }, e.prototype.destroy = function(e) {
          t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      Iv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(635, 750), this.addChild(this.bg), this.addTitle(""), this.addCloseButton(), this.teamFriend = new kv, this.teamFriend.y = 110, this.teamFriend.x = (this.bg.width - this.teamFriend.width) / 2, this.addChild(this.teamFriend);
          var t = Xh("", "#FFFFFF", !0, "left", 30);
          t.y = this.teamFriend.y + this.teamFriend.height + 50, t.x = (this.bg.width - t.width) / 2, this.addChild(t);
          var e = Km(580, 200);
          e.y = t.y + t.height + 20, e.x = (this.bg.width - e.width) / 2, this.addChild(e), this.medalGroup = new wv(10), this.medalGroup.y = e.y + 10, this.addChild(this.medalGroup), this.noMedalTip = Xh("", "#FFFFFF", !1, "left", 24), this.noMedalTip.x = (this.bg.width - this.noMedalTip.width) / 2, this.noMedalTip.y = e.y + 80, this.noMedalTip.visible = !1, this.addChild(this.noMedalTip), this.buttonGroup = new im(20), this.addChild(this.buttonGroup), this.inviteButton = new Ru("team_btn_invite.png", !1), this.buttonGroup.addButton(this.inviteButton), this.inviteButton.on(Tu, this.onInvite, this), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.height - 150
        }, e.prototype.onInvite = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return this.userInfo && this.userInfo.teamName || this.msg.teamId > 0 ? (rc(""), [2]) : mx.isManager ? [4, Jw(this.msg.sendUid)] : (rc(""), [2]);
                case 1:
                  return t.sent() && rc(""), this.close(), [2]
              }
            }))
          }))
        }, e.prototype.showMedalIcons = function() {
          for (var t = this.userInfo.medals, e = t.length, i = 0; i < e; i++) {
            var n = new Tv;
            this.medalGroup.addSkin(n), n.setInfo(t[i])
          }
          this.medalGroup.x = (this.bg.width - this.medalGroup.width) / 2, this.noMedalTip.visible = 0 === e
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), this.msg = e, this.teamFriend.setMessage(this.msg), this.inviteButton.visible = mx.hasTeam && this.msg.sendUid !== uC.uid, this.loadUserInfo()
        }, e.prototype.loadUserInfo = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return t = this, [4, Kw(this.msg.sendUid)];
                case 1:
                  return t.userInfo = e.sent(), this.userInfo ? (this.teamFriend.setUserInfo(this.userInfo), this.showMedalIcons(), [2]) : [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          this.inviteButton && (this.inviteButton.destroy(), this.inviteButton = null), this.buttonGroup && (this.buttonGroup.destroy(), this.buttonGroup = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamFriendView", e
      }(Qg),
      Cv = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = e.teamInfoBg = jh("team_info_bg.png");
          e.addChild(i), e.teamNameText = Xh("", 16737792, !0, "left", 32), e.teamNameText.y = 10, e.addChild(e.teamNameText), e.teamIDText = Xh("ID:1", 16777215, !0, "left", 24), e.teamIDText.y = 50, e.teamIDText.x = 20, e.addChild(e.teamIDText);
          var n = jh("team_member_icon.png");
          return n.y = e.teamIDText.y + (e.teamIDText.height - n.height) / 2, n.x = i.width - 100, e.addChild(n), e.teamCountText = Xh("1/1", 16777215, !0, "left", 24), e.teamCountText.y = n.y + (n.height - e.teamCountText.height) / 2, e.teamCountText.x = i.width - 65, e.addChild(e.teamCountText), e.teamLevelText = Xh("1", 14206726, !0, "left", 28), e.teamLevelText.y = e.teamIDText.y + 40, e.teamLevelText.x = e.teamIDText.x, e.addChild(e.teamLevelText), e.teamExpProgress = new tm("team_exp_progress_bg.png", "team_exp_progress_bar.png"), e.teamExpProgress.y = e.teamLevelText.y + (e.teamLevelText.height - e.teamExpProgress.height) / 2, e.teamExpProgress.x = 90, e.addChild(e.teamExpProgress.skin), e.teamExpText = Xh("100/100", 16777215, !0, "left", 24), e.teamExpText.y = e.teamExpProgress.y + (e.teamExpProgress.height - e.teamExpText.height) / 2, e.teamExpText.x = e.teamExpProgress.x + (e.teamExpProgress.width - e.teamExpText.width) / 2, e.addChild(e.teamExpText), e
        }
        return i(e, t), e.prototype.setTeamName = function(t) {
          this.teamNameText.text = t, this.teamNameText.x = (this.teamInfoBg.width - this.teamNameText.width) / 2
        }, e.prototype.setTeamInfo = function(t) {
          if (t)
            if (this.setTeamName(t.name), this.teamIDText.text = "ID:".concat(t.teamId), this.teamCountText.text = "".concat(t.memberCount, "/").concat(t.memberMax), this.teamLevelText.text = "".concat(t.level, ""), t.level >= Ph.maxLevel) this.teamExpText.text = "".concat(t.exp), this.teamExpProgress.progress = 1;
            else {
              var e = mx.getMaxExpByLevel(t.level);
              this.teamExpText.text = "".concat(t.exp, "/").concat(e), this.teamExpProgress.progress = t.exp / e
            }
        }, e.prototype.setTeamShowInfo = function(t, e, i) {
          if (i) {
            this.setTeamName(t), this.teamIDText.text = "ID:".concat(e), this.teamCountText.text = "".concat(i.memberCount, "/").concat(i.memberMax), this.teamLevelText.text = "".concat(i.level, "");
            var n = mx.getMaxExpByLevel(i.level);
            this.teamExpText.text = "".concat(i.exp, "/").concat(n), this.teamExpProgress.progress = i.exp / n
          }
        }, e
      }(PIXI.Container),
      _v = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = jh("team_shadow.png");
          return i.anchor.set(.5, .5), i.y = 20, e.addChild(i), e.skinIcon = jh("empty.png"), e.skinIcon.interactive = !1, e.skinIcon.width = 50, e.skinIcon.height = 50, e.skinIcon.anchor.set(.5, .5), e.addChild(e.skinIcon), e.avatarIcon = jh("empty.png"), e.avatarIcon.interactive = !1, e.avatarIcon.width = 40, e.avatarIcon.height = 40, e.avatarIcon.anchor.set(.5, .5), e.addChild(e.avatarIcon), e.avatarIcon.y = -50, e.avatarMask = new PIXI.Graphics, e.avatarMask.x = e.avatarIcon.x, e.avatarMask.y = e.avatarIcon.y, e.avatarMask.beginFill(0), e.avatarMask.drawCircle(0, 0, 20), e.avatarMask.endFill(), e.addChild(e.avatarMask), e.avatarIcon.mask = e.avatarMask, e.contributeText = Xh("", "#FFFFFF", !1, "left", 20), e.contributeText.x = -e.contributeText.width / 2, e.contributeText.y = -e.contributeText.height - 80, e.addChild(e.contributeText), e.contributeText.visible = !1, e
        }
        return i(e, t), e.prototype.showContribute = function(t) {
          this.contributeText.text = "+" + t, this.contributeText.visible = t > 0, this.contributeText.x = -this.contributeText.width / 2
        }, e.prototype.hideContribute = function() {
          this.contributeText.visible = !1
        }, e.prototype.setSkin = function(t) {
          this.skinIcon.texture = Vh("item".concat(t, ".png"))
        }, e.prototype.setName = function(t) {}, e.prototype.setTeamMemberShowInfo = function(t) {
          this.setSkin(t.skinId), this.setName(t.nick), Bm(this.avatarIcon, t.avatar)
        }, e.prototype.setTeamMember = function(t) {
          this.setSkin(t.skin), this.setName(t.nick), Bm(this.avatarIcon, t.avatar)
        }, e
      }(PIXI.Container),
      Bv = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.isDisposed = !1;
          var i = Wh("".concat(ci, "/team/team_members_bg.png"));
          return i.anchor.set(.5, .5), e.addChild(i), e.previewList = [], e.previewMap = new Map, e
        }
        return i(e, t), e.prototype.show = function(t) {
          for (var e = this.previewList.slice(), i = 0; i < e.length; i++) this.removeChild(e[i]);
          this.previewMap.clear(), this.previewList.length = 0;
          var n = 2 * Math.PI / 8,
            o = 2 * Math.PI / 12,
            r = Math.PI / 4;
          for (i = 0; i < t.length; i++) {
            var s = t[i],
              a = e.length > 0 ? e.pop() : new _v;
            a.hideContribute(), "uid" in s ? a.setTeamMember(s) : a.setTeamMemberShowInfo(s);
            var h = void 0,
              c = void 0;
            i < 8 ? (c = 100, h = r + n + i * n) : (c = 200, h = r + (i - 8) * o), a.x = Math.cos(h) * c, a.y = Math.sin(h) * c * .75 - 60, this.previewList.push(a), "uid" in s && this.previewMap.set(s.uid, a)
          }
          this.previewList.sort((function(t, e) {
            return t.y - e.y
          }));
          for (i = 0; i < this.previewList.length; i++) this.addChild(this.previewList[i])
        }, e.prototype.showContributes = function(t) {
          for (var e = 0; e < t.length; e++) {
            var i = t[e],
              n = this.previewMap.get(i.uid);
            n && n.showContribute(i.count)
          }
        }, e.prototype.loadTeamShowInfo = function() {
          var t = this;
          zw(mx.teamInfo.teamId).then((function(e) {
            if (!t.isDisposed && e) {
              var i = e.members;
              i && t.show(i)
            }
          }))
        }, e.prototype.loadTeamMembers = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return [4, Ew()];
                case 1:
                  return (t = i.sent()) ? ((e = t.members) && this.show(e), [2]) : [2]
              }
            }))
          }))
        }, e.prototype.destroy = function(e) {
          this.isDisposed = !0, t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      Sv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(635, 1036), this.addChild(this.bg), this.addTitle(""), this.addCloseButton();
          var t = Km();
          t.y = 120, t.x = (this.bg.width - t.width) / 2, this.addChild(t);
          var e = new pv("", 1);
          e.x = t.x, e.y = t.y - e.height / 2, this.addChild(e), this.conditionText = Xh("", "#8e8e8e", !0, "left", 24), this.conditionText.x = t.x + 20, this.conditionText.y = t.y + (t.height - this.conditionText.height) / 2, this.addChild(this.conditionText), this.teamInfoGroup = new Cv, this.teamInfoGroup.x = (this.bg.width - this.teamInfoGroup.width) / 2, this.teamInfoGroup.y = 260, this.addChild(this.teamInfoGroup), this.membersPreview = new Bv, this.membersPreview.x = this.bg.width / 2, this.membersPreview.y = this.bg.height / 2 + 120, this.addChild(this.membersPreview), this.buttonGroup = new im(20), this.addChild(this.buttonGroup), this.applyButton = new Ru("team_btn_apply.png", !1), this.buttonGroup.addButton(this.applyButton), this.applyButton.on(Tu, this.onApply, this), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.height - 150
        }, e.prototype.onApply = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, qw([this.msg.teamId])];
                case 1:
                  return t.sent(), rc(""), this.close(), [2]
              }
            }))
          }))
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), this.applyButton.visible = !mx.hasTeam, this.msg = e, this.loadTeamInfo(e.teamId)
        }, e.prototype.loadTeamInfo = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return [4, zw(t)];
                case 1:
                  return (e = o.sent()) ? ((i = e.team) && (this.conditionText.text = "".concat(cv[e.team.joinLimit], "\n:").concat(e.team.requireScore), this.teamInfoGroup.setTeamShowInfo(this.msg.teamName, this.msg.teamId, i)), (n = e.members) && this.membersPreview.show(n), [2]) : [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          this.applyButton && (this.applyButton.destroy(), this.applyButton = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamInfoView", e
      }(Qg),
      Pv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = qh("team_chat_name_bg.png", 20, 20, 20, 20), e.addChild(e.bg), e.nameText = Xh("", 0, !1, "left", 24), e.addChild(e.nameText), e
        }
        return i(e, t), e.prototype.setName = function(t) {
          this.nameText.text = t, this.bg.width = this.nameText.width + 40, this.nameText.x = (this.bg.width - this.nameText.width) / 2, this.nameText.y = (this.bg.height - this.nameText.height) / 2
        }, e
      }(PIXI.Container),
      Dv = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.group = new wv(10, !0), e.addChild(e.group), e.icon = new PIXI.Sprite, e.icon.width = 50, e.icon.height = 50, e.nameItem = new Pv, e.typeIcon = jh("team_icon_job.png"), e.group.addSkin(e.icon), e.group.addSkin(e.nameItem), e.group.addSkin(e.typeIcon);
          var i = e.chatGroup = new PIXI.Container,
            n = e.chatBg = qh("team_chat_msg_bg.png", 30, 30, 30, 30);
          n.width = 476, n.x = 0, n.y = 0, i.addChild(n);
          var o = jh("team_chat_msg_bg2.png");
          return o.x = n.width, o.y = 0, i.addChild(o), i.x = e.nameItem.x, i.y = e.group.y + e.group.height + 10, e.addChild(i), e.chatMsg = Yh("", "#000000", 450, 24, !1, "left"), e.addChild(e.chatMsg), e.chatMsg.x = 60, e.chatMsg.y = i.y + 20, n.height = Math.max(80, e.chatMsg.height + 40), i.scale.set(-1, 1), i.x = 510, e.group.x = -10, e.infoBtn = new Ru("team_btn_market_info.png", !0), e.infoBtn.x = 510, e.infoBtn.y = 55, e.addChild(e.infoBtn.skin), e.infoBtn.interactive = !1, e.interactive = !0, e.on(Iu, e.onInfo, e), e
        }
        return i(e, t), e.prototype.onInfo = function() {
          this.msg.type === ad.LOOK_CHANCE ? tc.showPanel(Iv, this.msg) : tc.showPanel(Sv, this.msg)
        }, e.prototype.setMessage = function(t) {
          this.msg = t, Bm(this.icon, t.avatar), this.nameItem.setName(t.type === ad.LOOK_CHANCE ? t.nick : t.teamName), this.group.reLayout(), this.chatMsg.text = t.type === ad.RECRUIT ? $m(t.teamName, t.score, t.msgId) : "~", this.chatBg.height = Math.max(80, this.chatMsg.height + 40), this.typeIcon.texture = jh(t.type === ad.RECRUIT ? "team_icon_job.png" : "team_icon_recruit.png").texture
        }, e
      }(PIXI.Container),
      Mv = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.msgItems = [], e.scrollWidth = 580, e.maxMsgId = 0;
          var i = 635;
          e.contentWidth = i, e.scroller = new Wu(e.scrollWidth, 720), e.scroller.x = (i - e.scrollWidth) / 2, e.scroller.y = 70, e.rankList = new yv, e.scroller.setContent(e.rankList), e.addChild(e.scroller), e.buttonGroup = new im(20), e.addChild(e.buttonGroup), e.recruitButton = new Ru("team_btn_recruit.png", !1), e.buttonGroup.addButton(e.recruitButton), e.jobBtn = new Ru("team_btn_job.png", !1), e.buttonGroup.addButton(e.jobBtn), e.recruitButton.on(Tu, e.onRecruit, e), e.jobBtn.on(Tu, e.onJob, e), e.buttonGroup.x = (i - e.buttonGroup.width) / 2, e.buttonGroup.y = 800;
          var n = e.warningText = Xh("24", 9013641, !1, "left", 24);
          return n.x = (i - n.width) / 2, n.y = 920, e.addChild(n), e.intervalId = setInterval(e.onTick.bind(e), 1e4), e.addToDestroy = mr((function() {
            e.warningText.visible = mx.isManager, e.recruitButton.visible = mx.isManager, e.jobBtn.visible = !mx.hasTeam, e.buttonGroup.reLayout(), e.buttonGroup.x = (e.contentWidth - e.buttonGroup.width) / 2
          })), e
        }
        return i(e, t), e.prototype.onTick = function() {
          var t = Je.curTime - mx.lastRecruitTime;
          mx.lastRecruitTime > 0 && t < ei ? this.warningText.text = ri(ei - t) + "" : this.warningText.text = "24", this.warningText.x = (this.contentWidth - this.warningText.width) / 2
        }, e.prototype.onRecruit = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return mx.isManager ? (t = Je.curTime - mx.lastRecruitTime, mx.lastRecruitTime > 0 && t < ei ? (rc(ri(ei - t) + ""), [2]) : [4, tc.showPanel(bv).addPromise()]) : (rc(""), [2]);
                case 1:
                  return e.sent() && this.loadMsgList(), [2]
              }
            }))
          }))
        }, e.prototype.onJob = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return mx.hasTeam ? (rc(""), [2]) : (t = Je.curTime - mx.lastRecruitTime, mx.lastRecruitTime > 0 && t < ei ? (rc(ri(ei - t) + ""), [2]) : [4, Hw(ad.LOOK_CHANCE, 0)]);
                case 1:
                  return e.sent() && (rc(""), this.loadMsgList()), [2]
              }
            }))
          }))
        }, e.prototype.refreshScroll = function() {
          this.rankList.removeChildren();
          for (var t = 0, e = 0; e < this.msgItems.length; e++) {
            var i = this.msgItems[e];
            i.y = t, this.rankList.addChild(i), t += i.height + 10
          }
          this.rankList.contentHeight = t, this.scroller.updateMaxScrollV(), this.scroller.scrollV = this.scroller.maxScrollV
        }, e.prototype.show = function() {
          t.prototype.show.call(this), this.showMessages(mx.recruitMessages), this.loadMsgList()
        }, e.prototype.showMessages = function(t) {
          for (var e = 0; e < t.length; e++) {
            var i = t[e];
            if (!(i.id <= this.maxMsgId)) {
              var n = new Dv;
              n.setMessage(i), n.x = (this.scrollWidth - n.width) / 2, this.msgItems.push(n)
            }
          }
          this.maxMsgId = mx.recruitMaxId, this.refreshScroll()
        }, e.prototype.loadMsgList = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return [4, $w(mx.recruitMaxId)];
                case 1:
                  return !(t = i.sent()) || this.isDestroyed || (t.length > 0 && (e = mx.addRecruitMessages(t), this.showMessages(e)), this.onTick()), [2]
              }
            }))
          }))
        }, e.prototype.destroy = function(e) {
          this.intervalId && (clearInterval(this.intervalId), this.intervalId = null), t.prototype.destroy.call(this, e)
        }, e
      }(rv),
      Fv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(635, 1036), this.addChild(this.bg), this.addTitle(""), this.addCloseButton();
          var t = this.marketPanel = new Mv;
          t.x = 0, t.y = 50, this.addChild(t)
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), this.marketPanel.show(), $I("")
        }, e.prototype.onDestroy = function() {
          this.marketPanel && (this.marketPanel.destroy(), this.marketPanel = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamMarketView", e
      }(Qg),
      Ev = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.rankItems = [], e.isDisposed = !1;
          var i = Xh("~", 16737792, !0, "left", 24);
          return i.x = (635 - i.width) / 2, i.y = 60, e.addChild(i), e.scroller = new Wu(600, 740), e.scroller.x = 17.5, e.scroller.y = 100, e.rankList = new yv, e.scroller.setContent(e.rankList), e.addChild(e.scroller), e.buttonGroup = new im(20), e.addChild(e.buttonGroup), e.marketButton = new Ru("team_button_market.png", !1), e.marketButton.on(Tu, e._onMarket, e), e.buttonGroup.addButton(e.marketButton), e.joinButton = new Ru("team_button_fastJoin.png", !1), e.joinButton.on(Tu, e._fastJoinTeam, e), e.buttonGroup.addButton(e.joinButton.skin), e.buttonGroup.x = (635 - e.buttonGroup.width) / 2, e.buttonGroup.y = 850, e
        }
        return i(e, t), e.prototype._onMarket = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              return tc.showPanel(Fv), [2]
            }))
          }))
        }, e.prototype.onTick = function(t) {
          if (!this.isDisposed && this.visible) {
            for (var e = this.scroller.scrollV, i = this.scroller.visibleHeight, n = this.rankItems.length - 1; n >= 0; n--) this.rankItems[n].update(e, i);
            requestAnimationFrame(this.onTick.bind(this))
          }
        }, e.prototype.loadTeamList = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n, o, r;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  return [4, Mw()];
                case 1:
                  for (t = s.sent(), this.teams = t, e = this.rankItems.slice(), this.rankItems.length = 0, i = t.length, n = 0, o = 0; o < i; o++) r = void 0, (r = e.length > 0 ? e.pop() : new mv).setRankInfo(o, t[o]), r.y = n, this.rankItems.push(r), r.parent !== this.rankList && this.rankList.addChild(r), o < i - 1 && (n += mv.ITEM_HEIGHT + mv.ITEM_GAP);
                  for (o = 0; o < e.length; o++)(r = e[o]).destroy();
                  return e.length = 0, this.rankList.contentHeight = n + mv.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0, this.refreshJoinButtonState(), [2]
              }
            }))
          }))
        }, e.prototype.show = function() {
          t.prototype.show.call(this), this.joinButton.visible = !1, this.loadTeamList().then((function() {})), requestAnimationFrame(this.onTick.bind(this))
        }, e.prototype.refreshJoinButtonState = function() {
          for (var t, e = [], i = 0; i < this.teams.length; i++) {
            var n = this.teams[i];
            2 === (t = n).joinLimit || uC.bestScore < t.requireScore || e.push(n)
          }
          this.joinButton.visible = e.length >= 0, this.buttonGroup.reLayout(), this.activeTeams = e
        }, e.prototype._fastJoinTeam = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return $I(""), [4, qw(this.activeTeams.map((function(t) {
                    return t.teamId
                  })))];
                case 1:
                  return t.sent(), [2]
              }
            }))
          }))
        }, e.prototype.destroy = function(e) {
          if (!this.isDisposed) {
            this.isDisposed = !0, this.joinButton && (this.joinButton.destroy(), this.joinButton = null), this.marketButton && (this.marketButton.destroy(), this.marketButton = null);
            for (var i = 0; i < this.rankItems.length; i++) {
              this.rankItems[i].destroy()
            }
            this.rankItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), t.prototype.destroy.call(this, e)
          }
        }, e
      }(rv),
      Lv = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.searchId = "";
          var i = e.contentWidth = 635,
            n = Xh("ID~", 16737792, !0, "left", 24);
          n.x = (i - n.width) / 2, n.y = 100, e.addChild(n);
          var o = new pv("ID");
          o.x = 40, o.y = 160, e.addChild(o);
          var r = jh("team_name_bg.png");
          r.width = 420, r.y = o.y + 80, r.x = o.x, e.addChild(r), r.interactive = !0, r.on(Tu, e.onIdInput, e), e.idText = Xh("id", "#8e8e8e", !0, "left", 32), e.idText.x = r.x + 20, e.idText.y = r.y + (r.height - e.idText.height) / 2, e.addChild(e.idText), e.searchButton = new Ru("team_button_search.png"), e.searchButton.x = r.x + r.width + 20 + e.searchButton.width / 2, e.searchButton.y = r.y + r.height / 2, e.addChild(e.searchButton.skin), e.searchButton.on(Tu, e.onSearch, e);
          var s = jh("team_line.png");
          return s.y = e.searchButton.y + e.searchButton.height / 2 + 60, s.x = (i - s.width) / 2, e.addChild(s), e.searchItem = new mv, e.searchItem.y = s.y + 40, e.addChild(e.searchItem), e.noTipText = Xh("", "#8e8e8e", !0, "center", 32), e.noTipText.x = (i - e.noTipText.width) / 2, e.noTipText.y = s.y + 40, e.addChild(e.noTipText), e.noTipText.visible = !1, e
        }
        return i(e, t), e.prototype.onSearch = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return "" === this.searchId ? (rc("ID"), [2]) : [4, Fw(parseInt(this.searchId))];
                case 1:
                  return (t = e.sent()) ? (this.noTipText.visible = !1, this.searchItem.setRankInfo(1, t), this.searchItem.update(0, 0), this.searchItem.x = (this.contentWidth - this.searchItem.width) / 2) : this.noTipText.visible = !0, [2]
              }
            }))
          }))
        }, e.prototype.onIdInput = function() {
          var t = this;
          Hl(this.searchId, 20, !1, (function(e) {
            t.isDisposed || (t.searchId = e, t.idText.text = e)
          }))
        }, e.prototype.destroy = function(e) {
          this.isDisposed = !0, this.searchButton && (this.searchButton.destroy(), this.searchButton = null), t.prototype.destroy.call(this, e)
        }, e
      }(rv),
      Ov = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !0, e.activeTab = jh("skin_tab_active.png"), e.addChild(e.activeTab), e.unactiveTab = jh("skin_tab_unactive.png"), e.unactiveTab.y = e.activeTab.height - e.unactiveTab.height, e.addChild(e.unactiveTab), e.title = Xh("", "#ffffff", !1, "left", 26), e.title.x = e.activeTab.x + (e.activeTab.width - e.title.width) / 2, e.addChild(e.title), e.redPoint = jh("redpoint2.png"), e.redPoint.x = e.unactiveTab.width - e.redPoint.width / 2, e.redPoint.y = e.unactiveTab.height / 2 - e.redPoint.height, e.addChild(e.redPoint), e.selected = !1, e.showRed(!1), e
        }
        return i(e, t), e.prototype.showRed = function(t) {
          this.redPoint.visible = t
        }, e.prototype.setTitle = function(t) {
          this.title.text = t, this.title.x = this.activeTab.x + (this.activeTab.width - this.title.width) / 2
        }, Object.defineProperty(e.prototype, "selected", {
          get: function() {
            return this.activeTab.visible
          },
          set: function(t) {
            this.activeTab.visible = t, this.unactiveTab.visible = !t, t ? (this.title.style.fill = "#813808", this.title.y = this.activeTab.y + (this.activeTab.height - this.title.height) / 2, this.redPoint.y = this.activeTab.y + this.activeTab.height / 2 - this.redPoint.height - 20) : (this.title.style.fill = "#bcbfcd", this.title.y = this.unactiveTab.y + (this.unactiveTab.height - this.title.height) / 2, this.redPoint.y = this.unactiveTab.y + this.unactiveTab.height / 2 - this.redPoint.height - 10)
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(Fl),
      Rv = ["", "", ""],
      Gv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.curTab = -1, e.curTabButton = null, e.tabButtons = [], e.tabPanels = [], e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = Hh(635, 1036), this.addChild(this.bg), this.addCloseButton();
          for (var t = 0; t < Rv.length; t++) {
            var e = Rv[t],
              i = new Ov;
            i.setTitle(e), i.x = 20 + (i.width + 10) * t, i.y = 30, this.addChild(i), this.tabButtons.push(i), i.on(Tu, this.onClickTab, this)
          }
          var n = jh("skin_tab_line.png");
          n.y = 85, n.x = 10, this.addChild(n);
          var o = new Ev;
          o.hide(), o.x = 0, o.y = 50, this.addChild(o), this.tabPanels.push(o);
          var r = new fv;
          r.hide(), r.x = 0, r.y = 50, this.addChild(r), this.tabPanels.push(r);
          var s = new Lv;
          s.hide(), s.x = 0, s.y = 50, this.addChild(s), this.tabPanels.push(s)
        }, e.prototype.onClickTab = function(t) {
          var e = t.currentTarget,
            i = this.tabButtons.indexOf(e);
          i >= 0 && this.setSelectedTab(i)
        }, e.prototype.setSelectedTab = function(t) {
          t !== this.curTab && (this.curTabButton && (this.curTabButton.selected = !1), this.curTab = t, this.curTabButton = this.tabButtons[t], this.curTabButton && (this.curTabButton.selected = !0), this._curTabPanel && this._curTabPanel.hide(), this._curTabPanel = this.tabPanels[t], this._curTabPanel && this._curTabPanel.show())
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), e && e.hasOwnProperty("tab") ? this.setSelectedTab(e.tab) : this.setSelectedTab(1)
        }, e.prototype.onDestroy = function() {
          if (this.tabButtons) {
            for (var e = 0; e < this.tabButtons.length; e++) this.tabButtons[e].off(Tu, this.onClickTab, this);
            this.tabButtons.length = 0, this.tabButtons = null
          }
          this.tabPanels && (this.tabPanels.length = 0, this.tabPanels = null, this._curTabPanel = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "JoinTeamView", e
      }(Qg),
      Av = function(t) {
        function e(e) {
          void 0 === e && (e = 0);
          var i = t.call(this) || this,
            n = i.bg = Km();
          n.y = 0, n.x = 0, i.addChild(n);
          var o = new pv("", e);
          return o.x = 0, o.y = -o.height / 2, i.addChild(o), i.descText = Xh("", "#8e8e8e", !0, "left", 24), i.descText.x = n.x + 20, i.descText.y = n.y + (n.height - i.descText.height) / 2, i.addChild(i.descText), i
        }
        return i(e, t), e.prototype.setNotice = function(t) {
          this.descText.text = t || "...", this.descText.x = (this.width - this.descText.width) / 2
        }, e
      }(PIXI.Container),
      Nv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.group = new wv(10, !0), e.addChild(e.group), e.icon = new PIXI.Sprite, e.icon.width = 50, e.icon.height = 50, e.group.addSkin(e.icon), e.nameItem = new Pv, e.group.addSkin(e.nameItem), e.msgText = Xh("", 16777215, !1, "left", 24), e.group.addSkin(e.msgText), e
        }
        return i(e, t), e.prototype.setMessage = function(t) {
          Bm(this.icon, t.avatar), this.nameItem.setName(t.nick), this.msgText.text = t.type === rd.BeLeader ? "" : "", this.group.reLayout()
        }, e
      }(PIXI.Container),
      jv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = jh("team_icon_transfer.png"), e.addChild(e.bg), e.nameText = Xh("", 0, !1, "left", 24), e.addChild(e.nameText), e
        }
        return i(e, t), e.prototype.setPermission = function(t) {
          switch (t) {
            case sd.Normal:
              this.nameText.text = "";
              break;
            case sd.Manager:
              this.nameText.text = "";
              break;
            case sd.Leader:
              this.nameText.text = ""
          }
          this.bg.width = this.nameText.width + 40, this.nameText.x = (this.bg.width - this.nameText.width) / 2, this.nameText.y = (this.bg.height - this.nameText.height) / 2
        }, e
      }(PIXI.Container),
      Vv = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          i.contentWidth = 580, i.isLeft = e, i.group = new wv(10, !0), i.addChild(i.group), i.icon = new PIXI.Sprite, i.icon.width = 50, i.icon.height = 50, i.nameItem = new Pv, i.postItem = new jv, e ? (i.group.addSkin(i.icon), i.group.addSkin(i.nameItem), i.group.addSkin(i.postItem)) : (i.group.addSkin(i.postItem), i.group.addSkin(i.nameItem), i.group.addSkin(i.icon));
          var n = i.chatGroup = new PIXI.Container,
            o = i.chatBg = qh("team_chat_msg_bg.png", 30, 30, 30, 30);
          o.width = 476, o.x = 0, o.y = 0, n.addChild(o);
          var r = jh("team_chat_msg_bg2.png");
          return r.x = o.width, r.y = 0, n.addChild(r), n.x = i.nameItem.x, n.y = i.group.y + i.group.height + 10, i.addChild(n), i.chatMsg = Yh("", "#000000", 450, 24, !1, "left"), i.addChild(i.chatMsg), i.chatMsg.x = 60, i.chatMsg.y = n.y + 20, o.height = Math.max(80, i.chatMsg.height + 40), e ? (n.scale.set(-1, 1), n.x = 510, i.group.x = -10) : (n.x = 30, i.group.x = i.contentWidth - i.group.width - 25), i
        }
        return i(e, t), e.prototype.setMessage = function(t) {
          Bm(this.icon, t.avatar), this.nameItem.setName(t.nick), this.postItem.setPermission(t.permission), this.group.reLayout(), this.chatMsg.text = t.content, this.chatBg.height = Math.max(80, this.chatMsg.height + 40), this.isLeft ? this.group.x = -10 : (this.group.x = this.contentWidth - this.group.width - 25, this.chatGroup.x = 30)
        }, e
      }(PIXI.Container),
      Uv = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.joinItems = [], e.msgItems = [], e.allItems = [], e.scrollWidth = 580, e.maxMsgId = 0, e.chatMsg = "";
          e.notice = new Av(1), e.notice.y = 70, e.notice.x = (635 - e.notice.width) / 2, e.addChild(e.notice), e.scroller = new Wu(e.scrollWidth, 650), e.scroller.x = (635 - e.scrollWidth) / 2, e.scroller.y = 230, e.rankList = new yv, e.scroller.setContent(e.rankList), e.addChild(e.scroller);
          var i = new PIXI.Graphics;
          return i.beginFill(8947848), i.drawRect(0, 0, 420, 50), i.endFill(), i.x = 20, i.y = 900, e.addChild(i), i.interactive = !0, i.on(Tu, e.onInput, e), e.inputText = Xh("", "#FFFFFF", !1, "left", 20), e.inputText.x = i.x + 5, e.inputText.y = i.y + (i.height - e.inputText.height) / 2, e.addChild(e.inputText), e.sendBtn = new Ru("team_btn_send.png"), e.sendBtn.y = i.y + i.height / 2, e.sendBtn.x = 535, e.addChild(e.sendBtn.skin), e.sendBtn.on(Iu, e.onSend, e), e.addToDestroy = mr((function() {
            var t = mx.teamInfo;
            t && e.notice.setNotice(t.notice)
          })), e
        }
        return i(e, t), e.prototype.onSend = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return 0 === this.chatMsg.length ? [2] : (this.inputText.text = "", t = this.chatMsg, this.chatMsg = "", [4, Yw(t)]);
                case 1:
                  return e.sent(), this.loadNewMsg(), [2]
              }
            }))
          }))
        }, e.prototype.onInput = function() {
          var t = this;
          Hl(this.chatMsg, 30, !1, (function(e) {
            t.isDestroyed || (t.chatMsg = e, t.inputText.text = hn(t.chatMsg, 20))
          }))
        }, e.prototype.refreshScroll = function() {
          this.rankList.removeChildren();
          for (var t = 0, e = 0; e < this.allItems.length; e++) {
            var i = this.allItems[e];
            i.y = t, this.rankList.addChild(i), t += i.height + 10
          }
          this.rankList.contentHeight = t, this.scroller.updateMaxScrollV(), this.scroller.scrollV = this.scroller.maxScrollV
        }, e.prototype.show = function() {
          t.prototype.show.call(this), this.showMessages(mx.messages), this.loadNewMsg()
        }, e.prototype.showMessages = function(t) {
          for (var e = 0; e < t.length; e++) {
            var i = t[e];
            if (!(i.id <= this.maxMsgId)) {
              var n = void 0;
              i.type === rd.Chat ? (n = new Vv(i.uid !== uC.uid), this.msgItems.push(n)) : (n = new Nv, this.joinItems.push(n)), n.setMessage(i), n.x = (this.scrollWidth - n.width) / 2, this.allItems.push(n)
            }
          }
          this.maxMsgId = mx.maxMsgId, this.refreshScroll()
        }, e.prototype.loadNewMsg = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return [4, Xw(mx.maxMsgId)];
                case 1:
                  return t = i.sent(), this.isDestroyed ? [2] : (t.length > 0 && (e = mx.addMessages(t), this.showMessages(e)), [2])
              }
            }))
          }))
        }, e.prototype.destroy = function(e) {
          this.allItems.length = 0, this.msgItems.length = 0, this.joinItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), this.sendBtn && (this.sendBtn.destroy(), this.sendBtn = null), t.prototype.destroy.call(this, e)
        }, e
      }(rv),
      Wv = ["", ""],
      qv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.curTab = -1, e.curTabButton = null, e.tabButtons = [], e.tabPanels = [], e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = Hh(635, 1036), this.addChild(this.bg), this.addCloseButton();
          for (var t = 0; t < Wv.length; t++) {
            var e = Wv[t],
              i = new Ov;
            i.setTitle(e), i.x = 20 + (i.width + 10) * t, i.y = 30, this.addChild(i), this.tabButtons.push(i), i.on(Tu, this.onClickTab, this)
          }
          var n = jh("skin_tab_line.png");
          n.y = 85, n.x = 10, this.addChild(n);
          var o = new Uv;
          o.hide(), o.x = 0, o.y = 50, this.addChild(o), this.tabPanels.push(o);
          var r = new Mv;
          r.hide(), r.x = 0, r.y = 50, this.addChild(r), this.tabPanels.push(r)
        }, e.prototype.onClickTab = function(t) {
          var e = t.currentTarget,
            i = this.tabButtons.indexOf(e);
          i >= 0 && this.setSelectedTab(i)
        }, e.prototype.setSelectedTab = function(t) {
          t !== this.curTab && (this.curTabButton && (this.curTabButton.selected = !1), this.curTab = t, this.curTabButton = this.tabButtons[t], this.curTabButton && (this.curTabButton.selected = !0), this._curTabPanel && this._curTabPanel.hide(), this._curTabPanel = this.tabPanels[t], this._curTabPanel && this._curTabPanel.show())
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), e && e.hasOwnProperty("tab") ? this.setSelectedTab(e.tab) : this.setSelectedTab(0)
        }, e.prototype.onDestroy = function() {
          if (this.tabButtons) {
            for (var e = 0; e < this.tabButtons.length; e++) this.tabButtons[e].off(Tu, this.onClickTab, this);
            this.tabButtons.length = 0, this.tabButtons = null
          }
          this.tabPanels && (this.tabPanels.length = 0, this.tabPanels = null, this._curTabPanel = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamChatView", e
      }(Qg),
      Hv = function(t) {
        function e() {
          var e = t.call(this, 2, !1) || this;
          return e._confirm = !1, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(620, 500), this.addChild(this.bg), this.addTitle("", "#f19d07"), this.descText = Xh("", "#FFFFFF", !0, "left", 30), this.descText.x = (this.bg.width - this.descText.width) / 2, this.descText.y = (this.bg.height - this.descText.height) / 2 - 30, this.addChild(this.descText), this.buttonGroup = new im(20), this.addChild(this.buttonGroup), this.cancelButton = new nm("team_white_button_242_90.png", "", !1, 30), this.cancelButton.labelColor = "#3f3f3f", this.cancelButton.on(Tu, this._onCancel, this), this.buttonGroup.addButton(this.cancelButton), this.quitButton = new nm("team_yellow_button_242_91.png", "", !1, 30), this.quitButton.labelColor = "#7f3607", this.quitButton.on(Tu, this._onQuit, this), this.buttonGroup.addButton(this.quitButton), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.height - 150
        }, e.prototype._onCancel = function() {
          this.close()
        }, e.prototype._onQuit = function() {
          this._confirm = !0, this.close()
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow()
        }, e.prototype.addPromise = function() {
          return r(this, void 0, void 0, (function() {
            var t = this;
            return s(this, (function(e) {
              return [2, new Promise((function(e) {
                t.resolve = e
              }))]
            }))
          }))
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.quitButton && (this.quitButton.destroy(), this.quitButton = null), this.cancelButton && (this.cancelButton.destroy(), this.cancelButton = null), this.resolve && (this.resolve(this._confirm), this.resolve = void 0)
        }, e.clsName = "TeamDecorateConfirmView", e
      }(Qg),
      $v = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.bg = $h(635, 700), e.addChild(e.bg), e.addTitle("", "#f19d07"), e.addCloseButton(), e.descText = Yh("", 12369869, 590, 28, !1, "left", 10), e.addChild(e.descText), e
        }
        return i(e, t), e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.descText.text = e.msg, this.descText.x = (this.bg.width - this.descText.width) / 2, this.descText.y = 45 + (this.bg.height - this.descText.height) / 2, this.updateTitle(e.title)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null)
        }, e.clsName = "TeamDescView", e
      }(Qg),
      Xv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(635, 795), this.addChild(this.bg), this.addTitle(""), this.addCloseButton();
          var t = jh("team_gold_big_icon.png");
          t.x = (this.bg.width - t.width) / 2, t.y = 150, this.addChild(t);
          var e = Xh("100~300", "#bcbfcd", !0, "left", 28),
            i = jh("team_gold_icon.png"),
            n = new wv(5, !0);
          n.addSkin(e), n.addSkin(i), n.x = (this.bg.width - n.width) / 2, n.y = t.y + t.height + 20, this.addChild(n), this.videoButton = new Ru("team_get_gold.png"), this.videoButton.x = this.bg.width / 2, this.videoButton.y = this.bg.height - this.videoButton.height / 2 - 150, this.addChild(this.videoButton.skin), this.videoButton.on(Iu, this.onVideo, this);
          var o = Xh("", "#bcbfcd", !0, "left", 28),
            r = jh("team_gold_icon.png"),
            s = new wv(5, !0);
          s.addSkin(r), s.addSkin(o), s.x = (this.bg.width - s.width) / 2, s.y = this.bg.height - s.height - 30, this.addChild(s)
        }, e.prototype.reachMaxCount = function() {
          return uC.dayVideoTeamCoin >= 3
        }, e.prototype.onVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return this.reachMaxCount() ? (rc("3"), [2]) : [4, mu(15)];
                case 1:
                  return (t = e.sent()) === ve.cancel ? [2, gu("")] : t === ve.fail ? [2, rc(fu)] : [4, ux()];
                case 2:
                  return e.sent() && this.close(), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow()
        }, e.prototype.destroy = function() {
          this.videoButton && (this.videoButton.destroy(), this.videoButton = null), t.prototype.destroy.call(this)
        }, e.clsName = "TeamVideoGoldView", e
      }(Qg),
      Yv = function(t) {
        function e(e) {
          void 0 === e && (e = !0);
          var i = t.call(this) || this,
            n = jh("team_gold_bg.png");
          i.addChild(n);
          var o = jh("team_gold_icon.png");
          return o.scale.set(.8, .8), o.x = n.x - 5, o.y = n.y + (n.height - o.height) / 2, i.addChild(o), i.goldLabel = Xh("1000", "#ffff00", !0, "left", 24), i.goldLabel.x = o.x + o.width, i.goldLabel.y = o.y + (o.height - i.goldLabel.height) / 2, i.addChild(i.goldLabel), e && (i.addBtn = new Ru("team_gold_add.png"), i.addBtn.x = n.width - i.addBtn.width / 2, i.addBtn.y = n.height / 2, i.addBtn.on(Tu, i.onAddCoin, i), i.addChild(i.addBtn.skin), i.autoDestroy = mr((function() {
            i.goldLabel.text = uC.teamCoin + ""
          }))), i
        }
        return i(e, t), e.prototype.onAddCoin = function() {
          tc.showPanel(Xv)
        }, e.prototype.setGold = function(t) {
          this.goldLabel.text = t + ""
        }, e.prototype.destroy = function(e) {
          this.autoDestroy && (this.autoDestroy(), this.autoDestroy = null), this.addBtn && (this.addBtn.destroy(), this.addBtn = null), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      zv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.icon = new PIXI.Sprite, e.icon.width = 100, e.icon.height = 100, e.icon.x = 0, e.icon.y = 0, e.addChild(e.icon), e.nameText = Xh("", "#FFFFFF", !1, "left", 28), e.nameText.x = (e.icon.width - e.nameText.width) / 2, e.nameText.y = e.icon.y + e.icon.height + 30, e.addChild(e.nameText), e
        }
        return i(e, t), e.prototype.setReward = function(t, e) {
          this.icon.texture = Vh(t), this.icon.width = this.icon.texture.width, this.icon.height = this.icon.texture.height, this.nameText.text = e, this.nameText.x = (this.icon.width - this.nameText.width) / 2, this.nameText.y = this.icon.y + this.icon.height + 30
        }, e
      }(PIXI.Container),
      Kv = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.tween = null, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(635, 600), this.addChild(this.bg), this.addTitle(""), this.addCloseButton(), this.hGroup = new wv(20, !0), this.hGroup.x = (this.bg.width - this.hGroup.width) / 2, this.hGroup.y = 180, this.addChild(this.hGroup), this.okButton = new Ru("button_ok.png", !1), this.okButton.on(Tu, this.close, this), this.buttonGroup = new im(20), this.buttonGroup.addButton(this.okButton), this.addChild(this.buttonGroup), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.y + this.bg.height - 130
        }, e.prototype.onShow = function(e) {
          var i = this;
          if (t.prototype.onShow.call(this), this.removeTween(), this.hGroup.removeChildren(), e.decorate && e.decorate > 0) {
            var n = new zv,
              o = Dh.getDecorate(e.decorate);
            n.setReward("deco_".concat(o.id, ".jpg"), o.name), this.hGroup.addSkin(n)
          }
          e.coupon && e.coupon > 0 && ((n = new zv).setReward("team_shop_ticket2.png", "x".concat(e.coupon)), this.hGroup.addSkin(n));
          this.hGroup.x = (this.bg.width - this.hGroup.width) / 2, this.pivot.set(this.width / 2, this.height / 2), this.x = 375, this.y = De / 2, this.scale.set(.5), this.tween = new TWEEN.Tween({
            scale: .5
          }).to({
            scale: 1
          }, 400).easing(TWEEN.Easing.Bounce.Out).onUpdate((function(t) {
            i.isDisposed || i.scale.set(t.scale)
          })).onComplete((function() {
            i.tween = null
          })).start()
        }, e.prototype.removeTween = function() {
          this.tween && (TWEEN.remove(this.tween), this.tween = null)
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), this.removeTween()
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.okButton && (this.okButton.destroy(), this.okButton = null)
        }, e.clsName = "TeamRewardView", e
      }(Qg),
      Jv = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.inited = !1, e.interactive = !0, e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this.bg = zm();
          this.addChild(t), this.rankText = Xh("10", "#FFFFFF", !0, "center", 30), this.rankText.x = 20, this.rankText.y = (t.height - this.rankText.height) / 2, this.addChild(this.rankText);
          var e = jh("team_icon_bg.png");
          e.x = this.rankText.x + this.rankText.width / 2 + 20, e.y = (t.height - e.height) / 2, this.addChild(e);
          var i = this.postBg = jh("team_post_bg.png");
          i.x = e.x + e.width + 5, i.y = 20, this.addChild(i);
          var n = this.dayBg = jh("team_label_bg.png");
          n.x = e.x + e.width + 5, n.y = t.height - n.height - 20, this.addChild(n), this.goldText = Xh("5000", "#bcbfcd", !0, "left", 24), this.goldText.x = n.x + n.width + 10, this.goldText.y = n.y + (n.height - this.goldText.height) / 2, this.addChild(this.goldText);
          var o = jh("team_icon_bg.png");
          o.x = t.width - o.width - 10, o.y = (t.height - o.height) / 2, this.addChild(o), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 80, this.avatarImage.height = 80, this.avatarImage.x = e.x + (e.width - this.avatarImage.width) / 2, this.avatarImage.y = e.y + (e.height - this.avatarImage.height) / 2, this.addChild(this.avatarImage), this.skinImage = new PIXI.Sprite, this.skinImage.width = 80, this.skinImage.height = 80, this.skinImage.x = o.x + (o.width - this.skinImage.width) / 2, this.skinImage.y = o.y + (o.height - this.skinImage.height) / 2, this.addChild(this.skinImage), this.postText = Xh("", "#000000", !1, "left", 24), this.postText.x = i.x + (i.width - this.postText.width) / 2, this.postText.y = i.y + (i.height - this.postText.height) / 2, this.addChild(this.postText), this.nameText = Xh("", "#ffffff", !0, "left", 28), this.nameText.x = i.x + i.width + 20, this.nameText.y = this.postText.y, this.addChild(this.nameText), this.dayText = Xh("111", "#ff6600", !1, "left", 20), this.dayText.x = n.x + (n.width - this.dayText.width) / 2, this.dayText.y = n.y + (n.height - this.dayText.height) / 2, this.addChild(this.dayText), this.inited = !0
        }, e.prototype.setRankInfo = function(t, e) {
          this.inited && this.rankInfo === e || (this.rank = t, this.rankInfo = e, this.inited ? this.refreshUI() : this.visible = !1)
        }, e.prototype.refreshUI = function() {
          var t = this.rankInfo.member;
          Bm(this.avatarImage, t.avatar), t.skin && (this.skinImage.texture = Vh("item".concat(t.skin, ".png"))), this.postText.text = qm(t.permission), this.rankText.text = "".concat(this.rank + 1), this.goldText.text = "".concat(this.rankInfo.value), this.nameText.text = hn(t.nick, 8), this.dayText.text = Hm(t.lastLoginTime), this.dayText.x = this.dayBg.x + (this.dayBg.width - this.dayText.width) / 2
        }, e.prototype.update = function(t, i) {
          var n = e.ITEM_REAL_HEIGHT,
            o = this.rank * n - t;
          o >= -n && o <= i + n ? (this.inited || (this.createContents(), this.refreshUI()), this.visible = !0) : this.visible = !1
        }, e.ITEM_HEIGHT = 126, e.ITEM_GAP = 10, e.ITEM_REAL_HEIGHT = e.ITEM_HEIGHT + e.ITEM_GAP, e
      }(PIXI.Container),
      Qv = ["", "", ""],
      Zv = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.rankItems = [], e.isDisposed = !1, e.curTab = -1, e.curTabButton = null, e.tabButtons = [], e.tabDatas = [];
          for (var i = 0; i < Qv.length; i++) {
            var n = Qv[i],
              o = new Ov;
            o.setTitle(n), o.x = 100 + (o.width + 10) * i, o.y = 60, e.addChild(o), e.tabButtons.push(o), o.on(Tu, e.onClickTab, e)
          }
          return e.scroller = new Wu(580, 800), e.scroller.x = 27.5, e.scroller.y = 150, e.rankList = new yv, e.scroller.setContent(e.rankList), e.addChild(e.scroller), e
        }
        return i(e, t), e.prototype.onClickTab = function(t) {
          var e = t.currentTarget,
            i = this.tabButtons.indexOf(e);
          i >= 0 && this.setSelectedTab(i)
        }, e.prototype.setSelectedTab = function(t) {
          t !== this.curTab && (this.curTabButton && (this.curTabButton.selected = !1), this.curTab = t, this.curTabButton = this.tabButtons[t], this.curTabButton && (this.curTabButton.selected = !0), this.loadTeams(t))
        }, e.prototype.loadTeams = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n, o, r, a;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  return [4, lx(t + 1)];
                case 1:
                  for (e = s.sent(), this.tabDatas[t] = e, i = this.rankItems.slice(), this.rankItems.length = 0, n = this.tabDatas[t].length, o = 0, r = 0; r < n; r++) a = void 0, (a = i.length > 0 ? i.pop() : new Jv).setRankInfo(r, this.tabDatas[t][r]), a.y = o, this.rankItems.push(a), a.parent !== this.rankList && this.rankList.addChild(a), r < n - 1 && (o += Jv.ITEM_HEIGHT + Jv.ITEM_GAP);
                  for (r = 0; r < i.length; r++)(a = i[r]).destroy();
                  return i.length = 0, this.rankList.contentHeight = o + Jv.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0, [2]
              }
            }))
          }))
        }, e.prototype.show = function() {
          t.prototype.show.call(this), this.setSelectedTab(0), requestAnimationFrame(this.onTick.bind(this))
        }, e.prototype.onTick = function(t) {
          if (!this.isDisposed && this.visible) {
            for (var e = this.scroller.scrollV, i = this.scroller.visibleHeight, n = this.rankItems.length - 1; n >= 0; n--) this.rankItems[n].update(e, i);
            requestAnimationFrame(this.onTick.bind(this))
          }
        }, e.prototype.destroy = function(e) {
          if (!this.isDisposed) {
            this.isDisposed = !0;
            for (var i = 0; i < this.rankItems.length; i++) {
              this.rankItems[i].destroy()
            }
            if (this.rankItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), this.tabButtons) {
              for (i = 0; i < this.tabButtons.length; i++) this.tabButtons[i].off(Tu, this.onClickTab, this);
              this.tabButtons.length = 0, this.tabButtons = null
            }
            t.prototype.destroy.call(this, e)
          }
        }, e
      }(rv),
      tb = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !0, e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this.bg = zm(580, e.ITEM_HEIGHT);
          this.addChild(t), this.lightBg = jh("team_level_light_bg.png"), this.addChild(this.lightBg), this.levelText = Xh("1", "#FFFFFF", !0, "left", 28), this.levelText.y = (t.height - this.levelText.height) / 2, this.levelText.x = 50, this.addChild(this.levelText), this.expText = Xh("100", "#FFFFFF", !0, "left", 28), this.expText.y = (t.height - this.expText.height) / 2, this.expText.x = (t.width - this.expText.width) / 2, this.addChild(this.expText), this.countText = Xh("2", "#FFFFFF", !0, "left", 28), this.countText.y = (t.height - this.countText.height) / 2, this.countText.x = t.width - this.countText.width - 50, this.addChild(this.countText)
        }, e.prototype.setMessage = function(t) {
          t.level >= 20 ? this.levelText.text = t.level + "+" : this.levelText.text = t.level + "", this.levelText.x = 45 - this.levelText.width / 2, this.expText.text = t.needExp + "", this.expText.x = (this.bg.width - this.expText.width) / 2 - 40, this.countText.text = t.memberMax + "", this.countText.x = this.bg.width - this.countText.width - 80, this.bg.visible = t.level !== mx.teamInfo.level, this.lightBg.visible = t.level === mx.teamInfo.level
        }, e.prototype.destroy = function(e) {
          t.prototype.destroy.call(this, e)
        }, e.ITEM_HEIGHT = 63, e.ITEM_GAP = 10, e
      }(PIXI.Container),
      eb = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentHeight = 0, e.name = "TeamLevelList", e.y = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return -this.y
          },
          set: function(t) {
            this.y = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this._contentHeight
          },
          set: function(t) {
            this._contentHeight = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      ib = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.inited = !1, e.interactive = !0, e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this.bg = zm();
          this.addChild(t), this.selectedBg = jh("team_rank_item_selected_bg.png"), this.addChild(this.selectedBg), this.selectedBg.visible = !1;
          var e = jh("team_icon_bg.png");
          e.x = 10, e.y = (t.height - e.height) / 2, this.addChild(e);
          var i = this.postBg = jh("team_post_bg.png");
          i.x = e.x + e.width + 10, i.y = 20, this.addChild(i);
          var n = this.dayBg = jh("team_label_bg.png");
          n.x = e.x + e.width + 10, n.y = t.height - n.height - 20, this.addChild(n);
          var o = jh("team_icon_bg.png");
          o.x = t.width - o.width - 10, o.y = (t.height - o.height) / 2, this.addChild(o), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 80, this.avatarImage.height = 80, this.avatarImage.x = e.x + (e.width - this.avatarImage.width) / 2, this.avatarImage.y = e.y + (e.height - this.avatarImage.height) / 2, this.addChild(this.avatarImage), this.skinImage = new PIXI.Sprite, this.skinImage.width = 80, this.skinImage.height = 80, this.skinImage.x = o.x + (o.width - this.skinImage.width) / 2, this.skinImage.y = o.y + (o.height - this.skinImage.height) / 2, this.addChild(this.skinImage), this.postText = Xh("", "#000000", !1, "left", 24), this.postText.x = i.x + (i.width - this.postText.width) / 2, this.postText.y = i.y + (i.height - this.postText.height) / 2, this.addChild(this.postText), this.nameText = Xh("", "#ffffff", !0, "left", 32), this.nameText.x = i.x + i.width + 20, this.nameText.y = this.postText.y, this.addChild(this.nameText), this.dayText = Xh("111", "#ff6600", !1, "left", 20), this.dayText.x = n.x + (n.width - this.dayText.width) / 2, this.dayText.y = n.y + (n.height - this.dayText.height) / 2, this.addChild(this.dayText), this.inited = !0
        }, e.prototype.setRankInfo = function(t, e) {
          this.inited && this.rankInfo === e || (this.rank = t, this.rankInfo = e, this.inited ? this.refreshUI() : this.visible = !1)
        }, e.prototype.refreshUI = function() {
          Bm(this.avatarImage, this.rankInfo.avatar), this.rankInfo.skin && (this.skinImage.texture = Vh("item".concat(this.rankInfo.skin, ".png"))), this.nameText.text = hn(this.rankInfo.nick, 8), this.dayText.text = Hm(this.rankInfo.lastLoginTime), this.dayText.x = this.dayBg.x + (this.dayBg.width - this.dayText.width) / 2, this.postText.text = qm(this.rankInfo.permission)
        }, e.prototype.update = function(t, i) {
          var n = e.ITEM_REAL_HEIGHT,
            o = this.rank * n - t;
          o >= -n && o <= i + n ? (this.inited || (this.createContents(), this.refreshUI()), this.visible = !0) : this.visible = !1
        }, e.ITEM_HEIGHT = 126, e.ITEM_GAP = 10, e.ITEM_REAL_HEIGHT = e.ITEM_HEIGHT + e.ITEM_GAP, e
      }(PIXI.Container),
      nb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.rankItems = [], e.bg = $h(635, 1036), e.addChild(e.bg), e.addTitle("", "#f19d07"), e.addCloseButton(), e.descText1 = Xh("1", 12369869, !1, "left", 28), e.descText1.x = (e.bg.width - e.descText1.width) / 2, e.descText1.y = 120, e.addChild(e.descText1);
          var i = jh("team_level_desc.png");
          return i.x = (e.bg.width - i.width) / 2, i.y = e.descText1.y + e.descText1.height + 20, e.addChild(i), e.scroller = new Wu(580, 550), e.scroller.x = (e.bg.width - 580) / 2, e.scroller.y = i.y + i.height + 20, e.rankList = new eb, e.scroller.setContent(e.rankList), e.addChild(e.scroller), e.descText2 = Yh("214\n314", 12369869, 590, 28, !1, "left", 15), e.descText2.x = (e.bg.width - e.descText2.width) / 2, e.descText2.y = e.bg.height - e.descText2.height - 40, e.addChild(e.descText2), e
        }
        return i(e, t), e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.refreshList()
        }, e.prototype.refreshList = function() {
          for (var t = Ph.getTeamLevels(), e = [], i = 0; i < 20; i++) e.push(t[i]);
          var n = e.length,
            o = this.rankItems.slice();
          this.rankItems.length = 0;
          var r = 0;
          for (i = 0; i < n; i++) {
            var s = void 0;
            (s = o.length > 0 ? o.pop() : new tb).setMessage(e[i]), s.y = r, this.rankItems.push(s), s.parent !== this.rankList && this.rankList.addChild(s), i < n - 1 && (r += tb.ITEM_HEIGHT + tb.ITEM_GAP)
          }
          for (i = 0; i < o.length; i++) {
            (s = o[i]).destroy()
          }
          o.length = 0, this.rankList.contentHeight = r + ib.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this);
          for (var e = 0; e < this.rankItems.length; e++) {
            this.rankItems[e].destroy()
          }
          this.rankItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null)
        }, e.clsName = "TeamLevelDescView", e
      }(Qg),
      ob = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.teamName = "", e.teamNotice = "", e.initUI(), e.addToDestroy = mr((function() {
            var t = mx.teamInfo;
            if (t) {
              var i = lv.indexOf(t.requireScore);
              i < 0 && (i = 0), e.scoreCondition.setSelectIndex(i), e.joinCondition.setSelectIndex(t.joinLimit), e.nameText.text = t.name, e.notice.setNotice(t.notice), e.teamName = t.name, e.teamNotice = t.notice;
              var n = t.permission === sd.Leader;
              e.warningText.visible = n, e.nameText.style.fill = n ? "#8e8e8e" : 16777215, e.saveButton.visible = n, e.buttonGroup.reLayout(), e.buttonGroup.x = (e.bg.width - e.buttonGroup.width) / 2, e.nameBg.visible = n, e.notice.bg.interactive = n, e.scoreCondition.setEnable(n), e.joinCondition.setEnable(n)
            }
          })), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(635, 1036), this.addChild(this.bg), this.addTitle(""), this.addCloseButton();
          var t = new pv("");
          t.x = 40, t.y = 100, this.addChild(t);
          var e = this.warningText = Xh("31", "#8e8e8e", !1, "left", 24);
          e.x = t.x + t.width + 10, e.y = t.y + (t.height - e.height) / 2, this.addChild(e);
          var i = this.nameBg = jh("team_name_bg.png");
          i.y = t.y + 80, i.x = t.x, this.addChild(i), i.interactive = !0, i.on(Tu, this.onNameInput, this), this.nameText = Xh("", "#8e8e8e", !0, "left", 32), this.nameText.x = i.x + 20, this.nameText.y = i.y + (i.height - this.nameText.height) / 2, this.addChild(this.nameText);
          var n = new pv("");
          n.x = 40, n.y = 280, this.addChild(n), this.joinCondition = new dv(!1), this.joinCondition.x = (this.bg.width - this.joinCondition.width) / 2, this.joinCondition.y = n.y + 100, this.addChild(this.joinCondition);
          var o = new pv("");
          o.x = 40, o.y = 500, this.addChild(o), this.scoreCondition = new dv(!0), this.scoreCondition.x = (this.bg.width - this.scoreCondition.width) / 2, this.scoreCondition.y = o.y + 100, this.addChild(this.scoreCondition), this.notice = new Av(0), this.notice.x = (this.bg.width - i.width) / 2, this.notice.y = this.scoreCondition.y + this.scoreCondition.height + 50, this.notice.bg.interactive = !0, this.notice.bg.on(Tu, this.onNoticeInput, this), this.addChild(this.notice), this.buttonGroup = new im(20), this.addChild(this.buttonGroup), this.quitButton = new ey("team_white_button2.png", "team_label_quitTeam.png", !1), this.quitButton.on(Tu, this._onQuit, this), this.buttonGroup.addButton(this.quitButton), this.saveButton = new Ru("team_btn_savesetting.png", !1), this.saveButton.on(Tu, this._saveSettings, this), this.buttonGroup.addButton(this.saveButton), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.height - 150
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow()
        }, e.prototype._saveSettings = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n, o;
            return s(this, (function(r) {
              switch (r.label) {
                case 0:
                  return (t = mx.teamInfo) ? 0 === this.teamName.length ? (rc(""), [2]) : (e = this.teamName, i = this.joinCondition.getSelectIndex(), n = this.scoreCondition.getSelectIndex(), o = {}, this.teamNotice !== t.notice && (o.notice = this.teamNotice), e !== t.name && (o.name = e), i !== t.joinLimit && (o.joinLimit = i), lv[n] !== t.requireScore && (o.requireScore = lv[n]), 0 === Object.keys(o).length ? (this.close(), [2]) : [4, Lw(o)]) : (rc(""), [2]);
                case 1:
                  return r.sent() && (rc(""), mx.updateTeamInfo(o), this.close()), [2]
              }
            }))
          }))
        }, e.prototype._onQuit = function() {
          var t = this;
          ic("", "", !0, "", "", (function(e) {
            return r(t, void 0, void 0, (function() {
              return s(this, (function(t) {
                switch (t.label) {
                  case 0:
                    return e.confirm ? [4, Rw()] : [3, 2];
                  case 1:
                    t.sent(), this.close(), t.label = 2;
                  case 2:
                    return [2]
                }
              }))
            }))
          }))
        }, e.prototype.onNoticeInput = function() {
          var t = this;
          Hl(this.teamNotice, 20, !1, (function(e) {
            t.isDisposed || (t.teamNotice = e, t.notice.setNotice(e))
          }))
        }, e.prototype.onNameInput = function() {
          var t = this;
          mx.canEditName ? Hl(this.teamName, 8, !1, (function(e) {
            t.isDisposed || (t.teamName = e, t.nameText.text = e)
          })) : rc("31")
        }, e.prototype.destroy = function() {
          this.saveButton && (this.saveButton.destroy(), this.saveButton = null), this.quitButton && (this.quitButton.destroy(), this.quitButton = null), t.prototype.destroy.call(this)
        }, e.clsName = "TeamSettingView", e
      }(Qg),
      rb = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = 635;
          return e.notice = new Av, e.notice.y = 70, e.notice.x = (i - e.notice.width) / 2, e.addChild(e.notice), e.questBtn = new Ru("team_btn_quest.png"), e.questBtn.x = e.notice.x + e.notice.width - e.questBtn.width / 2, e.questBtn.y = e.notice.y, e.addChild(e.questBtn.skin), e.questBtn.on(Tu, e.onQuest, e), e.teamInfoGroup = new Cv, e.teamInfoGroup.x = (i - e.teamInfoGroup.width) / 2, e.teamInfoGroup.y = 200, e.addChild(e.teamInfoGroup), e.membersPreview = new Bv, e.membersPreview.x = 317.5, e.membersPreview.y = 625, e.addChild(e.membersPreview), e.buttonGroup = new im(20), e.addChild(e.buttonGroup), e.decorateButton = new Ru("team_decorate.png", !1), e.buttonGroup.addButton(e.decorateButton), e.settingButton = new Ru("team_setting.png", !1), e.buttonGroup.addButton(e.settingButton), e.decorateButton.on(Tu, e.onDecorate, e), e.settingButton.on(Tu, e.onSetting, e), e.buttonGroup.x = (i - e.buttonGroup.width) / 2, e.buttonGroup.y = 850, e.addToDestroy = mr((function() {
            var t = mx.teamInfo;
            t && (e.notice.setNotice(t.notice), e.teamInfoGroup.setTeamInfo(t), e.decorateButton.visible = mx.isManager, e.buttonGroup.reLayout(), e.buttonGroup.x = (i - e.buttonGroup.width) / 2)
          })), e
        }
        return i(e, t), e.prototype.onQuest = function() {
          tc.showPanel(nb)
        }, e.prototype.show = function() {
          t.prototype.show.call(this), this.membersPreview.loadTeamShowInfo()
        }, e.prototype.onDecorate = function() {
          tc.closePanel(Sv.clsName), hw(), tc.showPanel(ew)
        }, e.prototype.onSetting = function() {
          tc.showPanel(ob)
        }, e.prototype.destroy = function(e) {
          this.questBtn && (this.questBtn.destroy(), this.questBtn = null), this.decorateButton && (this.decorateButton.destroy(), this.decorateButton = null), this.settingButton && (this.settingButton.destroy(), this.settingButton = null), t.prototype.destroy.call(this, e)
        }, e
      }(rv),
      sb = function(t) {
        function e(e) {
          var i = t.call(this) || this,
            n = i.bg = jh("team_member_bg1.png");
          return i.addChild(n), i.labelText = Xh(e, 16777215, !0, "center", 30), i.labelText.x = n.x + (n.width - i.labelText.width) / 2, i.labelText.y = n.y + (n.height - i.labelText.height) / 2, i.addChild(i.labelText), i
        }
        return i(e, t), Object.defineProperty(e.prototype, "text", {
          set: function(t) {
            this.labelText.text = t, this.labelText.x = this.bg.x + (this.bg.width - this.labelText.width) / 2
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      ab = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.interactive = !0;
          var i = e.bg = zm();
          e.addChild(i);
          var n = jh("team_icon_bg.png");
          return n.x = 10, n.y = (i.height - n.height) / 2, e.addChild(n), e.avatarImage = new PIXI.Sprite, e.avatarImage.width = 80, e.avatarImage.height = 80, e.avatarImage.x = n.x + (n.width - e.avatarImage.width) / 2, e.avatarImage.y = n.y + (n.height - e.avatarImage.height) / 2, e.addChild(e.avatarImage), e.nameText = Xh("", "#ffffff", !0, "left", 32), e.nameText.x = n.x + n.width + 10, e.nameText.y = 10, e.addChild(e.nameText), e.maxScoreText = Xh("", "#9497a4", !0, "left", 24), e.maxScoreText.x = e.nameText.x, e.maxScoreText.y = 55, e.addChild(e.maxScoreText), e.skinCountText = Xh("", "#9497a4", !0, "left", 24), e.skinCountText.x = e.nameText.x, e.skinCountText.y = 85, e.addChild(e.skinCountText), e.acceptBtn = new Ru("team_btn_accept.png"), e.acceptBtn.x = i.width - e.acceptBtn.width / 2 - 30, e.acceptBtn.y = 40, e.addChild(e.acceptBtn.skin), e.rejectBtn = new Ru("team_btn_reject.png"), e.rejectBtn.x = e.acceptBtn.x, e.rejectBtn.y = 90, e.addChild(e.rejectBtn.skin), e
        }
        return i(e, t), e.prototype.setRankInfo = function(t, e) {
          this.rankInfo !== e && (this.rank = t, this.rankInfo = e, this.refreshUI())
        }, e.prototype.refreshUI = function() {
          Bm(this.avatarImage, this.rankInfo.avatar), this.nameText.text = hn(this.rankInfo.nick, 8), this.maxScoreText.text = "".concat(this.rankInfo.score), this.skinCountText.text = "".concat(this.rankInfo.skin)
        }, e.ITEM_HEIGHT = 126, e.ITEM_GAP = 10, e.ITEM_REAL_HEIGHT = e.ITEM_HEIGHT + e.ITEM_GAP, e
      }(PIXI.Container),
      hb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.rankItems = [], e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = $h(635, 1036), this.addChild(this.bg), this.addTitle(""), this.addCloseButton(), this.memberCountTip = new sb(""), this.memberCountTip.x = (this.bg.width - this.memberCountTip.width) / 2, this.memberCountTip.y = 100, this.addChild(this.memberCountTip), this.scroller = new Wu(580, 740), this.scroller.x = (this.bg.width - 580) / 2, this.scroller.y = 160, this.rankList = new yv, this.scroller.setContent(this.rankList), this.addChild(this.scroller), this._noRequestText = Xh("", "#FFFFFF", !1, "center", 32), this._noRequestText.x = (this.bg.width - this._noRequestText.width) / 2, this._noRequestText.y = (this.bg.height - this._noRequestText.height) / 2, this.addChild(this._noRequestText), this._noRequestText.visible = !1, this.addToDestroy = mr((function() {
            var e = mx.teamInfo;
            e && (t.memberCountTip.text = ":".concat(e.memberCount, "/").concat(e.memberMax))
          }))
        }, e.prototype.loadRequests = function() {
          return r(this, arguments, void 0, (function(t) {
            var e, i, n, o, a, h, c = this;
            return void 0 === t && (t = !0), s(this, (function(u) {
              switch (u.label) {
                case 0:
                  return t ? [4, mx.loadRequests()] : [3, 2];
                case 1:
                  u.sent(), u.label = 2;
                case 2:
                  for (e = mx.applyList.length, this._noRequestText.visible = 0 === e, i = this.rankItems.slice(), this.rankItems.length = 0, n = 0, o = function(t) {
                      var o;
                      i.length > 0 ? o = i.pop() : ((o = new ab).rejectBtn.on(Iu, (function() {
                        return r(c, void 0, void 0, (function() {
                          return s(this, (function(t) {
                            switch (t.label) {
                              case 0:
                                return [4, Nw(o.rankInfo)];
                              case 1:
                                return t.sent(), this.loadRequests(!1), [2]
                            }
                          }))
                        }))
                      }), a), o.acceptBtn.on(Iu, (function() {
                        return r(c, void 0, void 0, (function() {
                          return s(this, (function(t) {
                            switch (t.label) {
                              case 0:
                                return [4, Aw(o.rankInfo)];
                              case 1:
                                return t.sent(), this.loadRequests(!1), [2]
                            }
                          }))
                        }))
                      }), a)), o.setRankInfo(t, mx.applyList[t]), o.y = n, a.rankItems.push(o), o.parent !== a.rankList && a.rankList.addChild(o), t < e - 1 && (n += ab.ITEM_HEIGHT + ab.ITEM_GAP)
                    }, a = this, h = 0; h < e; h++) o(h);
                  for (h = 0; h < i.length; h++) i[h].destroy();
                  return i.length = 0, this.rankList.contentHeight = n + ib.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0, [2]
              }
            }))
          }))
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), this.loadRequests().then((function() {})), KI("")
        }, e.prototype.destroy = function() {
          for (var e = 0; e < this.rankItems.length; e++) {
            this.rankItems[e].destroy()
          }
          this.rankItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), t.prototype.destroy.call(this)
        }, e.clsName = "TeamRequestView", e
      }(Qg),
      cb = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = e.bg = jh("team_menu_bg.png");
          return e.addChild(i), e.buttonGroup = new im(10, !1), e.leaderBtn = new Ru("team_btn_toLeader.png"), e.buttonGroup.addButton(e.leaderBtn), e.managerBtn = new Ru("team_btn_toAdmin.png"), e.buttonGroup.addButton(e.managerBtn), e.normalBtn = new Ru("team_btn_toNormal.png"), e.buttonGroup.addButton(e.normalBtn), e.kickOutBtn = new Ru("team_btn_kickout.png"), e.buttonGroup.addButton(e.kickOutBtn), e.buttonGroup.x = i.width / 2, e.buttonGroup.y = (i.height - e.buttonGroup.height) / 2 + 30, e.addChild(e.buttonGroup), e
        }
        return i(e, t), e.prototype.refreshButtons = function() {
          this.buttonGroup.reLayout(), this.buttonGroup.x = this.bg.width / 2, this.buttonGroup.y = (this.bg.height - this.buttonGroup.height) / 2 + 30
        }, e.prototype.show = function(t, e, i) {
          if (e.rankInfo.uid !== uC.uid) {
            this.memberInfo = i;
            var n = e.rankInfo;
            this.leaderBtn.visible = t === sd.Leader, this.managerBtn.visible = t === sd.Leader && n.permission === sd.Normal, this.normalBtn.visible = t === sd.Leader && n.permission === sd.Manager, this.kickOutBtn.visible = t === sd.Leader || t === sd.Manager && n.permission === sd.Normal, this.refreshButtons();
            var o = this.leaderBtn.visible || this.managerBtn.visible || this.normalBtn.visible || this.kickOutBtn.visible;
            return this.visible = o, o
          }
          this.hide()
        }, e.prototype.hide = function() {
          this.leaderBtn.resetScale(), this.managerBtn.resetScale(), this.normalBtn.resetScale(), this.kickOutBtn.resetScale(), this.visible = !1
        }, e.prototype.destroy = function(e) {
          this.leaderBtn && (this.leaderBtn.destroy(), this.leaderBtn = null), this.managerBtn && (this.managerBtn.destroy(), this.managerBtn = null), this.normalBtn && (this.normalBtn.destroy(), this.normalBtn = null), this.kickOutBtn && (this.kickOutBtn.destroy(), this.kickOutBtn = null), this.buttonGroup && (this.buttonGroup.destroy(), this.buttonGroup = null), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      ub = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.rankItems = [], e.animationFrameId = 0;
          var i = 635;
          e.requestBtn = new nm("team_member_bg1.png", ""), e.requestBtn.x = 197.5, e.requestBtn.y = 80 + e.requestBtn.height / 2, e.addChild(e.requestBtn.skin), e.requestBtn.on(Tu, e._openRequest, e);
          var n = e.memberCountTip = new sb(":19/20");
          return n.x = (i - n.width) / 2 + 120, n.y = 80, e.addChild(n), e.scroller = new Wu(580, 740), e.scroller.x = 27.5, e.scroller.y = 150, e.rankList = new yv, e.scroller.setContent(e.rankList), e.addChild(e.scroller), e.toggleBtn = new Zu("team_member_toggle_on.png", "team_member_toggle_off.png"), e.toggleBtn.x = 317.5, e.toggleBtn.y = 940, e.addChild(e.toggleBtn.skin), e.toggleBtn.on(Tu, e.onToggle, e), e.menuMask = new PIXI.Graphics, e.menuMask.beginFill(0, 1), e.menuMask.drawRect(0, 0, i, 980), e.menuMask.endFill(), e.menuMask.interactive = !0, e.menuMask.alpha = 0, e.menuMask.on(Iu, e.onTpaMaskShape, e), e.menuMask.visible = !1, e.addChild(e.menuMask), e.memberMenu = new cb, e.addChild(e.memberMenu), e.memberMenu.hide(), e.memberMenu.leaderBtn.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              var t = this;
              return s(this, (function(e) {
                return this.hideMenu(), ic("", "", !0, "", "", (function(e) {
                  return r(t, void 0, void 0, (function() {
                    return s(this, (function(t) {
                      switch (t.label) {
                        case 0:
                          return e.confirm ? [4, Vw(this.memberMenu.memberInfo.uid)] : [3, 2];
                        case 1:
                          t.sent() && this.loadTeams(), t.label = 2;
                        case 2:
                          return [2]
                      }
                    }))
                  }))
                })), [2]
              }))
            }))
          }), e), e.memberMenu.managerBtn.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              var t = this;
              return s(this, (function(e) {
                return this.hideMenu(), ic("", "", !0, "", "", (function(e) {
                  return r(t, void 0, void 0, (function() {
                    return s(this, (function(t) {
                      switch (t.label) {
                        case 0:
                          return e.confirm ? [4, Uw(this.memberMenu.memberInfo.uid)] : [3, 2];
                        case 1:
                          t.sent() && this.loadTeams(), t.label = 2;
                        case 2:
                          return [2]
                      }
                    }))
                  }))
                })), [2]
              }))
            }))
          }), e), e.memberMenu.normalBtn.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              var t = this;
              return s(this, (function(e) {
                return this.hideMenu(), ic("", "", !0, "", "", (function(e) {
                  return r(t, void 0, void 0, (function() {
                    return s(this, (function(t) {
                      switch (t.label) {
                        case 0:
                          return e.confirm ? [4, Ww(this.memberMenu.memberInfo.uid)] : [3, 2];
                        case 1:
                          t.sent() && this.loadTeams(), t.label = 2;
                        case 2:
                          return [2]
                      }
                    }))
                  }))
                })), [2]
              }))
            }))
          }), e), e.memberMenu.kickOutBtn.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              var t = this;
              return s(this, (function(e) {
                return this.hideMenu(), ic("", "", !0, "", "", (function(e) {
                  return r(t, void 0, void 0, (function() {
                    return s(this, (function(t) {
                      switch (t.label) {
                        case 0:
                          return e.confirm ? [4, Ow(this.memberMenu.memberInfo.uid)] : [3, 2];
                        case 1:
                          t.sent() && this.loadTeams(), t.label = 2;
                        case 2:
                          return [2]
                      }
                    }))
                  }))
                })), [2]
              }))
            }))
          }), e), e.addToDestroy = mr((function() {
            var t = mx.teamInfo;
            t && (e.memberCountTip.text = ":".concat(t.memberCount, "/").concat(t.memberMax), e.toggleBtn.visible = t.permission >= sd.Manager, e.requestBtn.visible = mx.isManager)
          })), e.addToDestroy = mr((function() {
            e.requestBtn.showRed(mx.applyList.length > 0)
          })), e
        }
        return i(e, t), e.prototype.showMenu = function(t, e, i) {
          e.rankInfo.uid !== uC.uid ? this.memberMenu.show(t, e, i) ? (this.memberMenu.x = 300, this.memberMenu.y = this.scroller.y - this.scroller.scrollV + this.rankItems.indexOf(e) * (ib.ITEM_HEIGHT + ib.ITEM_GAP) + 50, this.menuMask.visible = !0) : this.hideMenu() : this.hideMenu()
        }, e.prototype.hideMenu = function() {
          this.memberMenu.hide(), this.menuMask.visible = !1
        }, e.prototype._openRequest = function() {
          mx.isManager && tc.showPanel(hb)
        }, e.prototype.onTpaMaskShape = function() {
          this.hideMenu()
        }, e.prototype.onToggle = function() {
          return r(this, void 0, void 0, (function() {
            var t = this;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return this.toggleBtn.toggle ? [3, 1] : (ic("", "14", !0, "", "", (function(e) {
                    return r(t, void 0, void 0, (function() {
                      return s(this, (function(t) {
                        switch (t.label) {
                          case 0:
                            return e.confirm ? [4, jw(!0)] : [3, 2];
                          case 1:
                            t.sent() && (this.toggleBtn.toggle = !0), t.label = 2;
                          case 2:
                            return [2]
                        }
                      }))
                    }))
                  })), [3, 3]);
                case 1:
                  return [4, jw(!1)];
                case 2:
                  e.sent() && (this.toggleBtn.toggle = !1), e.label = 3;
                case 3:
                  return [2]
              }
            }))
          }))
        }, e.prototype.loadTeams = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n, o, r, a, h, c, u = this;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  return this.hideMenu(), [4, Ew()];
                case 1:
                  for (t = s.sent(), e = t.members, this.toggleBtn.toggle = t.autoOptimize, c = 0; c < e.length; c++)
                    if ((i = e[c]).uid === uC.uid) {
                      this.myTeamPermission = i.permission;
                      break
                    } for (n = this.rankItems.slice(), this.rankItems.length = 0, o = e.length, r = 0, a = function(t) {
                      var i;
                      n.length > 0 ? i = n.pop() : (i = new ib).on(Iu, (function() {
                        u.showMenu(u.myTeamPermission, i, i.rankInfo)
                      }), h), i.setRankInfo(t, e[t]), i.y = r, h.rankItems.push(i), i.parent !== h.rankList && h.rankList.addChild(i), t < o - 1 && (r += ib.ITEM_HEIGHT + ib.ITEM_GAP)
                    }, h = this, c = 0; c < o; c++) a(c);
                  for (c = 0; c < n.length; c++) n[c].destroy();
                  return n.length = 0, this.rankList.contentHeight = r + ib.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0, [2]
              }
            }))
          }))
        }, e.prototype.onTick = function(t) {
          if (!this.isDestroyed && this.visible) {
            for (var e = this.scroller.scrollV, i = this.scroller.visibleHeight, n = this.rankItems.length - 1; n >= 0; n--) this.rankItems[n].update(e, i);
            this.animationFrameId = requestAnimationFrame(this.onTick.bind(this))
          }
        }, e.prototype.show = function() {
          t.prototype.show.call(this), this.loadTeams().then((function() {})), requestAnimationFrame(this.onTick.bind(this))
        }, e.prototype.hide = function() {
          t.prototype.hide.call(this)
        }, e.prototype.destroy = function(e) {
          if (!this.isDestroyed) {
            this.animationFrameId > 0 && (cancelAnimationFrame(this.animationFrameId), this.animationFrameId = 0);
            for (var i = 0; i < this.rankItems.length; i++) {
              this.rankItems[i].destroy()
            }
            this.rankItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), this.memberMenu && (this.memberMenu.destroy(), this.memberMenu = null), this.requestBtn && (this.requestBtn.destroy(), this.requestBtn = null), this.toggleBtn && (this.toggleBtn.destroy(), this.toggleBtn = null), t.prototype.destroy.call(this, e)
          }
        }, e
      }(rv),
      lb = ["", "", ""],
      db = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.curTab = -1, e.curTabButton = null, e.tabButtons = [], e.tabPanels = [], e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = Hh(635, 1036), this.addChild(this.bg), this.addCloseButton();
          for (var e = 0; e < lb.length; e++) {
            var i = lb[e],
              n = new Ov;
            n.setTitle(i), n.x = 20 + (n.width + 10) * e, n.y = 30, this.addChild(n), this.tabButtons.push(n), n.on(Tu, this.onClickTab, this)
          }
          var o = jh("skin_tab_line.png");
          o.y = 85, o.x = 10, this.addChild(o);
          var r = new rb;
          r.hide(), r.x = 0, r.y = 50, this.addChild(r), this.tabPanels.push(r);
          var s = new ub;
          s.hide(), s.x = 0, s.y = 50, this.addChild(s), this.tabPanels.push(s);
          var a = new Zv;
          a.hide(), a.x = 0, a.y = 50, this.addChild(a), this.tabPanels.push(a), this.addToDestroy = mr((function() {
            t.tabButtons[1].showRed(mx.applyList.length > 0)
          }))
        }, e.prototype.onClickTab = function(t) {
          var e = t.currentTarget,
            i = this.tabButtons.indexOf(e);
          i >= 0 && this.setSelectedTab(i)
        }, e.prototype.setSelectedTab = function(t) {
          t !== this.curTab && (this.curTabButton && (this.curTabButton.selected = !1), this.curTab = t, this.curTabButton = this.tabButtons[t], this.curTabButton && (this.curTabButton.selected = !0), this._curTabPanel && this._curTabPanel.hide(), this._curTabPanel = this.tabPanels[t], this._curTabPanel && this._curTabPanel.show())
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), e && e.hasOwnProperty("tab") ? this.setSelectedTab(e.tab) : this.setSelectedTab(0)
        }, e.prototype.onDestroy = function() {
          if (this.tabButtons) {
            for (var e = 0; e < this.tabButtons.length; e++) this.tabButtons[e].off(Tu, this.onClickTab, this);
            this.tabButtons.length = 0, this.tabButtons = null
          }
          this.tabPanels && (this.tabPanels.length = 0, this.tabPanels = null, this._curTabPanel = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamView", e
      }(Qg),
      pb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = Hh(620, 795), this.addChild(this.bg), this.addCloseButton(), this.addTitle("");
          var t = jh("team_contribute_item_bg.png");
          t.x = (this.bg.width - t.width) / 2, t.y = 110, this.addChild(t);
          var e = jh("team_text_bg2.png");
          e.x = (this.bg.width - e.width) / 2, e.y = t.y, this.addChild(e);
          var i = jh("team_random_reward.png");
          i.x = t.x + (t.width - i.width) / 2, i.y = t.y + (t.height - i.height) / 2 - 20, this.addChild(i);
          var n = Xh("", 15834375, !1, "left", 24);
          n.x = e.x + (e.width - n.width) / 2, n.y = e.y + (e.height - n.height) / 2, this.addChild(n), this.progressBar = new tm("team_exp_progress_bg.png", "team_exp_progress_bar.png"), this.progressBar.y = t.y + t.height - this.progressBar.height - 5, this.progressBar.x = (this.bg.width - this.progressBar.width) / 2 + 5, this.addChild(this.progressBar.skin);
          var o = jh("team_gold_icon.png");
          o.x = this.progressBar.x - o.width / 2, o.y = this.progressBar.y + (this.progressBar.height - o.height) / 2, this.addChild(o), this.progressTxt = Xh("0/10000", 12369869, !1, "left", 32), this.progressTxt.x = (this.bg.width - this.progressTxt.width) / 2, this.progressTxt.y = this.progressBar.y - this.progressTxt.height - 10, this.addChild(this.progressTxt), this.questBtn = new Ru("team_btn_quest.png"), this.questBtn.x = t.x + t.width, this.questBtn.y = t.y, this.addChild(this.questBtn.skin), this.horizontalGroup = new wv(5, !0), this.addChild(this.horizontalGroup);
          var r = Xh("", 12369869, !1, "left", 32);
          this.horizontalGroup.addSkin(r);
          var s = jh("team_gold_icon.png");
          this.horizontalGroup.addSkin(s), this.goldCountText = Xh("10000", 16763904, !1, "left", 32), this.horizontalGroup.addSkin(this.goldCountText);
          var a = Xh("", 12369869, !1, "left", 32);
          this.horizontalGroup.addSkin(a), this.horizontalGroup.x = (this.bg.width - this.horizontalGroup.width) / 2, this.horizontalGroup.y = t.y + t.height + 10, this.oneBtn = new Ru("team_btn_contribute_one.png"), this.oneBtn.x = this.bg.width / 2, this.oneBtn.y = this.bg.height - 260, this.addChild(this.oneBtn.skin);
          var h = new Yv(!1);
          h.scale.set(.8, .8), h.x = this.oneBtn.x + (this.oneBtn.width / 2 - h.width) / 2 + 10, h.y = this.oneBtn.y + this.oneBtn.height / 2 - h.height + 15, h.setGold(200), this.addChild(h), this.tenBtn = new Ru("team_btn_contribute_ten.png"), this.tenBtn.x = this.bg.width / 2, this.tenBtn.y = this.bg.height - 150, this.addChild(this.tenBtn.skin);
          var c = new Yv(!1);
          c.scale.set(.8, .8), c.x = this.tenBtn.x + (this.tenBtn.width / 2 - c.width) / 2 + 10, c.y = this.tenBtn.y + this.tenBtn.height / 2 - c.height + 15, c.setGold(2e3), this.addChild(c), this.rankBtn = new Ru("team_btn_contribute.png"), this.rankBtn.y = this.bg.height - 50, this.rankBtn.x = 20 + this.rankBtn.width / 2, this.addChild(this.rankBtn.skin), this.questBtn.on(Tu, this.onQuest, this), this.oneBtn.on(Tu, this.onOne, this), this.tenBtn.on(Tu, this.onTen, this), this.rankBtn.on(Tu, this.onRank, this)
        }, e.prototype.setGoldNeedCount = function(t) {
          this.goldCountText.text = t.toString(), this.horizontalGroup.reLayout()
        }, e.prototype.onQuest = function() {
          tc.showPanel($v, {
            msg: "13\n2200010\n3\n41001\n5\n\n1-\n2",
            title: ""
          })
        }, e.prototype.onDonated = function(t) {
          (t.decorate || t.coupon) && tc.showPanel(Kv, {
            decorate: t.decorate,
            coupon: t.coupon
          }), this.updateProgress(t.progress), this.todayCnt = t.todayCnt, this.updateTenBtn()
        }, e.prototype.updateTenBtn = function() {
          this.tenBtn.skin.texture = Vh(0 === this.todayCnt ? "team_btn_contribute_ten.png" : "team_btn_contribute_ten_gray.png")
        }, e.prototype.checkJoinTime = function() {
          var t = Je.curTime - mx.teamInfo.joinTime;
          return t < 2592e5 && (rc("".concat(ri(2592e5 - t), "")), !0)
        }, e.prototype.onOne = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return uC.teamCoin < 200 ? (rc(""), $I(""), tc.showPanel(Xv), [2]) : this.todayCnt >= 10 ? (rc("10"), [2]) : this.checkJoinTime() ? [2] : [4, cx(1)];
                case 1:
                  return (t = e.sent()) && this.onDonated(t), [2]
              }
            }))
          }))
        }, e.prototype.onTen = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return uC.teamCoin < 2e3 ? (rc(""), $I(""), tc.showPanel(Xv), [2]) : this.todayCnt >= 10 ? (rc("10"), [2]) : this.checkJoinTime() ? [2] : [4, cx(10)];
                case 1:
                  return (t = e.sent()) && this.onDonated(t), [2]
              }
            }))
          }))
        }, e.prototype.updateProgress = function(t) {
          this.progressTxt.text = "".concat(t, "/").concat(sv), this.progressTxt.x = (this.bg.width - this.progressTxt.width) / 2, this.progressBar.progress = t / sv, this.goldCountText.text = sv - t + "", this.horizontalGroup.reLayout()
        }, e.prototype.loadDonate = function() {
          var t = this;
          this.oneBtn.visible = !1, this.tenBtn.visible = !1,
            function() {
              return r(this, void 0, void 0, (function() {
                return s(this, (function(t) {
                  switch (t.label) {
                    case 0:
                      return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamDonation({})];
                    case 1:
                      return [2, t.sent()];
                    case 2:
                      return oc(t.sent()), [3, 3];
                    case 3:
                      return [2, null]
                  }
                }))
              }))
            }().then((function(e) {
              t.oneBtn.visible = !0, t.tenBtn.visible = !0, t.todayCnt = e.todayCnt, t.updateTenBtn(), t.updateProgress(e.progress)
            }))
        }, e.prototype.onRank = function() {
          tc.showPanel(db, {
            tab: 2
          })
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), this.loadDonate()
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.oneBtn && (this.oneBtn.destroy(), this.oneBtn = null), this.tenBtn && (this.tenBtn.destroy(), this.tenBtn = null), this.rankBtn && (this.rankBtn.destroy(), this.rankBtn = null), this.questBtn && (this.questBtn.destroy(), this.questBtn = null)
        }, e.clsName = "TeamDonateView", e
      }(Qg),
      fb = function() {
        function t() {
          this.canRotate = !1, this.isRotating = !1, this.lastClientX = 0, this._touchIdentifier = -1
        }
        return t.prototype.setRotateEnable = function(t) {
          this.canRotate = t, this.reset()
        }, t.prototype.reset = function() {
          this._touchIdentifier = -1, this.isRotating = !1
        }, t.prototype.addListeners = function() {
          var t = this;
          ql.addTouchStart(this._onTouchStart, this), ql.addTouchEnd(this._onTouchEnd, this), ql.addTouchMove(this._onTouchMove, this), wx.onHide((function() {
            t.reset()
          })), wx.onShow((function() {
            t.reset()
          }))
        }, t.prototype._onTouchStart = function(e) {
          if (t.touchEnabled && this.canRotate && e.changedTouches) {
            var i = e.changedTouches[0];
            i && (this.isRotating && -1 !== this._touchIdentifier && i.identifier !== this._touchIdentifier || (this._touchIdentifier = i.identifier, this.isRotating = !0, this.lastClientX = i.clientX))
          }
        }, t.prototype._onTouchMove = function(e) {
          if (t.touchEnabled && this.canRotate && e.changedTouches) {
            var i = e.changedTouches[0];
            if (i && (-1 === this._touchIdentifier || i.identifier === this._touchIdentifier)) {
              this.isRotating || (this.isRotating = !0, this.lastClientX = i.clientX);
              var n = .02 * (i.clientX - this.lastClientX);
              n < -ea ? n = -ea : n > ea && (n = ea), bI.teamScene.rotateY(n), this.lastClientX = i.clientX
            }
          }
        }, t.prototype._onTouchEnd = function(e) {
          if (t.touchEnabled && this.canRotate && e.changedTouches)
            for (var i = 0; i < e.changedTouches.length; i++) {
              if (e.changedTouches[i].identifier === this._touchIdentifier) {
                this.isRotating = !1, this._touchIdentifier = -1;
                break
              }
            }
        }, t.touchEnabled = !0, t
      }(),
      gb = [1, 1.33, 1.66, 2],
      mb = .02,
      yb = .998,
      vb = Math.log(yb);
    var bb = function() {
        function t(t) {
          this.target = t, this.$scrollFactor = 1, this.previousTime = 0, this.velocity = 0, this.previousVelocity = [], this.currentPosition = 0, this.previousPosition = 0, this.lastPoint = 0, this.started = !0
        }
        return t.prototype.start = function(t) {
          this.started = !0, this.velocity = 0, this.previousVelocity.length = 0, this.previousPosition = this.currentPosition = t, this.lastPoint = t, this.animation = void 0
        }, t.prototype.update = function(t) {
          this.currentPosition = t;
          var e = this.lastPoint - t,
            i = e + this.target.scrollH;
          this.lastPoint = t, (i < 0 || i > this.target.maxScrollH) && (i -= e), this.target.scrollH = i
        }, t.prototype.finish = function() {
          var t = this.target,
            e = t.scrollH,
            i = t.maxScrollH;
          this.started = !1;
          for (var n = 2.33 * this.velocity, o = this.previousVelocity, r = o.length, s = 2.33, a = 0; a < r; a++) {
            var h = gb[a];
            n += o[0] * h, s += h
          }
          var c = n / s,
            u = Math.abs(c);
          if (u > mb) {
            var l = 0,
              d = e + (c - mb) / vb * 2 * this.$scrollFactor;
            if (d < 0 || d > i)
              for (d = e; Math.abs(c) > mb;) c *= (d -= c) < 0 || d > i ? .9480999999999999 : yb, l++;
            else l = Math.log(mb / u) / vb;
            this.throwTo(d, l)
          } else this.checkScroll()
        }, t.prototype.checkScroll = function() {
          var t = this.target,
            e = t.scrollH,
            i = t.maxScrollH;
          e < 0 ? this.throwTo(0, 300) : e > i && this.throwTo(i, 300)
        }, t.prototype.onTick = function(t) {
          var e = t - this.previousTime;
          if (this.previousTime = t, this.started) {
            var i = this.previousVelocity;
            i.length >= 4 && i.shift(), this.velocity = (this.currentPosition - this.previousPosition) / e, i.push(this.velocity), this.previousPosition = this.currentPosition
          }
          this.animation && (this.animation.update(e), this.target.scrollH = this.animation.value, this.animation.isEnd && (this.animation = void 0, this.checkScroll()))
        }, t.prototype.throwToTop = function() {
          this.throwTo(0, 300)
        }, t.prototype.throwTo = function(t, e) {
          var i = this.target.scrollH;
          i !== t && (this.animation = new wb(i, t, e))
        }, t
      }(),
      wb = function() {
        function t(t, e, i) {
          this.from = t, this.to = e, this.duration = i, this.pass = 0, this.value = 0, this.isEnd = !1, this.distance = e - t, this.value = t
        }
        return t.prototype.update = function(t) {
          var e, i;
          this.pass += t, this.pass > this.duration ? (this.value = this.to, this.isEnd = !0) : this.value = (e = this.pass / this.duration, ((i = e - 1) * i * i + 1) * this.distance + this.from)
        }, t
      }(),
      xb = function(t) {
        function e(e, i) {
          var n = t.call(this) || this;
          n.visibleWidth = e, n.maxScrollH = Number.MAX_SAFE_INTEGER, n.touchScroll = new bb(n), n.startX = 0;
          var o = new PIXI.Graphics;
          o.beginFill(0), o.drawRect(0, 0, e, i), o.endFill(), n.addChild(o), n.mask = o, n.interactive = !0, n.on(Tu, n._onTouchStart, n), n.on(Su, n._onTouchMove, n), n.on(ku, n._onTouchEnd, n), n.on(Bu, n._onTouchEnd, n), n.on(Cu, n._onTouchEnd, n);
          var r = function(t) {
            n._destroyed || (n.touchScroll.onTick(Date.now()), requestAnimationFrame(r))
          };
          return requestAnimationFrame(r), n
        }
        return i(e, t), e.prototype.setContent = function(t) {
          this.content = t, this.addChild(t), this.updateMaxScrollH()
        }, e.prototype.updateMaxScrollH = function() {
          this.maxScrollH = Math.max(0, this.content.contentWidth - this.visibleWidth), this.touchScroll.checkScroll()
        }, e.prototype._onTouchStart = function(t) {
          this.startX = t.data.global.x, this.touchScroll.start(t.data.global.x)
        }, e.prototype._onTouchMove = function(t) {
          var e = t.data.global.x;
          this.touchScroll.update(e), this.content && this.content.interactiveChildren && Math.abs(e - this.startX) > 5 && (this.content.interactiveChildren = !1)
        }, e.prototype._onTouchEnd = function(t) {
          this.touchScroll.finish(), this.content && (this.content.interactiveChildren = !0)
        }, Object.defineProperty(e.prototype, "scrollH", {
          get: function() {
            return this.content ? this.content.scrollH : 0
          },
          set: function(t) {
            this.content && (this.content.scrollH = t)
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      Tb = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          return i.posIndex = e, i.empty = jh("team_button_empty_decorate.png"), i.empty.anchor.set(.5, .5), i.addChild(i.empty), i.button = new ey("team_white_button.png", "team_label_change.png", !0), i.button.x = 0, i.button.y = 0, i.addChild(i.button.skin), i.interactive = !0, i.button.visible = !1, i
        }
        return i(e, t), e.prototype.updateDecorate = function() {
          var t = mx.getEditDecorate(this.posIndex);
          this.setDecorate(t)
        }, e.prototype.setDecorate = function(t) {
          this.def = t;
          var e = !!t;
          this.empty.visible = !e, this.button.visible = e
        }, e
      }(PIXI.Container),
      kb = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !0, e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this.bg = jh("team_decorate_list_item_bg.png");
          t.width = 178, t.height = 221, this.addChild(t), this.nameText = Xh("TTTTT", "#ffffff", !1, "center", 28), this.nameText.x = (t.width - this.nameText.width) / 2, this.nameText.y = 10, this.addChild(this.nameText), this.icon = new PIXI.Sprite, this.icon.anchor.set(.5, .5), this.icon.width = 110, this.icon.height = 110, this.icon.x = t.width / 2, this.icon.y = t.height / 2 - 5, this.addChild(this.icon), this.chooseBtn = new ey("team_yellow_button.png", "team_label_choose.png", !0), this.chooseBtn.x = t.width / 2, this.chooseBtn.y = t.height - 30, this.chooseBtn.interactive = !1, this.addChild(this.chooseBtn.skin), this.choosedBtn = new ey("team_black_button.png", "team_decorate_list_item_goted.png", !0), this.choosedBtn.x = t.width / 2, this.choosedBtn.y = t.height - 30, this.addChild(this.choosedBtn.skin), this.choosedBtn.interactive = !1, this.choosedBtn.visible = !1, this.on(Iu, this.onChoose, this)
        }, e.prototype.onChoose = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              return this.def && mx.isInEditScene(this.def.id) || (this.def ? (zI("", mx.editDecorates[this.posIndex], this.def.id), mx.useDecorate(this.posIndex, this.def.id), bI.teamScene.addDecorateObject(this.posIndex, this.def)) : (zI("", mx.editDecorates[this.posIndex], 0), mx.deleteDecorate(this.posIndex), bI.teamScene.removeDecorateObject(this.posIndex))), [2]
            }))
          }))
        }, e.prototype.setName = function(t) {
          this.nameText.text = t, this.nameText.x = (this.bg.width - this.nameText.width) / 2
        }, e.prototype.setInfo = function(t, e) {
          this.def = t, this.posIndex = e;
          var i = !1;
          t ? (this.icon.texture = Vh("deco_".concat(t.id, ".jpg")), this.setName(t.name), i = t && mx.isInEditScene(this.def.id)) : (this.icon.texture = null, this.setName("")), this.choosedBtn.visible = i, this.chooseBtn.visible = !i
        }, e.ITEM_HEIGHT = 221, e.ITEM_GAP = 10, e
      }(PIXI.Container),
      Ib = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentWidth = 0, e.name = "TeamDecorateList", e.x = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollH", {
          get: function() {
            return -this.x
          },
          set: function(t) {
            this.x = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentWidth", {
          get: function() {
            return this._contentWidth
          },
          set: function(t) {
            this._contentWidth = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      Cb = ai.withCategory("login");

    function _b() {
      return r(this, void 0, void 0, (function() {
        var t, e, i, n, o, r, a, h, c;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              return [4, Bb()];
            case 1:
              return t = s.sent(), e = t.uid, i = t.token, n = t.online, o = t.url, r = t.gatePath, DEVELOP && Cb.info("gate:", n), Xt(n), (a = ws.query).fuid ? (Cb.info("fuid:", a.fuid), h = {
                uid: e,
                token: i,
                fuid: Number(a.fuid)
              }) : h = {
                uid: e,
                token: i,
                fuid: 0
              }, a.chid && "interstitial" !== a.chid && (h.chid = a.chid), [4, TP(h)];
            case 2:
              return c = s.sent(), uC.uid = e, uC.token = i, uC.connectToken = c.connectToken, Je.syncServerTime(c.now), q().emitter.emit("logged"), /* DISABLED: mg.connect(o, r, uC) - local mode */ [2, c]
          }
        }))
      }))
    }

    function Bb() {
      return r(this, void 0, void 0, (function() {
        var t, e, i, n, o, r, a, h;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              return (t = wx.getStorageSync("appToken")) && (e = t.token, i = t.uid), i && !isNaN(i) && e ? (Cb.info("wx.checkSession..."), [4, new Promise((function(t) {
                return wx.checkSession({
                  success: function() {
                    return t(!0)
                  },
                  fail: function(e) {
                    Cb.warn(e.errMsg), t(!1)
                  }
                })
              }))]) : [3, 7];
            case 1:
              if (!s.sent()) return [3, 6];
              Cb.info("wx.checkSession ok"), s.label = 2;
            case 2:
              return s.trys.push([2, 4, , 5]), n = "".concat(Ie, "/").concat($hostDef.api, "/valid"), [4, new ue({
                url: n,
                data: {
                  token: e,
                  uid: i
                }
              }).send()];
            case 3:
              return !0 === (null == (o = s.sent()) ? void 0 : o.valid) ? (Cb.info("".concat($hostDef.api, "/valid ok")), Cb.info("uid: ".concat(i)), Cb.info("token: ".concat(e)), [2, {
                uid: i,
                token: e,
                online: o.online,
                url: o.url,
                gatePath: o.gatePath
              }]) : (Cb.info("".concat($hostDef.api, "/valid expired")), [3, 5]);
            case 4:
              return r = s.sent(), Cb.error("valid error:", r.errMsg || r), [3, 5];
            case 5:
              return [3, 7];
            case 6:
              Cb.info("wx.checkSession: invalid"), s.label = 7;
            case 7:
              return Cb.info("wx.login..."), [4, new Promise((function(t, e) {
                return wx.login({
                  success: function(e) {
                    return t(e.code)
                  },
                  fail: function(t) {
                    return e(t.errMsg)
                  }
                })
              }))];
            case 8:
              return a = s.sent(), Cb.info("".concat($hostDef.api, "/loginAccount...")), [4, new ue({
                url: "".concat(Ie, "/").concat($hostDef.api, "/loginAccount"),
                method: "POST",
                data: {
                  code: a
                }
              }).send()];
            case 9:
              if ((h = s.sent()).err) throw h;
              return Nh("appToken", {
                uid: h.uid,
                token: h.token
              }), Cb.info("uid: ".concat(h.uid)), Cb.info("token: ".concat(h.token)), [2, h]
          }
        }))
      }))
    }

    function Sb(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              if (uC.updateLastAuthorizeTime(), !t || !t.encryptedData || !t.iv) return [2];
              e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, BP({
                encryptedData: t.encryptedData,
                iv: t.iv
              })];
            case 2:
              return e.sent(), [3, 4];
            case 3:
              return e.sent(), [3, 4];
            case 4:
              return [2]
          }
        }))
      }))
    }

    function Pb(t, e, i, n) {
      if (void 0 !== wx.createUserInfoButton) {
        m.log("wx.createUserInfoButton...");
        var o = wx.createUserInfoButton({
            type: "image",
            image: "dlc/ui/touch_button.png",
            withCredentials: !0,
            style: i
          }),
          r = function(t) {
            t && t.encryptedData && t.iv ? (a(), n(t)) : n()
          },
          s = !1,
          a = function() {
            s || (s = !0, o.offTap(r), o.hide(), o.destroy())
          };
        o.onTap(r), o.show(), t(br(e, (function(t) {
          t ? o.show() : o.hide()
        }), {
          fireImmediately: !0
        })), t(a)
      }
    }
    var Db, Mb, Fb = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.container = new PIXI.Container, e.container.interactive = !0, e.bg = jh("button_team_message.png"), e.bg.anchor.set(.5, .5), e.container.addChild(e.bg), e.rendPoint = jh("redpoint2.png"), e.rendPoint.anchor.set(.5, .5), e.rendPoint.y = -e.bg.height / 2 + 5, e.rendPoint.x = e.bg.width / 2 - 5, e.container.addChild(e.rendPoint), e.container.on(Tu, e.onTapDown, e), e.container.on(ku, e.onTapUp, e), e.container.on(Cu, e.onTapUp, e), e.container.on(_u, e.onTapUp, e), e.container.on(Bu, e.onTapUp, e), e
        }
        return i(e, t), e.prototype.showRedPoint = function(t) {
          this.rendPoint.visible = t
        }, e.prototype.onTapUp = function() {
          this._destroyed || this.container.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this._destroyed || this.container.scale.set(.9, .9)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          t.prototype.destroy.call(this)
        }, e
      }(Lu),
      Eb = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = jh("medal_icon_bg.png"), e.addChild(e.bg), e.outline = jh("medal_outline.png"), e.addChild(e.outline), e.bg.x = (e.outline.width - e.bg.width) / 2, e.bg.y = (e.outline.height - e.bg.height) / 2, e.icon = new xv, e.icon.width = 100, e.icon.height = 100, e.icon.x = e.bg.x + (e.bg.width - e.icon.width) / 2, e.icon.y = e.bg.y + (e.bg.height - e.icon.height) / 2, e.addChild(e.icon), e.rankText = Xh("", "#bcbfcd", !1, "left", 24), e.rankText.y = e.outline.y + e.outline.height + 5, e.addChild(e.rankText), e.countBg = jh("medal_count_bg.png"), e.countBg.x = (e.outline.width - e.countBg.width) / 2, e.countBg.y = e.rankText.y + e.rankText.height + 5, e.addChild(e.countBg), e.countText = Xh("0", "#ffcd48", !1, "left", 24), e.countText.x = e.countBg.x + (e.countBg.width - e.countText.width) / 2, e.countText.y = e.countBg.y + (e.countBg.height - e.countText.height) / 2, e.addChild(e.countText), e.interactive = !0, e.selected = !1, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "selected", {
          get: function() {
            return this.outline.visible
          },
          set: function(t) {
            this.outline.visible = t
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.setDef = function(t) {
          this.def = t, t.rank[1] <= 1 ? this.setRankText("1") : this.setRankText("".concat(t.rank[1]))
        }, e.prototype.setMedal = function(t) {
          this.medal = t, this.medal ? (this.setCount(this.medal.count), this.selected = mx.isShowMedal(this.medal.id)) : (this.setCount(0), this.selected = !1)
        }, e.prototype.setCount = function(t) {
          this.countText.text = t.toString(), this.countText.x = this.countBg.x + (this.countBg.width - this.countText.width) / 2, this.icon.setInfo(t > 0 ? this.def : null)
        }, e.prototype.setRankText = function(t) {
          this.rankText.text = t, this.rankText.x = (this.outline.width - this.rankText.width) / 2
        }, e
      }(PIXI.Container),
      Lb = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !0, e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this,
            e = this.titleBg = jh("medal_title.png"),
            i = this.bg = qh("medal_list_item_bg.png", 10, 10, 10, 10);
          i.width = 580, i.height = 228, i.y = e.height / 2, this.addChild(i), e.y = 0, e.x = (i.width - e.width) / 2, this.addChild(e), this.titleText = Xh("", "#FFFFFF", !1, "left", 30), this.titleText.x = e.x + (e.width - this.titleText.width) / 2, this.titleText.y = e.y + (e.height - this.titleText.height) / 2, this.addChild(this.titleText), this.checkBox = new Zu("medal_show_checkbox_on.png", "medal_show_checkbox_off.png"), this.checkBox.x = i.width - this.checkBox.width / 2 - 10, this.checkBox.y = i.y + 20, this.addChild(this.checkBox.skin), this.checkBox.on(Iu, this.onToggle, this), this.iconGroup = new wv(20), this.medalIcons = [];
          for (var n = function(e) {
              var i = new Eb;
              i.on(Iu, (function() {
                return r(t, void 0, void 0, (function() {
                  return s(this, (function(t) {
                    return mx.hasMedalInMode(this.info.mode) && mx.isMedalActive(i.def.id) ? (mx.showOrHideMedal(i.def.id, !i.selected) && (i.selected = !i.selected, i.selected && (this.checkBox.toggle = !0)), [2]) : [2]
                  }))
                }))
              }), o), o.iconGroup.addSkin(i), o.medalIcons.push(i)
            }, o = this, a = 0; a < 4; a++) n();
          this.iconGroup.x = (i.width - this.iconGroup.width) / 2, this.iconGroup.y = i.y + (i.height - this.iconGroup.height) / 2 + 15, this.addChild(this.iconGroup)
        }, e.prototype.onToggle = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              if (!mx.hasMedalInMode(this.info.mode)) return rc(""), [2];
              if (!(this.checkBox.toggle = !this.checkBox.toggle))
                for (mx.hideAllMedalInMode(this.info.mode), t = 0; t < this.medalIcons.length; t++) this.medalIcons[t].selected = !1;
              return [2]
            }))
          }))
        }, e.prototype.setTitle = function(t) {
          this.titleText.text = t, this.titleText.x = this.titleBg.x + (this.titleBg.width - this.titleText.width) / 2
        }, e.prototype.setInfo = function(t) {
          this.info = t, this.refreshUI()
        }, e.prototype.refreshUI = function() {
          var t = Mh.getMode(this.info.mode);
          this.setTitle(t.name);
          for (var e = !1, i = Fh.getMedals(this.info.mode), n = function(t) {
              var n = i[t];
              o.medalIcons[t].setDef(n);
              var r = o.info.medals.find((function(t) {
                return t.id == n.id
              }));
              o.medalIcons[t].setMedal(r), mx.isShowMedal(n.id) && (e = !0)
            }, o = this, r = 0; r < i.length; r++) n(r);
          this.checkBox.toggle = e
        }, e.ITEM_HEIGHT = 250, e.ITEM_GAP = 25, e
      }(PIXI.Container),
      Ob = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentHeight = 0, e.name = "GameModeRankList", e.y = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return -this.y
          },
          set: function(t) {
            this.y = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this._contentHeight
          },
          set: function(t) {
            this._contentHeight = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      Rb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.rankItems = [], e.activeMedals = [];
          e.bg = $h(635, 919), e.addChild(e.bg), e.addTitle(""), e.addCloseButton();
          return e.scroller = new Wu(600, 789), e.scroller.x = (e.bg.width - 600) / 2, e.scroller.y = 100, e.rankList = new Ob, e.scroller.setContent(e.rankList), e.addChild(e.scroller), e
        }
        return i(e, t), e.prototype.showList = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n, o, r, a;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  return t = this, [4, mx.loadSelfMedals()];
                case 1:
                  for (t.activeMedals = s.sent(), e = this.rankItems.slice(), this.rankItems.length = 0, i = 0, n = function(t) {
                      var n = void 0;
                      n = e.length > 0 ? e.pop() : new Lb;
                      var r = o.activeMedals.filter((function(e) {
                        return Fh.getMedal(e.id).type === t
                      }));
                      n.setInfo({
                        mode: t,
                        medals: r
                      }), n.y = i, o.rankItems.push(n), n.parent !== o.rankList && o.rankList.addChild(n), t < Jh.Power && (i += Lb.ITEM_HEIGHT + Lb.ITEM_GAP)
                    }, o = this, r = Jh.Collection; r <= Jh.Power; r++) n(r);
                  for (a = 0; a < e.length; a++) e[a].destroy();
                  return e.length = 0, this.rankList.contentHeight = i + Lb.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0, [2]
              }
            }))
          }))
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.showList(),
            function(t) {
              0;
              X.logEvent("-".concat(t))
            }("")
        }, e.prototype.onDestroy = function() {
          mx.refreshShowMedals(), t.prototype.onDestroy.call(this)
        }, e.clsName = "MedalListView", e
      }(Qg),
      Gb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(635, 1036), this.addChild(this.bg), this.addTitle(""), this.addCloseButton();
          var t = Km();
          t.y = 120, t.x = (this.bg.width - t.width) / 2, this.addChild(t);
          var e = new pv("", 1);
          e.x = t.x, e.y = t.y - e.height / 2, this.addChild(e), this.conditionText = Xh("", "#8e8e8e", !0, "left", 24), this.conditionText.x = t.x + 20, this.conditionText.y = t.y + (t.height - this.conditionText.height) / 2, this.addChild(this.conditionText), this.teamInfoGroup = new Cv, this.teamInfoGroup.x = (this.bg.width - this.teamInfoGroup.width) / 2, this.teamInfoGroup.y = 260, this.addChild(this.teamInfoGroup), this.membersPreview = new Bv, this.membersPreview.x = this.bg.width / 2, this.membersPreview.y = this.bg.height / 2 + 120, this.addChild(this.membersPreview), this.buttonGroup = new im(20), this.addChild(this.buttonGroup), this.rejectButton = new ey("team_white_button_242_90.png", "team_label_reject.png", !1), this.rejectButton.on(Tu, this.onReject, this), this.buttonGroup.addButton(this.rejectButton), this.joinButton = new ey("team_yellow_button_242_91.png", "team_label_join.png", !1), this.joinButton.on(Tu, this.onAgree, this), this.buttonGroup.addButton(this.joinButton), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.height - 150
        }, e.prototype.onReject = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, hx(this.msg)];
                case 1:
                  return t.sent() && (Lg.dispatchEvent(hv), rc(""), this.close()), [2]
              }
            }))
          }))
        }, e.prototype.onAgree = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [4, ax(this.msg)];
                case 1:
                  return (t = e.sent()) && (t.errMsg ? rc(t.errMsg) : rc(""), t.del && (Lg.dispatchEvent(hv), this.close())), [2]
              }
            }))
          }))
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), this.msg = e, this.loadTeamInfo(e.teamId), JI("")
        }, e.prototype.loadTeamInfo = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return [4, zw(t)];
                case 1:
                  return (e = o.sent()) ? ((i = e.team) && (this.conditionText.text = "".concat(cv[e.team.joinLimit], "\n:").concat(e.team.requireScore), this.teamInfoGroup.setTeamShowInfo(this.msg.teamName, this.msg.teamId, i)), (n = e.members) && this.membersPreview.show(n), [2]) : [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          this.joinButton && (this.joinButton.destroy(), this.joinButton = null), this.rejectButton && (this.rejectButton.destroy(), this.rejectButton = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamInviteView", e
      }(Qg),
      Ab = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !0, e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = this.bg = zm();
          this.addChild(t), this.hGroup = new wv(10, !0);
          var e = Xh("", "#FFFFFF", !1, "left", 28);
          this.hGroup.addSkin(e), this.nameText = Xh("", "#f19d07", !1, "left", 28), this.hGroup.addSkin(this.nameText);
          var i = Xh("", "#bbbbbb", !1, "left", 28);
          this.hGroup.addSkin(i), this.hGroup.x = 20, this.hGroup.y = (t.height - this.hGroup.height) / 2, this.addChild(this.hGroup), this.infoBtn = new Ru("team_button_check.png"), this.infoBtn.x = t.width - 60, this.infoBtn.y = t.height / 2, this.addChild(this.infoBtn.skin), this.infoBtn.on(Tu, this.onInfo, this)
        }, e.prototype.onInfo = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              return tc.showPanel(Gb, this.message), [2]
            }))
          }))
        }, e.prototype.setMessage = function(t) {
          this.message !== t && (this.message = t, this.refreshUI())
        }, e.prototype.refreshUI = function() {
          this.nameText.text = this.message.teamName, this.hGroup.reLayout()
        }, e.prototype.destroy = function(e) {
          this.infoBtn && (this.infoBtn.destroy(), this.infoBtn = null), t.prototype.destroy.call(this, e)
        }, e.ITEM_HEIGHT = 126, e.ITEM_GAP = 10, e
      }(PIXI.Container),
      Nb = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentHeight = 0, e.name = "TeamMessageList", e.y = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return -this.y
          },
          set: function(t) {
            this.y = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this._contentHeight
          },
          set: function(t) {
            this._contentHeight = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      jb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.rankItems = [], e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(635, 1036), this.addChild(this.bg), this.addTitle(""), this.addCloseButton(), this.scroller = new Wu(580, 740), this.scroller.x = (this.bg.width - 580) / 2, this.scroller.y = 100, this.rankList = new Nb, this.scroller.setContent(this.rankList), this.addChild(this.scroller), this._noRequestText = Xh("", "#FFFFFF", !1, "center", 32), this._noRequestText.x = (this.bg.width - this._noRequestText.width) / 2, this._noRequestText.y = (this.bg.height - this._noRequestText.height) / 2, this.addChild(this._noRequestText), this._noRequestText.visible = !1, Lg.addListener(hv, this.onTeamInviteChange, this)
        }, e.prototype.onTeamInviteChange = function() {
          this.refreshInviteList()
        }, e.prototype.refreshInviteList = function() {
          var t = mx.inviteList,
            e = t.length;
          this._noRequestText.visible = 0 === e;
          var i = this.rankItems.slice();
          this.rankItems.length = 0;
          for (var n = 0, o = 0; o < e; o++) {
            var r = void 0;
            (r = i.length > 0 ? i.pop() : new Ab).setMessage(t[o]), r.y = n, this.rankItems.push(r), r.parent !== this.rankList && this.rankList.addChild(r), o < e - 1 && (n += ab.ITEM_HEIGHT + ab.ITEM_GAP)
          }
          for (o = 0; o < i.length; o++) {
            (r = i[o]).destroy()
          }
          i.length = 0, this.rankList.contentHeight = n + ib.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.scroller.interactive = !0
        }, e.prototype.onShow = function(e) {
          var i = this;
          t.prototype.onShow.call(this, e), this.centerWindow(), mx.loadInvites().then((function() {
            mx.inviteRed = !1, i.refreshInviteList()
          })), JI("")
        }, e.prototype.destroy = function() {
          Lg.removeListener(hv, this.onTeamInviteChange);
          for (var e = 0; e < this.rankItems.length; e++) {
            this.rankItems[e].destroy()
          }
          this.rankItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), t.prototype.destroy.call(this)
        }, e.clsName = "TeamMessageView", e
      }(Qg),
      Vb = function(t) {
        function e(e, i, n, o) {
          var r = t.call(this) || this;
          return r._enabled = !1, r._activeImg = e, r._disableImg = i, r._activeTitle = n, r._disableTitle = o, r.button = new Ru(i, !1), r.addChild(r.button.skin), r.button.x = 0, r.button.y = 0, r.button.on(Tu, r._tapButton, r), r.titleText = Xh("", "#FFFFFF", !0, "left", 30), r.titleText.y = 120, r.addChild(r.titleText), r
        }
        return i(e, t), Object.defineProperty(e.prototype, "enabled", {
          get: function() {
            return this._enabled
          },
          set: function(t) {
            this._enabled = t, this.button.setFrameId(this._enabled ? this._activeImg : this._disableImg), this.titleText.text = this._enabled ? this._activeTitle : this._disableTitle, this.titleText.x = (this.button.width - this.titleText.width) / 2
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype._tapButton = function() {
          this.enabled = !this.enabled, this.emit(Tu)
        }, e.prototype.destroy = function(e) {
          this.button && (this.button.destroy(), this.button = null), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      Ub = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = Wh("dlc/ui/settings/settings_bg.png"), this.bg.width = 557, this.bg.height = 919, this.bg.interactive = !0, this.addChild(this.bg), this.addCloseButton(), this.addTitle(""), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 128, this.avatarImage.height = 128, this.avatarImage.x = 40, this.avatarImage.y = 120, this.addChild(this.avatarImage), this.avatarName = Xh(uC.nick, "#ff9933", !0, "left", 40), this.avatarName.y = 110, this.avatarName.x = 200, this.addChild(this.avatarName);
          var e = this.highScoreText = Xh("0", "#FFFFFF", !1, "left", 24);
          e.y = this.avatarName.y + 50, e.x = 200, this.addChild(e);
          var i = this.expertPassText = Xh("100", "#FFFFFF", !1, "left", 24);
          i.y = e.y + 36, i.x = 200, this.addChild(i);
          var n = this.skinCountText = Xh("100", "#FFFFFF", !1, "left", 24);
          n.y = i.y + 36, n.x = 200, this.addChild(n);
          var o = this.uidText = Xh("uid" + uC.uid, "#FFFFFF", !1, "left", 24);
          o.y = 300, o.x = 50, o.visible = !1, this.addChild(o);
          var r = this.syncButton = new zy("dlc/ui/settings/button_sync.png", 100, 36, !0);
          r.y = 135, r.x = this.bg.width - 94, this.addChild(r.skin), r.on(Tu, this._tapSync, this);
          var s = Xh("", "#FFFFFF", !0, "left", 40);
          s.y = 395, s.x = (this.bg.width - s.width) / 2, this.addChild(s), this.medalButton = new zy("dlc/ui/settings/button_medal_setting.png", 100, 36, !0), this.medalButton.y = s.y + s.height / 2, this.medalButton.x = this.bg.width - 94, this.addChild(this.medalButton.skin), this.medalButton.on(Tu, this._tapMedal, this), this.medalGroup = new wv(10), this.medalGroup.y = 460, this.addChild(this.medalGroup), this.noMedalTip = Xh("", "#FFFFFF", !1, "left", 24), this.noMedalTip.x = (this.bg.width - this.noMedalTip.width) / 2, this.noMedalTip.y = 540, this.addChild(this.noMedalTip);
          var a = Xh("", "#FFFFFF", !0, "left", 40);
          if (a.y = 665, a.x = (this.bg.width - a.width) / 2, this.addChild(a), this.buttonGroup = new im(40), this.addChild(this.buttonGroup), this.soundButton = new Vb("sound_on.png", "sound_off.png", "", ""), this.soundButton.on(Tu, this._tapSound, this), this.buttonGroup.addButton(this.soundButton), this.qualityButton = new Vb("quality_best.png", "quality_low.png", "", ""), this.qualityButton.on(Tu, this._tapQuality, this), this.buttonGroup.addButton(this.qualityButton), this.vibrateButton = new Vb("vibrate_on.png", "vibrate_off.png", "", ""), this.vibrateButton.on(Tu, this._tapVibrate, this), this.buttonGroup.addButton(this.vibrateButton), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = 735, $hostDef.team) {
            var h = this.teamMessageButton = new Fb;
            h.y = 352, h.x = 80, this.addChild(h.skin), h.on(Tu, this._tapMessage, this), this.addToDestroy = mr((function() {
              t.teamMessageButton.showRedPoint(mx.inviteRed)
            }))
          }
          this.addToDestroy = mr((function() {
            t.medalGroup.removeAllItems();
            for (var e = mx.showMedals, i = 0; i < e.length; i++) {
              var n = new Tv;
              n.setInfo(e[i]), t.medalGroup.addSkin(n)
            }
            t.medalGroup.x = (t.bg.width - t.medalGroup.width) / 2, t.noMedalTip.visible = 0 === e.length
          }))
        }, e.prototype.loadSelfShowMedals = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, mx.loadSelfShowMedals()];
                case 1:
                  return t.sent(), [2]
              }
            }))
          }))
        }, e.prototype._tapMedal = function() {
          tc.showPanel(Rb)
        }, e.prototype._tapSync = function() {
          Bm(this.avatarImage, uC.image)
        }, e.prototype._tapMessage = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, Bi("team")];
                case 1:
                  return t.sent(), tc.showPanel(jb), [2]
              }
            }))
          }))
        }, e.prototype._tapQuality = function() {
          Nc.quality = this.qualityButton.enabled, bI.shadowMapEnabled = Nc.quality, Nc.save()
        }, e.prototype._tapSound = function() {
          Nc.sound = this.soundButton.enabled, Nc.save()
        }, e.prototype._tapVibrate = function() {
          Nc.vibrate = this.vibrateButton.enabled, Nc.save()
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.soundButton.enabled = Nc.sound, this.qualityButton.enabled = Nc.quality, this.vibrateButton.enabled = Nc.vibrate, this.avatarName.text = uC.nick, this.highScoreText.text = "".concat(uC.bestScore), this.skinCountText.text = "".concat(uC.skinCount), this.expertPassText.text = "".concat(uC.expertFinishCount), Bm(this.avatarImage, uC.image), this.syncButton.visible = !1, this.showUserInfoButton(), this.loadSelfShowMedals()
        }, e.prototype.showUserInfoButton = function() {
          var t = this;
          if ("function" == typeof wx.createUserInfoButton)
            if (uC.needAuthorize) {
              this.syncButton.visible = !0;
              var e = {
                  x: (this.bg.x + this.x + 12) * tc.uiScale,
                  y: (this.bg.y + this.y + 12) * tc.uiScale,
                  width: (this.bg.width - 24) * tc.uiScale,
                  height: (this.bg.height - 24) * tc.uiScale
                },
                i = !1;
              Pb((function(e) {
                return t.addToDestroy = e
              }), (function() {
                return 2 === tc.openedPopUpPanelCount
              }), {
                left: e.x,
                top: e.y,
                width: e.width,
                height: e.height
              }, (function(e) {
                t.syncButton.visible = !1, i || (i = !0, e && t.syncUserInfo(e))
              }))
            } else if (!uC.isAuthorized) {
            this.syncButton.visible = !0;
            e = {
              x: (this.x + this.syncButton.x - this.syncButton.width / 2 - 10) * tc.uiScale,
              y: (this.y + this.syncButton.y - this.syncButton.height / 2 - 10) * tc.uiScale,
              width: (this.syncButton.width + 20) * tc.uiScale,
              height: (this.syncButton.height + 20) * tc.uiScale
            };
            var n = !1;
            Pb((function(e) {
              return t.addToDestroy = e
            }), (function() {
              return 2 === tc.openedPopUpPanelCount
            }), {
              left: e.x,
              top: e.y,
              width: e.width,
              height: e.height
            }, (function(e) {
              t.syncButton.visible = !1, n || (n = !0, e && t.syncUserInfo(e))
            }))
          }
        }, e.prototype.syncUserInfo = function(t) {
          rc(""), Sb(t), t.userInfo && (uC.image = t.userInfo.avatarUrl, uC.nick = t.userInfo.nickName, Bm(this.avatarImage, uC.image), this.avatarName.text = uC.nick)
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this)
        }, e.prototype.onDestroy = function() {
          this.syncButton && (this.syncButton.destroy(), this.syncButton = null), this.teamMessageButton && (this.teamMessageButton.destroy(), this.teamMessageButton = null), this.soundButton && (this.soundButton.destroy(), this.soundButton = null), this.vibrateButton && (this.vibrateButton.destroy(), this.vibrateButton = null), this.qualityButton && (this.qualityButton.destroy(), this.qualityButton = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "SettingsView", e
      }(Qg),
      Wb = function(t) {
        function e(e, i) {
          var n = t.call(this) || this;
          return n.button = new Ru("team_bottom_button.png", !1), n.addChild(n.button.skin), n.button.x = 0, n.button.y = 0, n.button.on(Tu, n._tapButton, n), n.icon = jh(e), n.icon.x = (n.button.width - n.icon.width) / 2, n.icon.y = (n.button.height - n.icon.height) / 2, n.addChild(n.icon), n.titleText = Xh(i, "#FFFFFF", !0, "left", 30), n.titleText.y = n.button.height + 10, n.titleText.x = (n.button.width - n.titleText.width) / 2, n.addChild(n.titleText), n.redPoint = jh("redpoint2.png"), n.redPoint.x = n.button.width - n.redPoint.width, n.redPoint.y = n.button.height / 2 - n.redPoint.height - 30, n.addChild(n.redPoint), n.showRed(!1), n
        }
        return i(e, t), e.prototype.showRed = function(t) {
          this.redPoint.visible = t
        }, e.prototype._tapButton = function() {
          this.emit(Tu)
        }, e.prototype.destroy = function(e) {
          this.button && (this.button.destroy(), this.button = null), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      qb = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = e.iconBg = jh("team_shop_confirm_bg.png");
          i.x = 0, e.addChild(i);
          var n = e.targetBg = jh("team_shop_item_title_bg.png");
          return n.x = (i.width - n.width) / 2, n.y = -n.height / 2, e.addChild(n), e.icon = new PIXI.Sprite, e.icon.width = 166, e.icon.height = 166, e.icon.x = i.x + (i.width - e.icon.width) / 2, e.icon.y = i.y + (i.height - e.icon.height) / 2, e.addChild(e.icon), e.posIndexText = Xh("", "#ff6600", !0, "left", 24), e.posIndexText.x = n.x + (n.width - e.posIndexText.width) / 2, e.posIndexText.y = n.y + (n.height - e.posIndexText.height) / 2, e.addChild(e.posIndexText), e.nameText = Xh("", "#ffffff", !0, "left", 28), e.nameText.x = i.x + (i.width - e.nameText.width) / 2, e.nameText.y = i.y + i.height + 10, e.addChild(e.nameText), e.width = i.width, e
        }
        return i(e, t), e.prototype.setShopInfo = function(t) {
          if (this.shopInfo !== t) {
            this.shopInfo = t;
            var e = Dh.getDecorate(t.id);
            this.nameText.text = e.name, this.nameText.x = this.iconBg.x + (this.iconBg.width - this.nameText.width) / 2, this.posIndexText.text = Ym(e.type), this.posIndexText.x = this.targetBg.x + (this.targetBg.width - this.posIndexText.width) / 2, this.icon.texture = Vh("deco_".concat(t.id, ".jpg"))
          }
        }, e.prototype.destroy = function(e) {
          t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      Hb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(620, 750), this.addChild(this.bg), this.addTitle("", "#f19d07"), this.addCloseButton(), this.shopItem = new qb, this.shopItem.x = (this.bg.width - this.shopItem.width) / 2, this.shopItem.y = 150, this.addChild(this.shopItem), this.hGroup = new wv, this.hGroup.addSkin(Xh("", "#ffffff", !0, "left", 28)), this.costText = Xh("60", "#f19d07", !0, "left", 28), this.hGroup.addSkin(this.costText), this.hGroup.addSkin(jh("team_shop_ticket.png")), this.hGroup.addSkin(Xh("", "#ffffff", !0, "left", 28)), this.hGroup.x = (this.bg.width - this.hGroup.width) / 2, this.hGroup.y = this.shopItem.y + this.shopItem.height + 50, this.addChild(this.hGroup), this.buttonGroup = new im(20), this.addChild(this.buttonGroup), this.cancelButton = new ey("team_white_button_242_90.png", "team_label_cancel.png", !1), this.cancelButton.on(Tu, this._onCancel, this), this.buttonGroup.addButton(this.cancelButton), this.exchangeButton = new ey("team_yellow_button_242_91.png", "team_label_exchange.png", !1), this.exchangeButton.on(Tu, this._onExchange, this), this.buttonGroup.addButton(this.exchangeButton), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.height - 150
        }, e.prototype._onCancel = function() {
          this.close()
        }, e.prototype._onExchange = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return mx.coupon < this.product.price ? (rc(""), [2]) : [4, rx(this.product.id)];
                case 1:
                  return t.sent() && (this.product.owned = !0, Lg.dispatchEvent(av), rc(""), this.close()), [2]
              }
            }))
          }))
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), this.product = e, this.shopItem.setShopInfo(this.product), this.costText.text = this.product.price + "", this.hGroup.reLayout(), YI("", this.product.id)
        }, e.prototype.onDestroy = function() {
          this.exchangeButton && (this.exchangeButton.destroy(), this.exchangeButton = null), this.cancelButton && (this.cancelButton.destroy(), this.cancelButton = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamShopConfirmView", e
      }(Qg),
      $b = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = e.bg = jh("team_shop_item_bg.png"),
            n = e.targetBg = jh("team_shop_item_title_bg.png");
          n.x = (i.width - n.width) / 2, n.y = 0, e.bg.y = n.height / 2, e.addChild(i), e.addChild(n);
          var o = jh("team_shop_icon_bg.png");
          o.x = (i.width - o.width) / 2, o.y = (i.height - o.height) / 2 - 10, e.addChild(o), e.icon = new PIXI.Sprite, e.icon.width = 166, e.icon.height = 166, e.icon.x = o.x + (o.width - e.icon.width) / 2, e.icon.y = o.y + (o.height - e.icon.height) / 2, e.addChild(e.icon), e.posIndexText = Xh("", "#ff6600", !0, "left", 24), e.posIndexText.x = n.x + (n.width - e.posIndexText.width) / 2, e.posIndexText.y = n.y + (n.height - e.posIndexText.height) / 2, e.addChild(e.posIndexText), e.nameText = Xh("", "#ffffff", !0, "left", 28), e.nameText.x = i.x + (i.width - e.nameText.width) / 2, e.nameText.y = 55, e.addChild(e.nameText);
          var r = jh("team_shop_cost_bg.png");
          r.x = (i.width - r.width) / 2 + 30, r.y = o.y + o.height + 5, e.addChild(r);
          var s = jh("team_shop_ticket.png");
          return s.x = r.x - s.width + 10, s.y = r.y + (r.height - s.height) / 2, e.addChild(s), e.priceText = Xh("500", "#ffffff", !0, "left", 28), e.priceText.x = r.x + 20, e.priceText.y = r.y + (r.height - e.priceText.height) / 2, e.addChild(e.priceText), e.exchangeBtn = new Ru("team_shop_button_exchange.png"), e.exchangeBtn.x = i.width / 2, e.exchangeBtn.y = i.height - 30, e.addChild(e.exchangeBtn.skin), e.exchangeBtn.on(Tu, e.onExchange, e), e.ownedSprite = jh("team_shop_item_owned.png"), e.ownedSprite.x = (i.width - e.ownedSprite.width) / 2, e.ownedSprite.y = i.height - 20 - e.ownedSprite.height, e.addChild(e.ownedSprite), e.width = i.width, e
        }
        return i(e, t), e.prototype.onExchange = function() {
          mx.isManager ? tc.showPanel(Hb, this.shopInfo) : rc("")
        }, e.prototype.setShopInfo = function(t) {
          if (this.shopInfo !== t) {
            this.shopInfo = t, this.ownedSprite.visible = t.owned, this.exchangeBtn.visible = !t.owned, this.priceText.text = t.price + "";
            var e = Dh.getDecorate(t.id);
            this.nameText.text = e.name, this.nameText.x = this.bg.x + (this.bg.width - this.nameText.width) / 2, this.posIndexText.text = Ym(e.type), this.posIndexText.x = this.targetBg.x + (this.targetBg.width - this.posIndexText.width) / 2, this.icon.texture = Vh("deco_".concat(t.id, ".jpg"))
          }
        }, e.prototype.destroy = function(e) {
          this.exchangeBtn && (this.exchangeBtn.destroy(), this.exchangeBtn = null), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      Xb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.shopItems = [], e._nextRefreshTime = 0, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = $h(635, 1036), this.addChild(this.bg), this.addTitle("", "#f19d07"), this.addCloseButton();
          var e = this.cdBg = qh("team_shop_cd_bg.png", 5, 5, 5, 5);
          e.width = 580, e.height = 41, e.x = (this.bg.width - e.width) / 2, e.y = 100, this.addChild(e), this.cdTimeText = Xh("302359", "#ffffff", !0, "left", 24), this.cdTimeText.x = e.x + (e.width - this.cdTimeText.width) / 2, this.cdTimeText.y = e.y + (e.height - this.cdTimeText.height) / 2, this.addChild(this.cdTimeText);
          this.scroller = new Wu(600, this.bg.height - 150 - 90), this.scroller.y = 150, this.scroller.x = (this.bg.width - 600) / 2, this.gridContainer = new Zg(600, 3, 10), this.scroller.setContent(this.gridContainer), this.addChild(this.scroller);
          var i = jh("team_shop_cost_bg.png");
          i.x = (this.bg.width - i.width) / 2 + 30, i.y = this.bg.height - 70, this.addChild(i);
          var n = jh("team_shop_ticket2.png");
          n.x = i.x - n.width + 10, n.y = i.y + (i.height - n.height) / 2, this.addChild(n), this.ticketText = Xh("500", "#ffffff", !0, "left", 28), this.ticketText.x = i.x + 20, this.ticketText.y = i.y + (i.height - this.ticketText.height) / 2, this.addChild(this.ticketText), this.addToDestroy = mr((function() {
            t.ticketText.text = mx.coupon + "", t.ticketText.y = n.y + (n.height - t.ticketText.height) / 2
          })), Lg.addListener(av, this.onExchange, this)
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), this.showShopItems(), $I("")
        }, e.prototype.updateCdTime = function() {
          this.cdTimeText.text = "" + ri(this._nextRefreshTime - Je.curTime), this.cdTimeText.x = this.cdBg.x + (this.cdBg.width - this.cdTimeText.width) / 2
        }, e.prototype.startTick = function() {
          this.stopTick(), this.intervalId = setInterval(this.onTick.bind(this), 500), this.onTick()
        }, e.prototype.onTick = function() {
          this.isDisposed || this.updateCdTime()
        }, e.prototype.stopTick = function() {
          this.intervalId && (clearInterval(this.intervalId), this.intervalId = null)
        }, e.prototype.onExchange = function() {
          this.showShopItems()
        }, e.prototype.showShopItems = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n, o, r;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  return [4, ox()];
                case 1:
                  if (!(t = s.sent())) return [2];
                  for (this._nextRefreshTime = t.nextRefreshTime, this.startTick(), e = t.products, i = this.shopItems.slice(), this.shopItems.length = 0, n = e.length, r = 0; r < n; r++)(o = i.length > 0 ? i.pop() : new $b).setShopInfo(e[r]), this.shopItems.push(o), this.gridContainer.addItem(o);
                  for (r = 0; r < i.length; r++) i[r].destroy();
                  return i.length = 0, this.gridContainer.reLayout(), this.scroller.updateMaxScrollV(), this.scroller.interactive = !0, [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          Lg.removeListener(av, this.onExchange);
          for (var e = 0; e < this.shopItems.length; e++) this.shopItems[e].destroy();
          this.shopItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), this.stopTick(), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamShopView", e
      }(Qg),
      Yb = function(t) {
        function e() {
          var e = t.call(this) || this;
          e._giftVisible = !1, e.greyGift = jh("team_task_gift_grey.png"), e.greyGift.anchor.set(.5, .5), e.addChild(e.greyGift), e.gift = jh("team_task_gift.png"), e.gift.anchor.set(.5, .5), e.addChild(e.gift), e.rewardIcon = jh("team_task_label_goted.png"), e.rewardIcon.anchor.set(.5, .5), e.addChild(e.rewardIcon), e.giftIconBg = jh("team_task_bg2.png"), e.giftIconBg.x = -e.giftIconBg.width / 2, e.giftIconBg.y = e.greyGift.height, e.addChild(e.giftIconBg), e.icon = jh("team_gold_icon.png"), e.icon.width = 40, e.icon.height = 40, e.icon.x = e.giftIconBg.x + (e.giftIconBg.width - e.icon.width) / 2, e.icon.y = e.giftIconBg.y + (e.giftIconBg.height - e.icon.height) / 2 + 14, e.addChild(e.icon);
          var i = jh("team_task_reward_bg.png");
          i.anchor.set(.5, .5), i.y = 50, e.addChild(i);
          var n = jh("team_task_reward_star.png");
          return n.anchor.set(.5, .5), n.y = i.y + (i.height - n.height) / 4, n.x = -i.width / 2, e.addChild(n), e.countText = Xh("1", "#ffffff", !0, "left", 24), e.countText.x = -e.countText.width / 2, e.countText.y = i.y - i.height / 2 - 5, e.addChild(e.countText), e.interactive = !0, e.on(Tu, e.onReward, e), e.setGiftVisible(e._giftVisible), e
        }
        return i(e, t), e.prototype.setGiftVisible = function(t) {
          this.giftIconBg.visible = t, this.icon.visible = t
        }, e.prototype.updateState = function() {
          var t = mx.isPersonTaskScoreRewarded(this.def.id),
            e = mx.personTask.score;
          this.countText.text = this.def.needScore + "", this.countText.x = -this.countText.width / 2, this.greyGift.visible = this.def.needScore > e, this.gift.visible = this.def.needScore <= e, this.rewardIcon.visible = t
        }, e.prototype.onReward = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return this._giftVisible = !this._giftVisible, this.setGiftVisible(this._giftVisible), mx.isPersonTaskScoreRewarded(this.def.id) || this.def.needScore > mx.personTask.score ? [2] : [4, tx(this.def.id)];
                case 1:
                  return t.sent() && rc(""), this.updateState(), [2]
              }
            }))
          }))
        }, e.prototype.setRewardDef = function(t) {
          this.def = t, t.giftCoin ? this.icon.texture = Vh("team_gold_icon.png") : this.icon.texture = Vh("coin.png"), this.updateState()
        }, e.prototype.destroy = function(e) {
          t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      zb = function(t) {
        function e() {
          var e = t.call(this) || this,
            i = e.bg = jh("team_task_list_item.png");
          e.addChild(i);
          var n = e.targetBg = jh("team_task_bg1.png");
          return n.x = (i.width - n.width) / 2, n.y = 10, e.addChild(n), e.targetText = Xh("", "#df5900", !0, "left", 28), e.targetText.x = n.x + (n.width - e.targetText.width) / 2, e.targetText.y = n.y + (n.height - e.targetText.height) / 2, e.addChild(e.targetText), e.rewardText = Yh("", "#ffffff", 220, 24, !1, "left", 10), e.rewardText.y = n.y + n.height + 20, e.addChild(e.rewardText), e.rewardedIcon = jh("team_task_btn_goted.png"), e.rewardedIcon.anchor.set(.5, .5), e.rewardedIcon.x = i.width / 2, e.rewardedIcon.y = i.height - 50, e.addChild(e.rewardedIcon), e.unfinishIcon = jh("team_task_btn_unfinished.png"), e.unfinishIcon.anchor.set(.5, .5), e.unfinishIcon.x = i.width / 2, e.unfinishIcon.y = i.height - 50, e.addChild(e.unfinishIcon), e.getBtn = new Ru("team_task_btn_get.png"), e.getBtn.x = i.width / 2, e.getBtn.y = i.height - 50, e.addChild(e.getBtn.skin), e.getBtn.on(Tu, e.onGet, e), e.goBtn = new Ru("team_task_btn_go.png"), e.goBtn.x = i.width / 2, e.goBtn.y = i.height - 50, e.addChild(e.goBtn.skin), e.goBtn.on(Tu, e.onGo, e), e.width = i.width, e
        }
        return i(e, t), e.prototype.onGet = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, Zw(this.taskDef.id)];
                case 1:
                  return t.sent() && rc(""), this.updateState(), [2]
              }
            }))
          }))
        }, e.prototype.onGo = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return tc.closePanel(Zb.clsName), this.taskDef.taskType !== Sa.ExpertGame ? [3, 2] : [4, Nm()];
                case 1:
                  return e.sent(), [2];
                case 2:
                  if (this.taskDef.taskType !== Sa.ClassicsGame) return [3, 7];
                  e.label = 3;
                case 3:
                  return e.trys.push([3, 5, , 6]), [4, _I(Jh.Classics)];
                case 4:
                  return e.sent(), [3, 6];
                case 5:
                  return oc(t = e.sent()), DEVELOP && console.warn("e:", t), [3, 6];
                case 6:
                  return [2];
                case 7:
                  return this.taskDef.taskType !== Sa.DailyGame ? [3, 9] : [4, jT(WT().type)];
                case 8:
                  e.sent(), e.label = 9;
                case 9:
                  return [2]
              }
            }))
          }))
        }, e.prototype.setTask = function(t) {
          if (this.taskDef !== t) {
            this.taskDef = t;
            var e = Jm(t);
            this.targetText.text = Xm(t.taskType, e), this.targetText.x = this.targetBg.x + (this.targetBg.width - this.targetText.width) / 2, this.rewardText.text = "+".concat(t.score, "\n+").concat(t.teamExp, "\n+").concat(t.contribution), this.rewardText.x = this.bg.x + (this.bg.width - this.rewardText.width) / 2, this.updateState()
          }
        }, e.prototype.updateState = function() {
          var t = mx.isPersonTaskFinished(this.taskDef.id),
            e = mx.isPersonTaskReceived(this.taskDef.id);
          this.rewardedIcon.visible = e, this.unfinishIcon.visible = !t, this.getBtn.visible = !e && t, this.goBtn.visible = !t
        }, e.prototype.destroy = function(e) {
          this.goBtn && (this.goBtn.destroy(), this.goBtn = null), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      Kb = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.taskItems = [], e.rewardItems = [], e.progressBar = null;
          var i = Km(580, 180);
          i.y = 70, i.x = (635 - i.width) / 2, e.addChild(i);
          var n = new pv("", 1);
          n.x = 30, n.y = 50, e.addChild(n), e.progressBar = new tm("team_task_progress_bg.png", "team_task_progress_bar.png"), e.progressBar.x = i.x + (i.width - e.progressBar.width) / 2, e.progressBar.y = i.y + (i.height - e.progressBar.height) / 2 + 50, e.addChild(e.progressBar.skin), e.progressBar.progress = .5;
          var o = jh("team_star.png");
          o.anchor.set(.5, .5), o.x = e.progressBar.x - 25, o.y = e.progressBar.y + e.progressBar.height / 2, e.addChild(o), e.questBtn = new Ru("team_btn_quest.png"), e.questBtn.x = i.x + (i.width - e.questBtn.width / 2), e.questBtn.y = n.y + 30, e.addChild(e.questBtn.skin), e.questBtn.on(Tu, e.onQuest, e);
          e.scroller = new Wu(540, 670), e.scroller.y = 280, e.scroller.x = 47.5, e.gridContainer = new Zg(540, 2, 30), e.scroller.setContent(e.gridContainer), e.addChild(e.scroller), e.rewardItems = [];
          var r = Sh.getRewards();
          e.maxScore = r[r.length - 1].needScore;
          for (var s = 0; s < r.length; s++) {
            var a = r[s],
              h = new Yb;
            h.x = e.progressBar.x + e.progressBar.width * a.needScore / e.maxScore, h.y = e.progressBar.y - 70, h.setRewardDef(a), e.addChild(h), e.rewardItems.push(h)
          }
          return e.addToDestroy = mr((function() {
            e.progressBar.progress = mx.personTask.score / e.maxScore;
            for (var t = 0; t < e.rewardItems.length; t++) {
              e.rewardItems[t].updateState()
            }
          })), e
        }
        return i(e, t), e.prototype.onQuest = function() {
          tc.showPanel($v, {
            msg: "1 00:00\n2\n3\n4",
            title: ""
          })
        }, e.prototype.showTasks = function() {
          var t = Bh.getTasks(),
            e = this.taskItems.slice();
          this.taskItems.length = 0;
          for (var i = t.length, n = 0; n < i; n++) {
            var o = void 0;
            (o = e.length > 0 ? e.pop() : new zb).setTask(t[n]), this.taskItems.push(o), this.gridContainer.addItem(o)
          }
          for (n = 0; n < e.length; n++) {
            (o = e[n]).destroy()
          }
          e.length = 0, this.gridContainer.reLayout(), this.scroller.updateMaxScrollV(), this.scroller.interactive = !0
        }, e.prototype.show = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return t.prototype.show.call(this), [4, mx.loadPersonTask()];
                case 1:
                  return e.sent(), this.showTasks(), [2]
              }
            }))
          }))
        }, e.prototype.destroy = function(e) {
          this.scroller && (this.scroller.destroy(), this.scroller = null), this.questBtn && (this.questBtn.destroy(), this.questBtn = null), t.prototype.destroy.call(this, e)
        }, e
      }(rv),
      Jb = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.progressBar = null;
          var i = e.bg = Km(580, 200);
          i.y = 70, i.x = (635 - i.width) / 2, e.addChild(i), e.leftTimeText = Xh("", "#fdba55", !1, "left", 24), e.leftTimeText.x = i.x + (i.width - e.leftTimeText.width) / 2, e.leftTimeText.y = i.y + 10, e.addChild(e.leftTimeText), e.limitText = Xh("0/3", "#fdba55", !1, "left", 24), e.limitText.x = i.x + (i.width - e.limitText.width) / 2, e.limitText.y = e.leftTimeText.y + e.leftTimeText.height + 10, e.addChild(e.limitText), e.progressBar = new tm("team_task_progress_bg.png", "team_task_progress_bar.png", .7), e.progressBar.x = i.x + (i.width - e.progressBar.width) / 2, e.progressBar.y = i.y + (i.height - e.progressBar.height) / 2 + 15, e.addChild(e.progressBar.skin), e.progressBar.progress = .5;
          var n = e.conditionBg = jh("team_task_all_bg.png");
          n.x = e.progressBar.x - n.width, n.y = e.progressBar.y - n.height / 2 + 15, e.addChild(n), e.conditionText = Yh("", "#FFFFFF", 110, 24, !1, "center", 10), e.addChild(e.conditionText);
          var o = e.rewardBg = jh("team_task_all_bg.png");
          return o.x = e.progressBar.x + e.progressBar.width, o.y = e.progressBar.y - n.height / 2 + 15, e.addChild(o), e.rewardText = Yh("", "#FFFFFF", 110, 24, !1, "center", 10), e.addChild(e.rewardText), e.questBtn = new Ru("team_btn_quest.png"), e.questBtn.x = i.x + (i.width - e.questBtn.width / 2), e.questBtn.y = o.y - e.questBtn.height / 2 - 5, e.addChild(e.questBtn.skin), e.questBtn.on(Tu, e.onQuest, e), e.membersPreview = new Bv, e.membersPreview.x = 317.5, e.membersPreview.y = 595, e.addChild(e.membersPreview), e.buttonGroup = new im(20), e.addChild(e.buttonGroup), e.goButton = new Ru("team_task_go.png", !1), e.buttonGroup.addButton(e.goButton), e.goButton.on(Tu, e.onGo, e), e.buttonGroup.x = (635 - e.buttonGroup.width) / 2, e.buttonGroup.y = 850, e.addToDestroy = mr((function() {
            e.progressBar.progress = 0;
            var t = mx.teamTask;
            if (t) {
              e.setTaskDef(t.task);
              var n = _h.getTask(t.task.type);
              if (n) {
                var o = Math.floor(t.finish / n.needCount);
                if (e.limitText.text = "".concat(o, "/3"), e.limitText.x = i.x + (i.width - e.limitText.width) / 2, o >= 3) e.progressBar.progress = 1;
                else {
                  var r = t.finish % n.needCount;
                  e.progressBar.progress = r / n.needCount
                }
                t.rewardCnt > 0 && ($I(""), tc.showPanel(Kv, {
                  coupon: n.giftCoupon * t.rewardCnt
                }), t.rewardCnt = 0), e.progressBar.progress >= 1 && e.setRewardText("")
              }
            }
            e.goButton.visible = !!t && !!t.task
          })), e
        }
        return i(e, t), e.prototype.onQuest = function() {
          tc.showPanel($v, {
            msg: "1 00:00\n2\n3",
            title: ""
          })
        }, e.prototype.setTaskDef = function(t) {
          if (this.teamTask = t, t.type === Sa.DailyGame) {
            var e = _h.getTask(t.type);
            this.conditionText.text = "".concat(e.needCount, "")
          } else this.conditionText.text = Xm(t.type, t.taskValue);
          this.conditionText.x = this.conditionBg.x + (this.conditionBg.width - this.conditionText.width) / 2, this.conditionText.y = this.conditionBg.y + (this.conditionBg.height - this.conditionText.height) / 2, this.setRewardText("+".concat(t.giftExp, "+").concat(t.giftCoupon))
        }, e.prototype.setRewardText = function(t) {
          this.rewardText.text = t, this.rewardText.x = this.rewardBg.x + (this.rewardBg.width - this.rewardText.width) / 2, this.rewardText.y = this.rewardBg.y + (this.rewardBg.height - this.rewardText.height) / 2
        }, e.prototype.onGo = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return tc.closePanel(Zb.clsName), this.teamTask.type !== Sa.ExpertGame ? [3, 2] : [4, Nm()];
                case 1:
                  return e.sent(), [2];
                case 2:
                  if (this.teamTask.type !== Sa.ClassicsGame) return [3, 7];
                  e.label = 3;
                case 3:
                  return e.trys.push([3, 5, , 6]), [4, _I(Jh.Classics)];
                case 4:
                  return e.sent(), [3, 6];
                case 5:
                  return oc(t = e.sent()), DEVELOP && console.warn("e:", t), [3, 6];
                case 6:
                  return [2];
                case 7:
                  return this.teamTask.type !== Sa.DailyGame ? [3, 9] : [4, jT(WT().type)];
                case 8:
                  e.sent(), e.label = 9;
                case 9:
                  return [2]
              }
            }))
          }))
        }, e.prototype.updateLeftTime = function() {
          var t = Qe(),
            e = t.getDay(),
            i = t.getTime() + (8 - e) * ei;
          this.leftTimeText.text = "".concat(ri(i - Je.curTime)), this.leftTimeText.x = this.bg.x + (this.bg.width - this.leftTimeText.width) / 2
        }, e.prototype.show = function() {
          t.prototype.show.call(this), this.updateLeftTime(), this.loadTeamTask()
        }, e.prototype.loadTeamTask = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return [4, mx.loadTask()];
                case 1:
                  return t.sent(), this.isDestroyed ? [2] : [4, this.membersPreview.loadTeamMembers()];
                case 2:
                  return t.sent(), this.isDestroyed ? [2] : (this.membersPreview.showContributes(mx.teamTask.members), [2])
              }
            }))
          }))
        }, e.prototype.destroy = function(e) {
          this.questBtn && (this.questBtn.destroy(), this.questBtn = null), this.goButton && (this.goButton.destroy(), this.goButton = null), this.buttonGroup && (this.buttonGroup.destroy(), this.buttonGroup = null), t.prototype.destroy.call(this, e)
        }, e
      }(rv),
      Qb = ["", ""],
      Zb = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.curTab = -1, e.curTabButton = null, e.tabButtons = [], e.tabPanels = [], e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = Hh(635, 1036), this.addChild(this.bg), this.addCloseButton();
          for (var t = 0; t < Qb.length; t++) {
            var e = Qb[t],
              i = new Ov;
            i.setTitle(e), i.x = 20 + (i.width + 10) * t, i.y = 30, this.addChild(i), this.tabButtons.push(i), i.on(Tu, this.onClickTab, this)
          }
          var n = jh("skin_tab_line.png");
          n.y = 85, n.x = 10, this.addChild(n);
          var o = new Kb;
          o.hide(), o.x = 0, o.y = 50, this.addChild(o), this.tabPanels.push(o);
          var r = new Jb;
          r.hide(), r.x = 0, r.y = 50, this.addChild(r), this.tabPanels.push(r)
        }, e.prototype.onClickTab = function(t) {
          var e = t.currentTarget,
            i = this.tabButtons.indexOf(e);
          i >= 0 && this.setSelectedTab(i)
        }, e.prototype.setSelectedTab = function(t) {
          t !== this.curTab && (this.curTabButton && (this.curTabButton.selected = !1), this.curTab = t, this.curTabButton = this.tabButtons[t], this.curTabButton && (this.curTabButton.selected = !0), this._curTabPanel && this._curTabPanel.hide(), this._curTabPanel = this.tabPanels[t], this._curTabPanel && this._curTabPanel.show())
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.centerWindow(), e && e.hasOwnProperty("tab") ? this.setSelectedTab(e.tab) : this.setSelectedTab(0)
        }, e.prototype.onDestroy = function() {
          if (this.tabButtons) {
            for (var e = 0; e < this.tabButtons.length; e++) this.tabButtons[e].off(Tu, this.onClickTab, this);
            this.tabButtons.length = 0, this.tabButtons = null
          }
          this.tabPanels && (this.tabPanels.length = 0, this.tabPanels = null, this._curTabPanel = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "TeamTaskView", e
      }(Qg),
      tw = function(t) {
        function e() {
          var i = t.call(this, !1, 0) || this;
          return i.name = e.clsName, i.initUI(), i.addToDestroy = mr((function() {
            i.teamInfo = mx.teamInfo, i.teamInfo && i.teamInfoGroup.setTeamInfo(i.teamInfo)
          })), i.addToDestroy = mr((function() {
            i.teamButton.showRed(mx.applyList.length > 0)
          })), i.addToDestroy = mr((function() {
            i.myTaskButton.showRed(mx.personTaskRed)
          })), i
        }
        return i(e, t), e.prototype.initUI = function() {
          this.topBackButton = new Ru("btn_back.png"), this.topBackButton.x = Mu.left + 50, this.topBackButton.y = Mu.top + 50, this.topBackButton.on(Tu, this._onBack, this), this.addChild(this.topBackButton.skin), this.settingButton = new Ru("button_setting.png"), this.settingButton.on(Tu, this._tapSetting, this), this.settingButton.x = this.topBackButton.x, this.settingButton.y = this.topBackButton.y + this.topBackButton.height / 2 + this.settingButton.height / 2 + 20, this.addSkin(this.settingButton), this.teamGoldComponent = new Yv, this.teamGoldComponent.x = this.settingButton.x - this.settingButton.width / 2, this.teamGoldComponent.y = this.settingButton.y + this.settingButton.height / 2 + 20, this.addChild(this.teamGoldComponent), this.initTeamInfoGroup(), this.initToolBar(), this.shopButton = new Ru("team_button_shop.png"), this.shopButton.x = Pe - this.shopButton.width / 2 - 20, this.shopButton.y = De / 2 + 200, this.addChild(this.shopButton.skin), this.shopButton.on(Tu, this.onShop, this)
        }, e.prototype.initToolBar = function() {
          this.toolBarContainer = new PIXI.Container;
          var t = qh("team_toolbar_bg.png", 5, 40, 5, 40);
          t.width = Pe, t.height = 212, this.toolBarContainer.addChild(t), this.toolBarContainer.y = De - t.height - Math.max(50, Mu.bottom), this.addChild(this.toolBarContainer), this.toolBarButtons = new im(25), this.toolBarContainer.addChild(this.toolBarButtons), this.chatButton = new Wb("team_icon_chat.png", ""), this.toolBarButtons.addButton(this.chatButton), this.contributeButton = new Wb("team_icon_contribute.png", ""), this.toolBarButtons.addButton(this.contributeButton), this.teamTaskButton = new Wb("team_icon_task_team.png", ""), this.toolBarButtons.addButton(this.teamTaskButton), this.myTaskButton = new Wb("team_icon_task_person.png", ""), this.toolBarButtons.addButton(this.myTaskButton), this.teamButton = new Wb("team_icon_info.png", ""), this.toolBarButtons.addButton(this.teamButton), this.chatButton.on(Tu, this.openChat, this), this.contributeButton.on(Tu, this.openContribute, this), this.teamTaskButton.on(Tu, this.openTeamTask, this), this.myTaskButton.on(Tu, this.openMyTask, this), this.teamButton.on(Tu, this.openTeam, this), this.toolBarButtons.x = (t.width - this.toolBarButtons.width) / 2, this.toolBarButtons.y = (t.height - this.toolBarButtons.height) / 2
        }, e.prototype.initTeamInfoGroup = function() {
          this.teamInfoGroup = new Cv, this.teamInfoGroup.x = (Pe - this.teamInfoGroup.width) / 2, this.teamInfoGroup.y = Mu.top, this.addChild(this.teamInfoGroup), this.teamInfoGroup.interactive = !0, this.teamInfoGroup.on(Tu, this.openTeam, this)
        }, e.prototype.onShop = function() {
          tc.showPanel(Xb)
        }, e.prototype.openChat = function() {
          $I(""), tc.showPanel(qv, {
            tab: 0
          })
        }, e.prototype.openContribute = function() {
          $I(""), tc.showPanel(pb)
        }, e.prototype.openTeamTask = function() {
          $I(""), tc.showPanel(Zb, {
            tab: 1
          })
        }, e.prototype.openMyTask = function() {
          $I(""), tc.showPanel(Zb, {
            tab: 0
          })
        }, e.prototype.openTeam = function() {
          $I(""), tc.showPanel(db)
        }, e.prototype._onBack = function() {
          this.close(), $x.instance.visible = !0, bI.showGameScene(), tc.showPanel(Cw)
        }, e.prototype._tapSetting = function() {
          tc.showPanel(Ub), DEVELOP && tc.showPanel(bx)
        }, e.prototype.onShow = function() {
          this.x = 0, this.y = 0
        }, e.prototype.onHide = function() {}, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.settingButton && (this.settingButton.destroy(), this.settingButton = null), this.topBackButton && (this.topBackButton.destroy(), this.topBackButton = null), this.chatButton && (this.chatButton.destroy(), this.chatButton = null), this.contributeButton && (this.contributeButton.destroy(), this.contributeButton = null), this.teamTaskButton && (this.teamTaskButton.destroy(), this.teamTaskButton = null), this.myTaskButton && (this.myTaskButton.destroy(), this.myTaskButton = null), this.teamButton && (this.teamButton.destroy(), this.teamButton = null), this.shopButton && (this.shopButton.destroy(), this.shopButton = null)
        }, e.clsName = "TeamSceneView", e
      }(Eu),
      ew = function(t) {
        function e() {
          var e = t.call(this, !1, 0) || this;
          return e.decorateButtons = [], e.decorateRankItems = [], e.initUI(), e
        }
        return i(e, t), e.prototype.initList = function() {
          this.declareModalShape = new PIXI.Graphics, this.declareModalShape.beginFill(0, .1), this.declareModalShape.drawRect(0, 0, Pe, De), this.declareModalShape.endFill(), this.declareModalShape.interactive = !0, this.addChild(this.declareModalShape), this.declareModalShape.on(Iu, this.onTpaDeclareModalShape, this), this.declareContainer = new PIXI.Container, this.addChild(this.declareContainer), this.decorateBg = qh("team_decorate_list_bg.png", 5, 40, 5, 40), this.decorateBg.width = Pe, this.decorateBg.height = 250, this.declareContainer.addChild(this.decorateBg);
          var t = jh("team_decorate_choose_title.png");
          t.y = -30, this.declareContainer.addChild(t), this.decorateScroller = new xb(Pe, 221), this.decorateList = new Ib, this.decorateScroller.setContent(this.decorateList), this.declareContainer.addChild(this.decorateScroller), this.decorateScroller.y = 15, this.declareContainer.x = 0, this.declareContainer.y = De - this.decorateBg.height - Mu.bottom, this.declareContainer.visible = !1
        }, e.prototype.initUI = function() {
          this.topBackButton = new Ru("btn_back.png"), this.topBackButton.x = Mu.left + 50, this.topBackButton.y = Mu.top + 50, this.topBackButton.on(Tu, this._onBack, this), this.addChild(this.topBackButton.skin), this.revertButton = new Ru("team_button_revert.png"), this.revertButton.x = this.topBackButton.x, this.revertButton.y = this.topBackButton.y + this.topBackButton.height / 2 + this.revertButton.height / 2 + 20, this.revertButton.on(Tu, this._onRevert, this), this.addChild(this.revertButton.skin);
          var t = jh("team_decorate_title.png");
          t.anchor.set(.5, 0), t.x = 375, t.y = Mu.top + 10, this.addChild(t), this.backgroundBtn = new ey("team_white_button.png", "team_label_change_background.png", !0), this.backgroundBtn.x = 375, this.backgroundBtn.y = t.y + t.height + 40, this.addChild(this.backgroundBtn.skin), this.backgroundBtn.on(Tu, this.onChangeBackground, this), this.diskBtn = new ey("team_white_button.png", "team_label_change_disk.png", !0), this.diskBtn.x = 375, this.diskBtn.y = .68 * De, this.addChild(this.diskBtn.skin), this.diskBtn.on(Tu, this.onChangeDisk, this), this.groundBtn = new ey("team_white_button.png", "team_label_change_ground.png", !0), this.groundBtn.x = 375, this.groundBtn.y = .8 * De, this.addChild(this.groundBtn.skin), this.groundBtn.on(Tu, this.onChangeGround, this), this.buttonGroup = new im(100), this.saveButton = new ey("team_yellow_button2.png", "team_label_save.png", !1), this.quitButton = new ey("team_white_button2.png", "team_label_quit.png", !1), this.buttonGroup.addButton(this.saveButton), this.buttonGroup.addButton(this.quitButton), this.buttonGroup.x = (Pe - this.buttonGroup.width) / 2, this.buttonGroup.y = De - 200, this.addChild(this.buttonGroup), this.quitButton.on(Tu, this._onBack, this), this.saveButton.on(Tu, this._onSave, this), this.initList(), this.hideDecorateList(), this.shopButton = new Ru("team_button_shop.png"), this.shopButton.x = Pe - this.shopButton.width / 2 - 20, this.shopButton.y = De / 2 + 200, this.addChild(this.shopButton.skin), this.shopButton.on(Tu, this.onShop, this), this.addDecorateButton(100, .28 * De, hd.backLeft), this.addDecorateButton(650, .28 * De, hd.backRight), this.addDecorateButton(375, .45 * De, hd.statue), this.addDecorateButton(100, .75 * De, hd.frontLeft), this.addDecorateButton(650, .75 * De, hd.frontRight)
        }, e.prototype.addDecorateButton = function(t, e, i) {
          var n = new Tb(i);
          n.x = t, n.y = e, this.addChild(n), n.on(Tu, this.onChangeDecorate, this), this.decorateButtons.push(n), n.updateDecorate()
        }, e.prototype.onShop = function() {
          tc.showPanel(Xb)
        }, e.prototype.onTpaDeclareModalShape = function() {
          this.hideDecorateList()
        }, e.prototype.refreshDecorateButtons = function() {
          for (var t = 0; t < this.decorateButtons.length; t++) {
            this.decorateButtons[t].updateDecorate()
          }
        }, e.prototype.hideDecorateList = function() {
          this.refreshDecorateButtons(), this.declareModalShape.visible = !1, this.declareContainer.visible = !1
        }, e.prototype.showDecorateList = function(t) {
          this.declareModalShape.visible = !0, this.decorateList.removeChildren();
          var e, i = this.decorateRankItems.slice();
          switch (this.decorateRankItems.length = 0, t) {
            case hd.backLeft:
            case hd.backRight:
              e = "back";
              break;
            case hd.frontLeft:
            case hd.frontRight:
              e = "front";
              break;
            case hd.statue:
              e = "statue";
              break;
            case hd.bg:
              e = "bg";
              break;
            case hd.ground:
              e = "ground";
              break;
            case hd.floor:
              e = "floor"
          }
          var n = mx.getActiveDecorate(e);
          t !== hd.bg && t !== hd.ground && t !== hd.floor && n.unshift(null);
          for (var o = 0, r = 0, s = 0; s < n.length; s++) {
            var a = n[s];
            a && mx.editDecorates.indexOf(a.id) >= 0 && (o = s);
            var h = void 0;
            i.length > 0 ? h = i.pop() : (h = new kb).on(Iu, this.onChooseDecorate, this), h.setInfo(a, t), h.x = r, this.decorateList.addChild(h), this.decorateRankItems.push(h), r += h.width + 10
          }
          this.decorateList.contentWidth = r, this.decorateScroller.updateMaxScrollH(), this.decorateRankItems.length > 0 && o > 3 && (this.decorateScroller.scrollH = o * (this.decorateRankItems[0].width + 10)), this.decorateScroller.scrollH > this.decorateScroller.maxScrollH && (this.decorateScroller.scrollH = this.decorateScroller.maxScrollH), this.declareContainer.visible = !0
        }, e.prototype.onChangeBackground = function() {
          this.showDecorateList(hd.bg)
        }, e.prototype.onChangeDisk = function() {
          this.showDecorateList(hd.floor)
        }, e.prototype.onChangeGround = function() {
          this.showDecorateList(hd.ground)
        }, e.prototype.onChangeDecorate = function(t) {
          var e = t.currentTarget;
          this.showDecorateList(e.posIndex)
        }, e.prototype.onChooseDecorate = function() {
          this.hideDecorateList()
        }, e.prototype._onSave = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return mx.isDecorateChanged() ? [4, nx(mx.editDecorates)] : (rc(""), [2]);
                case 1:
                  return t.sent() && rc(""), [2]
              }
            }))
          }))
        }, e.prototype._onRevert = function() {
          mx.revertEdit(), bI.teamScene.refreshDecorates()
        }, e.prototype._onBack = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return mx.isDecorateChanged() ? [4, tc.showPanel(Hv).addPromise()] : [3, 2];
                case 1:
                  return t.sent() && this.quitDecorate(), [2];
                case 2:
                  return this.quitDecorate(), [2]
              }
            }))
          }))
        }, e.prototype.quitDecorate = function() {
          this.close(), bI.teamScene.refreshDecorates(), tc.showPanel(tw)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.x = 0, this.y = 0, fb.touchEnabled = !1, mx.enterEdit(), this.refreshDecorateButtons(),
            function(t) {
              0;
              X.logEvent("-".concat(t))
            }("")
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), fb.touchEnabled = !0
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.topBackButton && (this.topBackButton.destroy(), this.topBackButton = null), this.backgroundBtn && (this.backgroundBtn.destroy(), this.backgroundBtn = null), this.diskBtn && (this.diskBtn.destroy(), this.diskBtn = null), this.groundBtn && (this.groundBtn.destroy(), this.groundBtn = null), this.saveButton && (this.saveButton.destroy(), this.saveButton = null), this.quitButton && (this.quitButton.destroy(), this.quitButton = null), this.shopButton && (this.shopButton.destroy(), this.shopButton = null), this.revertButton && (this.revertButton.destroy(), this.revertButton = null), this.decorateRankItems.length = 0;
          for (var e = 0; e < this.decorateButtons.length; e++) {
            this.decorateButtons[e].destroy()
          }
          this.decorateButtons.length = 0
        }, e.clsName = "TeamDecorateView", e
      }(Eu),
      iw = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = jh("sign_item.png"), e.bg.width = 161, e.bg.height = 201, e.addChild(e.bg), e.icon = jh("gold.png"), e.icon.interactive = !1, e.icon.scale.set(1.5, 1.5), e.icon.anchor.set(.5, .5), e.icon.x = e.bg.width / 2, e.icon.y = e.bg.height / 2, e.addChild(e.icon), e.nameText = Xh("", "#FFFFFF", !0, "left", 24), e.nameText.x = (e.bg.width - e.nameText.width) / 2, e.nameText.y = 5, e.addChild(e.nameText), e.countText = Xh("x500", "#000000", !0, "left", 28), e.countText.x = (e.bg.width - e.countText.width) / 2, e.countText.y = 165, e.addChild(e.countText), e.rewarded = jh("sign_rewarded.png"), e.rewarded.x = (e.bg.width - e.rewarded.width) / 2, e.rewarded.y = (e.bg.height - e.rewarded.height) / 2, e.addChild(e.rewarded), e.rewarded.visible = !1, e
        }
        return i(e, t), e.prototype.setDay = function(t) {
          var e = uC.signDay % 7 + 1;
          uC.isSign > 0 && uC.signDay >= 7 && uC.signDay % 7 == 0 && (e = 7), this.rewarded.visible = t < e, uC.isSign > 0 && (e -= 1), (t === e || this.rewarded.visible) && (this.bg.texture = Vh("sign_item_cur.png")), this.nameText.text = "".concat(t, "");
          var i, n = dh.getItem(t);
          if (uC.gameVersion < 2 && n.alterGiftId > 0) i = ch.getGift(n.alterGiftId);
          else if (n.giftId && (i = ch.getGift(n.giftId)).items.length > 0) {
            var o = i.items[0].id;
            uC.hasSkin(o) && (i = ch.getGift(n.alterGiftId))
          }
          i && (i.items && i.items.length > 0 ? (this.countText.visible = !1, this.icon.texture = Vh("item".concat(i.items[0].id, ".png"))) : (this.icon.texture = Vh("gold.png"), this.countText.visible = !0, this.countText.text = "x" + i.gold))
        }, e
      }(PIXI.Container),
      nw = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = jh("sign_item_seven.png"), e.bg.width = 304, e.bg.height = 209, e.addChild(e.bg), e.icon = jh("empty.png"), e.icon.interactive = !1, e.icon.scale.set(1.5, 1.5), e.icon.anchor.set(.5, .5), e.icon.x = e.bg.width / 2, e.icon.y = e.bg.height / 2, e.addChild(e.icon), e.nameText = Xh("", "#FFFF00", !0, "left", 24), e.nameText.x = 30, e.nameText.y = 10, e.addChild(e.nameText), e.countText = Xh("x1", "#000000", !0, "left", 28), e.countText.x = (e.bg.width - e.countText.width) / 2, e.countText.y = 165, e.addChild(e.countText), e.rewarded = jh("sign_rewarded.png"), e.rewarded.x = (e.bg.width - e.rewarded.width) / 2, e.rewarded.y = (e.bg.height - e.rewarded.height) / 2, e.addChild(e.rewarded), e.rewarded.visible = !1, e
        }
        return i(e, t), e.prototype.setDay = function(t) {
          var e = uC.signDay % 7 + 1;
          uC.isSign > 0 && uC.signDay >= 7 && uC.signDay % 7 == 0 && (e = 7), this.rewarded.visible = t === e && uC.isSign > 0, this.nameText.text = "".concat(t, "");
          var i, n = dh.getItem(t);
          if (uC.gameVersion < 2 && n.alterGiftId > 0) i = ch.getGift(n.alterGiftId);
          else if (n.giftId && (i = ch.getGift(n.giftId)).items.length > 0) {
            var o = i.items[0].id;
            uC.hasSkin(o) && (i = ch.getGift(n.alterGiftId))
          }
          i && (i.items && i.items.length > 0 ? (this.countText.visible = !1, this.icon.texture = Vh("item".concat(i.items[0].id, ".png"))) : (this.icon.texture = Vh("gold.png"), this.countText.visible = !0, this.countText.text = "x" + i.gold, this.countText.x = (this.bg.width - this.countText.width) / 2))
        }, e
      }(PIXI.Container),
      ow = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(620, 824), this.addChild(this.bg);
          var t = Xh("", 16777215, !0, "center", 40);
          t.x = (this.bg.width - t.width) / 2, t.y = 30, this.addChild(t), this.addCloseButton();
          var e = [],
            i = new iw;
          i.x = 40, i.y = 120, this.addChild(i), e.push(i);
          var n = new iw;
          n.x = i.x + i.width + 30, n.y = 120, this.addChild(n), e.push(n);
          var o = new iw;
          o.x = n.x + n.width + 30, o.y = 120, this.addChild(o), e.push(o);
          var r = new iw;
          r.x = 40, r.y = 350, this.addChild(r), e.push(r);
          var s = new iw;
          s.x = r.x + r.width + 30, s.y = 350, this.addChild(s), e.push(s);
          var a = new iw;
          a.x = s.x + s.width + 30, a.y = 350, this.addChild(a), e.push(a);
          var h = new nw;
          h.x = 40, h.y = 580, this.addChild(h), e.push(h), this.normalButton = new Ru("button_sign_normal.png", !0), this.normalButton.on(Iu, this.onGetNormal, this), this.normalButton.x = 480, this.normalButton.y = 660, this.addSkin(this.normalButton), this.videoButton = new Ru("button_sign.png", !0), this.videoButton.on(Iu, this.onGetVideo, this), this.videoButton.x = 480, this.videoButton.y = 760, this.addSkin(this.videoButton), this.tipText = Xh("", "#FFFFFF", !1, "left", 36), this.tipText.x = this.videoButton.x - this.videoButton.width / 2 + 20, this.tipText.y = this.videoButton.y - this.videoButton.height / 2 - 90, this.addChild(this.tipText), this.tipText.visible = !1;
          for (var c = 1; c <= 7; c++) e[c - 1].setDay(c)
        }, e.prototype.onGetNormal = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              return this.sendSign(0, !0), [2]
            }))
          }))
        }, e.prototype.onGetVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [4, mu(5)];
                case 1:
                  return (t = e.sent()) === ve.cancel ? [2, gu("")] : t === ve.fail ? (rc(fu), [2]) : (this.sendSign(1, !0), [2])
              }
            }))
          }))
        }, e.prototype.sendSign = function(t, e) {
          return r(this, void 0, void 0, (function() {
            var i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return n.trys.push([0, 2, , 3]), [4, iD({
                    type: t
                  })];
                case 1:
                  return (i = n.sent()).syncData && uC.syncData(i.syncData), i.gift && i.gift.gold > 0 && nl(i.gift.gold), e ? this.close() : this.refreshButtons(), [3, 3];
                case 2:
                  return n.sent(), [3, 3];
                case 3:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.refreshButtons()
        }, e.prototype.refreshButtons = function() {
          this.isDisposed || (this.normalButton && (this.normalButton.visible = 0 === uC.isSign), this.videoButton && (this.videoButton.visible = 0 === uC.isSign), this.tipText && (this.tipText.visible = uC.isSign > 0))
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.normalButton && (this.normalButton.destroy(), this.normalButton = null), this.videoButton && (this.videoButton.destroy(), this.videoButton = null)
        }, e.clsName = "TeamSignView", e
      }(Qg);

    function rw() {
      Db || (Db = [Cw.clsName, ov.clsName, Wm.clsName, hk.clsName, dy.clsName, gy.clsName]);
      for (var t = 0; t < Db.length; t++) {
        var e = Db[t];
        tc.closePanel(e)
      }
    }

    function sw() {
      bI.isTeamSceneVisible || (tc.getPanel(Cw.clsName) || tc.showPanel(Cw))
    }

    function aw() {
      if (!bI.isTeamSceneVisible)
        if (RI.isExpert || RI.isChallenge) sw();
        else if (RI.isDead) switch (RI.mode) {
        case Jh.Collection:
          tc.getPanel(gy.clsName) || tc.showPanel(gy);
          break;
        case Jh.Expert:
          tc.getPanel(Wm.clsName) || tc.showPanel(Wm);
          break;
        case Jh.Challenge:
          tc.getPanel(hk.clsName) || tc.showPanel(hk);
          break;
        case Jh.Classics:
          tc.getPanel(ov.clsName) || tc.showPanel(ov)
      } else sw()
    }

    function hw() {
      Mb || (Mb = [Gv.clsName, qv.clsName, Hv.clsName, ew.clsName, $v.clsName, pb.clsName, Iv.clsName, Sv.clsName, Gb.clsName, nb.clsName, Fv.clsName, jb.clsName, bv.clsName, hb.clsName, Kv.clsName, tw.clsName, ob.clsName, Hb.clsName, Xb.clsName, Zb.clsName, Xv.clsName, ow.clsName, db.clsName]);
      for (var t = 0; t < Mb.length; t++) {
        var e = Mb[t];
        tc.closePanel(e)
      }
    }
    var cw = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._contentHeight = 0, e.name = "ChallengeList", e.y = 0, e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scrollV", {
          get: function() {
            return -this.y
          },
          set: function(t) {
            this.y = -t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "contentHeight", {
          get: function() {
            return this._contentHeight
          },
          set: function(t) {
            this._contentHeight = t
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      uw = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.inited = !1, e._locked = !1, e.interactive = !0, e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = Wh("dlc/ui/challenge/challenge_list_bg.png");
          t.width = 580, t.height = 96, this.addChild(t), this.width = t.width, this.height = t.height, this.goImage = Wh("dlc/ui/challenge/challenge_go.png"), this.goImage.x = 220, this.goImage.y = 25, this.goImage.interactive = !1, this.addChild(this.goImage), this.nameText = Xh("1", "#FFFF00", !0, "left", 36), this.nameText.x = 20, this.nameText.y = (t.height - this.nameText.height) / 2, this.nameText.interactive = !1, this.addChild(this.nameText), this.progressLabel = Xh("", "#FFFFFF", !1, "left", 28), this.progressLabel.x = 370, this.progressLabel.y = (t.height - this.progressLabel.height) / 2, this.progressLabel.interactive = !1, this.addChild(this.progressLabel), this.progressText = Xh("100%", "#FFFF00", !1, "left", 28), this.progressText.x = 505, this.progressText.y = (t.height - this.progressText.height) / 2, this.progressText.interactive = !1, this.addChild(this.progressText), this.finishFlag = Wh("dlc/ui/challenge/challenge_map_finish.png"), this.finishFlag.x = 445, this.finishFlag.y = 25, this.finishFlag.interactive = !1, this.addChild(this.finishFlag), this.unlockPrevText = Xh("", "#FFFFFF", !1, "left", 24), this.unlockPrevText.x = t.width - this.unlockPrevText.width - 20, this.unlockPrevText.y = (t.height - this.unlockPrevText.height) / 2, this.unlockPrevText.interactive = !1, this.addChild(this.unlockPrevText), this.unlockTimeText = Xh("12342", "#FFFF00", !1, "left", 24), this.unlockTimeText.x = t.width - this.unlockTimeText.width - 20, this.unlockTimeText.y = (t.height - this.unlockTimeText.height) / 2, this.unlockTimeText.interactive = !1, this.addChild(this.unlockTimeText), this.unlockButton = new zy("dlc/ui/challenge/button_unlock_right.png", 156, 59), this.unlockButton.x = t.width - this.unlockButton.width / 2 - 20, this.unlockButton.y = t.height / 2, this.addChild(this.unlockButton.skin), this.unlockButton.interactive = !1, this.inited = !0
        }, e.prototype.setMode = function(t, e) {
          this.index = t, this.mode = e, this._locked = !uC.isChallengeUnlock(e.id), this.inited ? this.refreshUI() : this.visible = !1
        }, Object.defineProperty(e.prototype, "locked", {
          get: function() {
            return this._locked
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.setProgress = function(t) {
          t >= 100 ? (this.finishFlag.visible = !0, this.progressLabel.visible = !1, this.progressText.visible = !1) : (this.finishFlag.visible = !1, this.progressLabel.visible = !this._locked, this.progressText.visible = !this._locked, this.progressText.text = t + "%")
        }, e.prototype.refreshUI = function() {
          this.updateUnlockView();
          var t = Math.floor(100 * uC.getChallengeFloor(this.mode.id) / this.mode.finishFloor);
          this.setProgress(t), this.nameText.text = "".concat(this.mode.id, "")
        }, e.prototype.updateUnlockView = function() {
          this._locked ? this.updateLockUI() : (this.unlockButton.visible = !1, this.unlockTimeText.visible = !1, this.unlockPrevText.visible = !1)
        }, e.prototype.updateLockUI = function() {
          if (this.inited && this.mode) {
            var t = this.mode,
              e = uC.unlockChallengeMapId + 1;
            if (this.unlockButton.visible = t.id === e, this.unlockTimeText.visible = !1, this.unlockPrevText.visible = !1, 1 !== t.show) {
              if (this.unlockPrevText.visible = !this.unlockButton.visible && t.id > e, t.openTime) {
                var i = new Date(t.openTime).getTime() - Je.curTime;
                i > 0 && (this.unlockTimeText.visible = !0, this.unlockPrevText.visible = !1, this.unlockButton.visible = !1, this.unlockTimeText.text = ri(i) + "", this.unlockTimeText.x = this.width - this.unlockTimeText.width - 20)
              }
            } else this.unlockPrevText.visible = t.id > e
          }
        }, e.prototype.update = function(t, i) {
          var n = e.ITEM_HEIGHT + e.ITEM_GAP,
            o = this.index * n - t;
          o >= -n && o <= i + n ? (this.inited || (this.createContents(), this.refreshUI()), this.visible = !0) : this.visible = !1
        }, e.ITEM_HEIGHT = 96, e.ITEM_GAP = 8, e.ITEM_REAL_HEIGHT = e.ITEM_HEIGHT + e.ITEM_GAP, e
      }(PIXI.Container),
      lw = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.bg = Wh("dlc/ui/challenge/challenge_desc.png"), e.bg.width = 557, e.bg.height = 619, e.bg.interactive = !0, e.addChild(e.bg), e.addCloseButton(), e
        }
        return i(e, t), e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null)
        }, e.clsName = "ChallengeDescView", e
      }(Qg);

    function dw(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              return i.trys.push([0, 2, , 3]), [4, sD({
                mapId: t
              })];
            case 1:
              return (e = i.sent()).syncData && uC.syncData(e.syncData), [2, !0];
            case 2:
              return oc(i.sent()), [2, !1];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function pw(t, e) {
      return r(this, void 0, void 0, (function() {
        var i;
        return s(this, (function(n) {
          switch (n.label) {
            case 0:
              return n.trys.push([0, 2, , 3]), [4, aD({
                begin: t,
                len: e
              })];
            case 1:
              return [2, n.sent()];
            case 2:
              return i = n.sent(), DEVELOP && console.log("loadChallengeRank error:", JSON.stringify(i)), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function fw() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, hD({})];
            case 1:
              return [2, e.sent()];
            case 2:
              return t = e.sent(), DEVELOP && console.log("loadChallengeNearRank error:", JSON.stringify(t)), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }
    var gw = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.myRank = -1, e.myScore = 0, e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          var t = Wh("dlc/ui/challenge/challenge_rank_bg.png");
          t.width = 580, t.height = 96, this.addChild(t), this.rankImage = new PIXI.Sprite, this.rankImage.x = 20, this.rankImage.y = 23, this.addChild(this.rankImage), this.rankText = Xh("", "#00FF00", !1, "left", 30), this.rankText.x = 40, this.rankText.y = 30, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 60, this.avatarImage.height = 60, this.avatarImage.x = 90, this.avatarImage.y = (t.height - this.avatarImage.height) / 2, this.addChild(this.avatarImage), this.nameText = Xh("", "#00FF00", !1, "left", 28), this.nameText.x = 165, this.nameText.y = 30, this.addChild(this.nameText), this.scoreText = Xh("100%", "#00FF00", !1, "left", 30), this.scoreText.x = 510, this.scoreText.y = 30, this.addChild(this.scoreText)
        }, e.prototype.setRankInfo = function(t, e) {
          this.myRank = t, this.myScore = e, this.refreshData()
        }, e.prototype.refreshData = function() {
          this.myRank > 0 && this.myRank <= 3 ? (this.rankImage.visible = !0, this.rankText.visible = !1, this.rankImage.texture = PIXI.Texture.fromImage("res/rank/rank".concat(this.myRank, ".png"))) : (this.rankImage.visible = !1, this.rankText.visible = !0, this.rankText.text = this.myRank < 0 ? "" : "".concat(Math.max(1, this.myRank)), this.rankText.x = 40 - this.rankText.width / 2), this.nameText.text = hn(uC.nick, 8), this.scoreText.text = this.myScore + "", Bm(this.avatarImage, uC.image)
        }, e.ITEM_HEIGHT = 110, e
      }(PIXI.Container),
      mw = 1e3,
      yw = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.rankItems = [], e.rankList = [], e.rankSet = new Set, e.selfRank = -1, e.selfScore = 0, e.rankBegin = 0, e.rankLoading = !1, e.rankLoadError = !1, e.rankCompleted = !1, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = $h(635, 1036), this.addChild(this.bg), this.addTitle(""), this.scroller = new Wu(580, 800), this.scroller.x = 26, this.scroller.y = 100, this.challengeList = new cw, this.scroller.setContent(this.challengeList), this.addChild(this.scroller), this.scroller.on(ku, this._onTouchEnd, this), this.scroller.on(Bu, this._onTouchEnd, this), this.scroller.on(Cu, this._onTouchEnd, this), this.scroller.interactive = !1, this.myRankItem = new gw, this.myRankItem.x = 26, this.myRankItem.y = 920, this.addChild(this.myRankItem), this.addCloseButton();
          var e = function(i) {
            if (!t.isDisposed) {
              for (var n = t.scroller.scrollV, o = t.scroller.visibleHeight, r = t.rankItems.length - 1; r >= 0; r--) t.rankItems[r].update(n, o);
              t.rankList.length < mw && t.rankList.length > 0 && !t.rankCompleted && !t.rankLoading && !t.rankLoadError && n + o >= t.challengeList.contentHeight - 4 * sy.ITEM_HEIGHT && t.loadRankData().catch((function() {})), requestAnimationFrame(e)
            }
          };
          requestAnimationFrame(e)
        }, e.prototype.updateRankListView = function() {
          var t = this.rankItems.slice();
          this.rankItems.length = 0;
          for (var e = this.rankList, i = 0, n = 0; n < e.length; n++) {
            var o = e[n],
              r = void 0;
            (r = t.length > 0 ? t.pop() : new sy).setRankInfo(o), r.y = i, this.rankItems.push(r), r.parent !== this.challengeList && this.challengeList.addChild(r), n < e.length - 1 && (i += sy.ITEM_HEIGHT + sy.ITEM_GAP)
          }
          for (n = 0; n < t.length; n++) {
            (r = t[n]).destroy()
          }
          t.length = 0, this.challengeList.contentHeight = i + sy.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), this.myRankItem.setRankInfo(this.selfRank, this.selfScore)
        }, e.prototype._onTouchEnd = function() {
          this.rankLoadError = !1
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.y < Mu.top + 30 && (this.y = Mu.top + 30), this.scroller.interactive = !0, this.scroller.scrollV = 0, this.loadRankData().catch((function() {}))
        }, e.prototype.hasRankData = function(t) {
          return this.rankSet.has(t.uid)
        }, e.prototype.loadRankData = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return this.rankLoading = !0, this.rankLoadError = !1, [4, pw(this.rankBegin, 40)];
                case 1:
                  if (t = n.sent(), this.isDisposed) return [2];
                  if (t) {
                    for (this.selfRank = t.selfRank, this.selfScore = t.selfScore, this.rankCompleted = t.list.length < 40, e = 0; e < t.list.length; e++) i = t.list[e], this.hasRankData(i) || (this.rankList.push(i), this.rankSet.add(i.uid));
                    this.rankList.sort((function(t, e) {
                      return t.rank - e.rank
                    })), this.rankList.length > mw && (this.rankList.length = mw), this.rankBegin = this.rankList.length, this.updateRankListView()
                  } else this.rankLoadError = !0;
                  return this.rankLoading = !1, [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          for (var e = 0; e < this.rankItems.length; e++) {
            this.rankItems[e].destroy()
          }
          this.rankItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "ChallengeRankView", e
      }(Qg),
      vw = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.mapItems = [], e.lockMapItems = [], e.initUI(), e.addToDestroy = mr((function() {
            e.progressText.text = "".concat(uC.challengeFinishCount)
          }));
          var i = uC.unlockChallengeMapId;
          return e.addToDestroy = mr((function() {
            uC.unlockChallengeMapId !== i && (i = uC.unlockChallengeMapId, e.updateMapItems())
          })), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = $h(635, 1080), this.addChild(this.bg);
          var e = this.title = Xh("", 16777215, !0, "center", 40);
          e.x = (this.bg.width - e.width) / 2, e.y = 30, this.addChild(e), this.rankButton = new zy("dlc/ui/challenge/button_challenge_rank.png", 210, 36, !0), this.rankButton.x = 150, this.rankButton.y = 132, this.rankButton.on(Tu, this._openRankView, this), this.addChild(this.rankButton.skin), this.progressLabel = Xh("", "#FFFFFF", !1, "left", 30), this.progressLabel.x = 390, this.progressLabel.y = 110, this.addChild(this.progressLabel), this.progressText = Xh("100", "#FFFF00", !1, "left", 30), this.progressText.x = 560, this.progressText.y = 110, this.addChild(this.progressText), this.tipButton = new zy("dlc/ui/challenge/challenge_notice.png", 191, 27, !1), this.tipButton.x = 420, this.tipButton.y = 1020, this.addSkin(this.tipButton), this.tipButton.on(Tu, (function() {
            tc.showPanel(lw)
          }), this), this.scroller = new Wu(580, 820), this.scroller.x = 26, this.scroller.y = 180, this.challengeList = new cw, this.scroller.setContent(this.challengeList), this.addChild(this.scroller), this.scroller.interactive = !1, this.addCloseButton(), this.addToDestroy = mr((function() {
            t.progressText.text = uC.unlockChallengeMapId + ""
          }));
          var i = function(e) {
            if (!t.isDisposed) {
              for (var n = t.scroller.scrollV, o = t.scroller.visibleHeight, r = t.mapItems.length - 1; r >= 0; r--) t.mapItems[r].update(n, o);
              requestAnimationFrame(i)
            }
          };
          requestAnimationFrame(i)
        }, e.prototype._openRankView = function() {
          tc.showPanel(yw)
        }, e.prototype.updateMapItems = function(t) {
          void 0 === t && (t = !1), this.stopTimeTick();
          for (var e = [], i = yh.getChallengeModeList(), n = 0; n < i.length; n++) {
            ((s = i[n]).show > 0 || s.id <= uC.unlockChallengeMapId + 8) && e.push(s)
          }
          8 === e.length && e.push(yh.getChallengeMode(9)), e.sort((function(t, e) {
            return t.id - e.id
          })), this.lockMapItems.length = 0;
          var o = this.mapItems.slice();
          this.mapItems.length = 0;
          var r = 0;
          for (n = 0; n < e.length; n++) {
            var s = e[n],
              a = void 0;
            o.length > 0 ? a = o.pop() : (a = new uw).on(Iu, this._onClickChallengeItem, this), a.setMode(n, s), a.y = r, this.mapItems.push(a), a.parent !== this.challengeList && this.challengeList.addChild(a), a.locked && 1 !== s.show && this.lockMapItems.push(a), n < e.length - 1 && (r += uw.ITEM_HEIGHT + uw.ITEM_GAP)
          }
          for (n = 0; n < o.length; n++) {
            (a = o[n]).off(Iu, this._onClickChallengeItem, this), this.challengeList.removeChild(a), a.destroy()
          }
          if (o.length = 0, this.challengeList.contentHeight = r + uw.ITEM_HEIGHT, this.scroller.updateMaxScrollV(), t) {
            var h = Math.max(uC.unlockChallengeMapId - 1, 0) * uw.ITEM_REAL_HEIGHT;
            h = Math.min(this.scroller.content.contentHeight - this.scroller.visibleHeight, h), this.scroller.scrollV = h
          }
          this.lockMapItems.length > 0 && this.startTimeTick()
        }, e.prototype.startTimeTick = function() {
          this.intervalId = setInterval(this.onTimeTick.bind(this), 1e3)
        }, e.prototype.stopTimeTick = function() {
          this.intervalId && (clearInterval(this.intervalId), this.intervalId = null)
        }, e.prototype.onTimeTick = function() {
          for (var t = 0; t < this.lockMapItems.length; t++) this.lockMapItems[t].updateLockUI()
        }, e.prototype.startEndTimeTick = function() {
          this.endIntervalId = setInterval(this.onEndTimeTick.bind(this), 1e3), this.onEndTimeTick()
        }, e.prototype.stopEndTimeTick = function() {
          this.endIntervalId && (clearInterval(this.endIntervalId), this.endIntervalId = null)
        }, e.prototype.onEndTimeTick = function() {
          var t = new Date($hostDef.challengeEndTime).getTime() - Je.curTime;
          if (t <= 0) {
            this.title.text = "()", this.title.x = (this.bg.width - this.title.width) / 2;
            var e = tc.getPanel(Cw.clsName);
            return e && e.checkChallengeEnable(), void this.close()
          }
          this.title.text = "(" + ri(t) + ")", this.title.x = (this.bg.width - this.title.width) / 2
        }, e.prototype.close = function() {
          RI.isChallenge && RI.cleanGameOver(), t.prototype.close.call(this), aw()
        }, e.prototype.realStartGame = function(t) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  this.challengeList.interactive = !1, i.label = 1;
                case 1:
                  return i.trys.push([1, 3, , 4]), tc.destroyPanel(this), [4, _I(Jh.Challenge, 0, t.id)];
                case 2:
                  return i.sent(), [3, 4];
                case 3:
                  return oc(i.sent()), tc.showPanel(e), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype._onClickChallengeItem = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n, o, a = this;
            return s(this, (function(h) {
              switch (h.label) {
                case 0:
                  return e = t.target, (i = e.mode) ? uC.isChallengeUnlock(i.id) ? (uC.isChallengeComplete(i.id) ? ic("", "".concat(i.id, "").concat(i.id, ""), !0, "", "", (function(t) {
                    return r(a, void 0, void 0, (function() {
                      return s(this, (function(e) {
                        return t.confirm && this.realStartGame(i), [2]
                      }))
                    }))
                  })) : this.realStartGame(i), [3, 7]) : [3, 1] : (rc(""), [2]);
                case 1:
                  if (i.id > uC.unlockChallengeMapId + 1) return rc("".concat(uC.unlockChallengeMapId + 1, ""), 500), [2];
                  if (uC.unlockChallengeMapId > 0 && (n = yh.getChallengeMode(uC.unlockChallengeMapId), uC.getChallengeFloor(uC.unlockChallengeMapId) < n.finishFloor)) return rc("".concat(uC.unlockChallengeMapId, "").concat(i.id, ""), 500), [2];
                  if (new Date(i.openTime).getTime() > Je.curTime) return rc("".concat(i.id, ""), 500), [2];
                  h.label = 2;
                case 2:
                  return h.trys.push([2, , 4, 5]), [4, mu(11)];
                case 3:
                  return (o = h.sent()) === ve.cancel ? [2, gu("")] : o === ve.fail ? [2, rc(fu)] : [3, 5];
                case 4:
                  return [7];
                case 5:
                  return [4, dw(i.id)];
                case 6:
                  h.sent() && (! function(t) {
                    0;
                    X.logEvent("-", {
                      level: t
                    })
                  }(i.id), rc("".concat(i.id, "")), this.updateMapItems()), h.label = 7;
                case 7:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onShow = function(e) {
          var i = this;
          if (t.prototype.onShow.call(this, e), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2, this.y < Mu.top + 30 && (this.y = Mu.top + 30), this.scroller.interactive = !0, this.scroller.scrollV = 0, this.updateMapItems(!0), $hostDef.challengeEndTime) {
            var n = new Date($hostDef.challengeEndTime).getTime() - Je.curTime;
            n > 0 && n < 1728e5 && this.startEndTimeTick()
          }
          if (uC.needAuthorize && "function" == typeof wx.createUserInfoButton) {
            var o = {
                x: (this.rankButton.x + this.x - this.rankButton.width / 2 - 8) * tc.uiScale,
                y: (this.rankButton.y + this.y - this.rankButton.height / 2 - 8) * tc.uiScale,
                width: (this.rankButton.width + 16) * tc.uiScale,
                height: (this.rankButton.height + 16) * tc.uiScale
              },
              r = !1;
            Pb((function(t) {
              return i.addToDestroy = t
            }), (function() {
              return 2 === tc.openedPopUpPanelCount
            }), {
              left: o.x,
              top: o.y,
              width: o.width,
              height: o.height
            }, (function(t) {
              r || (r = !0, t && Sb(t), i._openRankView())
            }))
          }
        }, e.prototype.onDestroy = function() {
          this.stopTimeTick(), this.stopEndTimeTick(), this.rankButton && (this.rankButton.off(Tu, this._openRankView, this), this.rankButton.destroy(), this.rankButton = null), this.tipButton && (this.tipButton.destroy(), this.tipButton = null);
          for (var e = 0; e < this.mapItems.length; e++) {
            var i = this.mapItems[e];
            i.off(Iu, this._onClickChallengeItem, this), i.destroy()
          }
          this.mapItems.length = 0, this.lockMapItems.length = 0, this.scroller && (this.scroller.destroy(), this.scroller = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "ChallengeView", e
      }(Qg);

    function bw() {
      return uC.videoCnt
    }

    function ww() {
      return xw() ? (bw() >= $hostDef.challengeOpenVideoCount || uC.bestScore >= $hostDef.challengeOpenScore ? tc.showPanel(vw) : tc.showPanel(dm), !0) : (rc(""), !1)
    }

    function xw() {
      if (!$hostDef.challengeMode) return !1;
      if (!$hostDef.challengeEndTime) return !0;
      var t = new Date($hostDef.challengeEndTime);
      return Je.curTime < t.getTime()
    }
    var Tw = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.container = new PIXI.Container, e.rankButton = new Ru("button_rank.png"), e.rankButton.x = 0, e.rankButton.y = 0, e.rankButton.on(Tu, e._tapRank, e), e.container.addChild(e.rankButton.skin), e.groupRankButton = new Ru("button_group_rank.png"), e.groupRankButton.x = 0, e.groupRankButton.y = e.rankButton.y + e.rankButton.height / 2 + 40, e.groupRankButton.on(Tu, e._tapGroupShare, e), e.container.addChild(e.groupRankButton.skin), e
        }
        return i(e, t), e.prototype._tapRank = function() {
          _y()
        }, e.prototype._tapGroupShare = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return $hostDef.censor || !$hostDef.showGroupText ? [3, 2] : (rc(""), [4, lu(500)]);
                case 1:
                  t.sent(), t.label = 2;
                case 2:
                  return NI(""), qc().then((function(t) {
                    Uc(t) && jI("")
                  })), [2]
              }
            }))
          }))
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.rankButton && (this.rankButton.destroy(), this.rankButton = null), this.groupRankButton && (this.groupRankButton.destroy(), this.groupRankButton = null), t.prototype.destroy.call(this)
        }, e
      }(Lu),
      kw = function(t) {
        function e() {
          var e = t.call(this, "qrcode.png") || this;
          return e.on(Tu, e._tapGameCenter, e), Pl().then((function(t) {
            e.config = t;
            var i = e.def && e.def.name;
            for (e.def = e.config.getRandomItem(i); e.def && "" === e.def.name;) i = e.def && e.def.name, e.def = e.config.getRandomItem(i)
          })), e
        }
        return i(e, t), e.prototype._tapGameCenter = function() {
          if (this.def) {
            cl(this.def, Kt.icon);
            var t = this.def && this.def.name;
            for (this.def = this.config.getRandomItem(t); this.def && "" === this.def.name;) {
              var e = this.def && this.def.name;
              this.def = this.config.getRandomItem(e)
            }
          }
        }, e
      }(Ru),
      Iw = function(t) {
        function e() {
          var e, i = t.call(this) || this;
          return i.container = new PIXI.Container, !$hostDef.censor && $hostDef.gamesIcon ? (i.gamesShakeIcon = new Ml, i.gamesShakeIcon.x = 0, i.gamesShakeIcon.y = 0, i.container.addChild(i.gamesShakeIcon), e = i.gamesShakeIcon.y + 150) : e = 0, i.centerButton = new kw, i.centerButton.x = 0, i.centerButton.y = e, i.container.addChild(i.centerButton.skin), i
        }
        return i(e, t), e.prototype.stopGameIconTween = function() {
          this.gamesShakeIcon && this.gamesShakeIcon.stopGameIconTween()
        }, e.prototype.showGameIcon = function() {
          this.gamesShakeIcon && this.gamesShakeIcon.showGameIcon()
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.stopGameIconTween(), this.gamesShakeIcon && (this.gamesShakeIcon.destroy(), this.gamesShakeIcon = null), this.centerButton && (this.centerButton.destroy(), this.centerButton = null), t.prototype.destroy.call(this)
        }, e
      }(Lu),
      Cw = function(t) {
        function e() {
          var e = t.call(this, !0, 1) || this,
            i = 0;
          _e / Be <= .605 && (i = 175);
          var n = Mu.top;
          $hostDef.showCustomer && !$hostDef.censor && (e.kefuButton = new Ru("button_kefu.png"), e.kefuButton.on(Tu, e._tapKeFu, e), e.kefuButton.x = 60, e.kefuButton.y = Mu.top + 60, e.addSkin(e.kefuButton), n = e.kefuButton.y + e.kefuButton.height / 2), e.title = Uh("res/ui/title.png"), e.title.anchor.set(.5, .5), e.addChild(e.title), e.title.x = 375, e.title.y = 220, _e / Be > .605 && (e.title.y = 120), e.title.y - e.title.height / 2 < n && (e.title.y = n + e.title.height / 2);
          var o = e.title.y + e.title.height / 2 + 60;
          e.turntableButton = new Ru("icon_turntable.png"), e.turntableButton.x = 60, e.turntableButton.y = o, e.turntableButton.on(Tu, e._tapTurntable, e), e.addSkin(e.turntableButton), o += e.turntableButton.height + 10, $hostDef.censor || (e.signIcon = new nv, e.signIcon.x = 60, e.signIcon.y = o, e.addSkin(e.signIcon), o += 80), e.startButton = new Ru("button_start.png"), e.startButton.x = 375, e.startButton.y = De - i - 270, e.startButton.on(Tu, e._tapStartGame, e), e.addSkin(e.startButton);
          e.gameModeButton = new Jy, e.gameModeButton.x = e.startButton.x + e.startButton.width / 2 + e.gameModeButton.width / 2 + 30, e.gameModeButton.y = e.startButton.y, e.gameModeButton.on(Tu, e._tapGameMode, e), e.addSkin(e.gameModeButton), e.gameModeButton.visible = $T();
          var r = e.goldRate = jh("game_gold_rate.png");
          return r.x = e.startButton.x - r.width / 2, r.y = e.startButton.y - e.startButton.height / 2 - 20, e.addChild(e.goldRate), e.expertButton = new Ru("button_small_expert.png"), e.expertButton.x = e.startButton.x - e.startButton.width / 2 - e.expertButton.width / 2 - 30, e.expertButton.y = e.startButton.y, e.expertButton.on(Tu, e._tapExpert, e), e.addSkin(e.expertButton), e.challengeButton = new zy("dlc/ui/challenge/button_small_challenge.png", 131, 115), e.challengeButton.x = e.expertButton.x, e.challengeButton.y = e.expertButton.y + 150, e.challengeButton.on(Tu, e._tapChallenge, e), e.addSkin(e.challengeButton), e.challengeButton.visible = xw(), e.teamButton = new gm, e.teamButton.x = e.expertButton.x, e.teamButton.y = e.expertButton.y + 150, e.teamButton.on(Tu, e._tabTeam, e), e.addSkin(e.teamButton), e.teamButton.visible = $hostDef.team, e.limitGiftButton = new Ky, e.limitGiftButton.x = e.gameModeButton.x - e.limitGiftButton.width / 2, e.limitGiftButton.y = e.gameModeButton.y + e.gameModeButton.height / 2 + 30, e.limitGiftButton.on(Tu, e._tapLimitGift, e), e.addSkin(e.limitGiftButton), e.rankButtonGroup = new Tw, e.rankButtonGroup.x = e.startButton.x, e.rankButtonGroup.y = e.startButton.y + e.startButton.height / 2 + e.rankButtonGroup.height / 2, e.addSkin(e.rankButtonGroup), e.settingSkin = new rk(0), e.settingSkin.x = (Pe - e.settingSkin.realWidth) / 2, e.settingSkin.y = e.startButton.y - e.startButton.height / 2 - 100, e.addSkin(e.settingSkin), e.shakeWithCenterIconGroup = new Iw, e.shakeWithCenterIconGroup.x = Pe - e.shakeWithCenterIconGroup.width, e.shakeWithCenterIconGroup.y = e.turntableButton.y + 40, e.addChild(e.shakeWithCenterIconGroup.skin), _e / Be > .605 && (e.shakeWithCenterIconGroup.y = 350), Dl.canShow() && (e.leftBanner = new Dl, e.leftBanner.x = -10, e.signIcon ? e.leftBanner.y = e.signIcon.y + 60 : e.leftBanner.y = o, e.addChild(e.leftBanner)), e.addToDestroy = mr((function() {
            e.goldRate.visible = $hostDef.gameRate && !$hostDef.censor && uC.goldRate > 0
          })), !$hostDef.censor && e.signIcon && (e.addToDestroy = mr((function() {
            var t = uC.signDay;
            if (t > 6) e.signIcon.setSkin(0, 0);
            else {
              var i = t % 7 + 1,
                n = -1,
                o = -1;
              if (uC.gameVersion >= 2)
                for (var r = i; r <= 7; r++) {
                  var s = dh.getItem(r),
                    a = ch.getGift(s.giftId);
                  if (a.items && a.items.length > 0) {
                    var h = a.items[0].id;
                    if (!uC.hasSkin(h)) {
                      n = h, o = r;
                      break
                    }
                  }
                }
              if (n > 0) {
                var c = o - i;
                1 === uC.isSign && (c += 1), e.signIcon.setSkin(n, c)
              } else e.signIcon.setSkin(0, 0)
            }
          }))), cn() && (e.clubButton = lC(e.signIcon.x - 45, e.signIcon.y + 70), e.addToDestroy = mr((function() {
            tc.openedPopUpPanelCount > 1 ? e.clubButton.hide() : e.clubButton.show()
          }))), e
        }
        return i(e, t), e.prototype.checkChallengeEnable = function() {
          this.challengeButton.visible = xw()
        }, e.prototype._tapKeFu = function() {
          DEVELOP && "api-test" === $hostDef.api ? tc.showPanel(bx) : Jg()
        }, e.prototype._tapTurntable = function() {
          hl()
        }, e.prototype._tapExpert = function() {
          Nm()
        }, e.prototype._tapChallenge = function() {
          ww() || (this.challengeButton.visible = xw())
        }, e.prototype._tabTeam = function() {
          _w()
        }, e.prototype.disableGameBtns = function() {
          this.gameModeButton && (this.gameModeButton.interactive = !1), this.startButton && (this.startButton.interactive = !1)
        }, e.prototype.enableGameBtns = function() {
          this.gameModeButton && (this.gameModeButton.interactive = !0), this.startButton && (this.startButton.interactive = !0)
        }, e.prototype._tapGameMode = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              return (t = WT()) ? (jT(t.type), [2]) : (rc(""), this.gameModeButton.visible = !1, [2])
            }))
          }))
        }, e.prototype._tapStartGame = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  if (this.isDisposed) return [2];
                  this.disableGameBtns(), this.close(), i.label = 1;
                case 1:
                  return i.trys.push([1, 3, , 4]), [4, _I(Jh.Classics)];
                case 2:
                  return i.sent(), [3, 4];
                case 3:
                  return oc(t = i.sent()), DEVELOP && console.warn("e:", t), tc.showPanel(e), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype._tapLimitGift = function() {
          tc.showPanel(Zy)
        }, e.prototype.onHide = function() {
          this.shakeWithCenterIconGroup && this.shakeWithCenterIconGroup.stopGameIconTween(), Lg.dispatchEvent(Dg), Lg.dispatchEvent(Fg), RI.removeListener(Hg, this.onGameStart)
        }, e.prototype.onDestroy = function() {
          this.startButton && (this.startButton.destroy(), this.startButton = null), this.gameModeButton && (this.gameModeButton.destroy(), this.gameModeButton = null), this.expertButton && (this.expertButton.destroy(), this.expertButton = null), this.turntableButton && (this.turntableButton.destroy(), this.turntableButton = null), this.limitGiftButton && (this.limitGiftButton.destroy(), this.limitGiftButton = null), this.rankButtonGroup && (this.rankButtonGroup.destroy(), this.rankButtonGroup = null), this.settingSkin && (this.settingSkin.destroy(), this.settingSkin = null), this.leftBanner && (this.leftBanner.destroy(), this.leftBanner = null), this.signIcon && (this.signIcon.destroy(), this.signIcon = null), this.kefuButton && (this.kefuButton.destroy(), this.kefuButton = null), this.challengeButton && (this.challengeButton.destroy(), this.challengeButton = null), this.clubButton && (this.clubButton.destroy(), this.clubButton = null), this.shakeWithCenterIconGroup && (this.shakeWithCenterIconGroup.destroy(), this.shakeWithCenterIconGroup = null), this.teamButton && (this.teamButton.destroy(), this.teamButton = null)
        }, e.prototype.onGameStart = function() {
          RI.removeListener(Hg, this.onGameStart), this.startButton && (this.startButton.interactive = !0)
        }, e.prototype.checkLimitGiftVisible = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return this.limitGiftButton.visible = !1, DEVELOP && console.log("limitGiftData:", JSON.stringify(uC.limitGift)), (t = wg()) ? xg() ? [4, kg()] : [3, 2] : [3, 3];
                case 1:
                  e.sent(), e.label = 2;
                case 2:
                  t = wg(), e.label = 3;
                case 3:
                  return this.isDisposed || this.limitGiftButton && (this.limitGiftButton.visible = t, t && this.limitGiftButton.checkLeftTime()), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = 0, this.y = 0, this.checkLimitGiftVisible(), this.shakeWithCenterIconGroup.showGameIcon(), jg.checkShowRace(), this.challengeButton.visible = xw(), this.settingSkin.x = (Pe - this.settingSkin.realWidth) / 2
        }, e.clsName = "MenuView", e
      }(Eu);

    function _w() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 4, , 5]), [4, di(ui)];
            case 1:
              return e.sent(), [4, Bi("team")];
            case 2:
              return e.sent(), [4, Bi("deco")];
            case 3:
              return e.sent(), [3, 5];
            case 4:
              return oc(e.sent()), [2];
            case 5:
              return bI.teamScene && bI.teamScene.isFirstEnter && (bI.teamScene.isFirstEnter = !1, bI.teamScene.showDecorates()), [4, Pw()];
            case 6:
              return (t = e.sent()) ? (! function() {
                var t = mx.hasTeam ? "team" : "free";
                0;
                X.logEvent("-", {
                  type: t
                })
              }(), t.team ? (mx.setTeamInfo(t.team), rw(), $x.instance.visible = !1, tc.showPanel(tw), bI.showTeamScene()) : tc.showPanel(Gv)) : rc(""), [2]
          }
        }))
      }))
    }

    function Bw(t) {
      mx.setTeamInfo(t), hw(), rw(), $x.instance.visible = !1, tc.showPanel(tw), bI.showTeamScene()
    }

    function Sw() {
      mx.leaveTeam(), hw(), bI.isTeamSceneVisible && ($x.instance.visible = !0, bI.showGameScene(), tc.showPanel(Cw))
    }

    function Pw() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getCurTeam({})];
            case 1:
              return [2, t.sent()];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function Dw(t, e, i) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(n) {
          switch (n.label) {
            case 0:
              return n.trys.push([0, 2, , 3]), [4, mg.gameServer.createTeam({
                name: t,
                joinLimit: e,
                requireScore: i
              })];
            case 1:
              return [2, n.sent().teamId];
            case 2:
              return oc(n.sent()), [3, 3];
            case 3:
              return [2, 0]
          }
        }))
      }))
    }

    function Mw() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamList({})];
            case 1:
              return [2, t.sent().teams];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function Fw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.searchTeam({
                teamId: t
              })];
            case 1:
              return [2, e.sent().team];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function Ew() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamMembers({})];
            case 1:
              return [2, t.sent()];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function Lw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              ! function(t, e, i, n) {
                0;
                X.logEvent("-".concat(t), {
                  name: e,
                  limit: i,
                  score: n
                })
              }("", t.name, t.joinLimit, t.requireScore), e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, mg.gameServer.teamChangeInfo(t)];
            case 2:
              return e.sent(), [2, !0];
            case 3:
              return oc(e.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function Ow(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              KI(""), e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, mg.gameServer.kickTeamMember({
                uid: t
              })];
            case 2:
              return e.sent(), [2, !0];
            case 3:
              return oc(e.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function Rw() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              $I(""), t.label = 1;
            case 1:
              return t.trys.push([1, 3, , 4]), [4, mg.gameServer.quitTeam({})];
            case 2:
              return t.sent(), Sw(), [2, !0];
            case 3:
              return oc(t.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function Gw() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamApplyList({})];
            case 1:
              return [2, t.sent().applyList];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function Aw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              KI(""), e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, mg.gameServer.acceptTeamApply({
                uid: t.uid
              })];
            case 2:
              return e.sent(), mx.removeRequest(t), rc(""), [2, !0];
            case 3:
              return oc(e.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function Nw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              KI(""), e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, mg.gameServer.refuseTeamApply({
                uid: t.uid
              })];
            case 2:
              return e.sent(), mx.removeRequest(t), rc(""), [2, !0];
            case 3:
              return oc(e.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function jw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.teamAutoOptimize({
                value: t
              })];
            case 1:
              return e.sent(), [2, !0];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, !1]
          }
        }))
      }))
    }

    function Vw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              KI(""), e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, mg.gameServer.teamTransferLeader({
                uid: t
              })];
            case 2:
              return e.sent(), mx.teamInfo.permission = sd.Normal, [2, !0];
            case 3:
              return oc(e.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function Uw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              KI(""), e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, mg.gameServer.teamSetManager({
                uid: t
              })];
            case 2:
              return e.sent(), [2, !0];
            case 3:
              return oc(e.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function Ww(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.teamCancelManager({
                uid: t
              })];
            case 1:
              return e.sent(), [2, !0];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, !1]
          }
        }))
      }))
    }

    function qw(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              return i.trys.push([0, 2, , 3]), [4, mg.gameServer.teamApply({
                teamIds: t
              })];
            case 1:
              return (e = i.sent()) && (e.info ? (rc(""), Bw(e.info)) : rc("")), [3, 3];
            case 2:
              return oc(i.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function Hw(t, e) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              t === ad.LOOK_CHANCE ? $I("") : $I(""), i.label = 1;
            case 1:
              return i.trys.push([1, 3, , 4]), [4, mg.gameServer.sendTeamRecruit({
                type: t,
                msgId: e
              })];
            case 2:
              return i.sent(), [2, !0];
            case 3:
              return oc(i.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function $w() {
      return r(this, arguments, void 0, (function(t) {
        var e;
        return void 0 === t && (t = 0), s(this, (function(i) {
          switch (i.label) {
            case 0:
              return i.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamRecruit({
                fromId: t
              })];
            case 1:
              return e = i.sent(), mx.lastRecruitTime = e.lastRecruitTime, [2, e.recruits];
            case 2:
              return oc(i.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function Xw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamMessage({
                fromId: t
              })];
            case 1:
              return [2, e.sent().messages];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function Yw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.teamChat({
                content: t
              })];
            case 1:
              return [2, e.sent().messages];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function zw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamShowInfo({
                teamId: t
              })];
            case 1:
              return [2, e.sent()];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function Kw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.getUserShowInfo({
                uid: t
              })];
            case 1:
              return [2, e.sent().user];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function Jw(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.teamInvite({
                uid: t
              })];
            case 1:
              return e.sent(), [2, !0];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, !1]
          }
        }))
      }))
    }

    function Qw() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamPersonTask({})];
            case 1:
              return [2, t.sent().task];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function Zw(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              XI("", t), i.label = 1;
            case 1:
              return i.trys.push([1, 3, , 4]), [4, mg.gameServer.getTeamPersonTaskReward({
                taskId: t
              })];
            case 2:
              return e = i.sent(), mx.personTask = e.task, mx.updateTeamDetail(e.team), [2, !0];
            case 3:
              return oc(i.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function tx(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              XI("", t), i.label = 1;
            case 1:
              return i.trys.push([1, 3, , 4]), [4, mg.gameServer.getTeamPersonTaskScoreReward({
                id: t
              })];
            case 2:
              return e = i.sent(), mx.personTask = e.task, uC.syncData(e.syncData), [2, !0];
            case 3:
              return oc(i.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function ex() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamTask({})];
            case 1:
              return [2, t.sent()];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function ix() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getDecorateList({})];
            case 1:
              return [2, t.sent().list];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function nx(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.saveDecorate({
                decorates: t
              })];
            case 1:
              return e.sent(), mx.saveEdit(), [2, !0];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, !1]
          }
        }))
      }))
    }

    function ox() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.getDecorateShop({})];
            case 1:
              return t = e.sent(), mx.coupon = t.coupon, [2, t];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function rx(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              YI("", t), i.label = 1;
            case 1:
              return i.trys.push([1, 3, , 4]), [4, mg.gameServer.buyDecoration({
                id: t
              })];
            case 2:
              return e = i.sent(), mx.addOwnedDecorate(t), mx.coupon = e.coupon, [2, !0];
            case 3:
              return oc(i.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function sx() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamInviteList({
                offset: 0,
                limit: 20
              })];
            case 1:
              return [2, t.sent().list];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function ax(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              JI(""), i.label = 1;
            case 1:
              return i.trys.push([1, 3, , 4]), [4, mg.gameServer.acceptTeamInvite({
                teamId: t.teamId
              })];
            case 2:
              return (e = i.sent()).info && Bw(e.info), e.del && mx.removeInvite(t), [2, e];
            case 3:
              return oc(i.sent()), [3, 4];
            case 4:
              return [2, null]
          }
        }))
      }))
    }

    function hx(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              JI(""), e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, mg.gameServer.refuseTeamInvite({
                teamId: t.teamId
              })];
            case 2:
              return e.sent(), mx.removeInvite(t), [2, !0];
            case 3:
              return oc(e.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function cx(t) {
      return r(this, void 0, void 0, (function() {
        var e;
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              $I("".concat(t, "")), i.label = 1;
            case 1:
              return i.trys.push([1, 3, , 4]), [4, mg.gameServer.donate({
                cnt: t
              })];
            case 2:
              return e = i.sent(), uC.teamCoin = e.teamCoin, e.decorate && function(t, e) {
                0;
                X.logEvent("-".concat(t), {
                  id: e
                })
              }("", e.decorate), [2, e];
            case 3:
              return oc(i.sent()), [3, 4];
            case 4:
              return [2, null]
          }
        }))
      }))
    }

    function ux() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              $I(""), e.label = 1;
            case 1:
              return e.trys.push([1, 3, , 4]), [4, mg.gameServer.videoTeamCoin({})];
            case 2:
              return t = e.sent(), uC.teamCoin = t.teamCoin, uC.dayVideoTeamCoin = t.dayVideoTeamCoin, t.add > 0 && rc("+".concat(t.add)), [2, !0];
            case 3:
              return oc(e.sent()), [3, 4];
            case 4:
              return [2, !1]
          }
        }))
      }))
    }

    function lx(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.getTeamContributionRank({
                type: t
              })];
            case 1:
              return [2, e.sent().rankList];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function dx() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getSelfShowMedals({})];
            case 1:
              return [2, t.sent().medals];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function px() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 2, , 3]), [4, mg.gameServer.getSelfMedals({})];
            case 1:
              return [2, t.sent().medals];
            case 2:
              return oc(t.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }

    function fx(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, mg.gameServer.setSelfShowMedals({
                ids: t
              })];
            case 1:
              return [2, e.sent().medals];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, []]
          }
        }))
      }))
    }
    var gx = function() {
        function t() {
          this.hasTeam = !1, this.messages = [], this.maxMsgId = 0, this.recruitMessages = [], this.recruitMaxId = 0, this.lastRecruitTime = 0, this.ownedDecorates = [], this.editDecorates = [], this.coupon = 0, this.applyList = [], this.inviteList = [], this.inviteRed = !1, this.showMedals = [], this.activeMedals = [], this.editShowMedals = [], this.personTask = {
            score: 0,
            finishTasks: [],
            receivedTasks: [],
            scoreRewards: []
          }
        }
        return t.prototype.loadTeam = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [4, Pw()];
                case 1:
                  return (t = e.sent()) && t.team && mx.setTeamInfo(t.team), this.hasTeam ? (bI.initTeamScene(), [4, Bi("team")]) : [3, 5];
                case 2:
                  return e.sent(), [4, Bi("deco")];
                case 3:
                  return e.sent(), [4, mx.loadPersonTask()];
                case 4:
                  e.sent(), e.label = 5;
                case 5:
                  return [4, mx.loadInvites()];
                case 6:
                  return e.sent(), [2]
              }
            }))
          }))
        }, t.prototype.isDecorateChanged = function() {
          var t = this,
            e = this.teamInfo.decorates;
          return !e.every((function(i, n) {
            return t.editDecorates[n] === e[n]
          }))
        }, t.prototype.enterEdit = function() {
          this.editDecorates = this.teamInfo.decorates.slice(), this.loadDecorateList()
        }, t.prototype.revertEdit = function() {
          this.editDecorates = this.teamInfo.decorates.slice()
        }, t.prototype.saveEdit = function() {
          this.teamInfo.decorates = this.editDecorates.slice()
        }, t.prototype.setTeamInfo = function(t) {
          if (this.teamInfo = t, this.teamInfo.decorates.length < hd.floor)
            for (var e = hd.backLeft; e <= hd.floor; e++) this.teamInfo.decorates.length <= e && (this.teamInfo.decorates[e] = 0);
          this.hasTeam = !!t, this.hasTeam && this.loadRequests()
        }, t.prototype.updateTeamInfo = function(t) {
          if (this.teamInfo)
            for (var e in t) this.teamInfo[e] = t[e]
        }, t.prototype.addMessages = function(t) {
          for (var e = [], i = t.length - 1; i >= 0; i--) {
            var n = t[i];
            this.messages.push(n), n.id > this.maxMsgId && (this.maxMsgId = n.id), e.push(n)
          }
          return e
        }, t.prototype.addRecruitMessages = function(t) {
          for (var e = [], i = t.length - 1; i >= 0; i--) {
            var n = t[i];
            this.recruitMessages.push(n), n.id > this.recruitMaxId && (this.recruitMaxId = n.id), e.push(n)
          }
          return e
        }, t.prototype.leaveTeam = function() {
          this.hasTeam = !1, this.messages = [], this.maxMsgId = 0, this.recruitMessages = [], this.recruitMaxId = 0
        }, t.prototype.getMaxExpByLevel = function(t) {
          t < 1 && (t = 1);
          var e = Ph.getTeamLevel(t + 1);
          return e ? e.needExp : 0
        }, Object.defineProperty(t.prototype, "isManager", {
          get: function() {
            return this.teamInfo && this.teamInfo.permission > sd.Normal
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "canEditName", {
          get: function() {
            if (!this.teamInfo) return !1;
            var t = this.teamInfo.joinTime;
            return Je.curTime - t > 2592e5
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "teamName", {
          get: function() {
            return this.teamInfo ? this.teamInfo.name : ""
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.loadPersonTask = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [4, Qw()];
                case 1:
                  return (t = e.sent()) && (this.personTask = t), [2]
              }
            }))
          }))
        }, t.prototype.loadTask = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [4, ex()];
                case 1:
                  return (t = e.sent()) && (t.team && this.updateTeamDetail(t.team), this.teamTask = t), [2]
              }
            }))
          }))
        }, t.prototype.loadDecorateList = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [4, ix()];
                case 1:
                  return (t = e.sent()) && (this.ownedDecorates = t), [2]
              }
            }))
          }))
        }, t.prototype.addOwnedDecorate = function(t) {
          this.ownedDecorates.includes(t) || this.ownedDecorates.push(t)
        }, t.prototype.isPersonTaskFinished = function(t) {
          return this.personTask.finishTasks.indexOf(t) >= 0
        }, t.prototype.isPersonTaskReceived = function(t) {
          return this.personTask.receivedTasks.indexOf(t) >= 0
        }, Object.defineProperty(t.prototype, "hasPersonTaskNoReceived", {
          get: function() {
            if (!this.hasTeam) return !1;
            for (var t = Bh.getTasks(), e = 0; e < t.length; e++) {
              var i = t[e];
              if (!mx.isPersonTaskReceived(i.id) && this.isPersonTaskFinished(i.id)) return !0
            }
            return !1
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "personTaskRed", {
          get: function() {
            if (!this.hasTeam) return !1;
            for (var t = Bh.getTasks(), e = 0; e < t.length; e++) {
              var i = t[e];
              if (!this.isPersonTaskReceived(i.id) && this.isPersonTaskFinished(i.id)) return !0
            }
            var n = Sh.getRewards();
            for (e = 0; e < n.length; e++) {
              var o = n[e];
              if (o.needScore <= this.personTask.score && !this.isPersonTaskScoreRewarded(o.id)) return !0
            }
            return !1
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.isPersonTaskScoreRewarded = function(t) {
          return this.personTask.scoreRewards.indexOf(t) >= 0
        }, t.prototype.updateTeamDetail = function(t) {
          t.level >= 0 && (this.teamInfo.level = t.level), t.memberMax >= 0 && (this.teamInfo.memberMax = t.memberMax), t.exp >= 0 && (this.teamInfo.exp = t.exp)
        }, t.prototype.useDecorate = function(t, e) {
          this.editDecorates[t] = e
        }, t.prototype.deleteDecorate = function(t) {
          this.editDecorates[t] = 0
        }, t.prototype.isInEditScene = function(t) {
          return this.editDecorates.indexOf(t) >= 0
        }, t.prototype.getActiveDecorate = function(t) {
          for (var e = [], i = 0; i < this.ownedDecorates.length; i++) {
            var n = this.ownedDecorates[i],
              o = Dh.getDecorate(n);
            o && o.type == t && e.push(o)
          }
          return e
        }, t.prototype.getEditDecorate = function(t) {
          if (t < 0 || t >= this.editDecorates.length) return null;
          var e = this.editDecorates[t];
          return e <= 0 ? null : Dh.getDecorate(e)
        }, t.prototype.loadRequests = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return this.isManager ? (t = this, [4, Gw()]) : [2];
                case 1:
                  return t.applyList = e.sent(), [2]
              }
            }))
          }))
        }, t.prototype.removeRequest = function(t) {
          var e = this.applyList.indexOf(t);
          e >= 0 && this.applyList.splice(e, 1)
        }, t.prototype.loadInvites = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return t = this, [4, sx()];
                case 1:
                  t.inviteList = o.sent();
                  try {
                    e = wx.getStorageSync("teamInvites") || []
                  } catch (t) {
                    e = []
                  }
                  if (i = this.inviteList.map((function(t) {
                      return t.teamId
                    })), Nh("teamInvites", i), i.length > 0)
                    for (n = 0; n < i.length; n++)
                      if (!e.indexOf(i[n])) {
                        this.inviteRed = !0;
                        break
                      } return [2]
              }
            }))
          }))
        }, t.prototype.removeInvite = function(t) {
          var e = this.inviteList.indexOf(t);
          e >= 0 && this.inviteList.splice(e, 1)
        }, t.prototype.loadSelfShowMedals = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return t = this, [4, dx()];
                case 1:
                  return t.showMedals = e.sent(), DEVELOP && console.log("showMedals:", this.showMedals.slice()), this.editShowMedals = this.showMedals.slice(), [2, this.showMedals]
              }
            }))
          }))
        }, t.prototype.loadSelfMedals = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return t = this, [4, px()];
                case 1:
                  return t.activeMedals = e.sent(), DEVELOP && console.log("activeMedals:", this.activeMedals.slice()), [2, this.activeMedals]
              }
            }))
          }))
        }, t.prototype.hasMedalInMode = function(t) {
          return !!this.activeMedals.find((function(e) {
            var i = Fh.getMedal(e.id);
            return i && i.type === t
          }))
        }, t.prototype.isMedalActive = function(t) {
          return !!this.activeMedals.find((function(e) {
            return e.id === t
          }))
        }, t.prototype.getMedalInMode = function(t) {
          return this.activeMedals.find((function(e) {
            return e.id === t
          }))
        }, t.prototype.isShowMedal = function(t) {
          return !!this.editShowMedals.find((function(e) {
            return e.id === t
          }))
        }, t.prototype.showOrHideMedal = function(t, e) {
          if (e) {
            if (!this.isShowMedal(t)) {
              if (this.editShowMedals.length >= 5) return rc("5"), !1;
              this.editShowMedals.push({
                id: t,
                count: this.getMedalInMode(t).count
              })
            }
          } else {
            var i = this.editShowMedals.findIndex((function(e) {
              return e.id === t
            }));
            i >= 0 && this.editShowMedals.splice(i, 1)
          }
          return !0
        }, t.prototype.hideAllMedalInMode = function(t) {
          for (var e = 0; e < this.editShowMedals.length; e++) {
            var i = this.editShowMedals[e];
            Fh.getMedal(i.id).type === t && (this.editShowMedals.splice(e, 1), e--)
          }
        }, t.prototype.isShowMedalsChanged = function() {
          if (this.showMedals.length !== this.editShowMedals.length) return !0;
          for (var t = function(t) {
              var i = e.showMedals[t];
              if (!e.editShowMedals.find((function(t) {
                  return t.id === i.id
                }))) return {
                value: !0
              }
            }, e = this, i = 0; i < this.showMedals.length; i++) {
            var n = t(i);
            if ("object" == typeof n) return n.value
          }
          return !1
        }, t.prototype.refreshShowMedals = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  return this.isShowMedalsChanged() ? (t = this.editShowMedals.map((function(t) {
                    return t.id
                  })), function(t, e) {
                    0;
                    X.logEvent("-", {
                      preOrder: t.join(","),
                      newOrder: e.join(",")
                    })
                  }(this.showMedals.map((function(t) {
                    return t.id
                  })), t), e = this, [4, fx(t)]) : [2];
                case 1:
                  return e.showMedals = i.sent(), DEVELOP && console.log("showMedals:", this.showMedals.slice()), this.editShowMedals = this.showMedals.slice(), [2]
              }
            }))
          }))
        }, o([po], t.prototype, "hasTeam", void 0), o([po], t.prototype, "teamInfo", void 0), o([po], t.prototype, "personTask", void 0), o([po], t.prototype, "teamTask", void 0), o([po], t.prototype, "editDecorates", void 0), o([po], t.prototype, "coupon", void 0), o([po], t.prototype, "applyList", void 0), o([po], t.prototype, "inviteList", void 0), o([po], t.prototype, "inviteRed", void 0), o([bo], t.prototype, "isManager", null), o([bo], t.prototype, "hasPersonTaskNoReceived", null), o([bo], t.prototype, "personTaskRed", null), o([po], t.prototype, "showMedals", void 0), t
      }(),
      mx = new gx,
      yx = "",
      vx = "",
      bx = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.stageInputText = null, e.collectInputText = null, e.teamExp = 500;
          var i = Hh(Pe, 1300);
          i.x = 0, i.y = 0, i.interactive = !0, e.addChild(i);
          var n = Xh("[-[-]]_-|[--]_-", "#FFFFFF", !0, "left", 26);
          n.x = 40, n.y = 100, e.addChild(n);
          var o = new PIXI.Graphics;
          o.beginFill(8947848), o.drawRect(0, 0, 670, 250), o.endFill(), o.x = 40, o.y = 160, e.addChild(o), o.interactive = !0, o.on(Tu, e.onInput, e), e.stageInputText = Yh("", "#FFFFFF", 600, 28, !1), e.stageInputText.x = 60, e.stageInputText.y = 160, e.addChild(e.stageInputText);
          var a = Xh("", "#FFFFFF", !0, "left", 26);
          a.x = 40, a.y = 420, e.addChild(a);
          var h = new PIXI.Graphics;
          h.beginFill(8947848), h.drawRect(0, 0, 670, 150), h.endFill(), h.x = 40, h.y = 470, e.addChild(h), h.interactive = !0, h.on(Tu, e.onCollectInput, e), e.collectInputText = Yh("", "#FFFFFF", 600, 28, !1), e.collectInputText.x = 60, e.collectInputText.y = 430, e.addChild(e.collectInputText), e.addCloseButton(), e.okButton = new nm("button_orange.png", ""), e.okButton.x = i.width - 100, e.okButton.y = 700, e.okButton.on(Tu, e.onOk, e), e.addSkin(e.okButton), e.delButton = new nm("button_orange.png", ""), e.delButton.x = 100, e.delButton.y = 700, e.delButton.on(Tu, e.onDel, e), e.addSkin(e.delButton), e.ticketButton = new nm("button_orange.png", ""), e.ticketButton.x = 100, e.ticketButton.y = e.delButton.y + 80, e.ticketButton.on(Tu, e.onTicket, e), e.addSkin(e.ticketButton), e.clearButton = new nm("button_orange.png", ""), e.clearButton.x = 100, e.clearButton.y = e.ticketButton.y + 80, e.clearButton.on(Tu, e.onClear, e), e.addSkin(e.clearButton), e.openDataButton = new nm("button_orange.png", "", !0, 22), e.openDataButton.x = 100, e.openDataButton.y = e.clearButton.y + 80, e.openDataButton.on(Tu, (function() {
            ! function() {
              if (Zi() || "api" !== $hostDef.api) {
                for (var t = [], e = 1; e < 100; e++) t.push("score-test" + e), t.push("score-preview" + e), t.push("score-dev" + e);
                wx.removeUserCloudStorage({
                  keyList: t,
                  success: function(t) {
                    DEVELOP && console.log("removeDevStorage succ", t)
                  },
                  fail: function(t) {
                    DEVELOP && console.log("removeDevStorage fail", t)
                  }
                })
              }
            }()
          }), e), e.addSkin(e.openDataButton);
          var c = new PIXI.Graphics;
          c.beginFill(8947848), c.drawRect(0, 0, 140, 40), c.endFill(), c.x = 30, c.y = e.openDataButton.y + 75, e.addChild(c), c.interactive = !0, c.on(Tu, (function() {
            Hl(e.expText.text, 5e3, !1, (function(t) {
              e.isDisposed || (e.expText.text = t, e.teamExp = parseInt(t))
            }))
          })), e.expText = Xh(e.teamExp + "", "#FFFFFF", !0, "left", 26), e.expText.x = 50, e.expText.y = e.openDataButton.y + 80, e.addChild(e.expText), e.teamExpButton = new nm("button_orange.png", "", !0, 22), e.teamExpButton.x = 100, e.teamExpButton.y = e.expText.y + 80, e.teamExpButton.on(Tu, (function() {
            IP({
              type: Kh.addTeamExp,
              values: [e.teamExp]
            }).then((function(t) {
              uC.syncData(t.syncData), mx.hasTeam && mx.loadTeam()
            }))
          }), e), e.addSkin(e.teamExpButton);
          var u = new PIXI.Graphics;
          return u.beginFill(8947848), u.drawRect(0, 0, 140, 40), u.endFill(), u.x = 30, u.y = e.teamExpButton.y + 75, e.addChild(u), u.interactive = !0, u.on(Tu, (function() {
            Hl(e.modeDiffText.text, 1, !1, (function(t) {
              e.isDisposed || (e.modeDiffText.text = t, RI.debugModeDiff = Math.min(qs.Level4, Math.max(qs.Level1, parseInt(t))))
            }))
          })), e.modeDiffText = Xh("1", "#FFFFFF", !0, "left", 26), e.modeDiffText.x = 50, e.modeDiffText.y = e.teamExpButton.y + 80, e.addChild(e.modeDiffText), e.modeChangeButton = new nm("button_orange.png", "", !0, 22), e.modeChangeButton.x = 100, e.modeChangeButton.y = e.modeDiffText.y + 80, e.modeChangeButton.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              return s(this, (function(t) {
                switch (t.label) {
                  case 0:
                    return [4, Bi("game_mode")];
                  case 1:
                    return t.sent(), RI.debugMode < Jh.Collection ? RI.debugMode = Jh.Collection : (RI.debugMode++, RI.debugMode > Jh.Power && (RI.debugMode = Jh.Collection)), rc("" + Mh.getMode(RI.debugMode).name + "," + this.modeDiffText.text, 2e3), [2]
                }
              }))
            }))
          }), e), e.addSkin(e.modeChangeButton), e.allSkinBtn = new nm("button_orange.png", ""), e.allSkinBtn.x = 250, e.allSkinBtn.y = 700, e.allSkinBtn.on(Tu, (function() {
            IP({
              type: Kh.addAllSkin,
              values: []
            }).then((function(t) {
              uC.syncData(t.syncData)
            }))
          }), e), e.addSkin(e.allSkinBtn), e.refreshButton = new nm("button_orange.png", "", !0, 22), e.refreshButton.x = 250, e.refreshButton.y = e.allSkinBtn.y + 80, e.refreshButton.on(Tu, (function() {
            IP({
              type: Kh.resetDailyGoodsTime,
              values: []
            }).then((function(t) {
              uC.syncData(t.syncData)
            }))
          }), e), e.addSkin(e.refreshButton), e.announceBtn = new nm("button_orange.png", ""), e.announceBtn.x = 250, e.announceBtn.y = e.refreshButton.y + 80, e.announceBtn.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              var t;
              return s(this, (function(e) {
                switch (e.label) {
                  case 0:
                    return [4, Ah()];
                  case 1:
                    return e.sent(), (t = mh.getNotice($hostDef.noticeId || 100)) && tc.showPanel(dD, t), [2]
                }
              }))
            }))
          }), e), e.addSkin(e.announceBtn), e.friendButton = new nm("button_orange.png", "", !0, 22), e.friendButton.x = 250, e.friendButton.y = e.announceBtn.y + 80, e.friendButton.on(Tu, e.onClearFriend, e), e.addSkin(e.friendButton), e.limitSkinBtn = new nm("button_orange.png", "", !0, 22), e.limitSkinBtn.x = 250, e.limitSkinBtn.y = e.friendButton.y + 80, e.limitSkinBtn.on(Tu, e.onLimitSkin, e), e.addSkin(e.limitSkinBtn), e.delLimitSkinBtn = new nm("button_orange.png", "", !0, 22), e.delLimitSkinBtn.x = 250, e.delLimitSkinBtn.y = e.limitSkinBtn.y + 80, e.delLimitSkinBtn.on(Tu, e.onDelLimitSkin, e), e.addSkin(e.delLimitSkinBtn), e.endButton = new nm("button_orange.png", ""), e.endButton.x = e.allSkinBtn.x + e.allSkinBtn.width / 2 + e.endButton.width / 2 + 20, e.endButton.y = 700, e.endButton.on(Tu, (function() {
            var t = RI.curFloor + 1,
              i = ed(t, 0);
            RI.addFloor(i), cI.showPiecesAtFloor(t), e.close()
          }), e), e.addSkin(e.endButton), e.addAllDecorateButton = new nm("button_orange.png", "", !0, 22), e.addAllDecorateButton.x = e.endButton.x, e.addAllDecorateButton.y = e.endButton.y + 80, e.addAllDecorateButton.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              return s(this, (function(t) {
                return mx.hasTeam ? (IP({
                  type: Kh.addAllDecorate,
                  values: []
                }).then((function(t) {
                  uC.syncData(t.syncData), mx.loadDecorateList()
                })), this.close(), [2]) : [2]
              }))
            }))
          }), e), e.addSkin(e.addAllDecorateButton), e.clearAllDecorateButton = new nm("button_orange.png", "", !0, 22), e.clearAllDecorateButton.x = e.addAllDecorateButton.x, e.clearAllDecorateButton.y = e.addAllDecorateButton.y + 80, e.clearAllDecorateButton.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              return s(this, (function(t) {
                return mx.hasTeam ? (IP({
                  type: Kh.clearAllDecorate,
                  values: []
                }).then((function(t) {
                  uC.syncData(t.syncData), mx.loadDecorateList()
                })), this.close(), [2]) : [2]
              }))
            }))
          }), e), e.addSkin(e.clearAllDecorateButton), e.addCouponButton = new nm("button_orange.png", "", !0, 22), e.addCouponButton.x = e.clearAllDecorateButton.x, e.addCouponButton.y = e.clearAllDecorateButton.y + 80, e.addCouponButton.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              return s(this, (function(t) {
                return mx.hasTeam ? (IP({
                  type: Kh.addTeamCoupon,
                  values: []
                }).then((function(t) {
                  uC.syncData(t.syncData)
                })), this.close(), [2]) : [2]
              }))
            }))
          }), e), e.addSkin(e.addCouponButton), e.donate10000Button = new nm("button_orange.png", "10000", !0, 22), e.donate10000Button.x = e.addCouponButton.x, e.donate10000Button.y = e.addCouponButton.y + 80, e.donate10000Button.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              return s(this, (function(t) {
                return mx.hasTeam ? (IP({
                  type: Kh.addTeamDonation10000,
                  values: []
                }).then((function(t) {
                  uC.syncData(t.syncData)
                })), this.close(), [2]) : [2]
              }))
            }))
          }), e), e.addSkin(e.donate10000Button), e.donate1000Button = new nm("button_orange.png", "1000", !0, 22), e.donate1000Button.x = e.donate10000Button.x, e.donate1000Button.y = e.donate10000Button.y + 80, e.donate1000Button.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              return s(this, (function(t) {
                return mx.hasTeam ? (IP({
                  type: Kh.addTeamDonation1000,
                  values: []
                }).then((function(t) {
                  uC.syncData(t.syncData)
                })), this.close(), [2]) : [2]
              }))
            }))
          }), e), e.addSkin(e.donate1000Button), e.teamCoinButton = new nm("button_orange.png", "", !0, 22), e.teamCoinButton.x = e.donate1000Button.x, e.teamCoinButton.y = e.donate1000Button.y + 80, e.teamCoinButton.on(Tu, (function() {
            return r(e, void 0, void 0, (function() {
              return s(this, (function(t) {
                return mx.hasTeam ? (IP({
                  type: Kh.addTeamCoin,
                  values: []
                }).then((function(t) {
                  uC.syncData(t.syncData)
                })), this.close(), [2]) : [2]
              }))
            }))
          }), e), e.addSkin(e.teamCoinButton), e
        }
        return i(e, t), e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this, e), this.stageInputText.text = yx, this.collectInputText.text = vx
        }, e.prototype.onClear = function() {
          Gc()
        }, e.prototype.onClearFriend = function() {
          IP({
            type: 4,
            values: []
          }).then((function(t) {
            uC.syncData(t.syncData)
          }))
        }, e.prototype.onLimitSkin = function() {
          var t = oh.getItem(1213),
            e = t.minuteLimit ? t.minuteLimit : 2;
          IP({
            type: Kh.addSkin,
            values: [1213, 60 * e * 1e3]
          }).then((function(t) {
            uC.syncData(t.syncData)
          }))
        }, e.prototype.onDelLimitSkin = function() {
          IP({
            type: Kh.delSkin,
            values: [1213]
          }).then((function(t) {
            uC.syncData(t.syncData)
          }))
        }, e.prototype.onDel = function() {
          Nh("isFirstLogin_" + $hostDef.api, null), IP({
            type: 999,
            values: []
          }), Nh("appToken", null), rc("")
        }, e.prototype.onTicket = function() {
          IP({
            type: 2,
            values: []
          }).then((function(t) {
            uC.syncData(t.syncData)
          }))
        }, e.prototype.onOk = function() {
          this.close(), this.stageInputText.text.length > 1 && cI.regenerateFloor(this.stageInputText.text), this.collectInputText.text.length > 1 && cI.regenerateCollect(this.collectInputText.text)
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this)
        }, e.prototype.onCollectInput = function() {
          var t = this;
          Hl(this.collectInputText.text, 5e3, !1, (function(e) {
            t.isDisposed || (vx = t.collectInputText.text = e)
          }))
        }, e.prototype.onInput = function() {
          var t = this;
          Hl(this.stageInputText.text, 5e3, !1, (function(e) {
            t.isDisposed || (yx = t.stageInputText.text = e)
          }))
        }, e.clsName = "DebugView", e
      }(Qg),
      xx = {},
      Tx = {},
      kx = {},
      Ix = {},
      Cx = {};

    function _x(t) {
      var e, i = Tx[t];
      i && i.length > 0 ? e = i.pop() : ((e = zh("", 80, 15204402, "center")).text = "-" + t, e.cacheAsBitmap = !0), e.x = (Pe - e.textWidth) / 2 - 50 - 80 * Math.random(), e.y = Mu.top + De / 2 - 200, tc.stage.addChild(e), new TWEEN.Tween(e).delay(100).to({
        y: e.y - 100
      }, 500).onComplete((function() {
        e.parent && e.parent.removeChild(e);
        var i = Tx[t];
        i || (i = Tx[t] = []), i.length < 5 ? i.push(e) : e.destroy()
      })).start()
    }
    var Bx = function(t) {
        function e(e) {
          void 0 === e && (e = !1);
          var i = t.call(this) || this;
          i.isFinished = !1, i.isRevive = e;
          var n = jh("team_target_bg.png");
          return i.addChild(n), i.labelText = Xh("", 5832703, !0, "left", 22), i.labelText.x = 5, i.labelText.y = n.y + (n.height - i.labelText.height) / 2, i.addChild(i.labelText), i
        }
        return i(e, t), Object.defineProperty(e.prototype, "text", {
          get: function() {
            return this.labelText.text
          },
          set: function(t) {
            this.labelText.text = t
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.refreshText = function() {
          var t = this.isRevive ? "" : "";
          if (this.task.taskType === Sa.ClassicsGame) this.isFinished = RI.curScore >= this.task.taskValue, this.text = this.isFinished ? "".concat(this.task.taskValue, "") : "".concat(this.task.taskValue, "").concat(t);
          else if (this.task.taskType === Sa.DailyGame) {
            var e = Mh.getMode(this.gameMode);
            if (this.gameMode === Jh.FastDrop) {
              this.isFinished = !1;
              var i = YT(this.gameMode, e.targetValue);
              this.text = "".concat(i, "")
            } else {
              this.isFinished = zT(this.gameMode);
              i = YT(this.gameMode, e.targetValue);
              this.text = this.isFinished ? "".concat(i, "") : "".concat(i).concat(t)
            }
          } else if (this.task.taskType === Sa.ExpertGame) {
            var n = vh.getExpertMode(RI.mapId),
              o = n ? RI.maxFloor / n.finishFloor : RI.maxFloor / 50;
            this.isFinished = o >= this.task.taskValue, this.text = this.isFinished ? "".concat(100 * this.task.taskValue, "%") : "".concat(100 * this.task.taskValue, "%").concat(t)
          }
        }, e.prototype.setTask = function(t, e) {
          this.task = t, this.gameMode = e, this.refreshText()
        }, e.prototype.destroy = function(e) {
          this.task = null, this.gameMode = null, t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container),
      Sx = function(t) {
        function e() {
          return t.call(this) || this
        }
        return i(e, t), e.prototype.show = function() {}, e
      }(PIXI.Container),
      Px = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.teamTaskTips = [], e
        }
        return i(e, t), e.prototype.updateTeamTips = function() {
          for (var t = 0; t < this.teamTaskTips.length; t++) {
            var e = this.teamTaskTips[t];
            e.refreshText(), 0 !== t && (e.visible = this.teamTaskTips[t - 1].isFinished)
          }
        }, e.prototype.removeTeamTips = function() {
          for (var t = 0; t < this.teamTaskTips.length; t++) {
            var e = this.teamTaskTips[t];
            this.removeChild(e), e.destroy()
          }
          this.teamTaskTips.length = 0
        }, e.prototype.showTeamTips = function(t, e) {
          if (mx.hasTeam) {
            for (var i = Bh.getTasks(), n = 0; n < i.length; n++) {
              var o = i[n];
              if (o.taskType === Sa.DailyGame && !mx.isPersonTaskFinished(o.id)) {
                var r = new Bx;
                r.setTask(o, t), r.x = 30, r.y = e, this.addChild(r), this.teamTaskTips.push(r), e += r.height + 20
              }
            }
            this.updateTeamTips()
          }
        }, e.prototype.destroy = function(e) {
          t.prototype.destroy.call(this, e), this.teamTaskTips.length = 0
        }, e
      }(Sx),
      Dx = "#72ff00",
      Mx = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.curBloodTextColor = Dx, e.interactive = !1, e.redMasks = [];
          for (var i = 1; i <= 3; i++) {
            var n = Wh("dlc/ui/gamemode/blood_red_mask_".concat(i, ".png"));
            n.width = Pe, n.height = De, n.y = -Mu.top, n.interactive = !1, n.visible = !1, e.addChild(n), e.redMasks.push(n)
          }
          return e.heartBg = jh("blood_heart_bg.png"), e.heartBg.y = 120 - e.heartBg.height / 2, e.heartBg.x = 30, e.heartBg.interactive = !1, e.addChild(e.heartBg), e.redBg = jh("blood_red_heart.png"), e.redBg.anchor.set(.5, .5), e.redBg.x = e.heartBg.width / 2, e.redBg.y = e.heartBg.height / 2, e.redBg.interactive = !1, e.heartBg.addChild(e.redBg), e.greenBg = jh("blood_green_heart.png"), e.greenBg.anchor.set(.5, .5), e.greenBg.x = e.heartBg.width / 2, e.greenBg.y = e.heartBg.height / 2, e.greenBg.interactive = !1, e.heartBg.addChild(e.greenBg), e.bloodText = Xh("50", Dx, !0, "left", 60), e.bloodText.y = e.heartBg.y + (e.heartBg.height - e.bloodText.height) / 2, e.bloodText.x = e.heartBg.x + e.heartBg.width, e.bloodText.interactive = !1, e.addChild(e.bloodText), e.floorTitleText = Xh("", Dx, !1, "left", 40), e.floorTitleText.y = 200, e.floorTitleText.x = 30, e.floorTitleText.interactive = !1, e.addChild(e.floorTitleText), e.floorText = Xh("0", Dx, !1, "left", 40), e.floorText.y = e.floorTitleText.y, e.floorText.x = e.floorTitleText.x + e.floorTitleText.width, e.floorText.interactive = !1, e.addChild(e.floorText), e.addListeners(), e.show(), e
        }
        return i(e, t), e.prototype.addListeners = function() {
          RI.addListener(Yg, this.onBloodChange, this), RI.addListener(Xg, this.onFloorChange, this), RI.addListener(Wg, this.onGameEnd, this)
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Yg, this.onBloodChange), RI.removeListener(Xg, this.onFloorChange), RI.removeListener(Wg, this.onGameEnd)
        }, e.prototype.onGameEnd = function() {
          this.removeTeamTips(), mx.hasTeam && mx.loadPersonTask()
        }, e.prototype.show = function() {
          this.lastBlood = RI.blood, this.lastFloor = RI.curFloor, this.onBloodChange(), this.onFloorChange(), this.showTeamTips(Jh.Blood, this.floorText.y + this.floorText.height + 20)
        }, e.prototype.onBloodChange = function() {
          var t = this.lastBlood - RI.blood;
          t > 0 ? _x(t) : t < 0 && function(t, e, i) {
            var n, o = kx[t];
            o && o.length > 0 ? n = o.pop() : ((n = zh("", 80, 7536384, "center")).text = "+" + t, n.cacheAsBitmap = !0), n.x = (Pe - n.textWidth) / 2 + 80 * (Math.random() - .5), n.y = Mu.top + De / 2 - 100, tc.stage.addChild(n);
            var r = new TWEEN.Tween(n).delay(100).to({
                y: n.y - 100
              }, 500),
              s = new TWEEN.Tween(n).to({
                x: e,
                y: i
              }, 500);
            r.chain(s), s.onComplete((function() {
              n.parent && n.parent.removeChild(n);
              var e = kx[t];
              e || (e = kx[t] = []), e.length < 5 ? e.push(n) : n.destroy()
            })), r.start()
          }(-t, this.heartBg.x + this.heartBg.width / 2, this.heartBg.y + this.heartBg.height / 2), this.lastBlood = RI.blood, this.bloodText.text = "".concat(RI.blood), t > 0 && $hostDef.bloodMask && this.tweenRedMask(t);
          var e = RI.blood < .2 * $hostDef.maxBlood,
            i = e ? "#e80032" : Dx;
          this.curBloodTextColor != i && (this.curBloodTextColor = i, this.bloodText.style.fill = i, this.redBg.visible = e, this.greenBg.visible = !e)
        }, e.prototype.tweenRedMask = function(t) {
          var e = this;
          if (!this._maskTween) {
            for (var i, n = 0; n < this.redMasks.length; n++) {
              var o = this.redMasks[n];
              o.visible = t - 1 === n, o.visible && (i = o)
            }
            i.visible = !0, i.alpha = 0;
            var r = new TWEEN.Tween(i).to({
                alpha: 1
              }, 80).easing(TWEEN.Easing.Linear.None),
              s = new TWEEN.Tween(i).delay(150).to({
                alpha: 0
              }, 100).easing(TWEEN.Easing.Linear.None);
            r.chain(s), s.onComplete((function() {
              e._maskTween = null
            })), r.start(), this._maskTween = r
          }
        }, e.prototype.onFloorChange = function() {
          RI.curFloor > this.lastFloor && (this.lastFloor = RI.curFloor, this.floorText.text = this.lastFloor + ""), this.updateTeamTips()
        }, e.prototype.destroy = function(e) {
          for (var i = 0; i < this.redMasks.length; i++) this.redMasks[i].destroy({
            children: !0,
            texture: !0,
            baseTexture: !0
          });
          this.redMasks.length = 0, this.removeListeners(), t.prototype.destroy.call(this, e)
        }, e
      }(Px),
      Fx = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !1, e.scoreText = zh("0", 120, 16776960, "left"), e.scoreText.y = 60, e.scoreText.x = 30, e.scoreText.interactive = !1, e.addChild(e.scoreText), e.compareText = Xh("", 16776960, !0, "left", 40), e.compareText.y = 180, e.compareText.x = 30, e.compareText.interactive = !1, e.addChild(e.compareText), e.addListeners(), e
        }
        return i(e, t), e.prototype.onGameStart = function() {
          this.scoreText.text = RI.curScore + "", this.compareText.visible = !1;
          var t = RI.challengeId;
          this.challengeMode = yh.getChallengeMode(t), this.challengeMode && this.challengeMode.finishFloor > 0 && (this.compareText.text = "" + (this.challengeMode.finishFloor - RI.curFloor), this.compareText.visible = !0, this.compareText.style.fill = "#FF052e")
        }, e.prototype.onScoreChange = function() {
          if (this.scoreText.text = RI.curScore + "", this.challengeMode && this.challengeMode.finishFloor > 0) {
            var t = this.challengeMode.finishFloor - RI.curFloor;
            t <= 0 ? (this.compareText.text = "", this.compareText.style.fill = "#00FF00") : (this.compareText.text = "" + t, this.compareText.style.fill = "#FF052e")
          }
        }, e.prototype.addListeners = function() {
          RI.addListener(Vg, this.onScoreChange, this), RI.addListener(Hg, this.onGameStart, this), this.onGameStart(), this.onScoreChange()
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Hg, this.onGameStart), RI.removeListener(Vg, this.onScoreChange)
        }, e.prototype.destroy = function(e) {
          this.removeListeners(), t.prototype.destroy.call(this, e)
        }, e
      }(Sx),
      Ex = function(t) {
        function e(e, i, n) {
          var o = t.call(this, e) || this;
          return o.width = 70, o.height = 100, o.mapId = 0, o.score = 0, o.scoreDirty = !1, o.frequency = 60, o.frame = 50, o.mapId = i, o.score = n, o
        }
        return i(e, t), e.prototype.updateScore = function(t) {
          this.score = t, Tc && (Sc === this ? (Tc.postMessage(this.getMessage()), this.updateTexture()) : this.scoreDirty = !0)
        }, e.prototype.restore = function() {
          Tc && this.scoreDirty && (this.scoreDirty = !1, Tc.postMessage(this.getMessage())), t.prototype.restore.call(this)
        }, e.prototype.getMessage = function(t) {
          return {
            type: fc,
            mapId: this.mapId,
            score: this.score
          }
        }, e
      }(vm),
      Lx = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.isRelay = !1, e.relayScore = 0, e._friendInteraction = !1, e.isIconTween = !1, e.teamTaskTips = [], e.interactive = !1, e.scoreText = zh("0", 120, 16776960, "left"), e.scoreText.y = 60, e.scoreText.x = 30, e.scoreText.interactive = !1, e.addChild(e.scoreText), e.compareText = Xh("", 16776960, !0, "left", 40), e.compareText.y = 180, e.compareText.x = 30, e.compareText.interactive = !1, e.addChild(e.compareText), e.friendIcon = new PIXI.Sprite(Cc), e.friendIcon.x = 450, e.friendIcon.y = .4 * De, e.friendIcon.visible = !1, e.friendIcon.interactive = !1, e.addChild(e.friendIcon), e.addListeners(), e
        }
        return i(e, t), e.prototype.onGameStart = function() {
          var t = this;
          if (this.stopIconTween(), this.scoreText.text = RI.curScore + "", this.compareText.visible = !1, this.isRelay = Rg.isRelaying(), this.isRelay) this.relayScore = Rg.getRelayData().score, this.compareText.text = "" + this.relayScore, this.compareText.visible = !0, this.compareText.style.fill = "#00FF00";
          else {
            var e = Ag.getCurChallenge();
            e && e.score > 0 && (this.compareText.text = "" + e.score, this.compareText.visible = !0, this.compareText.style.fill = "#FF052e")
          }
          this._friendInteraction || Cy().then((function(e) {
            t._friendInteraction = e === Qm.Accept
          })), this.showTeamTips()
        }, e.prototype.onGameEnd = function() {
          this.removeTeamTips(), mx.hasTeam && mx.loadPersonTask()
        }, e.prototype.onDead = function() {
          this.stopIconTween(), this._openData && (Ec(this._openData), this._openData = null)
        }, e.prototype.stopIconTween = function() {
          TWEEN.killTweensOf(this.friendIcon), this.friendIcon.visible = !1, this.isIconTween = !1
        }, e.prototype.onScoreChange = function() {
          if (this.scoreText.text = RI.curScore + "", $y.isInWxChallenge && RI.curScore > 0 && $y.middleUpdateScore(RI.curScore), this.isRelay) this.compareText.text = "" + (this.relayScore + RI.curScore);
          else {
            var t = Ag.getCurChallenge();
            t && t.score > 0 && (RI.curScore > t.score ? this.compareText.style.fill = "#00FF00" : this.compareText.style.fill = "#FF052e")
          }
          RI.mode < Jh.Challenge && kc && RI.curScore > 0 && !this.isIconTween && this._friendInteraction && (this._openData || (this._openData = new Ex(this.friendIcon, RI.mapId, RI.curScore), Fc(this._openData)), this._openData.updateScore(RI.curScore), this.showFriendIcon()), this.updateTeamTips()
        }, e.prototype.showFriendIcon = function() {
          TWEEN.killTweensOf(this.friendIcon), this.friendIcon.visible = !0, this.friendIcon.y = .4 * De, this.isIconTween = !0;
          var t = this;
          new TWEEN.Tween(this.friendIcon).delay(500).to({
            y: this.friendIcon.y - 100
          }, 1e3).onComplete((function() {
            t.friendIcon && (t.isIconTween = !1, t.friendIcon.visible = !1)
          })).easing(TWEEN.Easing.Quadratic.InOut).start()
        }, e.prototype.addListeners = function() {
          RI.addListener(Vg, this.onScoreChange, this), RI.addListener(Ug, this.onDead, this), RI.addListener(Hg, this.onGameStart, this), RI.addListener(Wg, this.onGameEnd, this), this.onGameStart(), this.onScoreChange()
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Hg, this.onGameStart), RI.removeListener(Ug, this.onDead), RI.removeListener(Vg, this.onScoreChange), RI.removeListener(Wg, this.onGameEnd)
        }, e.prototype.show = function() {
          t.prototype.show.call(this)
        }, e.prototype.updateTeamTips = function() {
          for (var t = 0; t < this.teamTaskTips.length; t++) {
            var e = this.teamTaskTips[t];
            e.refreshText(), 0 !== t && (e.visible = this.teamTaskTips[t - 1].isFinished)
          }
        }, e.prototype.removeTeamTips = function() {
          for (var t = 0; t < this.teamTaskTips.length; t++) {
            var e = this.teamTaskTips[t];
            this.removeChild(e), e.destroy()
          }
          this.teamTaskTips.length = 0
        }, e.prototype.showTeamTips = function() {
          if (mx.hasTeam) {
            for (var t = this.compareText.y + this.compareText.height + 20, e = Bh.getTasks(), i = 0; i < e.length; i++) {
              var n = e[i];
              if (n.taskType === Sa.ClassicsGame && !mx.isPersonTaskFinished(n.id)) {
                var o = new Bx;
                o.setTask(n, Jh.Classics), o.x = 30, o.y = t, this.addChild(o), this.teamTaskTips.push(o), t += o.height + 20
              }
            }
            this.updateTeamTips()
          }
        }, e.prototype.destroy = function(e) {
          this.stopIconTween(), this._openData && (Ec(this._openData), this._openData = null), this.removeListeners(), t.prototype.destroy.call(this, e)
        }, e
      }(Sx),
      Ox = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.collectIndex = Nl.Word1, e.collectFloorGap = 0, e.collectMap = {}, e.collectCondition = {}, e.canAddCollect = !0, e
        }
        return i(e, t), e.prototype.setup = function(t) {
          this.diff = t, this.collectDefList = Qa.getDifficultyGroup(t), this._collectListIndex = 0, this.collectIndex = Nl.Word1, this.collectFloorGap = 0, this.collectMap = {}, this.collectMap[Nl.Word1] = 0, this.collectMap[Nl.Word2] = 0, this.collectMap[Nl.Word3] = 0, this.collectCondition = {}, this.collectCondition[Nl.Word1] = 1, this.collectCondition[Nl.Word2] = 1, this.collectCondition[Nl.Word3] = 2, this.canAddCollect = !0
        }, Object.defineProperty(e.prototype, "collectId", {
          get: function() {
            return this.collectDefList[this._collectListIndex].id
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.getDifficulty = function() {
          return this.collectDefList[this._collectListIndex]
        }, e.prototype.increaseIndex = function() {
          return this.collectIndex++, this.collectIndex >= 4 && (this.collectIndex = Nl.Word1, this._collectListIndex++, DEVELOP && console.log("collectListIndex:" + this._collectListIndex), this._collectListIndex >= this.collectDefList.length && (this._collectListIndex = this.collectDefList.length - 1, this.canAddCollect = !1), !0)
        }, e.prototype.addCollect = function(t) {
          this.collectMap[t]++, this.dispatchEvent(e.ADD_COLLECT, t)
        }, e.prototype.getCollectCount = function(t) {
          return this.collectMap[t] || 0
        }, e.prototype.getFullCollectCount = function() {
          for (var t = 1 / 0, e = Nl.Word1; e <= Nl.Word3; e++) {
            var i = this.collectMap[e] || 0,
              n = Math.floor(i / this.collectCondition[e]);
            t = Math.min(t, n)
          }
          return t
        }, e.ADD_COLLECT = "addCollect", e
      }(Ll),
      Rx = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          return i.type = e, i.normalWord = jh("gamemode_word".concat(e + 1, ".png")), i.addChild(i.normalWord), i.greenWord = jh("gamemode_word".concat(e + 1, "_green.png")), i.addChild(i.greenWord), i.point = jh("gamemode_point.png"), i.point.y = i.normalWord.height + 10, i.point.x = i.normalWord.width / 2 - i.point.width / 2, i.addChild(i.point), i
        }
        return i(e, t), Object.defineProperty(e.prototype, "greenVisible", {
          set: function(t) {
            this.greenWord.visible = t, this.normalWord.visible = !t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "count", {
          set: function(t) {
            this.point.visible = t > 1
          },
          enumerable: !1,
          configurable: !0
        }), e
      }(PIXI.Container),
      Gx = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.lastCollectCount = 0, e.interactive = !1, e.wordScoreText = Xh("", 16776960, !0, "left", 40), e.wordScoreText.y = 180, e.wordScoreText.x = 30, e.wordScoreText.interactive = !1, e.addChild(e.wordScoreText), e.nextWordText = Xh("", 16776960, !1, "left", 32), e.nextWordText.y = 250, e.nextWordText.x = 30, e.nextWordText.interactive = !1, e.addChild(e.nextWordText), e.wordGroup = new wv(10), e.wordGroup.interactive = !1, e.wordGroup.interactiveChildren = !1, e.addChild(e.wordGroup), e.word1 = new Rx(Nl.Word1), e.word2 = new Rx(Nl.Word2), e.word3 = new Rx(Nl.Word3), e.word4 = new Rx(Nl.Word3), e.wordGroup.addSkin(e.word1), e.wordGroup.addSkin(e.word2), e.wordGroup.addSkin(e.word3), e.wordGroup.addSkin(e.word4), e.wordGroup.y = Mu.top, e.wordGroup.x = (Pe - e.wordGroup.realWidth) / 2, e.addListeners(), e.show(), e
        }
        return i(e, t), e.prototype.addListeners = function() {
          RI.addListener(Xg, this.onFloorChange, this), RI.collectData.addListener(Ox.ADD_COLLECT, this.onAddCollect, this), RI.addListener(qg, this.onGameRevive, this), RI.addListener(Wg, this.onGameEnd, this)
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Xg, this.onFloorChange), RI.collectData.removeListener(Ox.ADD_COLLECT, this.onAddCollect), RI.removeListener(qg, this.onGameRevive), RI.removeListener(Wg, this.onGameEnd)
        }, e.prototype.show = function() {
          this.lastCollectCount = 0, this.onAddCollect(), this.showTeamTips(Jh.Collection, this.nextWordText.y + this.nextWordText.height + 20)
        }, e.prototype.onGameEnd = function() {
          this.removeTeamTips(), mx.hasTeam && mx.loadPersonTask()
        }, e.prototype.onGameRevive = function() {
          this.updateScoreText(), this.onFloorChange(), this.updateWordTexts()
        }, e.prototype.onAddCollect = function() {
          var t = this.lastCollectCount;
          this.lastCollectCount = RI.collectData.getFullCollectCount(), this.lastCollectCount > t ? this.fullGreenWordTexts() : this.updateWordTexts(), this.updateCollectCount(this.lastCollectCount), this.onFloorChange(), this.updateTeamTips()
        }, e.prototype.updateWordTexts = function() {
          var t = RI.collectData.getCollectCount(Nl.Word1),
            e = RI.collectData.getCollectCount(Nl.Word2),
            i = RI.collectData.getCollectCount(Nl.Word3);
          this.word1.greenVisible = t > this.lastCollectCount, this.word2.greenVisible = e > this.lastCollectCount, this.word3.greenVisible = i > 2 * this.lastCollectCount, this.word4.greenVisible = i > 2 * this.lastCollectCount + 1
        }, e.prototype.fullGreenWordTexts = function() {
          var t = this;
          this.word1.greenVisible = !0, this.word2.greenVisible = !0, this.word3.greenVisible = !0, this.word4.greenVisible = !0, lu(1e3).then((function() {
            t.updateWordTexts()
          }))
        }, e.prototype.collectWord = function(t, e, i) {
          var n = this,
            o = jh("gamemode_word".concat(t + 1, "_green.png"));
          o.x = e - o.width / 2, o.y = i - o.height, o.scale = new PIXI.Point(1.3, 1.3), this.addChild(o);
          var r = this.wordGroup.x,
            s = this.wordGroup.y;
          switch (t) {
            case Nl.Word1:
              r += this.word1.x, s += this.word1.y;
              break;
            case Nl.Word2:
              r += this.word2.x, s += this.word2.y;
              break;
            case Nl.Word3:
              RI.collectData.getCollectCount(Nl.Word3) % 2 == 0 ? (r += this.word4.x, s += this.word4.y) : (r += this.word3.x, s += this.word3.y)
          }
          new TWEEN.Tween(o.scale).to({
            x: 1,
            y: 1
          }, 300).easing(TWEEN.Easing.Linear.None).start(), new TWEEN.Tween(o).to({
            x: r,
            y: s
          }, 300).easing(TWEEN.Easing.Quadratic.Out).onComplete((function() {
            n.removeChild(o), o.destroy()
          })).start()
        }, e.prototype.onFloorChange = function() {
          var t = RI.getNextWordFloor(); - 1 == t ? this.nextWordText.text = "" : t == RI.curFloor ? this.nextWordText.text = "" : this.nextWordText.text = "".concat(t - RI.curFloor, "")
        }, e.prototype.updateCollectCount = function(t) {
          var e = RI.collectData.getCollectCount(Nl.Word1),
            i = RI.collectData.getCollectCount(Nl.Word2),
            n = RI.collectData.getCollectCount(Nl.Word3);
          this.word1.count = e - t, this.word2.count = i - t, this.word3.count = n - 2 * t - 1, this.word4.count = n - 2 * t - 2, this.wordScoreText.text = "".concat(t, "")
        }, e.prototype.updateScoreText = function() {
          this.wordScoreText.text = "".concat(this.lastCollectCount, "")
        }, e.prototype.destroy = function(e) {
          this.removeListeners(), this.wordGroup && (this.wordGroup.destroy(), this.wordGroup = null), t.prototype.destroy.call(this, e)
        }, e
      }(Px),
      Ax = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._friendInteraction = !1, e.isIconTween = !1, e.teamTaskTips = [], e.interactive = !1, e.scoreText = zh("0", 120, 16776960, "left"), e.scoreText.y = 60, e.scoreText.x = 30, e.scoreText.interactive = !1, e.addChild(e.scoreText), e.compareText = Xh("", 16776960, !0, "left", 40), e.compareText.y = 180, e.compareText.x = 30, e.compareText.interactive = !1, e.addChild(e.compareText), e.friendIcon = new PIXI.Sprite(Cc), e.friendIcon.x = 450, e.friendIcon.y = .4 * De, e.friendIcon.visible = !1, e.friendIcon.interactive = !1, e.addChild(e.friendIcon), e.addListeners(), e
        }
        return i(e, t), e.prototype.onGameStart = function() {
          var t = this;
          this.stopIconTween(), this.scoreText.text = RI.curScore + "", this.compareText.visible = !1;
          var e = RI.mapId;
          this.expertMode = vh.getExpertMode(e), this.expertMode && this.expertMode.finishFloor > 0 && (this.compareText.text = "" + (this.expertMode.finishFloor - RI.curFloor), this.compareText.visible = !0, this.compareText.style.fill = "#FF052e"), this._friendInteraction || Cy().then((function(e) {
            t._friendInteraction = e === Qm.Accept
          })), this.showTeamTips()
        }, e.prototype.onDead = function() {
          this.stopIconTween(), this._openData && (Ec(this._openData), this._openData = null)
        }, e.prototype.stopIconTween = function() {
          TWEEN.killTweensOf(this.friendIcon), this.friendIcon.visible = !1, this.isIconTween = !1
        }, e.prototype.onScoreChange = function() {
          if (this.scoreText.text = RI.curScore + "", this.expertMode && this.expertMode.finishFloor > 0) {
            var t = this.expertMode.finishFloor - RI.curFloor;
            t <= 0 ? (this.compareText.text = "", this.compareText.style.fill = "#00FF00") : (this.compareText.text = "" + t, this.compareText.style.fill = "#FF052e")
          }
          kc && RI.curScore > 0 && !this.isIconTween && this._friendInteraction && (this._openData || (this._openData = new Ex(this.friendIcon, RI.mapId, RI.curScore), Fc(this._openData)), this._openData.updateScore(RI.curScore), this.showFriendIcon()), this.updateTeamTips()
        }, e.prototype.onGameEnd = function() {
          this.removeTeamTips(), mx.hasTeam && mx.loadPersonTask()
        }, e.prototype.showFriendIcon = function() {
          TWEEN.killTweensOf(this.friendIcon), this.friendIcon.visible = !0, this.friendIcon.y = .4 * De, this.isIconTween = !0;
          var t = this;
          new TWEEN.Tween(this.friendIcon).delay(500).to({
            y: this.friendIcon.y - 100
          }, 1e3).onComplete((function() {
            t.friendIcon && (t.isIconTween = !1, t.friendIcon.visible = !1)
          })).easing(TWEEN.Easing.Quadratic.InOut).start()
        }, e.prototype.addListeners = function() {
          RI.addListener(Vg, this.onScoreChange, this), RI.addListener(Ug, this.onDead, this), RI.addListener(Hg, this.onGameStart, this), RI.addListener(Wg, this.onGameEnd, this), this.onGameStart(), this.onScoreChange()
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Hg, this.onGameStart), RI.removeListener(Ug, this.onDead), RI.removeListener(Vg, this.onScoreChange), RI.removeListener(Wg, this.onGameEnd)
        }, e.prototype.show = function() {}, e.prototype.updateTeamTips = function() {
          for (var t = 0; t < this.teamTaskTips.length; t++) {
            var e = this.teamTaskTips[t];
            e.refreshText(), 0 !== t && (e.visible = this.teamTaskTips[t - 1].isFinished)
          }
        }, e.prototype.removeTeamTips = function() {
          for (var t = 0; t < this.teamTaskTips.length; t++) {
            var e = this.teamTaskTips[t];
            this.removeChild(e), e.destroy()
          }
          this.teamTaskTips.length = 0
        }, e.prototype.showTeamTips = function() {
          if (mx.hasTeam) {
            for (var t = this.compareText.y + 60, e = Bh.getTasks(), i = 0; i < e.length; i++) {
              var n = e[i];
              if (n.taskType === Sa.ExpertGame && !mx.isPersonTaskFinished(n.id)) {
                var o = new Bx;
                o.setTask(n, Jh.Expert), o.x = 30, o.y = t, this.addChild(o), this.teamTaskTips.push(o), t += o.height + 20
              }
            }
            this.updateTeamTips()
          }
        }, e.prototype.destroy = function(e) {
          this.stopIconTween(), this._openData && (Ec(this._openData), this._openData = null), this.removeListeners(), t.prototype.destroy.call(this, e)
        }, e
      }(Sx),
      Nx = function(t) {
        function e(e, i, n) {
          void 0 === n && (n = !0);
          var o = t.call(this) || this;
          return o.sprite = new PIXI.Container, o.sprite.interactive = !0, o.bg = jh("gamemode_bg_gameIcon.png"), n && o.bg.anchor.set(.5, .5), o.sprite.addChild(o.bg), o.icon = jh(e), o.icon.anchor.set(.5, .5), o.bg.addChild(o.icon), o.videoIcon = jh("gamemode_icon_video.png"), o.videoIcon.anchor.set(.5, .5), o.videoIcon.x = (o.bg.width - o.videoIcon.width) / 2, o.videoIcon.y = (o.bg.height - o.videoIcon.height) / 2 - 5, o.bg.addChild(o.videoIcon), o.labelText = Xh(i, "#FFFFFF", !0, "left", 28), o.labelText.x = -o.labelText.width / 2, o.labelText.y = o.bg.height / 2 + o.labelText.height / 2 - 20, o.sprite.addChild(o.labelText), o.sprite.on(Tu, o.onTapDown, o), o.sprite.on(ku, o.onTapUp, o), o.sprite.on(Cu, o.onTapUp, o), o.sprite.on(_u, o.onTapUp, o), o.sprite.on(Bu, o.onTapUp, o), o
        }
        return i(e, t), e.prototype.setBg = function(t) {
          this.bg.texture = Vh(t)
        }, e.prototype.setIcon = function(t) {
          this.icon.texture = Vh(t)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.sprite
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "video", {
          get: function() {
            return this.videoIcon.visible
          },
          set: function(t) {
            this.videoIcon.visible = t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "label", {
          get: function() {
            return this.labelText.text
          },
          set: function(t) {
            this.labelText.text = t
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.onTapUp = function() {
          this.sprite && this.sprite.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this.sprite && this.sprite.scale.set(.9, .9)
        }, e.prototype.destroy = function() {
          this.sprite && this.sprite.removeAllListeners(), t.prototype.destroy.call(this), this.sprite = null
        }, e
      }(Lu),
      jx = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !1, e.scoreText = zh("0", 120, 16776960, "left"), e.scoreText.y = 60, e.scoreText.x = 30, e.scoreText.interactive = !1, e.addChild(e.scoreText), e.timeText = Xh("", 16776960, !0, "left", 60), e.timeText.y = e.scoreText.y + e.scoreText.height / 2 + e.timeText.height / 2 + 50, e.timeText.x = 30, e.timeText.interactive = !1, e.addChild(e.timeText), e.timeButton = new Nx("gamemode_icon_speedup.png", ""), e.timeButton.video = !1, e.timeButton.on(Tu, e.onTime, e), e.timeButton.y = De - e.timeButton.height / 2 - 250, e.timeButton.x = e.timeButton.width / 2 + 30, e.addChild(e.timeButton.skin), e.coverButton = new Nx("gamemode_icon_sprint.png", ""), e.coverButton.on(Iu, e.onSprint, e), e.coverButton.y = De - e.coverButton.height / 2 - 250, e.coverButton.x = Pe - e.coverButton.width / 2 - 30, e.addChild(e.coverButton.skin), e.addListeners(), e.show(), e
        }
        return i(e, t), e.prototype.show = function() {
          this.onScoreChange(), this._ticked = !0, this.onTick()
        }, e.prototype.addListeners = function() {
          RI.addListener(Vg, this.onScoreChange, this), RI.addListener(Wg, this.onGameEnd, this)
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Vg, this.onScoreChange), RI.removeListener(Wg, this.onGameEnd)
        }, e.prototype.onGameEnd = function() {
          this._ticked = !1
        }, e.prototype.onTick = function() {
          var t = this;
          if (this._ticked) {
            var e = Math.max(0, RI.maxGameTime - 1e3 * RI.gameTime);
            this.timeText.text = ni(e), requestAnimationFrame((function() {
              t.onTick()
            }))
          }
        }, e.prototype.onScoreChange = function() {
          this.scoreText.text = RI.curScore + ""
        }, e.prototype.onSprint = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              return RI.cover = 2, cI.ball.addShield(), rc("2"), [2]
            }))
          }))
        }, e.prototype.onTime = function() {
          RI.maxGameTime += 6e4, rc("60")
        }, e.prototype.destroy = function(e) {
          this.removeListeners(), this.timeButton && (this.timeButton.destroy(), this.timeButton = null), this.coverButton && (this.coverButton.destroy(), this.coverButton = null), t.prototype.destroy.call(this, e)
        }, e
      }(Px),
      Vx = "#72ff00",
      Ux = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !1, e.floorTitleText = Xh("", Vx, !1, "left", 50), e.floorTitleText.y = 80, e.floorTitleText.x = 30, e.floorTitleText.interactive = !1, e.addChild(e.floorTitleText), e.floorText = Xh("0", Vx, !1, "left", 50), e.floorText.y = e.floorTitleText.y, e.floorText.x = e.floorTitleText.x + e.floorTitleText.width, e.floorText.interactive = !1, e.addChild(e.floorText), e.addListeners(), e.show(), e
        }
        return i(e, t), e.prototype.show = function() {
          this.lastFloor = RI.curFloor, this.onFloorChange(), this.showTeamTips(Jh.Mutation, this.floorText.y + this.floorText.height + 20)
        }, e.prototype.addListeners = function() {
          RI.addListener(Wg, this.onGameEnd, this), RI.addListener(Xg, this.onFloorChange, this)
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Wg, this.onGameEnd), RI.removeListener(Xg, this.onFloorChange)
        }, e.prototype.onGameEnd = function() {
          this.removeTeamTips(), mx.hasTeam && mx.loadPersonTask()
        }, e.prototype.onFloorChange = function() {
          RI.curFloor > this.lastFloor && (this.lastFloor = RI.curFloor, this.floorText.text = this.lastFloor + ""), this.updateTeamTips()
        }, e.prototype.destroy = function(e) {
          this.removeListeners(), t.prototype.destroy.call(this, e)
        }, e
      }(Px),
      Wx = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !1, e.scoreText = zh("0", 120, 16776960, "left"), e.scoreText.y = 60, e.scoreText.x = 30, e.scoreText.interactive = !1, e.addChild(e.scoreText), e.addListeners(), e.show(), e
        }
        return i(e, t), e.prototype.show = function() {
          this.onScoreChange(), this.showTeamTips(Jh.Power, this.scoreText.y + this.scoreText.height + 30)
        }, e.prototype.addListeners = function() {
          RI.addListener(Wg, this.onGameEnd, this), RI.addListener(Vg, this.onScoreChange, this), RI.addListener(Wg, this.onGameEnd, this)
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Wg, this.onGameEnd), RI.removeListener(Vg, this.onScoreChange), RI.removeListener(Wg, this.onGameEnd)
        }, e.prototype.onGameEnd = function() {
          this.removeTeamTips(), mx.hasTeam && mx.loadPersonTask()
        }, e.prototype.onScoreChange = function() {
          this.scoreText.text = RI.curScore + "", this.updateTeamTips()
        }, e.prototype.destroy = function(e) {
          this.removeListeners(), t.prototype.destroy.call(this, e)
        }, e
      }(Px),
      qx = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.progressBar = null, e.interactive = !1, e.scoreText = zh("0", 120, 16776960, "left"), e.scoreText.y = 60, e.scoreText.x = 30, e.scoreText.interactive = !1, e.addChild(e.scoreText), e.progressBar = new tm("punchmode_progress_bg.png", "punchmode_progress_bar.png"), e.progressBar.x = 60, e.progressBar.y = e.scoreText.y + e.scoreText.height + 50, e.addChild(e.progressBar.skin), e.levelBg = jh("punchmode_progress_circle.png"), e.levelBg.x = e.progressBar.x - 30, e.levelBg.y = e.progressBar.y + (e.progressBar.height - e.levelBg.height) / 2, e.addChild(e.levelBg), e.maxeLevel = jh("punchmode_max_level.png"), e.maxeLevel.x = e.progressBar.x + (e.progressBar.width - e.maxeLevel.width) / 2 + 10, e.maxeLevel.y = e.progressBar.y + (e.progressBar.height - e.maxeLevel.height) / 2, e.addChild(e.maxeLevel), e.countLabel = zh("x1", 32, 2575706, "left"), e.countLabel.x = e.levelBg.x + (e.levelBg.width - e.countLabel.width) / 2, e.countLabel.y = e.levelBg.y + (e.levelBg.height - e.countLabel.height) / 2 - 5, e.addChild(e.countLabel), e.upgradeGroup = new PIXI.Container, e.addChild(e.upgradeGroup), e.scoreTipLabel = Xh("", 114409, !0, "left", 40), e.upgradeGroup.addChild(e.scoreTipLabel), e.upgradeGroup.x = (Pe - e.upgradeGroup.width) / 2, e.upgradeGroup.y = e.scoreText.y + (e.scoreText.textHeight - e.upgradeGroup.height) / 2, e.addListeners(), e.show(), e
        }
        return i(e, t), e.prototype.show = function() {
          this.upgradeGroup.visible = !1, this._oldScore = RI.curScore, this._oldScoreProgress = RI.scoreProgress, this._oldScoreLevel = RI.scoreLevel, this.onScoreChange(), this.onScoreProgressChange(), this.showTeamTips(Jh.Punch, this.progressBar.y + this.progressBar.height + 20)
        }, e.prototype.addListeners = function() {
          RI.addListener(Vg, this.onScoreChange, this), RI.addListener(Kg, this.onCostScoreChange, this), RI.addListener(zg, this.onScoreProgressChange, this), RI.addListener(Wg, this.onGameEnd, this)
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Vg, this.onScoreChange), RI.removeListener(Kg, this.onCostScoreChange), RI.removeListener(zg, this.onScoreProgressChange), RI.removeListener(Wg, this.onGameEnd)
        }, e.prototype.onGameEnd = function() {
          this.removeTeamTips(), mx.hasTeam && mx.loadPersonTask()
        }, e.prototype.onScoreProgressChange = function() {
          if (this._oldScoreProgress !== RI.scoreProgress) {
            var t = RI.scoreProgress - this._oldScoreProgress;
            this._oldScoreProgress = RI.scoreProgress, t > 0 && function(t, e, i) {
              var n, o = Cx[t];
              o && o.length > 0 ? n = o.pop() : ((n = zh("", 60, 7536384, "center")).text = "+" + t, n.cacheAsBitmap = !0), n.x = (Pe - n.textWidth) / 2 - 40 - 40 * Math.random(), n.y = Mu.top + De / 2 - 100, tc.stage.addChild(n);
              var r = new TWEEN.Tween(n).delay(100).to({
                  y: n.y - 100
                }, 500),
                s = new TWEEN.Tween(n).to({
                  x: e - n.textWidth / 2,
                  y: i
                }, 500);
              r.chain(s), s.onComplete((function() {
                n.parent && n.parent.removeChild(n);
                var e = Cx[t];
                e || (e = Cx[t] = []), e.length < 5 ? e.push(n) : n.destroy()
              })), r.start()
            }(t, this.progressBar.x + this.progressBar.width / 2, Mu.top + this.progressBar.y - this.progressBar.height / 2)
          }
          this._oldScoreLevel !== RI.scoreLevel && (this.scoreTipLabel.text = " x".concat(RI.scoreLevel), this._oldScoreLevel = RI.scoreLevel, this.upgradeGroup.visible = !0, this.upgradeGroup.x = (Pe - this.upgradeGroup.width) / 2, this.upgradeGroup.alpha = 1, TWEEN.killTweensOf(this.upgradeGroup), new TWEEN.Tween(this.upgradeGroup).delay(1500).to({
            alpha: 0
          }, 100).easing(TWEEN.Easing.Linear.None).start()), this.countLabel.text = "x" + RI.scoreLevel, this.countLabel.x = this.levelBg.x + (this.levelBg.width - this.countLabel.width) / 2, this.maxeLevel.visible = RI.scoreLevel > ze.length, TWEEN.killTweensOf(this.progressBar), new TWEEN.Tween(this.progressBar).to({
            progress: RI.scorePercent
          }, 100).easing(TWEEN.Easing.Linear.None).start()
        }, e.prototype.onCostScoreChange = function(t) {
          t > 0 && _x(t)
        }, e.prototype.onScoreChange = function() {
          this._oldScore !== RI.curScore && (this.scoreText.text = RI.curScore + "", this._oldScore = RI.curScore, this.updateTeamTips())
        }, e.prototype.destroy = function(e) {
          this.removeListeners(), t.prototype.destroy.call(this, e)
        }, e
      }(Px),
      Hx = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.interactive = !1, e.scoreText = zh("", 50, 16776960, "left"), e.scoreText.y = 120, e.scoreText.x = 30, e.scoreText.interactive = !1, e.addChild(e.scoreText), e.speedButton = new Nx("gamemode_icon_speedup.png", ""), e.speedButton.video = !1, e.speedButton.on(Tu, e.onSpeedUp, e), e.speedButton.y = De - e.speedButton.height / 2 - 250, e.speedButton.x = e.speedButton.width / 2 + 30, e.addChild(e.speedButton.skin), e.sprintButton = new Nx("gamemode_icon_sprint.png", ""), e.sprintButton.on(Iu, e.onSprint, e), e.sprintButton.y = De - e.sprintButton.height / 2 - 250, e.sprintButton.x = Pe - e.sprintButton.width / 2 - 30, e.addChild(e.sprintButton.skin), e.addListeners(), e.show(), e
        }
        return i(e, t), e.prototype.show = function() {
          this._ticked = !0, this.onTick(), this.showTeamTips(Jh.FastDrop, this.scoreText.y + this.scoreText.height + 20)
        }, e.prototype.addListeners = function() {
          RI.addListener(Wg, this.onGameEnd, this)
        }, e.prototype.removeListeners = function() {
          RI.removeListener(Wg, this.onGameEnd)
        }, e.prototype.onGameEnd = function() {
          this._ticked = !1, this.removeTeamTips(), mx.hasTeam && mx.loadPersonTask()
        }, e.prototype.onTick = function() {
          var t = this;
          if (this._ticked) {
            var e = 1e3 * RI.gameTime;
            this.scoreText.text = oi(e), this.updateTeamTips(), requestAnimationFrame((function() {
              t.onTick()
            }))
          }
        }, e.prototype.onSprint = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return RI.sprintCount >= 2 ? (rc(""), [2]) : Zi() || $hostDef.noGameModeVideo ? [3, 2] : (cI.setRotateEnable(!1), RI.isPaused = !0, this.sprintButton.interactive = !1, [4, mu(14)]);
                case 1:
                  if (t = e.sent(), this.sprintButton.interactive = !0, RI.isPaused = !1, cI.setRotateEnable(!0), t === ve.cancel) return [2, gu("")];
                  if (t === ve.fail) return [2, rc(fu)];
                  e.label = 2;
                case 2:
                  return cI.ball.enterSprint(), [2]
              }
            }))
          }))
        }, e.prototype.onSpeedUp = function() {
          cI.ball.enableSpeedUp()
        }, e.prototype.destroy = function(e) {
          this._ticked = !1, this.removeListeners(), this.speedButton && (this.speedButton.destroy(), this.speedButton = null), this.sprintButton && (this.sprintButton.destroy(), this.sprintButton = null), t.prototype.destroy.call(this, e)
        }, e
      }(Px),
      $x = function(t) {
        function e() {
          var i = t.call(this, !1, 0) || this;
          return i.isFirst = !0, i.allModeContainers = [], i.name = "ScoreView", i.initUI(), e.instance = i, i
        }
        return i(e, t), e.prototype.initUI = function() {
          (Zi() || DEVELOP && "api-test" === $hostDef.api) && (this.debugBtn = new Ru("button_ball.png"), this.debugBtn.on(Tu, (function() {
            tc.showPanel(bx)
          }), this), this.debugBtn.y = 150, this.debugBtn.x = Pe - this.debugBtn.width / 2, this.addSkin(this.debugBtn))
        }, e.prototype.showGameTip = function() {
          this.isFirst && (this.isFirst = !1, this.gameTip = jh("game_tip.png"), this.gameTip.anchor.set(.5, 0), this.gameTip.x = 375, this.gameTip.y = 200, this.gameTip.interactive = !1, this.addChild(this.gameTip), ql.addTouchMove(this._onTouchMove, this))
        }, e.prototype._onTouchMove = function() {
          if (ql.removeTouchMove(this._onTouchMove), this.gameTip) {
            var t = this;
            new TWEEN.Tween(this.gameTip).to({
              alpha: 0
            }, 300).onComplete((function() {
              t.isDisposed || (t.gameTip.destroy(), t.gameTip = null)
            })).easing(TWEEN.Easing.Linear.None).start()
          }
        }, e.prototype.onShow = function() {
          this.x = 0, this.y = Mu.top
        }, e.prototype.disableAllModes = function() {
          for (var t = 0; t < this.allModeContainers.length; t++) {
            var e = this.allModeContainers[t];
            e && (this.removeChild(e), e.destroy())
          }
          this.allModeContainers.length = 0, this.classicsModeContainer = null, this.expertModeContainer = null, this.challengeModeContainer = null, this.collectModeContainer = null, this.fastDropModeContainer = null, this.bloodModeContainer = null, this.gameItemModeContainer = null, this.mutationModeContainer = null, this.punchModeContainer = null, this.powerModeContainer = null
        }, e.prototype.onHide = function() {
          this.disableAllModes()
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.debugBtn && (this.debugBtn.destroy(), this.debugBtn = null), e.instance = null
        }, e.prototype.setGameMode = function(t) {
          this.disableAllModes(), t === Jh.Collection ? this.showCollectMode() : t === Jh.FastDrop ? this.showSpeedMode() : t === Jh.Blood ? this.showBloodMode() : t === Jh.Mutation ? this.showMutationMode() : t === Jh.Punch ? this.showPunchMode() : t === Jh.Power ? this.showPowerMode() : t === Jh.Expert ? this.showExpertMode() : t === Jh.Challenge ? this.showChallengeMode() : this.showClassicsMode(), this.showGameTip()
        }, e.prototype.showSpeedMode = function() {
          null == this.fastDropModeContainer ? (this.fastDropModeContainer = new Hx, this.addContainer(this.fastDropModeContainer)) : this.fastDropModeContainer.show()
        }, e.prototype.showClassicsMode = function() {
          null == this.classicsModeContainer && (this.classicsModeContainer = new Lx, this.addContainer(this.classicsModeContainer))
        }, e.prototype.showBloodMode = function() {
          null == this.bloodModeContainer ? (this.bloodModeContainer = new Mx, this.addContainer(this.bloodModeContainer)) : this.bloodModeContainer.show()
        }, e.prototype.showGameItemMode = function() {
          null == this.gameItemModeContainer ? (this.gameItemModeContainer = new jx, this.addContainer(this.gameItemModeContainer)) : this.gameItemModeContainer.show()
        }, e.prototype.showMutationMode = function() {
          null == this.mutationModeContainer ? (this.mutationModeContainer = new Ux, this.addContainer(this.mutationModeContainer)) : this.mutationModeContainer.show()
        }, e.prototype.showPunchMode = function() {
          null == this.punchModeContainer ? (this.punchModeContainer = new qx, this.addContainer(this.punchModeContainer)) : this.punchModeContainer.show()
        }, e.prototype.showCollectMode = function() {
          null == this.collectModeContainer ? (this.collectModeContainer = new Gx, this.addContainer(this.collectModeContainer)) : this.collectModeContainer.show()
        }, e.prototype.collectWord = function(t, e, i) {
          this.collectModeContainer && this.collectModeContainer.collectWord(t, e, i)
        }, e.prototype.showPowerMode = function() {
          null == this.powerModeContainer ? (this.powerModeContainer = new Wx, this.addContainer(this.powerModeContainer)) : this.powerModeContainer.show()
        }, e.prototype.showExpertMode = function() {
          null == this.expertModeContainer ? (this.expertModeContainer = new Ax, this.addContainer(this.expertModeContainer)) : this.expertModeContainer.show()
        }, e.prototype.showChallengeMode = function() {
          null == this.challengeModeContainer ? (this.challengeModeContainer = new Fx, this.addContainer(this.challengeModeContainer)) : this.challengeModeContainer.show()
        }, e.prototype.addContainer = function(t) {
          this.addChild(t), this.allModeContainers.push(t)
        }, e.clsName = "ScoreView", e
      }(Eu),
      Xx = function() {
        function t() {
          this.gravity = 0, this.isBreak = !1, this.threeObj = null
        }
        return t.prototype.updateMaterial = function() {}, t.prototype.setThreeObj = function(t) {
          this.threeObj = t
        }, t.prototype.setPosition = function(t) {
          this.threeObj.position.copy(t)
        }, Object.defineProperty(t.prototype, "visible", {
          get: function() {
            return !!this.threeObj && this.threeObj.visible
          },
          set: function(t) {
            this.threeObj && (this.threeObj.visible = t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "x", {
          get: function() {
            return this.threeObj ? this.threeObj.position.x : 0
          },
          set: function(t) {
            this.threeObj && (this.threeObj.position.x = t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "y", {
          get: function() {
            return this.threeObj ? this.threeObj.position.y : 0
          },
          set: function(t) {
            this.threeObj && (this.threeObj.position.y = t)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "z", {
          get: function() {
            return this.threeObj ? this.threeObj.position.z : 0
          },
          set: function(t) {
            this.threeObj && (this.threeObj.position.z = t)
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.breakDown = function(t) {
          this.isBreak = !0
        }, t.prototype.update = function(t) {}, t.prototype.destroy = function() {
          cI.removeGameObject(this), this.threeObj && (this.threeObj.parent && this.threeObj.parent.remove(this.threeObj), this.threeObj = void 0)
        }, t
      }(),
      Yx = function() {
        function t() {}
        return t.mergeBufferGeometries = function(t, e) {
          for (var i = null !== t[0].index, n = new Set(Object.keys(t[0].attributes)), o = new Set(Object.keys(t[0].morphAttributes)), r = {}, s = {}, a = new ke.BufferGeometry, h = 0, c = 0; c < t.length; ++c) {
            var u = t[c];
            if (i !== (null !== u.index)) return null;
            for (var l in u.attributes) {
              if (!n.has(l)) return null;
              void 0 === r[l] && (r[l] = []), r[l].push(u.attributes[l])
            }
            for (var d in u.morphAttributes) {
              if (!o.has(d)) return null;
              void 0 === s[d] && (s[d] = []), s[d].push(u.morphAttributes[d])
            }
            var p = a.userData;
            if (p.mergedUserData = p.mergedUserData || [], p.mergedUserData.push(u.userData), e) {
              var f = void 0;
              if (i) f = u.index.count;
              else {
                if (void 0 === u.attributes.position) return null;
                f = u.attributes.position.count
              }
              a.addGroup(h, f, c), h += f
            }
          }
          if (i) {
            var g = 0,
              m = [];
            for (c = 0; c < t.length; ++c) {
              for (var y = t[c].index, v = 0; v < y.count; ++v) m.push(y.getX(v) + g);
              g += t[c].attributes.position.count
            }
            a.setIndex(m)
          }
          for (var b in r) {
            var w = this.mergeBufferAttributes(r[b]);
            if (!w) return null;
            a.addAttribute(b, w)
          }
          for (var x in s) {
            var T = s[x][0].length;
            if (0 === T) break;
            a.morphAttributes = a.morphAttributes || {}, a.morphAttributes[x] = [];
            for (c = 0; c < T; ++c) {
              var k = [];
              for (v = 0; v < s[x].length; ++v) k.push(s[x][v][c]);
              var I = this.mergeBufferAttributes(k);
              if (!I) return null;
              a.morphAttributes[x].push(I)
            }
          }
          return a
        }, t.mergeBufferAttributes = function(t) {
          for (var e, i, n, o = 0, r = 0; r < t.length; ++r) {
            var s = t[r];
            if (s.isInterleavedBufferAttribute) return null;
            if (void 0 === e && (e = s.array.constructor), e !== s.array.constructor) return null;
            if (void 0 === i && (i = s.itemSize), i !== s.itemSize) return null;
            if (void 0 === n && (n = s.normalized), n !== s.normalized) return null;
            o += s.array.length
          }
          var a = new e(o),
            h = 0;
          for (r = 0; r < t.length; ++r) a.set(t[r].array, h), h += t[r].array.length;
          return new ke.BufferAttribute(a, i, n)
        }, t
      }(),
      zx = function() {
        function t() {}
        return t.prototype.load = function(t) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(e) {
              return [2, Ri(t)]
            }))
          }))
        }, t
      }(),
      Kx = function() {
        function t() {
          this.textureLoader = new ke.TextureLoader, this.textureLoader.setCrossOrigin("anonymous")
        }
        return t.prototype.load = function(t, e, i, n) {
          this.textureLoader.load(yi(t), e, i, n)
        }, t
      }(),
      Jx = new ke.LoadingManager;
    Jx.setURLModifier((function(t) {
      return yi(t)
    }));
    var Qx = function() {
        function t() {
          this.crossOrigin = "anonymous", this.defaultMaterialType = ke.MeshBasicMaterial, this.manager = Jx, this.defaultMaterialType = ke.MeshBasicMaterial, this.setBufferLoader(new zx), this.setTextureLoader(new Kx)
        }
        return t.prototype.setCrossOrigin = function(t) {
          return this.crossOrigin = t, this
        }, t.prototype.setDefaultMaterial = function(t) {
          this.defaultMaterialType = t
        }, t.prototype.setPath = function(t) {
          return this.path = t, this
        }, t.prototype.setBufferLoader = function(t) {
          return this.bufferLoader = t, this
        }, t.prototype.setTextureLoader = function(t) {
          return this.textureLoader = t, this
        }, t.prototype.load = function(t, e, i, n) {
          var o = this,
            r = void 0 !== this.path ? this.path : ke.LoaderUtils.extractUrlBase(t);
          o.manager.itemStart(t);
          var s = function(e) {
              n ? n(e) : console.error(e), o.manager.itemEnd(t), o.manager.itemError(t)
            },
            a = new ke.FileLoader(o.manager);
          a.setResponseType("arraybuffer"), a.load(t, (function(i) {
            try {
              o.parse(i, r, (function(i) {
                e(i), o.manager.itemEnd(t)
              }), s)
            } catch (t) {
              s(t)
            }
          }), i, s)
        }, t.prototype.parse = function(t, e, i, n) {
          var o, r, s = {};
          if ("string" == typeof t) o = t;
          else if (ke.LoaderUtils.decodeText(new Uint8Array(t, 0, 4)) === TT) {
            try {
              s[iT.KHR_BINARY_GLTF] = new CT(t)
            } catch (t) {
              return void(n && n(t))
            }
            o = s[iT.KHR_BINARY_GLTF].content
          } else o = ke.LoaderUtils.decodeText(new Uint8Array(t));
          try {
            r = JSON.parse(o)
          } catch (t) {
            return console.error(t), void(n && n(t))
          }
          if (void 0 === r.asset || r.asset.version[0] < 2) n && n(new Error("GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));
          else {
            var a = new Zx(r, s, {
              path: e || this.path || "",
              crossOrigin: this.crossOrigin,
              manager: this.manager,
              defaultMaterialType: this.defaultMaterialType,
              bufferLoader: this.bufferLoader,
              textureLoader: this.textureLoader
            });
            a.parse((function(t, e, n, o, r) {
              var h = {
                scene: t,
                scenes: e,
                cameras: n,
                animations: o,
                asset: r.asset,
                parser: a,
                userData: {}
              };
              wT(s, h, r), i(h)
            }), n)
          }
        }, t
      }(),
      Zx = function() {
        function t(t, e, i) {
          this.json = t || {}, this.extensions = e || {}, this.options = i || {}, this.cache = new tT, this.primitiveCache = [], this.multiplePrimitivesCache = [], this.multiPassGeometryCache = [], this.bufferLoader = i.bufferLoader, this.textureLoader = i.textureLoader
        }
        return t.prototype.parse = function(t, e) {
          var i = this.json;
          this.cache.removeAll(), this.markDefs(), this.getMultiDependencies(["scene", "animation", "camera"]).then((function(e) {
            var n = e.scenes || [],
              o = n[i.scene || 0],
              r = e.animations || [],
              s = e.cameras || [];
            t(o, n, s, r, i)
          })).catch(e)
        }, t.prototype.markDefs = function() {
          for (var t = this.json.nodes || [], e = this.json.skins || [], i = this.json.meshes || [], n = {}, o = {}, r = 0, s = e.length; r < s; r++)
            for (var a = e[r].joints, h = 0, c = a.length; h < c; h++) t[a[h]].isBone = !0;
          for (var u = 0, l = t.length; u < l; u++) {
            var d = t[u];
            void 0 !== d.mesh && (void 0 === n[d.mesh] && (n[d.mesh] = o[d.mesh] = 0), n[d.mesh]++, void 0 !== d.skin && (i[d.mesh].isSkinnedMesh = !0))
          }
          this.json.meshReferences = n, this.json.meshUses = o
        }, t.prototype.getDependency = function(t, e) {
          var i = t + ":" + e,
            n = this.cache.get(i);
          if (!n) {
            switch (t) {
              case "scene":
                n = this.loadScene(e);
                break;
              case "node":
                n = this.loadNode(e);
                break;
              case "mesh":
                n = this.loadMesh(e);
                break;
              case "accessor":
                n = this.loadAccessor(e);
                break;
              case "bufferView":
                n = this.loadBufferView(e);
                break;
              case "buffer":
                n = this.loadBuffer(e);
                break;
              case "material":
                n = this.loadMaterial(e);
                break;
              case "texture":
                n = this.loadTexture(e);
                break;
              case "skin":
                n = this.loadSkin(e);
                break;
              case "animation":
                n = this.loadAnimation(e);
                break;
              case "camera":
                n = this.loadCamera(e);
                break;
              default:
                throw new Error("Unknown type: " + t)
            }
            this.cache.add(i, n)
          }
          return n
        }, t.prototype.getDependencies = function(t) {
          var e = this.cache.get(t);
          if (!e) {
            var i = this,
              n = this.json[t + ("mesh" === t ? "es" : "s")] || [];
            e = Promise.all(n.map((function(e, n) {
              return i.getDependency(t, n)
            }))), this.cache.add(t, e)
          }
          return e
        }, t.prototype.getMultiDependencies = function(t) {
          for (var e = {}, i = [], n = 0, o = t.length; n < o; n++) {
            var r = t[n],
              s = this.getDependencies(r);
            s = s.then(function(t, i) {
              e[t] = i
            }.bind(this, r + ("mesh" === r ? "es" : "s"))), i.push(s)
          }
          return Promise.all(i).then((function() {
            return e
          }))
        }, t.prototype.loadBuffer = function(t) {
          var e = this.json.buffers[t];
          if (e.type && "arraybuffer" !== e.type) throw new Error("GLTFLoader: " + e.type + " buffer type is not supported.");
          return void 0 === e.uri && 0 === t ? Promise.resolve(this.extensions[iT.KHR_BINARY_GLTF].body) : this.bufferLoader.load(pT(e.uri, this.options.path))
        }, t.prototype.loadBufferView = function(t) {
          var e = this.json.bufferViews[t];
          return this.getDependency("buffer", e.buffer).then((function(t) {
            var i = e.byteLength || 0,
              n = e.byteOffset || 0;
            return t.slice(n, n + i)
          }))
        }, t.prototype.loadAccessor = function(t) {
          var e = this,
            i = this.json,
            n = this.json.accessors[t];
          if (void 0 === n.bufferView && void 0 === n.sparse) return null;
          var o = [];
          return void 0 !== n.bufferView ? o.push(this.getDependency("bufferView", n.bufferView)) : o.push(null), void 0 !== n.sparse && (o.push(this.getDependency("bufferView", n.sparse.indices.bufferView)), o.push(this.getDependency("bufferView", n.sparse.values.bufferView))), Promise.all(o).then((function(t) {
            var o, r, s = t[0],
              a = aT[n.type],
              h = oT[n.componentType],
              c = h.BYTES_PER_ELEMENT,
              u = c * a,
              l = n.byteOffset || 0,
              d = void 0 !== n.bufferView ? i.bufferViews[n.bufferView].byteStride : void 0,
              p = !0 === n.normalized;
            if (d && d !== u) {
              var f = "InterleavedBuffer:" + n.bufferView + ":" + n.componentType,
                g = e.cache.get(f);
              g || (o = new h(s), g = new ke.InterleavedBuffer(o, d / c), e.cache.add(f, g)), r = new ke.InterleavedBufferAttribute(g, a, l / c, p)
            } else o = null === s ? new h(n.count * a) : new h(s, l, n.count * a), r = new ke.BufferAttribute(o, a, p);
            if (void 0 !== n.sparse) {
              var m = aT.SCALAR,
                y = oT[n.sparse.indices.componentType],
                v = n.sparse.indices.byteOffset || 0,
                b = n.sparse.values.byteOffset || 0,
                w = new y(t[1], v, n.sparse.count * m),
                x = new h(t[2], b, n.sparse.count * a);
              null !== s && r.setArray(r.array.slice());
              for (var T = 0, k = w.length; T < k; T++) {
                var I = w[T];
                if (r.setX(I, x[T * a]), a >= 2 && r.setY(I, x[T * a + 1]), a >= 3 && r.setZ(I, x[T * a + 2]), a >= 4 && r.setW(I, x[T * a + 3]), a >= 5) throw new Error("GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")
              }
            }
            return r
          }))
        }, t.prototype.loadTexture = function(t) {
          var e, i = this.json,
            n = this.options,
            o = this.textureLoader,
            r = window.URL,
            s = i.textures[t],
            a = s.extensions || {},
            h = (e = a[iT.MSFT_TEXTURE_DDS] ? i.images[a[iT.MSFT_TEXTURE_DDS].source] : i.images[s.source]).uri,
            c = !1;
          return void 0 !== e.bufferView && (h = this.getDependency("bufferView", e.bufferView).then((function(t) {
            c = !0;
            var i = new Blob([t], {
              type: e.mimeType
            });
            return h = r.createObjectURL(i)
          }))), Promise.resolve(h).then((function(t) {
            var e = o;
            return new Promise((function(i, o) {
              e.load(pT(t, n.path), i, void 0, o)
            }))
          })).then((function(t) {
            !0 === c && r.revokeObjectURL(h), t.flipY = !1, void 0 !== s.name && (t.name = s.name), e.mimeType in dT && (t.format = dT[e.mimeType]);
            var n = (i.samplers || {})[s.sampler] || {};
            return t.magFilter = rT[n.magFilter] || ke.LinearFilter, t.minFilter = rT[n.minFilter] || ke.LinearMipMapLinearFilter, t.wrapS = sT[n.wrapS] || ke.RepeatWrapping, t.wrapT = sT[n.wrapT] || ke.RepeatWrapping, t
          }))
        }, t.prototype.assignTexture = function(t, e, i) {
          return this.getDependency("texture", i).then((function(i) {
            t[e] = i
          }))
        }, t.prototype.loadMaterial = function(t) {
          var e, i = this,
            n = this.json,
            o = this.extensions,
            r = n.materials[t],
            s = {},
            a = r.extensions || {},
            h = [];
          if (a[iT.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {
            var c = o[iT.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];
            e = c.getMaterialType(r), h.push(c.extendParams(s, r, i))
          } else if (a[iT.KHR_MATERIALS_UNLIT]) {
            var u = o[iT.KHR_MATERIALS_UNLIT];
            e = u.getMaterialType(r), h.push(u.extendParams(s, r, i))
          } else {
            e = this.options.defaultMaterialType;
            var l = r.pbrMetallicRoughness || {};
            if (s.color = new ke.Color(1, 1, 1), s.opacity = 1, Array.isArray(l.baseColorFactor)) {
              var d = l.baseColorFactor;
              s.color.fromArray(d), s.opacity = d[3]
            }
            if (void 0 !== l.baseColorTexture && h.push(i.assignTexture(s, "map", l.baseColorTexture.index)), s.metalness = void 0 !== l.metallicFactor ? l.metallicFactor : 1, s.roughness = void 0 !== l.roughnessFactor ? l.roughnessFactor : 1, void 0 !== l.metallicRoughnessTexture) {
              var p = l.metallicRoughnessTexture.index;
              h.push(i.assignTexture(s, "metalnessMap", p)), h.push(i.assignTexture(s, "roughnessMap", p))
            }
          }!0 === r.doubleSided && (s.side = ke.DoubleSide);
          var f = r.alphaMode || lT.OPAQUE;
          return f === lT.BLEND ? s.transparent = !0 : (s.transparent = !1, f === lT.MASK && (s.alphaTest = void 0 !== r.alphaCutoff ? r.alphaCutoff : .5)), void 0 !== r.normalTexture && e !== ke.MeshBasicMaterial && (h.push(i.assignTexture(s, "normalMap", r.normalTexture.index)), s.normalScale = new ke.Vector2(1, 1), void 0 !== r.normalTexture.scale && s.normalScale.set(r.normalTexture.scale, r.normalTexture.scale)), void 0 !== r.occlusionTexture && e !== ke.MeshBasicMaterial && (h.push(i.assignTexture(s, "aoMap", r.occlusionTexture.index)), void 0 !== r.occlusionTexture.strength && (s.aoMapIntensity = r.occlusionTexture.strength)), void 0 !== r.emissiveFactor && e !== ke.MeshBasicMaterial && (s.emissive = (new ke.Color).fromArray(r.emissiveFactor)), void 0 !== r.emissiveTexture && e !== ke.MeshBasicMaterial && h.push(i.assignTexture(s, "emissiveMap", r.emissiveTexture.index)), Promise.all(h).then((function() {
            var t;
            return e === ke.ShaderMaterial ? t = o[iT.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s) : (e === ke.MeshBasicMaterial && (delete s.roughness, delete s.metalness), t = new e(s)), void 0 !== r.name && (t.name = r.name), t.normalScale && (t.normalScale.y = -t.normalScale.y), t.map && (t.map.encoding = ke.sRGBEncoding), t.emissiveMap && (t.emissiveMap.encoding = ke.sRGBEncoding), t.specularMap && (t.specularMap.encoding = ke.sRGBEncoding), fT(t, r), r.extensions && wT(o, t, r), t
          }))
        }, t.prototype.loadGeometries = function(t) {
          var e, i = this,
            n = this.extensions,
            o = this.primitiveCache,
            r = function(t) {
              if (t.length < 2) return !1;
              var e = t[0],
                i = e.targets || [];
              if (void 0 === e.indices) return !1;
              for (var n = 1, o = t.length; n < o; n++) {
                var r = t[n];
                if (e.mode !== r.mode) return !1;
                if (void 0 === r.indices) return !1;
                if (!yT(e.attributes, r.attributes)) return !1;
                var s = r.targets || [];
                if (i.length !== s.length) return !1;
                for (var a = 0, h = i.length; a < h; a++)
                  if (!yT(i[a], s[a])) return !1
              }
              return !0
            }(t);
          return r && (e = t, t = [t[0]]), this.getDependencies("accessor").then((function(s) {
            for (var a = [], h = function(e, r) {
                var h = t[e],
                  c = function(t, e) {
                    for (var i = 0, n = t.length; i < n; i++) {
                      var o = t[i];
                      if (mT(o.primitive, e)) return o.promise
                    }
                    return null
                  }(o, h);
                if (c) a.push(c);
                else if (h.extensions && h.extensions[iT.KHR_DRACO_MESH_COMPRESSION]) {
                  var u = n[iT.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h, i).then((function(t) {
                    return xT(t, h, s), t
                  }));
                  o.push({
                    primitive: h,
                    promise: u
                  }), a.push(u)
                } else {
                  var l = new ke.BufferGeometry;
                  xT(l, h, s);
                  u = Promise.resolve(l);
                  o.push({
                    primitive: h,
                    promise: u
                  }), a.push(u)
                }
              }, c = 0, u = t.length; c < u; c++) h(c);
            return Promise.all(a).then((function(n) {
              if (r) {
                var o = n[0],
                  a = i.multiPassGeometryCache,
                  h = function(t, e, i) {
                    for (var n = 0, o = t.length; n < o; n++) {
                      var r = t[n];
                      if (e === r.baseGeometry && vT(i, r.primitives)) return r.geometry
                    }
                    return null
                  }(a, o, e);
                if (null !== h) return [h.geometry];
                var c = new ke.BufferGeometry;
                for (var u in c.name = o.name, c.userData = o.userData, o.attributes) c.addAttribute(u, o.attributes[u]);
                for (var u in o.morphAttributes) c.morphAttributes[u] = o.morphAttributes[u];
                for (var l = [], d = 0, p = 0, f = e.length; p < f; p++) {
                  for (var g = s[e[p].indices], m = 0, y = g.count; m < y; m++) l.push(g.array[m]);
                  c.addGroup(d, g.count, p), d += g.count
                }
                return c.setIndex(l), a.push({
                  geometry: c,
                  baseGeometry: o,
                  primitives: e
                }), [c]
              }
              if (n.length > 1) {
                for (p = 1, f = t.length; p < f; p++)
                  if (t[0].mode !== t[p].mode) return n;
                var v = i.multiplePrimitivesCache;
                h = function(t, e) {
                  for (var i = 0, n = t.length; i < n; i++) {
                    var o = t[i];
                    if (vT(e, o.baseGeometries)) return o.geometry
                  }
                  return null
                }(v, n);
                if (h) {
                  if (null !== h.geometry) return [h.geometry]
                } else {
                  c = Yx.mergeBufferGeometries(n, !0);
                  if (v.push({
                      geometry: c,
                      baseGeometries: n
                    }), null !== c) return [c]
                }
              }
              return n
            }))
          }))
        }, t.prototype.loadMesh = function(t) {
          var e = this,
            i = this.json,
            n = this.extensions,
            o = i.meshes[t];
          return this.getMultiDependencies(["accessor", "material"]).then((function(i) {
            for (var r = o.primitives, s = [], a = 0, h = r.length; a < h; a++) s[a] = void 0 === r[a].material ? new ke.MeshBasicMaterial({
              color: 16777215,
              transparent: !1,
              depthTest: !0,
              side: ke.FrontSide
            }) : i.materials[r[a].material];
            return e.loadGeometries(r).then((function(i) {
              for (var a = 1 === i.length && i[0].groups.length > 0, h = [], c = 0, u = i.length; c < u; c++) {
                var l = i[c],
                  d = r[c],
                  p = void 0,
                  f = a ? s : s[c];
                if (d.mode === nT.TRIANGLES || d.mode === nT.TRIANGLE_STRIP || d.mode === nT.TRIANGLE_FAN || void 0 === d.mode) p = !0 === o.isSkinnedMesh ? new ke.SkinnedMesh(l, f) : new ke.Mesh(l, f), d.mode === nT.TRIANGLE_STRIP ? p.drawMode = ke.TriangleStripDrawMode : d.mode === nT.TRIANGLE_FAN && (p.drawMode = ke.TriangleFanDrawMode);
                else if (d.mode === nT.LINES) p = new ke.LineSegments(l, f);
                else if (d.mode === nT.LINE_STRIP) p = new ke.Line(l, f);
                else if (d.mode === nT.LINE_LOOP);
                else {
                  if (d.mode !== nT.POINTS) throw new Error("GLTFLoader: Primitive mode unsupported: " + d.mode);
                  p = new ke.Points(l, f)
                }
                Object.keys(p.geometry.morphAttributes).length > 0 && gT(p, o), p.name = o.name || "mesh_" + t, i.length > 1 && (p.name += "_" + c), fT(p, o), h.push(p);
                for (var g = a ? p.material : [p.material], m = void 0 !== l.attributes.color, y = void 0 === l.attributes.normal, v = !0 === p.isSkinnedMesh, b = Object.keys(l.morphAttributes).length > 0, w = b && void 0 !== l.morphAttributes.normal, x = 0, T = g.length; x < T; x++) {
                  var k = g[x];
                  if (p.isPoints) {
                    var I = "PointsMaterial:" + k.uuid,
                      C = e.cache.get(I);
                    C || (C = new ke.PointsMaterial, ke.Material.prototype.copy.call(C, k), C.color.copy(k.color), C.map = k.map, C.lights = !1, e.cache.add(I, C)), k = C
                  } else if (p.isLine) {
                    I = "LineBasicMaterial:" + k.uuid;
                    var _ = e.cache.get(I);
                    _ || (_ = new ke.LineBasicMaterial, ke.Material.prototype.copy.call(_, k), _.color.copy(k.color), _.lights = !1, e.cache.add(I, _)), k = _
                  }
                  if (m || y || v || b) {
                    I = "ClonedMaterial:" + k.uuid + ":";
                    k.isGLTFSpecularGlossinessMaterial && (I += "specular-glossiness:"), v && (I += "skinning:"), m && (I += "vertex-colors:"), y && (I += "flat-shading:"), b && (I += "morph-targets:"), w && (I += "morph-normals:");
                    var B = e.cache.get(I);
                    B || (B = k.isGLTFSpecularGlossinessMaterial ? n[iT.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(k) : k.clone(), v && (B.skinning = !0), m && (B.vertexColors = ke.VertexColors), y && (B.flatShading = !0), b && (B.morphTargets = !0), w && (B.morphNormals = !0), e.cache.add(I, B)), k = B
                  }
                  g[x] = k, k.aoMap && void 0 === l.attributes.uv2 && void 0 !== l.attributes.uv && l.addAttribute("uv2", new ke.BufferAttribute(l.attributes.uv.array, 2)), k.isGLTFSpecularGlossinessMaterial && (p.onBeforeRender = n[iT.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)
                }
                p.material = a ? g : g[0]
              }
              if (1 === h.length) return h[0];
              var S = new ke.Group;
              for (c = 0, u = h.length; c < u; c++) S.add(h[c]);
              return S
            }))
          }))
        }, t.prototype.loadCamera = function(t) {
          var e, i = this.json.cameras[t],
            n = i[i.type];
          if (n) return "perspective" === i.type ? e = new ke.PerspectiveCamera(ke.Math.radToDeg(n.yfov), n.aspectRatio || 1, n.znear || 1, n.zfar || 2e6) : "orthographic" === i.type && (e = new ke.OrthographicCamera(n.xmag / -2, n.xmag / 2, n.ymag / 2, n.ymag / -2, n.znear, n.zfar)), void 0 !== i.name && (e.name = i.name), fT(e, i), Promise.resolve(e);
          console.warn("GLTFLoader: Missing camera parameters.")
        }, t.prototype.loadSkin = function(t) {
          var e = this.json.skins[t],
            i = {
              joints: e.joints
            };
          return void 0 === e.inverseBindMatrices ? Promise.resolve(i) : this.getDependency("accessor", e.inverseBindMatrices).then((function(t) {
            return i.inverseBindMatrices = t, i
          }))
        }, t.prototype.loadAnimation = function(t) {
          var e = this.json.animations[t];
          return this.getMultiDependencies(["accessor", "node"]).then((function(i) {
            for (var n = [], o = function(t, o) {
                var r = e.channels[t],
                  s = e.samplers[r.sampler];
                if (s) {
                  var a = r.target,
                    h = void 0 !== a.node ? a.node : a.id,
                    c = void 0 !== e.parameters ? e.parameters[s.input] : s.input,
                    u = void 0 !== e.parameters ? e.parameters[s.output] : s.output,
                    l = i.accessors[c],
                    d = i.accessors[u],
                    p = i.nodes[h];
                  if (p) {
                    p.updateMatrix(), p.matrixAutoUpdate = !0;
                    var f = void 0;
                    switch (cT[a.path]) {
                      case cT.weights:
                        f = ke.NumberKeyframeTrack;
                        break;
                      case cT.rotation:
                        f = ke.QuaternionKeyframeTrack;
                        break;
                      case cT.position:
                      case cT.translation:
                      case cT.scale:
                      default:
                        f = ke.VectorKeyframeTrack
                    }
                    var g = p.name ? p.name : p.uuid,
                      m = void 0 !== s.interpolation ? uT[s.interpolation] : ke.InterpolateLinear,
                      y = [];
                    cT[a.path] === cT.weights ? p.traverse((function(t) {
                      !0 === t.isMesh && t.morphTargetInfluences && y.push(t.name ? t.name : t.uuid)
                    })) : y.push(g);
                    for (var v = 0, b = y.length; v < b; v++) {
                      var w = new f(y[v] + "." + cT[a.path], ke.AnimationUtils.arraySlice(l.array, 0, void 0), ke.AnimationUtils.arraySlice(d.array, 0, void 0), m);
                      "CUBICSPLINE" === s.interpolation && (w.createInterpolant = function(t) {
                        return new eT(this.times, this.values, this.getValueSize() / 3, t)
                      }, w.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = !0), n.push(w)
                    }
                  }
                }
              }, r = 0, s = e.channels.length; r < s; r++) o(r);
            var a = void 0 !== e.name ? e.name : "animation_" + t;
            return new ke.AnimationClip(a, void 0, n)
          }))
        }, t.prototype.loadNode = function(t) {
          var e = this.json,
            i = this.extensions,
            n = e.meshReferences,
            o = e.meshUses,
            r = e.nodes[t];
          return this.getMultiDependencies(["mesh", "skin", "camera", "light"]).then((function(t) {
            var e;
            if (!0 === r.isBone) e = new ke.Bone;
            else if (void 0 !== r.mesh) {
              var s = t.meshes[r.mesh];
              if (n[r.mesh] > 1) {
                var a = o[r.mesh]++;
                (e = s.clone()).name += "_instance_" + a, e.onBeforeRender = s.onBeforeRender;
                for (var h = 0, c = e.children.length; h < c; h++) e.children[h].name += "_instance_" + a, e.children[h].onBeforeRender = s.children[h].onBeforeRender
              } else e = s
            } else if (void 0 !== r.camera) e = t.cameras[r.camera];
            else if (r.extensions && r.extensions[iT.KHR_LIGHTS_PUNCTUAL] && void 0 !== r.extensions[iT.KHR_LIGHTS_PUNCTUAL].light) {
              e = i[iT.KHR_LIGHTS_PUNCTUAL].lights[r.extensions[iT.KHR_LIGHTS_PUNCTUAL].light]
            } else e = new ke.Object3D;
            if (void 0 !== r.name && (e.name = ke.PropertyBinding.sanitizeNodeName(r.name)), fT(e, r), r.extensions && wT(i, e, r), void 0 !== r.matrix) {
              var u = new ke.Matrix4;
              u.fromArray(r.matrix), e.applyMatrix(u)
            } else void 0 !== r.translation && e.position.fromArray(r.translation), void 0 !== r.rotation && e.quaternion.fromArray(r.rotation), void 0 !== r.scale && e.scale.fromArray(r.scale);
            return e
          }))
        }, t.prototype.loadScene = function(t) {
          function e(t, i, n, o, r) {
            var s = o[t],
              a = n.nodes[t];
            if (void 0 !== a.skin)
              for (var h = !0 === s.isGroup ? s.children : [s], c = 0, u = h.length; c < u; c++) {
                for (var l = h[c], d = r[a.skin], p = [], f = [], g = 0, m = d.joints.length; g < m; g++) {
                  var y = d.joints[g],
                    v = o[y];
                  if (v) {
                    p.push(v);
                    var b = new ke.Matrix4;
                    void 0 !== d.inverseBindMatrices && b.fromArray(d.inverseBindMatrices.array, 16 * g), f.push(b)
                  } else console.warn('GLTFLoader: Joint "%s" could not be found.', y)
                }
                l.bind(new ke.Skeleton(p, f), l.matrixWorld)
              }
            if (i.add(s), a.children) {
              var w = a.children;
              for (c = 0, u = w.length; c < u; c++) {
                e(w[c], s, n, o, r)
              }
            }
          }
          var i = this.json,
            n = this.extensions,
            o = this.json.scenes[t];
          return this.getMultiDependencies(["node", "skin"]).then((function(t) {
            var r = new ke.Scene;
            void 0 !== o.name && (r.name = o.name), fT(r, o), o.extensions && wT(n, r, o);
            for (var s = o.nodes || [], a = 0, h = s.length; a < h; a++) e(s[a], r, i, t.nodes, t.skins);
            return r
          }))
        }, t
      }(),
      tT = function() {
        function t() {
          this.objects = {}
        }
        return t.prototype.get = function(t) {
          return this.objects[t]
        }, t.prototype.add = function(t, e) {
          this.objects[t] = e
        }, t.prototype.remove = function(t) {
          delete this.objects[t]
        }, t.prototype.removeAll = function() {
          this.objects = {}
        }, t
      }(),
      eT = function(t) {
        function e(e, i, n, o) {
          var r = t.call(this, e, i, n, o) || this;
          return r.beforeStart_ = r.copySampleValue_.bind(r), r.afterEnd_ = r.copySampleValue_.bind(r), r
        }
        return i(e, t), e.prototype.copySampleValue_ = function(t) {
          for (var e = this.resultBuffer, i = this.sampleValues, n = this.valueSize, o = t * n * 3 + n, r = 0; r !== n; r++) e[r] = i[o + r];
          return e
        }, e.prototype.interpolate_ = function(t, e, i, n) {
          for (var o = this.resultBuffer, r = this.sampleValues, s = this.valueSize, a = 2 * s, h = 3 * s, c = n - e, u = (i - e) / c, l = u * u, d = l * u, p = t * h, f = p - h, g = 2 * d - 3 * l + 1, m = d - 2 * l + u, y = -2 * d + 3 * l, v = d - l, b = 0; b !== s; b++) {
            var w = r[f + b + s],
              x = r[f + b + a] * c,
              T = r[p + b + s],
              k = r[p + b] * c;
            o[b] = g * w + m * x + y * T + v * k
          }
          return o
        }, e
      }(ke.Interpolant),
      iT = {
        KHR_BINARY_GLTF: "KHR_binary_glTF",
        KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
        KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
        KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: "KHR_materials_pbrSpecularGlossiness",
        KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
        MSFT_TEXTURE_DDS: "MSFT_texture_dds"
      },
      nT = {
        FLOAT: 5126,
        FLOAT_MAT3: 35675,
        FLOAT_MAT4: 35676,
        FLOAT_VEC2: 35664,
        FLOAT_VEC3: 35665,
        FLOAT_VEC4: 35666,
        LINEAR: 9729,
        REPEAT: 10497,
        SAMPLER_2D: 35678,
        POINTS: 0,
        LINES: 1,
        LINE_LOOP: 2,
        LINE_STRIP: 3,
        TRIANGLES: 4,
        TRIANGLE_STRIP: 5,
        TRIANGLE_FAN: 6,
        UNSIGNED_BYTE: 5121,
        UNSIGNED_SHORT: 5123
      },
      oT = (ke.Matrix3, ke.Matrix4, ke.Vector2, ke.Vector3, ke.Vector4, ke.Texture, {
        5120: Int8Array,
        5121: Uint8Array,
        5122: Int16Array,
        5123: Uint16Array,
        5125: Uint32Array,
        5126: Float32Array
      }),
      rT = {
        9728: ke.NearestFilter,
        9729: ke.LinearFilter,
        9984: ke.NearestMipMapNearestFilter,
        9985: ke.LinearMipMapNearestFilter,
        9986: ke.NearestMipMapLinearFilter,
        9987: ke.LinearMipMapLinearFilter
      },
      sT = {
        33071: ke.ClampToEdgeWrapping,
        33648: ke.MirroredRepeatWrapping,
        10497: ke.RepeatWrapping
      },
      aT = (ke.BackSide, ke.FrontSide, ke.NeverDepth, ke.LessDepth, ke.EqualDepth, ke.LessEqualDepth, ke.GreaterEqualDepth, ke.NotEqualDepth, ke.GreaterEqualDepth, ke.AlwaysDepth, ke.AddEquation, ke.SubtractEquation, ke.ReverseSubtractEquation, ke.ZeroFactor, ke.OneFactor, ke.SrcColorFactor, ke.OneMinusSrcColorFactor, ke.SrcAlphaFactor, ke.OneMinusSrcAlphaFactor, ke.DstAlphaFactor, ke.OneMinusDstAlphaFactor, ke.DstColorFactor, ke.OneMinusDstColorFactor, ke.SrcAlphaSaturateFactor, {
        SCALAR: 1,
        VEC2: 2,
        VEC3: 3,
        VEC4: 4,
        MAT2: 4,
        MAT3: 9,
        MAT4: 16
      }),
      hT = {
        POSITION: "position",
        NORMAL: "normal",
        TEXCOORD_0: "uv",
        TEXCOORD0: "uv",
        TEXCOORD: "uv",
        TEXCOORD_1: "uv2",
        COLOR_0: "color",
        COLOR0: "color",
        COLOR: "color",
        WEIGHTS_0: "skinWeight",
        WEIGHT: "skinWeight",
        JOINTS_0: "skinIndex",
        JOINT: "skinIndex"
      },
      cT = {
        scale: "scale",
        translation: "position",
        position: "position",
        rotation: "quaternion",
        weights: "morphTargetInfluences"
      },
      uT = {
        CUBICSPLINE: ke.InterpolateSmooth,
        LINEAR: ke.InterpolateLinear,
        STEP: ke.InterpolateDiscrete
      },
      lT = {
        OPAQUE: "OPAQUE",
        MASK: "MASK",
        BLEND: "BLEND"
      },
      dT = {
        "image/png": ke.RGBAFormat,
        "image/jpeg": ke.RGBFormat
      };

    function pT(t, e) {
      return "string" != typeof t || "" === t ? "" : /^(https?:)?\/\//i.test(t) || /^data:.*,.*$/i.test(t) || /^blob:.*$/i.test(t) ? t : e + t
    }

    function fT(t, e) {
      void 0 !== e.extras && ("object" == typeof e.extras ? t.userData = e.extras : console.warn("GLTFLoader: Ignoring primitive type .extras, " + e.extras))
    }

    function gT(t, e) {
      if (t.updateMorphTargets(), void 0 !== e.weights)
        for (var i = 0, n = e.weights.length; i < n; i++) t.morphTargetInfluences[i] = e.weights[i];
      if (e.extras && Array.isArray(e.extras.targetNames)) {
        var o = e.extras.targetNames;
        if (t.morphTargetInfluences.length === o.length) {
          t.morphTargetDictionary = {};
          for (i = 0, n = o.length; i < n; i++) t.morphTargetDictionary[o[i]] = i
        } else console.warn("GLTFLoader: Invalid extras.targetNames length. Ignoring names.")
      }
    }

    function mT(t, e) {
      return t.indices === e.indices && yT(t.attributes, e.attributes)
    }

    function yT(t, e) {
      if (Object.keys(t).length !== Object.keys(e).length) return !1;
      for (var i in t)
        if (t[i] !== e[i]) return !1;
      return !0
    }

    function vT(t, e) {
      if (t.length !== e.length) return !1;
      for (var i = 0, n = t.length; i < n; i++)
        if (t[i] !== e[i]) return !1;
      return !0
    }

    function bT(t) {
      if (t.isInterleavedBufferAttribute) {
        for (var e = t.count, i = t.itemSize, n = t.array.slice(0, e * i), o = 0; o < e; ++o) n[o] = t.getX(o), i >= 2 && (n[o + 1] = t.getY(o)), i >= 3 && (n[o + 2] = t.getZ(o)), i >= 4 && (n[o + 3] = t.getW(o));
        return new ke.BufferAttribute(n, i, t.normalized)
      }
      return t.clone()
    }

    function wT(t, e, i) {
      for (var n in i.extensions) void 0 === t[n] && (e.userData.gltfExtensions = e.userData.gltfExtensions || {}, e.userData.gltfExtensions[n] = i.extensions[n])
    }

    function xT(t, e, i) {
      var n = e.attributes;
      for (var o in n) {
        var r = hT[o],
          s = i[n[o]];
        r && (r in t.attributes || t.addAttribute(r, s))
      }
      void 0 === e.indices || t.index || t.setIndex(i[e.indices]), void 0 !== e.targets && function(t, e, i) {
        for (var n = !1, o = !1, r = 0, s = e.length; r < s && (void 0 !== (c = e[r]).POSITION && (n = !0), void 0 !== c.NORMAL && (o = !0), !n || !o); r++);
        if (n || o) {
          var a = [],
            h = [];
          for (r = 0, s = e.length; r < s; r++) {
            var c = e[r],
              u = "morphTarget" + r;
            if (n) {
              var l = void 0;
              if (void 0 !== c.POSITION) {
                (l = bT(i[c.POSITION])).name = u;
                for (var d = t.attributes.position, p = 0, f = l.count; p < f; p++) l.setXYZ(p, l.getX(p) + d.getX(p), l.getY(p) + d.getY(p), l.getZ(p) + d.getZ(p))
              } else l = t.attributes.position;
              a.push(l)
            }
            if (o) {
              var g = void 0;
              if (void 0 !== c.NORMAL) {
                var m = bT(i[c.NORMAL]);
                m.name = u;
                var y = t.attributes.normal;
                for (p = 0, f = m.count; p < f; p++) m.setXYZ(p, m.getX(p) + y.getX(p), m.getY(p) + y.getY(p), m.getZ(p) + y.getZ(p))
              } else g = t.attributes.normal;
              h.push(g)
            }
          }
          n && (t.morphAttributes.position = a), o && (t.morphAttributes.normal = h)
        }
      }(t, e.targets, i), fT(t, e)
    }
    var TT = "glTF",
      kT = 1313821514,
      IT = 5130562,
      CT = function(t) {
        this.name = iT.KHR_BINARY_GLTF, this.content = null, this.body = null;
        var e = new DataView(t, 0, 12);
        if (this.header = {
            magic: ke.LoaderUtils.decodeText(new Uint8Array(t.slice(0, 4))),
            version: e.getUint32(4, !0),
            length: e.getUint32(8, !0)
          }, this.header.magic !== TT) throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
        if (this.header.version < 2) throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");
        for (var i = new DataView(t, 12), n = 0; n < i.byteLength;) {
          var o = i.getUint32(n, !0);
          n += 4;
          var r = i.getUint32(n, !0);
          if (n += 4, r === kT) {
            var s = new Uint8Array(t, 12 + n, o);
            this.content = ke.LoaderUtils.decodeText(s)
          } else if (r === IT) {
            var a = 12 + n;
            this.body = t.slice(a, a + o)
          }
          n += o
        }
        if (null === this.content) throw new Error("THREE.GLTFLoader: JSON content not found.")
      },
      _T = function(t) {
        function e() {
          return t.call(this) || this
        }
        return i(e, t), e.prototype.setStaticModel = function(t) {
          this._model = t, this.add(this._model)
        }, e.prototype.setAnimationModel = function(t, e) {
          if (this._model = t, this.add(this._model), e && e.length > 0) {
            this._animationMixer = new ke.AnimationMixer(this._model);
            var i = e[0];
            this._animationMixer.clipAction(i).play()
          }
        }, e.prototype.update = function(t) {
          var e;
          null === (e = this._animationMixer) || void 0 === e || e.update(t)
        }, e
      }(ke.Object3D),
      BT = new ke.LoadingManager;
    BT.setURLModifier((function(t) {
      return yi(t)
    }));
    var ST = new ke.OBJLoader(BT);

    function PT(t, e) {
      return "dlc/model/".concat(t, ".").concat(e ? "gltf" : "bin")
    }

    function DT(t) {
      return ST.parse(t)
    }

    function MT(t) {
      return r(this, void 0, void 0, (function() {
        var e, i, n, o;
        return s(this, (function(r) {
          switch (r.label) {
            case 0:
              return e = t.substring(0, t.lastIndexOf("/") + 1), [4, Oi(t)];
            case 1:
              return i = r.sent(), (n = new ke.MTLLoader(BT)).setPath(e), n.setTexturePath(e), (o = n.parse(i)).preload(), [2, o]
          }
        }))
      }))
    }

    function FT(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n, o, r, a, h, c, u, l, d;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              return i = new _T, t.endsWith(".gltf") ? (o = t.substring(0, t.lastIndexOf("/") + 1), (r = new Qx).setDefaultMaterial(ke.MeshPhongMaterial), [4, Oi(t)]) : [3, 3];
            case 1:
              return a = s.sent(), [4, new Promise((function(t, e) {
                r.parse(a, o, (function(e) {
                  t(e)
                }), (function(t) {
                  e(t)
                }))
              }))];
            case 2:
              return h = s.sent(), c = h.scene.children[0], h.animations ? i.setAnimationModel(c, h.animations) : i.setStaticModel(c), [2, i];
            case 3:
              return u = null, e ? [4, MT(e)] : [3, 5];
            case 4:
              u = s.sent(), s.label = 5;
            case 5:
              return t.endsWith(".bin") ? [4, Ri(t)] : [3, 7];
            case 6:
              return l = s.sent(), n = Ol(l), [3, 9];
            case 7:
              return [4, Oi(t)];
            case 8:
              n = s.sent(), s.label = 9;
            case 9:
              return (d = new ke.OBJLoader(BT)).setMaterials(u), i.setStaticModel(d.parse(n)), [2, i]
          }
        }))
      }))
    }
    var ET = function() {
        function t() {}
        return t.createObject3D = function() {
          var e = null;
          return t._poolCount > 0 ? (e = t._object3DList[--t._poolCount], t._object3DList[t._poolCount] = null) : (e = new ke.Object3D).name = t._objectId++, e
        }, t.releaseToPool = function(e) {
          e.parent && e.parent.remove(e);
          for (var i = e.children.length - 1; i >= 0; i--) e.remove(e.children[i]);
          t._poolCount >= t.maxPoolCount || (e.position.set(0, 0, 0), e.scale.set(1, 1, 1), e.quaternion.set(0, 0, 0, 1), t._object3DList[t._poolCount] = e, t._poolCount++)
        }, t._object3DList = [], t._poolCount = 0, t._objectId = 0, t.maxPoolCount = 150, t
      }(),
      LT = function() {
        function t() {}
        return t.getSimpleTexture = function(e, i, n) {
          return t._textureLoader.load(e, (function(t) {
            i && i(t)
          }), null, (function(t) {
            n && n(t)
          }))
        }, t.loadTexture = function(e) {
          return new Promise((function(i, n) {
            t._textureLoader.load(e, (function(t) {
              i(t)
            }), null, (function(t) {
              n(t)
            }))
          }))
        }, t._textureLoader = new ke.TextureLoader, t
      }(),
      OT = {};
    OT[Nl.Word1] = [], OT[Nl.Word2] = [], OT[Nl.Word3] = [];
    var RT = {};
    var GT = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          return i.type = e, i
        }
        return i(e, t), e.prototype.load = function() {
          var t = this,
            e = "".concat(ui, "/word/word").concat(this.type, ".bin");
          RT[e] ? this.onLoadBuffer(RT[e]) : Ri(e).then((function(i) {
            RT[e] = Ol(i), t.onLoadBuffer(RT[e])
          }))
        }, e.prototype.onLoadBuffer = function(t) {
          var i = .15,
            n = DT(t);
          if (n.rotation.set(90 * Zs, 0, 0), n.scale.set(i, i, i), n.position.set(0, 0, 0), n.traverse((function(t) {
              if (t instanceof ke.Mesh) {
                t.renderOrder = 101, t.castShadow = !0, t.receiveShadow = !0;
                var e = t.material;
                e.shininess = 50, e.specular.set(8947848), e.transparent = !1, e.color = Oe, e.depthFunc = ke.LessEqualDepth, e.depthWrite = !0, e.depthTest = !0, e.needsUpdate = !0, e.fog = !1, t.frustumCulled = !0
              }
            })), this.modelObject = n, this.modelObject.name = "normal", this.modelObject.renderOrder = -200, this.behindModelObject = this.modelObject.clone(), this.behindModelObject.name = "behind", this.behindModelObject.renderOrder = -100, !e.behindMat) {
            var o = e.behindMat = new ke.MeshBasicMaterial;
            o.transparent = !1, o.color = Re, o.depthFunc = ke.GreaterEqualDepth, o.depthWrite = !1, o.depthTest = !0, o.fog = !1, o.needsUpdate = !0
          }
          this.behindModelObject.traverse((function(t) {
            t instanceof ke.Mesh && (t.renderOrder = 100, t.castShadow = !1, t.receiveShadow = !1, t.frustumCulled = !0, t.material = e.behindMat)
          })), this.modelObject.visible = !1, this.behindModelObject.visible = !1, e.texture ? this.setTexture(e.texture) : this.loadTexture("".concat(ui, "/word/word.png"))
        }, e.prototype.setTexture = function(t) {
          this.modelObject.traverse((function(e) {
            if (e instanceof ke.Mesh) {
              var i = e.material;
              i.map = t, i.needsUpdate = !0
            }
          })), this.modelObject.visible = !0, this.behindModelObject.visible = !0, this.dispatchEvent(e.EVENT_LOADED)
        }, e.prototype.loadTexture = function(t) {
          var i = this;
          LT.getSimpleTexture(t, (function(t) {
            t && (t.flipY = !0, t.premultiplyAlpha = !1, e.texture = t, i.setTexture(t))
          }))
        }, e.EVENT_LOADED = "loaded", e
      }(Ll),
      AT = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._isDestroyed = !1, e._breakDeltaTime = 0, e._breakOffset = 0, e._breakDistanceX = 0, e._breakDistanceZ = 0, e._breakStartX = 0, e._breakStartZ = 0, e._breakRotateSpeed = 0, e.curY = 0, e.curAngle = 0, e._modelLoaded = !1, e.setThreeObj(ET.createObject3D()), e
        }
        return i(e, t), e.prototype.setData = function(t) {
          this.data = t, this.curY = this.threeObj.position.y = this.data.y, this.updateRotation(this.data.centerAngle)
        }, e.prototype._loadWord = function() {
          if (this._modelLoaded = !0, OT[this.data.type].length > 0) {
            var t = OT[this.data.type];
            this.setWordModel(t.pop())
          } else this.setWordModel(new GT(this.data.type))
        }, e.prototype.setWordModel = function(t) {
          var e = this;
          this.wordModel = t, this.wordModel.modelObject ? (this.threeObj.add(this.wordModel.behindModelObject), this.threeObj.add(this.wordModel.modelObject)) : (this.wordModel.addOnceListener(GT.EVENT_LOADED, (function() {
            e.threeObj.add(e.wordModel.behindModelObject), e.threeObj.add(e.wordModel.modelObject)
          }), this), this.wordModel.load())
        }, e.prototype.flyUp = function() {
          this.data.setRotateSpeed(0, 0), this.data.setMoveSpeed(0);
          var t = (RI.curRotation + this.data.centerAngle) * Zs;
          this.threeObj.quaternion.setFromAxisAngle(Ae, t), cI.sceneView.add(this.threeObj);
          var e = Math.sin(t),
            i = Math.cos(t),
            n = new ke.Vector3;
          n.x = 3 * e, n.y = this.threeObj.position.y + cI.sceneObject.position.y, n.z = 3 * i;
          var o = n.project(cI.camera),
            r = (o.x + 1) * Pe / 2,
            s = -(o.y - 1) * De / 2;
          $x.instance.collectWord(this.data.type, r, s), this.destroy()
        }, e.prototype.breakDown = function(e) {
          if (!this.isBreak) {
            t.prototype.breakDown.call(this, e), this.data.setRotateSpeed(0, 0), this.data.setMoveSpeed(0);
            var i = (RI.curRotation + this.data.centerAngle) * Zs;
            this.threeObj.quaternion.setFromAxisAngle(Ae, i), cI.sceneObject.add(this.threeObj), this.gravity = 50, this._breakDeltaTime = 0;
            var n = Math.sin(i),
              o = Math.cos(i);
            this._breakStartX = 3 * n, this._breakStartZ = 3 * o, this._breakRotateSpeed = -45 * Zs * .04, this._breakDistanceX = 15 * n, this._breakDistanceZ = 15 * o
          }
        }, e.prototype.updateRotation = function(t) {
          this.curAngle = t;
          var e = t * Zs;
          this.threeObj.rotation.set(0, e, 0);
          var i = 3 * Math.sin(e),
            n = 3 * Math.cos(e);
          this.threeObj.position.x = i, this.threeObj.position.z = n
        }, e.prototype.update = function(t) {
          !this._modelLoaded && this.data.floor - 8 < RI.curFloor && this._loadWord(), 0 !== this.gravity ? (this._breakDeltaTime += t, this._breakOffset = -this.gravity * this._breakDeltaTime * this._breakDeltaTime * .5, this.threeObj.position.set(this._breakStartX + this._breakDeltaTime * this._breakDistanceX, this.curY + this._breakOffset, this._breakStartZ + this._breakDeltaTime * this._breakDistanceZ), 0 !== this._breakRotateSpeed && this.threeObj.rotateX(this._breakRotateSpeed), this._breakOffset < -20 && this.destroy()) : (0 !== this.data.rotationSpeed && this.curAngle !== this.data.centerAngle && this.updateRotation(this.data.centerAngle), 0 !== this.data.moveSpeed && this.curY !== this.data.curY && (this.threeObj.position.y = this.curY = this.data.curY))
        }, e.prototype.destroy = function() {
          this._isDestroyed || (this._isDestroyed = !0, this.wordModel && this.wordModel.modelObject && (this.wordModel.modelObject.parent && (this.threeObj.remove(this.wordModel.modelObject), this.threeObj.remove(this.wordModel.behindModelObject)), OT[this.data.type].push(this.wordModel), this.wordModel = null), ET.releaseToPool(this.threeObj), t.prototype.destroy.call(this))
        }, e
      }(Xx),
      NT = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.bg = $h(556, 550), e.addChild(e.bg), e.addTitle("");
          var i = new PIXI.Container,
            n = Xh("", 9092672, !0, "left", 36);
          i.addChild(n);
          var o = Xh("".concat(uC.bestScore), uC.bestScore >= 300 ? 16777215 : 16711680, !0, "left", 36);
          o.x = n.x + n.width, i.addChild(o);
          var r = Xh("/".concat(300, ""), 9092672, !0, "left", 36);
          return r.x = o.x + o.width, i.addChild(r), i.y = 250, i.x = (e.bg.width - i.width) / 2, e.addChild(i), e.addCloseButton(), e.okButton = new Ru("button_ok.png"), e.okButton.x = e.bg.width / 2, e.okButton.y = 460, e.okButton.on(Tu, e.close, e), e.addSkin(e.okButton), e
        }
        return i(e, t), e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this)
        }, e.clsName = "GameModeUnlockView", e
      }(Qg);

    function jT(t) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return uC.bestScore >= 300 ? t <= Jh.Challenge ? [2, !1] : (qI(""), t !== Jh.Collection ? [3, 2] : [4, di(ui)]) : (tc.showPanel(NT), [2, !1]);
            case 1:
              e.sent(),
                function() {
                  for (var t = Nl.Word1; t <= Nl.Word3; t++) {
                    var e = "".concat(ui, "/word/word").concat(t, ".bin");
                    RT[e] || (RT[e] = Ol((i = e, wi.readFileSync(i))))
                  }
                  var i
                }(), e.label = 2;
            case 2:
              return [4, Bi("game_mode")];
            case 3:
              return e.sent(), tc.showPanel(dy, t), [2, !0]
          }
        }))
      }))
    }

    function VT() {
      var t = WT();
      return t ? t.name : ""
    }

    function UT() {
      return Qe().getTime() - Ze(new Date(lh.dailyModeStartTime).getTime()).getTime()
    }

    function WT() {
      var t = UT();
      if (t < 0) return null;
      var e = Math.floor(t / pm) % lh.dailyModeOrders.length,
        i = lh.dailyModeOrders[e];
      return Mh.getMode(i)
    }

    function qT(t) {
      var e = Qe().getTime(),
        i = e - Ze(new Date(lh.dailyModeStartTime).getTime()).getTime(),
        n = Math.floor(i / pm) % lh.dailyModeOrders.length,
        o = lh.dailyModeOrders.indexOf(t);
      return n === o ? new Date(e) : o > n ? new Date(e - ei * (lh.dailyModeOrders.length - (o - n))) : new Date(e - ei * (n - o))
    }

    function HT(t) {
      return function(t, e) {
        e || (e = "yy-MM-dd hh:mm:ss");
        var i = {
          "y+": t.getFullYear(),
          "M+": t.getMonth() + 1,
          "d+": t.getDate(),
          "h+": t.getHours(),
          "m+": t.getMinutes(),
          "s+": t.getSeconds(),
          "q+": Math.floor((t.getMonth() + 3) / 3),
          "S+": t.getMilliseconds()
        };
        for (var n in i)
          if (new RegExp("(" + n + ")").test(e))
            if ("y+" === n) e = e.replace(RegExp.$1, ("" + i[n]).substr(4 - RegExp.$1.length));
            else if ("S+" === n) {
          var o = RegExp.$1.length;
          o = 1 === o ? 3 : o, e = e.replace(RegExp.$1, ("00" + i[n]).substr(("" + i[n]).length - 1, o))
        } else e = e.replace(RegExp.$1, 1 === RegExp.$1.length ? i[n] : ("00" + i[n]).substr(("" + i[n]).length));
        return e
      }(qT(t), "yyyy/MM/dd")
    }

    function $T() {
      return !!$hostDef.dailyMode && null != WT()
    }

    function XT(t, e) {
      return t === Jh.Collection ? e + "" : t === Jh.Blood || t === Jh.Mutation ? e + "" : t === Jh.Power || t === Jh.Punch ? e + "" : oi(e)
    }

    function YT(t, e) {
      return t === Jh.Collection ? e + "" : t === Jh.Blood || t === Jh.Mutation ? e + "" : t === Jh.Power || t === Jh.Punch ? e + "" : t === Jh.FastDrop ? e + "" : e + ""
    }

    function zT(t) {
      var e = Mh.getMode(t);
      return t !== Jh.FastDrop && RI.gameModeScore >= e.targetValue
    }

    function KT() {
      return r(this, arguments, void 0, (function(t) {
        var e, i;
        return void 0 === t && (t = 0), s(this, (function(n) {
          switch (n.label) {
            case 0:
              return n.trys.push([0, 2, , 3]), [4, HP({
                type: t
              })];
            case 1:
              return (e = n.sent()).syncData && (i = uC.speGameCnt, uC.syncData(e.syncData), uC.speGameCnt < i && rc("".concat(2, ""))), [3, 3];
            case 2:
              return oc(n.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function JT(t, e, i) {
      return r(this, arguments, void 0, (function(t, e, i, n) {
        var o;
        return void 0 === n && (n = !1), s(this, (function(r) {
          switch (r.label) {
            case 0:
              return r.trys.push([0, 2, , 3]), [4, uD({
                day: t,
                begin: e,
                len: i,
                self: n ? 1 : 0
              })];
            case 1:
              return [2, r.sent()];
            case 2:
              return o = r.sent(), console.warn(o), [2, null];
            case 3:
              return [2]
          }
        }))
      }))
    }
    var QT = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.isRevive = !1, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = Wh("dlc/ui/coin/coin_revive_view.png"), this.bg.width = 557, this.bg.height = 631, this.bg.interactive = !0, this.addChild(this.bg), this.addCloseButton(), this.useGroup = new PIXI.Container, this.useButton = new Ru("button_coin_revive.png", !1), this.useButton.on(Tu, this.onUse, this), this.useGroup.addChild(this.useButton.skin), this.limitImage = Wh("dlc/ui/coin/coin_limit.png"), this.limitImage.width = 180, this.limitImage.height = 23, this.limitImage.x = this.useButton.x + (this.useButton.width - this.limitImage.width) / 2, this.limitImage.y = 85, this.useGroup.addChild(this.limitImage), this.shareButton = new Ru("button_help.png", !1), this.shareButton.on(Tu, this.onShare, this), this.videoButton = new Ru("button_video_coin.png", !1), this.videoButton.on(Iu, this.onVideo, this), this.buttonGroup = new im(10), this.buttonGroup.y = 435, this.buttonGroup.addButton(this.shareButton), this.buttonGroup.addButton(this.useGroup), this.buttonGroup.addButton(this.videoButton), this.addChild(this.buttonGroup), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.tipImage = Wh("dlc/ui/coin/coin_tip.png"), this.tipImage.width = 395, this.tipImage.height = 23, this.tipImage.x = (this.bg.width - this.tipImage.width) / 2, this.tipImage.y = 520, this.addChild(this.tipImage), this.coinText = zh("0", 50, 16777215, "center"), this.coinText.scale.x = 2, this.coinText.scale.y = 2, this.coinText.x = 270, this.coinText.y = 125, this.addChild(this.coinText), this.addToDestroy = mr((function() {
            var e = uC.coin;
            t.coinText.text = e + "", t.useButton.setFrameId(e > 0 ? "button_coin_revive.png" : "button_coin_revive_gray.png"), t.useButton.interactive = e > 0, t.tipImage.visible = !t.isRevive, t.useGroup.visible = t.isRevive, t.shareButton.visible = $hostDef.coinButtonEnable && !$hostDef.censor, t.videoButton.visible = e < 5 && !t.isRevive, t.buttonGroup.reLayout(), t.buttonGroup.x = (t.bg.width - t.buttonGroup.width) / 2
          }))
        }, e.prototype.onVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t, e;
            return s(this, (function(i) {
              switch (i.label) {
                case 0:
                  if (uC.coin >= 5) return rc(""), [2];
                  if ((t = Date.now() - ws.lastCoinVideoTime) < 1e3 * $hostDef.coinVideoDuration) return [2, rc("".concat($hostDef.coinVideoDuration - Math.floor(t / 1e3), ""))];
                  i.label = 1;
                case 1:
                  return i.trys.push([1, , 3, 4]), [4, mu(10)];
                case 2:
                  return (e = i.sent()) === ve.cancel ? [2, gu("")] : e === ve.fail ? [2, rc(fu)] : [3, 4];
                case 3:
                  return [7];
                case 4:
                  return ws.lastCoinVideoTime = Je.curTime, Fy(1), [2]
              }
            }))
          }))
        }, e.prototype.onShare = function() {
          var t = this;
          NI(this.isRevive ? "" : ""),
            function() {
              return r(this, void 0, void 0, (function() {
                var t;
                return s(this, (function(e) {
                  return [2, Xc((t = uh.getRandomInviteWordByType(bs.revive)).type, t.desc, t.image, null, t.id)]
                }))
              }))
            }().then((function(e) {
              if (Uc(e)) {
                if (jI(t.isRevive ? "" : ""), !(uC.coin >= 5) && !(Je.curTime - ws.lastShareCoinTime < 2e3) && (ws.lastShareCoinTime = Je.curTime, Ly < 0 && ((Ly = wx.getStorageSync("lastReviveShareTime")) && !isNaN(Ly) || (Ly = Je.curTime)), Oy < 0 && ((Oy = wx.getStorageSync("todayReviveShareCount")) && !isNaN(Oy) || (Oy = 0)), ti(new Date(Ly), new Date(Je.curTime)) || (Oy = 0), Ly = Je.curTime, Nh("todayReviveShareCount", ++Oy), Nh("lastReviveShareTime", Ly), Ry())) {
                  var i = 1e3 * (Math.random() * lh.addItemDelay[0] + lh.addItemDelay[1]);
                  isNaN(i) && (i = 3e3), setTimeout((function() {
                    uC.coin < 5 && Fy(1).then((function() {
                      Nh("lastGetReviveShareTime", Gy = Je.curTime)
                    }))
                  }), i)
                }
              } else !$hostDef.censor && $hostDef.showGroupText && rc("", 2100)
            }))
        }, e.prototype.onUse = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return uC.coin <= 0 ? [2] : (this.useButton.interactive = !1, [4, Ey()]);
                case 1:
                  return t.sent() && (rc("1"), this.close(), Lg.dispatchEvent(Sg)), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.isRevive = e && e.isRevive
        }, e.prototype.onHide = function() {
          t.prototype.onHide.call(this), Lg.dispatchEvent(Bg)
        }, e.prototype.onDestroy = function() {
          this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null), this.limitImage && (this.limitImage.destroy({
            texture: !0,
            baseTexture: !0
          }), this.limitImage = null), this.tipImage && (this.tipImage.destroy({
            texture: !0,
            baseTexture: !0
          }), this.tipImage = null), this.useButton && (this.useButton.destroy(), this.useButton = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.videoButton && (this.videoButton.destroy(), this.videoButton = null), t.prototype.onDestroy.call(this)
        }, e.clsName = "CoinView", o([po], e.prototype, "isRevive", void 0), e
      }(Qg),
      ZT = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.container = new PIXI.Container, e.container.interactive = !0, e.container.width = 160, e.container.height = 118;
          var i = new PIXI.Container;
          return e.bg = jh("next_task_skin.png"), e.bg.anchor.set(0, 0), i.addChild(e.bg), e.icon = jh("empty.png"), e.icon.x = 11, e.icon.y = 44, i.addChild(e.icon), e.descText = Xh("", "#FFFFFF", !1, "left", 18), e.descText.x = 82, e.descText.y = 50, i.addChild(e.descText), e.progressText = Xh("0/0", "#FFFFFF", !1, "left", 18), e.progressText.x = 82, e.progressText.y = 80, i.addChild(e.progressText), i.width = e.bg.width, i.height = e.bg.height, i.x = -i.width / 2, i.y = -i.height / 2, e.container.addChild(i), e.interactive = !0, e.width = e.bg.width, e.on(Tu, e._tapSkin, e), e
        }
        return i(e, t), e.prototype.setTask = function(t) {
          this.taskId = t;
          var e = sh.getTask(t);
          if (e) { var _ut = uC.taskModel.getTask(t); this.icon.texture = Vh("item".concat(e.item, ".png")), this.descText.text = Ds[e.type], this.progressText.text = "".concat(_ut ? _ut.progress : 0, "/").concat(e.value), this.progressText.x = this.descText.x + (this.descText.width - this.progressText.width) / 2, this.progressText.x < this.descText.x && (this.progressText.x = this.descText.x) }
        }, e.prototype._tapSkin = function() {
          if (this.taskId) {
            var t = sh.getTask(this.taskId);
            if (!t) return;
            var e = oh.getItem(t.item),
              i = 0;
            switch (e.skinType) {
              case 0:
                i = 0 !== e.gold ? 1 : 0;
                break;
              case 1:
                i = 2;
                break;
              case 2:
                i = 3
            }
            tc.showPanel(lm, {
              tab: i,
              skinId: e.id
            })
          } else tc.showPanel(lm)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          t.prototype.destroy.call(this), this.container = null
        }, e
      }(Lu),
      tk = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.container = new PIXI.Container, e.container.interactive = !0, e.light = jh("light.png"), e.light.scale = new PIXI.Point(.75, .75), e.light.anchor.set(.5, .5), e.container.addChild(e.light), e.button = new Ru("icon_pk.png"), e.container.addChild(e.button.skin), e.button.x = 0, e.button.y = 0, e.showTween(), e
        }
        return i(e, t), Object.defineProperty(e.prototype, "realWidth", {
          get: function() {
            return 73
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.showTween = function() {
          TWEEN.killTweensOf(this.light), this.light.rotation = 0, new TWEEN.Tween(this.light).to({
            rotation: 2 * Math.PI
          }, 3e3).easing(TWEEN.Easing.Linear.None).repeat(1 / 0).start()
        }, e.prototype.hideTween = function() {
          TWEEN.killTweensOf(this.light)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          this.hideTween(), this.button && (this.button.destroy(), this.button = null), t.prototype.destroy.call(this), this.container = null
        }, e
      }(Lu),
      ek = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          e.bg = $h(635, 920), e.addChild(e.bg);
          var i = Xh("!", 16777215, !0, "left", 28);
          e.addChild(i), i.x = (e.bg.width - i.width) / 2, i.y = 110;
          var n = Wh("dlc/ui/pk_bg.png");
          return n.width = 500, n.height = 400, n.x = (e.bg.width - n.width) / 2, n.y = 160, e.addChild(n), e.addTitle("", "#f19d07"), e.addCloseButton(), e.descText = Yh("300\n\n/\n2026332359", 12369869, 500, 24, !1, "left", 10), e.addChild(e.descText), e.descText.x = n.x, e.descText.y = n.y + n.height + 20, e.startButton = new Ru("button_start.png"), e.startButton.x = e.bg.width / 2, e.startButton.y = e.bg.height - 90, e.startButton.on(Tu, e._tapStartGame, e), e.addSkin(e.startButton), e
        }
        return i(e, t), e.prototype._tapStartGame = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  if (this.isDisposed) return [2];
                  if ($y.isOfficeEnd) return $y.showOfficeEndTip(), this.close(), [2];
                  this.close(), e.label = 1;
                case 1:
                  return e.trys.push([1, 3, , 4]), [4, _I(Jh.Classics, 0, 0, !0)];
                case 2:
                  return e.sent(), [3, 4];
                case 3:
                  return oc(t = e.sent()), DEVELOP && console.warn("e:", t), tc.showPanel(Cw), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = (Pe - this.bg.width) / 2, this.y = (De - this.bg.height) / 2
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null), this.startButton && (this.startButton.destroy(), this.startButton = null)
        }, e.clsName = "WxChallengeView", e
      }(Qg),
      ik = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.container = null, e.thumb = null, e.thumbMask = null;
          return e.container = new PIXI.Container, e.container.interactive = !0, e.container.width = 103, e.container.height = 103, e.bg = jh("coin_bg.png"), e.bg.anchor.set(.5, .5), e.container.addChild(e.bg), e.thumb = jh("coin_thumb.png"), e.thumb.anchor.set(.5, .5), e.container.addChild(e.thumb), e.thumbMask = new PIXI.Graphics, e.thumbMask.x = -e.thumb.width / 2, e.thumbMask.y = e.thumb.height / 2, e.thumbMask.beginFill(0), e.thumbMask.drawRect(0, 0, e.thumb.width, e.thumb.height), e.thumbMask.endFill(), e.container.addChild(e.thumbMask), e.thumb.mask = e.thumbMask, e.stateIcon = jh("coin_full.png"), e.stateIcon.scale.x = 2, e.stateIcon.scale.y = 2, e.stateIcon.x = -e.stateIcon.width / 2, e.stateIcon.y = -71.5, e.container.addChild(e.stateIcon), e.container.on(Tu, e.onTapDown, e), e.container.on(ku, e.onTapUp, e), e.container.on(Cu, e.onTapUp, e), e.container.on(_u, e.onTapUp, e), e.container.on(Bu, e.onTapUp, e), e.addToDestroy = mr((function() {
            e.stateIcon.visible = 0 === uC.coin || uC.coin >= 5, e.stateIcon.visible && (e.stateIcon.texture = Vh(0 === uC.coin ? "coin_empty.png" : "coin_full.png")), e.progress = uC.coin / 5
          })), e
        }
        return i(e, t), e.prototype.onTapUp = function() {
          this.container && this.container.scale && this.container.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this.container && this.container.scale && this.container.scale.set(.9, .9)
        }, Object.defineProperty(e.prototype, "progress", {
          get: function() {
            return this.thumbMask.scale.y
          },
          set: function(t) {
            t < 0 && (t = 0), this.thumbMask.scale.y = -Math.min(t, 1)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          t.prototype.destroy.call(this), this.container = null
        }, e
      }(Lu),
      nk = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.container = new PIXI.Container, e.container.interactive = !0, e.bg = jh("button_setting.png"), e.bg.anchor.set(.5, .5), e.container.addChild(e.bg), e.rendPoint = jh("redpoint2.png"), e.rendPoint.anchor.set(.5, .5), e.rendPoint.y = -e.bg.height / 2 + 5, e.rendPoint.x = e.bg.width / 2 - 5, e.container.addChild(e.rendPoint), e.container.on(Tu, e.onTapDown, e), e.container.on(ku, e.onTapUp, e), e.container.on(Cu, e.onTapUp, e), e.container.on(_u, e.onTapUp, e), e.container.on(Bu, e.onTapUp, e), e
        }
        return i(e, t), e.prototype.showRedPoint = function(t) {
          this.rendPoint.visible = t
        }, e.prototype.onTapUp = function() {
          this._destroyed || this.container.scale.set(1, 1)
        }, e.prototype.onTapDown = function() {
          this._destroyed || this.container.scale.set(.9, .9)
        }, Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.container
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function() {
          t.prototype.destroy.call(this)
        }, e
      }(Lu);

    function ok() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, QP({})];
            case 1:
              return (t = e.sent()).syncData && uC.syncData(t.syncData), [2, t];
            case 2:
              return e.sent(), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }
    var rk = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          i.gap = 10, i.type = e, i.settingContainer = new PIXI.Container;
          for (var n = i.buttons = [], o = WT(), r = sh.getTasks(), s = [], a = 0; a < r.length; a++) {
            var h = r[a];
            if (0 !== h.getTip) {
              var c = uC.taskModel.getTask(h.id);
              if (!c || !c.isReward) {
                if (h.type >= 203 && h.type <= 208)
                  if (!o || h.type - 203 + Jh.Collection !== o.type) continue;
                s.push({
                  task: h.id,
                  percent: c ? c.progress / h.value : 0
                })
              }
            }
          }
          return s.length > 0 && (s.sort((function(t, e) {
            return e.percent - t.percent
          })), i.taskButton = new ZT, i.addSkinTo(i.taskButton, i.settingContainer), n.push(i.taskButton), i.taskButton.setTask(s[0].task)), i.settingButton = new nk, i.settingButton.on(Tu, i._tapSetting, i), i.addSkinTo(i.settingButton, i.settingContainer), n.push(i.settingButton), i.challengeButton = new tk, i.challengeButton.on(Tu, i._tapChallenge, i), i.addSkinTo(i.challengeButton, i.settingContainer), n.push(i.challengeButton), i.challengeButton.visible = !$y.isOfficeEnd, i.skinButton = new il, i.skinButton.on(Tu, i._tapSkin, i), i.addSkinTo(i.skinButton, i.settingContainer), n.push(i.skinButton), i.coinButton = new ik, i.coinButton.on(Tu, i._tapCoin, i), i.addSkinTo(i.coinButton, i.settingContainer), n.push(i.coinButton), i.coinButton.visible = $hostDef.coinEnable && 2 != i.type, i.shareButton = new Ru("button_small_share.png"), i.shareButton.on(Tu, i._tapShare, i), i.addSkinTo(i.shareButton, i.settingContainer), n.push(i.shareButton), i.shareRate = jh("share_gold_rate.png"), i.settingContainer.addChild(i.shareRate), i.addToDestroy = mr((function() {
            i.shareRate.visible = i.shareButton.visible && $hostDef.gameRate && !$hostDef.censor && uC.goldRate <= 0
          })), i.addToDestroy = mr((function() {
            i.settingButton.showRedPoint(mx.inviteRed)
          })), i.refreshPositions(), i
        }
        return i(e, t), e.prototype.refreshPositions = function() {
          var t = this.buttons.reduce((function(t, e) {
            return e.visible ? t + 1 : t
          }), 0);
          this.gap = t < 6 ? 20 : 10;
          for (var e = 0, i = 0; i < this.buttons.length; i++) {
            var n = this.buttons[i];
            if (n.visible) {
              var o = n instanceof tk ? n.realWidth / 2 : n.width / 2;
              n.x = e + o, e = n.x + o + this.gap
            }
          }
          this.shareRate.x = this.shareButton.x - this.shareRate.width / 2, this.shareRate.y = this.shareButton.y - this.shareButton.height / 2 - 10
        }, Object.defineProperty(e.prototype, "realWidth", {
          get: function() {
            for (var t = 0, e = 0; e < this.buttons.length; e++) {
              var i = this.buttons[e];
              if (i.visible) t += (i instanceof tk ? i.realWidth : i.width) + this.gap
            }
            return t - this.gap
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "skin", {
          get: function() {
            return this.settingContainer
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype._tapShare = function() {
          return r(this, void 0, void 0, (function() {
            var t = this;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [3, 3];
                case 1:
                  e.sent(), e.label = 2;
                case 2:
                  return [2];
                case 3:
                  return 0 === this.type ? NI("") : 1 === this.type ? NI("") : 2 === this.type && NI(""),
                    function() {
                      return r(this, void 0, void 0, (function() {
                        var t;
                        return s(this, (function(e) {
                          return [2, Xc((t = uh.getRandomInviteWordByType(bs.gold)).type, t.desc, t.image, null, t.id)]
                        }))
                      }))
                    }().then((function(e) {
                      return r(t, void 0, void 0, (function() {
                        return s(this, (function(t) {
                          switch (t.label) {
                            case 0:
                              return Uc(e) && (0 === this.type ? jI("") : 1 === this.type ? jI("") : 2 === this.type && jI("")), !$hostDef.gameRate || $hostDef.censor ? [3, 2] : [4, ok()];
                            case 1:
                              t.sent(), t.label = 2;
                            case 2:
                              return [2]
                          }
                        }))
                      }))
                    })), [2]
              }
            }))
          }))
        }, e.prototype._tapChallenge = function() {
          var t = this.challengeButton.visible;
          this.challengeButton.visible = !$y.isOfficeEnd, t != this.challengeButton.visible && this.refreshPositions(), $y.isOfficeEnd ? $y.showOfficeEndTip() : tc.showPanel(ek)
        }, e.prototype._tapCoin = function() {
          tc.showPanel(QT)
        }, e.prototype._tapSetting = function() {
          tc.showPanel(Ub)
        }, e.prototype._tapSkin = function() {
          tc.showPanel(lm)
        }, e.prototype.destroy = function() {
          this.taskButton && (this.taskButton.destroy(), this.taskButton = null), this.settingButton && (this.settingButton.destroy(), this.settingButton = null), this.skinButton && (this.skinButton.destroy(), this.skinButton = null), this.coinButton && (this.coinButton.destroy(), this.coinButton = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.challengeButton && (this.challengeButton.destroy(), this.challengeButton = null), t.prototype.destroy.call(this)
        }, e
      }(Lu),
      sk = 200,
      ak = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.createContents(), e
        }
        return i(e, t), e.prototype.createContents = function() {
          this.rankText = Xh("", "#FFFFFF", !1, "left", 30), this.rankText.x = 100 - this.rankText.width / 2, this.rankText.y = 5, this.addChild(this.rankText), this.avatarImage = new PIXI.Sprite, this.avatarImage.width = 80, this.avatarImage.height = 80, this.avatarImage.x = (sk - this.avatarImage.width) / 2, this.avatarImage.y = 50, this.addChild(this.avatarImage), this.nameText = Xh("", "#FFFFFF", !1, "left", 28), this.nameText.x = 100 - this.nameText.width / 2, this.nameText.y = this.avatarImage.y + this.avatarImage.height + 20, this.addChild(this.nameText), this.scoreText = Xh("", "#FFFFFF", !1, "left", 30), this.scoreText.x = 100 - this.scoreText.width / 2, this.scoreText.y = 200, this.addChild(this.scoreText)
        }, e.prototype.setRankInfo = function(t, e, i) {
          if (t) {
            var n = t.rank,
              o = n == e;
            this.rankText.style.fill = o ? "#00FF00" : "#FFFFFF", this.nameText.style.fill = o ? "#00FF00" : "#FFFFFF", this.scoreText.style.fill = o ? "#00FF00" : "#FFFFFF", this.rankText.text = n < 0 ? "" : "".concat(n), this.rankText.x = 100 - this.rankText.width / 2, this.nameText.text = hn(t.nick, 10), this.nameText.x = 100 - this.nameText.width / 2, this.scoreText.text = t.score, this.scoreText.x = 100 - this.scoreText.width / 2, Bm(this.avatarImage, o ? uC.image : t.image), this.visible = !0
          } else this.visible = !1
        }, e
      }(PIXI.Container),
      hk = function(t) {
        function e() {
          var e = t.call(this, !0, 1) || this;
          return e.lastScore = 0, e.rankItems = [], e._playScore = 0, e.createChildren(), e
        }
        return i(e, t), e.prototype.createChildren = function() {
          this.centerLayer = new PIXI.Container, this.addChild(this.centerLayer);
          var t = jh("title_bg.png");
          t.anchor.set(.5, .5), t.x = 375, t.y = 20, this.centerLayer.addChild(t);
          var e = Xh("", "#FFFFFF", !0);
          e.anchor.set(.5, .5), e.x = 375, e.y = t.y, this.centerLayer.addChild(e), this.scoreText = zh("0", 60, 16777215, "center"), this.scoreText.scale.x = 2, this.scoreText.scale.y = 2, this.scoreText.x = (Pe - 2 * this.scoreText.textWidth) / 2, this.scoreText.y = t.y + 10, this.centerLayer.addChild(this.scoreText);
          var i, n = _e / Be,
            o = this.rankLayer = new PIXI.Container;
          if (this.centerLayer.addChild(o), n < .7) {
            i = this.rankBg = jh("rank_bg_new.png"), this.rankBg.interactive = !0, i.width = 651, i.height = 317, i.x = 0, i.y = 0, o.addChild(i), this.rankBg.on(Tu, this._openRankView, this);
            var r = [{
              x: 14,
              y: 62
            }, {
              x: 225,
              y: 62
            }, {
              x: 436,
              y: 62
            }];
            this.rankItems = [];
            for (var s = 0; s < 3; s++) {
              var a = new ak;
              a.x = r[s].x, a.y = r[s].y, this.rankItems.push(a), o.addChild(a), a.visible = !1
            }
          }
          o.x = i ? (Pe - i.width) / 2 : 375, o.y = this.scoreText.y + this.scoreText.height / 2 + 100, !$hostDef.censor && $hostDef.gamesIcon && (this.tryGame = new Ml, this.tryGame.x = Pe - this.tryGame.width, this.tryGame.y = o.y - this.tryGame.height / 2 - 50, this.centerLayer.addChild(this.tryGame)), this.settingSkin = new rk(2), this.settingSkin.x = (Pe - this.settingSkin.realWidth) / 2, this.settingSkin.y = i ? o.y + i.height + 80 : o.y + 50 + 80, this.centerLayer.addChild(this.settingSkin.skin), this.shareButton = new Ru("button_flaunt.png"), this.shareButton.x = 375, this.shareButton.y = this.settingSkin.y + this.settingSkin.height / 2 + 60, this.shareButton.on("tap", this._onShare, this), this.centerLayer.addChild(this.shareButton.skin), this.backButton = new Ru("button_back.png"), this.backButton.x = 375, this.backButton.y = this.shareButton.y + this.shareButton.height / 2 + 60, this.backButton.on(Tu, this._backExpert, this), this.centerLayer.addChild(this.backButton.skin), this.dailyRewardButton = new Ru("icon_dailyreward.png"), this.dailyRewardButton.x = this.shareButton.x - 250, this.dailyRewardButton.y = this.shareButton.y, this.dailyRewardButton.on(Tu, (function() {
            tc.showPanel(ym)
          }), this), this.centerLayer.addChild(this.dailyRewardButton.skin), this.dailyRewardButton.visible = !0;
          var h = Math.min(900, this.centerLayer.height);
          if (this.centerLayer.y = (De - h) / 2, this.centerLayer.y + h > De - 0 - 20 && (this.centerLayer.y = De - 0 - h - 20), this.centerLayer.y < Mu.top && (this.centerLayer.y = Mu.top), Dl.canShow() && (this.leftBanner = new Dl, this.leftBanner.x = -10, this.leftBanner.y = 230, this.addChild(this.leftBanner)), this.programIcon = new El, "function" == typeof wx.getMenuButtonBoundingClientRect) {
            var c = wx.getMenuButtonBoundingClientRect(),
              u = (c.top + c.height / 2) / tc.uiScale,
              l = c.left / tc.uiScale;
            this.programIcon.y = u - this.programIcon.height / 2, this.programIcon.defaultX = this.programIcon.x = l - this.programIcon.width
          } else this.programIcon.defaultX = this.programIcon.x = Pe - this.programIcon.width - 200, this.programIcon.y = 21 + Math.max(0, Mu.top > 0 ? Mu.top - 30 : 0);
          this.addChild(this.programIcon), this.programIcon.visible = !$hostDef.censor && !tn(), this.topBackButton = new Ru("btn_back.png"), this.topBackButton.x = Mu.left + 50, this.topBackButton.y = Mu.top + 50, this.topBackButton.on(Tu, this._backExpert, this), this.addChild(this.topBackButton.skin)
        }, e.prototype._openRankView = function() {
          tc.showPanel(yw)
        }, e.prototype.close = function() {
          t.prototype.close.call(this)
        }, e.prototype._backExpert = function() {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(t) {
              return this.close(), xw() ? tc.showPanel(vw) : tc.showPanel(Cw), [2]
            }))
          }))
        }, e.prototype._onShare = function() {
          var t = RI.challengeId;
          NI("".concat(t, "")), Hc(this.lastScore + "").then((function(e) {
            Uc(e) && jI("".concat(t, ""))
          }))
        }, e.prototype.loadNearRank = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return [4, fw()];
                case 1:
                  if (t = n.sent(), this.isDisposed) return [2];
                  if (t)
                    for (e = t.list, i = 0; i < e.length; i++) this.rankItems[i].setRankInfo(e[i], t.selfRank, t.selfScore);
                  return [2]
              }
            }))
          }))
        }, e.prototype.showUserInfoButton = function() {
          var t = this;
          if (this.rankBg && uC.needAuthorize && "function" == typeof wx.createUserInfoButton) {
            var e = {
                x: this.rankBg.worldTransform.tx * tc.uiScale,
                y: this.rankBg.worldTransform.ty * tc.uiScale,
                width: this.rankBg.width * tc.uiScale,
                height: this.rankBg.height * tc.uiScale
              },
              i = !1;
            Pb((function(e) {
              return t.addToDestroy = e
            }), (function() {
              return 1 === tc.openedPopUpPanelCount
            }), {
              left: e.x,
              top: e.y,
              width: e.width,
              height: e.height
            }, (function(e) {
              i || (i = !0, e && Sb(e), t._openRankView())
            }))
          }
        }, e.prototype.onShow = function(t) {
          var e;
          this.x = 0, this.y = 0, this.tryGame && this.tryGame.showGameIcon(), e = t ? t.score : RI.curScore, this.lastScore = e, this.playScoreTween(), this.programIcon.visible && this.programIcon.startTween(), this.loadNearRank(), this.showUserInfoButton(), wx.triggerGC()
        }, e.prototype._openShareFriendView = function() {
          tc.showPanel(xm)
        }, e.prototype.playScoreTween = function() {
          this.scoreText.text = "0", this._playScore = 0;
          var t = this;
          new TWEEN.Tween(this).to({
            _playScore: this.lastScore
          }, 1e3).onUpdate((function(e) {
            !t.isDisposed && t.scoreText ? (t.scoreText.text = t._playScore.toFixed(), t.scoreText.x = (Pe - 2 * t.scoreText.textWidth) / 2) : TWEEN.killTweensOf(t)
          })).easing(TWEEN.Easing.Circular.Out).start()
        }, e.prototype.onHide = function() {
          TWEEN.killTweensOf(this), this.tryGame && this.tryGame.stopGameIconTween(), this.programIcon.stopTween()
        }, e.prototype.onDestroy = function() {
          TWEEN.killTweensOf(this), this.sharefriendIcon && this.sharefriendIcon.off(Tu, this._openShareFriendView, this), this.rankBg && this.rankBg.off(Tu, this._openRankView, this), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.backButton && (this.backButton.destroy(), this.backButton = null), this.settingSkin && (this.settingSkin.destroy(), this.settingSkin = null), this.tryGame && (this.tryGame.destroy(), this.tryGame = null), this.leftBanner && (this.leftBanner.destroy(), this.leftBanner = null), this.topBackButton && (this.topBackButton.destroy(), this.topBackButton = null), this.dailyRewardButton && (this.dailyRewardButton.destroy(), this.dailyRewardButton = null), this.scoreText = null
        }, e.clsName = "ChallengeGameOverView", e
      }(Eu);

    function ck(t) {
      switch (RI.mode) {
        case Jh.Collection:
          tc.showPanel(gy, {
            score: RI.collectData.getFullCollectCount(),
            showMax: !1
          });
          break;
        case Jh.FastDrop:
          tc.showPanel(gy, {
            score: Math.floor(1e3 * RI.gameTime),
            showMax: !1
          });
          break;
        case Jh.Blood:
        case Jh.Mutation:
          tc.showPanel(gy, {
            score: RI.maxFloor,
            showMax: !1
          });
          break;
        case Jh.Punch:
        case Jh.Power:
          tc.showPanel(gy, {
            score: RI.curScore,
            showMax: !1
          });
          break;
        case Jh.Challenge:
          tc.showPanel(hk, {
            score: RI.curScore,
            showMax: t
          });
          break;
        case Jh.Classics:
          tc.showPanel(ov, {
            score: RI.curScore,
            showMax: t
          });
          break;
        case Jh.Expert:
          tc.showPanel(Wm, {
            score: RI.curScore,
            showMax: t
          });
          break;
        default:
          tc.showPanel(ov, {
            score: RI.curScore,
            showMax: t
          })
      }
    }
    var uk = function(t) {
        function e() {
          var e = t.call(this, !0, 1) || this;
          e.normalContainer = new PIXI.Container, e.addChild(e.normalContainer);
          var i = jh("title_bg.png");
          i.anchor.set(.5, .5), i.x = 375, i.y = 200, e.normalContainer.addChild(i);
          var n = Xh("", "#FFFFFF", !0);
          return n.anchor.set(.5, .5), n.x = 375, n.y = 200, e.normalContainer.addChild(n), e.scoreText = zh("0", 60, 16777215, "center"), e.scoreText.scale.x = 2, e.scoreText.scale.y = 2, e.scoreText.x = (Pe - 2 * e.scoreText.textWidth) / 2, e.scoreText.y = 230, e.normalContainer.addChild(e.scoreText), e.videoAdCardLayer = new PIXI.Container, e.videoButton = new Ru("video_revive.png", !0), e.videoButton.x = 0, e.videoAdCardLayer.addChild(e.videoButton.skin), e.videoAdCardLayer.x = 375, e.videoAdCardLayer.y = De / 2 + 100, e.normalContainer.addChild(e.videoAdCardLayer), e.skipButton = new Ru("button_skip.png"), e.skipButton.x = 375, e.skipButton.y = e.videoAdCardLayer.y + e.videoButton.height + 100, e.normalContainer.addChild(e.skipButton.skin), e.skipButton.visible = !0, e.videoButton.on(Iu, e._onPlayVideo, e), e.skipButton.on(Tu, e._onSkip, e), e
        }
        return i(e, t), e.prototype.onVideoSuccess = function() {
          this.setButtonInteractive(!0), this.close(), cI.revive(!0)
        }, e.prototype._onSkip = function() {
          this.showGameOver()
        }, e.prototype.setButtonInteractive = function(t) {
          this.isDisposed || (this.videoButton && (this.videoButton.interactive = t), this.skipButton && (this.skipButton.interactive = t))
        }, e.prototype.resetButtonInteractiveAndTick = function() {
          this.isDisposed || this.setButtonInteractive(!0)
        }, e.prototype._onPlayVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  if ((t = this).isDisposed) return [2];
                  n.label = 1;
                case 1:
                  return n.trys.push([1, 3, , 4]), [4, mu(12)];
                case 2:
                  return (e = n.sent()) === ve.cancel ? (t.resetButtonInteractiveAndTick(), [2, gu("")]) : e === ve.fail ? (t.resetButtonInteractiveAndTick(), [2, rc(fu)]) : [3, 4];
                case 3:
                  return i = n.sent(), t.resetButtonInteractiveAndTick(), [2, oc(i)];
                case 4:
                  return t.onVideoSuccess(), [2]
              }
            }))
          }))
        }, e.prototype.onShow = function(t) {
          this.x = 0, this.y = 0, this.scoreText.text = t + "", this.scoreText.x = (Pe - 2 * this.scoreText.textWidth) / 2, this.setButtonInteractive(!0)
        }, e.prototype.showGameOver = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  this.close(), e.label = 1;
                case 1:
                  return e.trys.push([1, 3, , 4]), [4, RI.sendGameEnd(!0)];
                case 2:
                  return t = e.sent(), ck(!0), SI(t), [3, 4];
                case 3:
                  return e.sent(), ck(!0), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.skipButton && (this.skipButton.destroy(), this.skipButton = null)
        }, e.clsName = "ChallengeReviveVideoView", e
      }(Eu),
      lk = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          var t = this;
          this.bg = Wh("dlc/ui/invite_bg.png"), this.bg.width = 557, this.bg.height = 631, this.bg.interactive = !0, this.addChild(this.bg), this.addCloseButton(), this.okButton = new nm("button_blue.png", "", !1), this.okButton.on(Tu, (function() {
            t.close()
          }), this), this.shareButton = new nm("button_orange.png", "", !1), this.shareButton.on(Tu, (function() {
            qc(), t.close()
          }), this), this.buttonGroup = new im(40), this.buttonGroup.addButton(this.okButton), this.buttonGroup.addButton(this.shareButton), this.addChild(this.buttonGroup), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.y + this.bg.height - 150
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null), this.okButton && (this.okButton.destroy(), this.okButton = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null)
        }, e.clsName = "FirstInviteView", e
      }(Qg);

    function dk() {
      var t = function() {
        if (Nc.raceCount++, $hostDef.showInvite) {
          var t = uC.taskModel.getTaskProgess(104);
          if (t >= 3 && t < 65) {
            var e = Nc.inviteInfos,
              i = !1;
            if (t >= 60 ? 0 === e[2] && (i = !0, Nc.setInviteInfos([1, 1, 1])) : t >= 30 && t <= 40 ? 0 === e[1] && (i = !0, Nc.setInviteInfos([1, 1, 0])) : t < 10 && 0 === e[0] && 3 === Nc.raceCount && (i = !0, Nc.setInviteInfos([1, 0, 0])), i) return tc.showPanel(lk), !0
          }
        }
        return !1
      }();
      !t && $hostDef.limitGiftPopUp && RI.curScore >= $hostDef.limitGiftPopUpScore && !uC.isNewPlayer && wg() && (tc.showPanel(Zy), t = !0), t || uC.dailyRewardPopCount < $hostDef.dailyRewardPopLimit && (uC.dailyRewardPopCount++, tc.showPanel(ym))
    }
    var pk = function(t) {
        function e() {
          var e = t.call(this, !0, 2) || this;
          e.scoreTween = null, e.name = "GoldResultView", e.modalAlpha = .8;
          var i = jh("gold_result_title.png");
          i.anchor.set(.5, .5), i.x = 375, i.y = Mu.top + 200, e.addChild(i), e.goldRateTip = jh("tip_tired.png"), e.goldRateTip.anchor.set(.5, .5), e.goldRateTip.x = 375, e.goldRateTip.y = i.y + i.height / 2 + 30, e.addChild(e.goldRateTip), e.light = jh("reward_light.png"), e.light.anchor.set(.5, .5), e.light.x = 375, e.light.y = De / 2, e.addChild(e.light), e.goldContainer = new PIXI.Container;
          var n = jh("big_gold.png"),
            o = e.goldText = Xh("x0", "#FFCE49", !0, "left", 40);
          return o.x = n.x + n.width + 20, o.y = n.y + (n.height - o.height) / 2, e.goldContainer.addChild(n), e.goldContainer.addChild(o), e.goldContainer.x = (Pe - e.goldContainer.width) / 2, e.goldContainer.y = (De - e.goldContainer.height) / 2, e.addChild(e.goldContainer), e.buttonGroup = new PIXI.Container, e.videoAdCardLayer = new PIXI.Container, e.videoButton = new Ru("button_video_double.png"), e.videoButton.x = 0, e.videoAdCardLayer.addChild(e.videoButton.skin), e.videoButton.on(Iu, e.onTapVideo, e), e.videoAdCardLayer.x = 0, e.videoAdCardLayer.y = 0, e.buttonGroup.addChild(e.videoAdCardLayer), e.skipButton = new Ru("button_skip.png"), e.skipButton.y = e.videoButton.y + e.videoButton.height / 2 + 150, e.skipButton.on(Iu, e._onSkip, e), e.buttonGroup.addChild(e.skipButton.skin), e.buttonGroup.x = 375, e.buttonGroup.y = De / 2 + 200, e.addChild(e.buttonGroup), e.getButton = new Ru("button_get.png"), e.getButton.on(Tu, e._onClose, e), e.getButton.x = 375, e.getButton.y = De / 2 + 200, e.addChild(e.getButton.skin), e
        }
        return i(e, t), e.prototype._onSkip = function() {
          this.close()
        }, e.prototype._onClose = function() {
          this.close()
        }, e.prototype.setButtonInteractive = function(t) {
          this.isDisposed || (this.skipButton && (this.skipButton.interactive = t), this.videoButton && (this.videoButton.interactive = t))
        }, e.prototype.onTapVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return e.trys.push([0, , 2, 3]), [4, mu(4)];
                case 1:
                  return (t = e.sent()) === ve.cancel ? [2, gu("")] : t === ve.fail ? [2, rc(fu)] : [3, 3];
                case 2:
                  return this.isDisposed || this.setButtonInteractive(!0), [7];
                case 3:
                  return this.onVideoSuccess(), [2]
              }
            }))
          }))
        }, e.prototype.playScoreTween = function(t, e, i, n, o) {
          var r = this;
          this.goldText.text = t + "", this.scoreTween = new TWEEN.Tween({
            gold: t,
            addGold: i
          }).to({
            gold: e,
            addGold: n
          }, 800).onUpdate((function(t) {
            r.isDisposed || (r.isGoldRate ? r.goldText.text = t.gold.toFixed() + " + " + t.addGold.toFixed() : r.goldText.text = t.gold.toFixed())
          })).onComplete((function() {
            o && o()
          })).easing(TWEEN.Easing.Circular.Out).start()
        }, e.prototype.onShow = function(t) {
          this.x = 0, this.y = 0, this.light.rotation = 0, new TWEEN.Tween(this.light).to({
            rotation: 2 * Math.PI
          }, 3e3).easing(TWEEN.Easing.Linear.None).repeat(1 / 0).start(), this.isGoldRate = t && t.goldRate && t.goldRate > 0, this.curGold = t && t.gold ? t.gold : 0, this.curAddGold = t && t.addGold ? t.addGold : 0, this.playScoreTween(0, this.curGold, 0, this.curAddGold), this.goldRateTip.visible = t && t.tired, this.videoButton.visible = Zi() || yu(), this.getButton.visible = !this.videoButton.visible, this.buttonGroup.visible = this.videoButton.visible
        }, e.prototype.onHide = function() {
          this.scoreTween && (TWEEN.remove(this.scoreTween), this.scoreTween = null), TWEEN.killTweensOf(this.light), this.curGold && this.curGold > 0 && nl(this.curGold)
        }, e.prototype.onVideoSuccess = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n = this;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  return this.isDisposed ? [2] : (this.videoButton && (this.videoButton.visible = !1), this.skipButton && (this.skipButton.visible = !1), [4, tl(2)]);
                case 1:
                  return (t = o.sent()) && t.gift ? (e = this.curGold, i = this.curAddGold, this.curGold *= 2, this.curAddGold *= 2, this.playScoreTween(e, this.curGold, i, this.curAddGold, (function() {
                    !n.isDisposed && n.getButton && (n.getButton.visible = !0, n.buttonGroup.visible = !1)
                  }))) : (this.getButton.visible = !0, this.buttonGroup.visible = !1), [2]
              }
            }))
          }))
        }, e.prototype.onDestroy = function() {
          this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.skipButton && (this.skipButton.destroy(), this.skipButton = null), this.getButton && (this.getButton.destroy(), this.getButton = null), t.prototype.onDestroy.call(this), pu(), dk()
        }, e.clsName = "GoldResultView", e
      }(Eu),
      fk = function(t) {
        function e(e, i) {
          var n = t.call(this, e) || this;
          return n.width = 450, n.height = 70, n.score = 0, n.frequency = 60, n.frame = 50, n.score = i, n
        }
        return i(e, t), e.prototype.getMessage = function(t) {
          return {
            type: gc,
            score: this.score
          }
        }, e
      }(vm),
      gk = function(t) {
        function e() {
          var e = t.call(this, !0, 1) || this;
          e.normalContainer = null, e.endTime = 0, e.leftTime = 0, e.normalContainer = new PIXI.Container, e.addChild(e.normalContainer);
          var i = jh("title_bg.png");
          i.anchor.set(.5, .5), i.x = 375, i.y = 200, e.normalContainer.addChild(i);
          var n = e.scoreTitle = Xh("", "#FFFFFF", !0);
          if (n.anchor.set(.5, .5), n.x = 375, n.y = 200, e.normalContainer.addChild(n), e.scoreText = zh("0", 60, 16777215, "center"), e.scoreText.scale.x = 2, e.scoreText.scale.y = 2, e.scoreText.x = (Pe - 2 * e.scoreText.textWidth) / 2, e.scoreText.y = 230, e.normalContainer.addChild(e.scoreText), mx.hasTeam)
            if (RI.mode === Jh.Classics)
              for (var o = Bh.getTasks(), r = 0; r < o.length; r++) {
                if ((s = o[r]).taskType === Sa.ClassicsGame && (!mx.isPersonTaskFinished(s.id) && RI.curScore < s.taskValue)) {
                  e.teamTaskTip = new Bx(!0), e.teamTaskTip.setTask(s, RI.mode), e.teamTaskTip.x = (Pe - e.teamTaskTip.width) / 2, e.teamTaskTip.y = e.scoreText.y + 150, e.addChild(e.teamTaskTip);
                  break
                }
              } else if (RI.mode >= Jh.Collection)
                for (o = Bh.getTasks(), r = 0; r < o.length; r++) {
                  var s;
                  if ((s = o[r]).taskType === Sa.DailyGame && (!mx.isPersonTaskFinished(s.id) && !zT(RI.mode))) {
                    e.teamTaskTip = new Bx(!0), e.teamTaskTip.setTask(s, RI.mode), e.teamTaskTip.x = (Pe - e.teamTaskTip.width) / 2, e.teamTaskTip.y = e.scoreText.y + 150, e.addChild(e.teamTaskTip);
                    break
                  }
                }
          return e.buttonGroup = new wv(20), e.videoButton = new Ru("video_revive.png", !1), e.buttonGroup.addSkin(e.videoButton), e.coinButton = new Ru("button_revive.png", !1), e.buttonGroup.addSkin(e.coinButton), e.buttonGroup.x = (Pe - e.buttonGroup.realWidth) / 2, e.buttonGroup.y = De / 2 + 100, e.normalContainer.addChild(e.buttonGroup), e.skipButton = new Ru("button_skip.png"), e.skipButton.x = 375, e.skipButton.y = e.buttonGroup.y + e.buttonGroup.height + 150, e.normalContainer.addChild(e.skipButton.skin), e.skipButton.visible = !0, e.rankSprite = new PIXI.Sprite(Cc), e.rankSprite.anchor.set(.5, .5), e.rankSprite.x = 375, e.rankSprite.y = e.skipButton.y + e.skipButton.height + 100, e.rankSprite.visible = kc, e.normalContainer.addChildAt(e.rankSprite, 0), e.videoButton.on(Iu, e._onPlayVideo, e), e.coinButton.on(Tu, e._openCoin, e), e.skipButton.on(Tu, e._onSkip, e), e
        }
        return i(e, t), e.prototype.createCollectMode = function() {
          this.collectLayer = new PIXI.Container, this.normalContainer.addChild(this.collectLayer), this.collectScoreText = Xh("", 16776960, !0, "left", 32), this.collectScoreText.y = 250, this.collectLayer.addChild(this.collectScoreText), this.collectNextText = Xh("", 16776960, !1, "left", 32), this.collectNextText.y = 300, this.collectLayer.addChild(this.collectNextText)
        }, e.prototype.createSpeedMode = function() {
          this.speedModeLayer = new PIXI.Container, this.normalContainer.addChild(this.speedModeLayer), this.speedScoreText = zh("", 50, 16776960, "left"), this.speedScoreText.y = 250, this.speedModeLayer.addChild(this.speedScoreText)
        }, e.prototype.setButtonInteractive = function(t) {
          this.isDisposed || (this.videoButton && (this.videoButton.interactive = t), this.coinButton && (this.coinButton.interactive = t), this.skipButton && (this.skipButton.interactive = t))
        }, e.prototype.resetButtonInteractiveAndTick = function() {
          this.isDisposed || (this.setButtonInteractive(!0), this.startTick())
        }, e.prototype._onPlayVideo = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  if ((t = this).isDisposed) return [2];
                  if (Zi() || $hostDef.noGameModeVideo) return [3, 4];
                  t.stopTick(), t.setButtonInteractive(!1), n.label = 1;
                case 1:
                  return n.trys.push([1, 3, , 4]), [4, mu(2)];
                case 2:
                  return (e = n.sent()) === ve.cancel ? (t.resetButtonInteractiveAndTick(), [2, gu("")]) : e === ve.fail ? (t.resetButtonInteractiveAndTick(), [2, rc(fu)]) : [3, 4];
                case 3:
                  return i = n.sent(), t.resetButtonInteractiveAndTick(), [2, oc(i)];
                case 4:
                  return t.onVideoSuccess(), [2]
              }
            }))
          }))
        }, e.prototype._openCoin = function() {
          this.stopTick(), tc.showPanel(QT, {
            isRevive: !0
          })
        }, e.prototype.onVideoSuccess = function() {
          this.stopTick(), this.setButtonInteractive(!0), this.close(), cI.revive(!0)
        }, e.prototype.onCoinReviveHide = function() {
          this.startTick()
        }, e.prototype.onCoinReviveSuccess = function() {
          this.setButtonInteractive(!0), this.close(), cI.revive(RI.isCoinRevive)
        }, e.prototype._onSkip = function() {
          this.showGameOver()
        }, e.prototype.setNormalModeVisible = function(t) {
          this.scoreText.visible = t
        }, e.prototype.onShow = function(t) {
          this.x = 0, this.y = 0;
          var e = t.score,
            i = t.coin;
          if (this.leftTime = 3e4, this.setNormalModeVisible(!1), RI.mode === Jh.Collection) {
            this.createCollectMode(), this.scoreTitle.text = "", this.collectScoreText.text = "".concat(RI.collectData.getFullCollectCount(), ""), this.collectScoreText.x = (Pe - this.collectScoreText.width) / 2;
            var n = RI.getNextWordFloor(); - 1 == n ? this.collectNextText.text = "" : n == RI.curFloor ? this.collectNextText.text = "" : this.collectNextText.text = "".concat(n - RI.curFloor, ""), this.collectNextText.x = (Pe - this.collectNextText.width) / 2
          } else RI.mode === Jh.FastDrop ? (this.createSpeedMode(), this.scoreTitle.text = "", this.speedScoreText.text = XT(RI.mode, Math.floor(1e3 * RI.gameTime)), this.speedScoreText.x = (Pe - this.speedScoreText.width) / 2) : RI.mode === Jh.Blood || RI.mode === Jh.Mutation ? (this.scoreTitle.text = "", this.setNormalModeVisible(!0), this.scoreText.text = XT(RI.mode, RI.maxFloor), this.scoreText.x = (Pe - this.scoreText.width) / 2) : (this.scoreTitle.text = "", this.setNormalModeVisible(!0), this.scoreText.text = e + "", this.scoreText.x = (Pe - 2 * this.scoreText.textWidth) / 2);
          (this.videoButton.visible = !0, this.coinButton.visible = !$hostDef.forceVideoRevive && i, this.buttonGroup.reLayout(), this.buttonGroup.x = (Pe - this.buttonGroup.realWidth) / 2, this.rankSprite.visible = RI.mode < Jh.Collection, this.rankSprite.visible) && (ky === Qm.Accept && (this.removeOpenData(), this._openData = new fk(this.rankSprite, e), Fc(this._openData)));
          this.removeGlobalEvents(), this.coinButton.visible && (Lg.addListener(Sg, this.onCoinReviveSuccess, this), Lg.addListener(Bg, this.onCoinReviveHide, this)), this.setButtonInteractive(!0), this.skipButton.visible = !0, this.showUserInfoButton(), this.startTick(), wx.triggerGC()
        }, e.prototype.removeGlobalEvents = function() {
          Lg.removeListener(Sg, this.onCoinReviveSuccess), Lg.removeListener(Bg, this.onCoinReviveHide)
        }, e.prototype.removeOpenData = function() {
          this._openData && (Ec(this._openData), this._openData = null)
        }, e.prototype.startTick = function() {
          this.stopTick(), this.endTime = Date.now() + this.leftTime, this.intervalId = setInterval(this.onTick.bind(this), 200), this.onTick()
        }, e.prototype.stopTick = function() {
          this.intervalId && (clearInterval(this.intervalId), this.intervalId = null)
        }, e.prototype.showGameOver = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  this.close(), e.label = 1;
                case 1:
                  return e.trys.push([1, 3, , 4]), [4, RI.sendGameEnd(!0)];
                case 2:
                  return t = e.sent(), ck(!0), SI(t), [3, 4];
                case 3:
                  return e.sent(), ck(!0), [3, 4];
                case 4:
                  return [2]
              }
            }))
          }))
        }, e.prototype.onTick = function() {
          this.isDisposed ? this.stopTick() : (this.leftTime = this.endTime - Date.now(), this.leftTime <= 0 && this.showGameOver())
        }, e.prototype.showUserInfoButton = function() {
          var t = this;
          if (uC.needAuthorize && "function" == typeof wx.createUserInfoButton) {
            var e = {
                x: (this.skipButton.x - this.skipButton.width / 2 - 20) * tc.uiScale,
                y: (this.skipButton.y - this.skipButton.height / 2 - 20) * tc.uiScale,
                width: (this.skipButton.width + 40) * tc.uiScale,
                height: (this.skipButton.height + 40) * tc.uiScale
              },
              i = !1;
            Pb((function(e) {
              return t.addToDestroy = e
            }), (function() {
              return 1 === tc.openedPopUpPanelCount
            }), {
              left: e.x,
              top: e.y,
              width: e.width,
              height: e.height
            }, (function(e) {
              i || (i = !0, e && Sb(e), t.showGameOver())
            }))
          }
        }, e.prototype.onDestroy = function() {
          this.removeOpenData(), this.stopTick(), this.removeGlobalEvents(), this.buttonGroup && (this.buttonGroup.destroy(), this.buttonGroup = null), this.coinButton && (this.coinButton.destroy(), this.coinButton = null), this.videoButton && (this.videoButton.destroy(), this.videoButton = null), this.skipButton && (this.skipButton.destroy(), this.skipButton = null)
        }, e.clsName = "ReviveView", e
      }(Eu);

    function mk() {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(t) {
          switch (t.label) {
            case 0:
              return [4, lu(300)];
            case 1:
              return t.sent(), RI.isExpert ? (tc.showPanel(Wm, {
                score: RI.curScore,
                showMax: !0
              }), [2]) : RI.isChallenge ? (tc.showPanel(uk, RI.curScore), [2]) : (RI.canCoinRevive && function() {
                var t = $hostDef.sharePercents;
                if (!t || 0 === t.length) return 0;
                for (var e = new Date(Je.curTime).getHours(), i = 0; i < t.length; i++) {
                  var n = t[i].time;
                  if (e >= n[0] && e <= n[1]) return t[i].percent
                }
                return 0
              }() > 100 * Math.random() ? tc.showPanel(gk, {
                score: RI.curScore,
                coin: !0
              }) : RI.canVideoRevive && yu() ? tc.showPanel(gk, {
                score: RI.curScore,
                coin: !1
              }) : tc.showPanel(gk, {
                score: RI.curScore,
                coin: !0
              }), [2])
          }
        }))
      }))
    }

    function yk(t, e) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(i) {
          switch (i.label) {
            case 0:
              return RI.needShowRevive ? [3, 2] : (RI.gameEnd(), [4, lu(500)]);
            case 1:
              return i.sent(), ck(t), e && e.gold && e.gold > 0 ? tc.showPanel(pk, e) : pu(), [3, 3];
            case 2:
              mk(), i.label = 3;
            case 3:
              return [2]
          }
        }))
      }))
    }

    function vk(t, e, i, n, o, r, s) {
      var a, h, c = RI.collectData,
        u = !1;
      if (0 === t) a = gh.getStage(1), c.collectIndex = Nl.Word1, c.collectFloorGap = t + e.getFloorGap(c.collectIndex);
      else {
        var l = void 0;
        if (u = c.canAddCollect && t === c.collectFloorGap) {
          h = c.collectIndex <= Nl.Word3 ? c.collectIndex : Nl.Word3, l = e.getRandomCollectStageId();
          var d = c.increaseIndex() ? c.getDifficulty() : e;
          c.collectFloorGap = t + d.getFloorGap(c.collectIndex)
        } else l = e.getRandomStageId();
        a = gh.getRandomStageByHard(l)
      }
      for (var p = [], f = 0, g = 0; g < a.rules.length; g++) {
        for (var m = a.rules[g], y = t + g, v = new zl(y), b = 0, w = m.length; b < w; b++) {
          var x = m[b],
            T = x[0],
            k = T[0] + i,
            I = void 0,
            C = void 0;
          3 === T.length ? (C = T[1], I = T[2]) : 2 === T.length ? (C = T[1], I = Ve) : (C = 0, I = 0);
          for (var _ = 1, B = x.length; _ < B; _++) {
            var S = x[_],
              P = Kl(y, S[0], k, S[1], C, I);
            u && 1 === P.type && (P.specialColor = He), v.addPiece(P), k += S[1]
          }
        }
        u && bk(v, h, c.collectId, a.collects, i), 0 === g ? (f = dd(v, o, n), v.afterInit(), ld(e, v, r, s)) : (0 !== f && v.rotate(f), v.afterInit(), g > 0 && (v.gapToType = p[0].gapToType)), v.gapAngle = v.findFirstGapAngle(), p.push(v)
      }
      return p
    }

    function bk(t, e, i, n, o) {
      if (n && n.length > 0) {
        var r = t.floor,
          s = Us(n);
        if (s.length < 2) return void(DEVELOP && console.error("id:" + i + ",collects:" + s));
        var a = s[0][0],
          h = s[0][1],
          c = s[1][0],
          u = new Wl(e, i, r);
        switch (c) {
          case 11:
            u.setAngle(o + Math.floor(Vs(a, h))), u.setPos(jl.Top);
            break;
          case 12:
            u.setAngle(o + Math.floor(Vs(a, h))), u.setPos(jl.Bottom);
            break;
          case 13:
            u.setAngle(o + Math.floor(Vs(a, h))), u.setPos(jl.Bottom), u.setMoveSpeed(1);
            break;
          case 14:
            u.setAngle(o + a), u.setPos(jl.Top), u.setRotateSpeed(20, h - a);
            break;
          case 15:
            u.setAngle(o + a), u.setPos(jl.Bottom), u.setRotateSpeed(20, h - a)
        }
        t.addWord(u)
      }
      t.checkWords()
    }
    var wk = {};

    function xk(t) {
      if (Nc.sound) {
        var e = wk[t];
        e || ((e = wx.createInnerAudioContext()).src = "dlc/sound/".concat(t, ".mp3"), e.loop = !1, e.autoplay = !1, e.volume = .8, wk[t] = e), e && e.play()
      }
    }

    function Tk(t, e, i) {
      return r(this, void 0, void 0, (function() {
        return s(this, (function(n) {
          return t.animation ? [2, _k(t, e, i)] : [2, kk(t, e, i)]
        }))
      }))
    }

    function kk(t, e, i) {
      return r(this, void 0, void 0, (function() {
        var n, o, r, a, h, c;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              return (n = PT(t.model, !1)).endsWith(".bin") ? [4, Ri(n)] : [3, 2];
            case 1:
              return r = s.sent(), o = Ol(r), [3, 4];
            case 2:
              return [4, Oi(n)];
            case 3:
              o = s.sent(), s.label = 4;
            case 4:
              return t.mtl ? [4, MT("dlc/model/" + t.mtl + ".mtl")] : [3, 6];
            case 5:
              return h = s.sent(), (c = new ke.OBJLoader(BT)).setMaterials(h), a = c.parse(o), [3, 7];
            case 6:
              a = DT(o), s.label = 7;
            case 7:
              return [2, Ck(a, t, e, i, t.shininess)]
          }
        }))
      }))
    }

    function Ik(t, e, i) {
      t.fog = !1, t.shininess = e, i.mtl || t.specular.set(8947848), t.transparent = i.transparent > 0
    }

    function Ck(t, e, i, n, o) {
      void 0 === o && (o = 50);
      var r = [];
      return t.traverse((function(t) {
        if (t instanceof ke.Mesh) {
          if (t.castShadow = !0, t.receiveShadow = !1, Array.isArray(t.material))
            for (var i = t.material, n = 0; n < i.length; n++) {
              Ik(i[n], o, e)
            } else Ik(t.material, o, e);
          r.push(t)
        }
      })), t.scale.set(i, i, i), t.frustumCulled = !1, 0 !== n && t.rotation.set(0, n * Math.PI / 180, 0), {
        object3d: t,
        meshList: r,
        animations: null
      }
    }

    function _k(t, e, i) {
      return r(this, void 0, void 0, (function() {
        var n, o;
        return s(this, (function(r) {
          switch (r.label) {
            case 0:
              return (n = new Qx).setDefaultMaterial(ke.MeshBasicMaterial), [4, Oi(PT(t.model, !0))];
            case 1:
              return o = r.sent(), [4, new Promise((function(t, e) {
                n.parse(o, "dlc/model/", (function(e) {
                  t(e)
                }), (function(t) {
                  e(t)
                }))
              }))];
            case 2:
              return [2, Bk(r.sent(), t, e, i)]
          }
        }))
      }))
    }

    function Bk(t, e, i, n) {
      var o = [],
        r = t.scene.children[0];
      return r.traverse((function(t) {
        if (t instanceof ke.Mesh) {
          t.castShadow = !0, t.receiveShadow = !1;
          var i = t.material;
          i.fog = !1, i.transparent = e.transparent > 0;
          var n = i.map;
          n && (n.encoding = ke.LinearEncoding, i.needsUpdate = !0), t.frustumCulled = !1, o.push(t)
        }
      })), r.scale.set(i, i, i), r.frustumCulled = !1, 0 !== n && r.rotation.set(0, n * Math.PI / 180, 0), {
        object3d: r,
        meshList: o,
        animations: t.animations
      }
    }
    var Sk = function() {
        function t(t, e) {
          void 0 === e && (e = new ke.Color(3368482)), this._alpha = 1, this.color = e, this.time = 0, this.initMaterial();
          var i = new ke.SphereBufferGeometry(1, 16, 16);
          this.mesh = new ke.Mesh(i, this.material), this.radius = t, this.setColor(e)
        }
        return Object.defineProperty(t.prototype, "radius", {
          get: function() {
            return this._radius
          },
          set: function(t) {
            this._radius = t, this.mesh.scale.set(this._radius, this._radius, this._radius)
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "alpha", {
          get: function() {
            return this._alpha
          },
          set: function(t) {
            this._alpha = t, this.material.uniforms.uAlpha.value = this._alpha, console.log("alpha:" + t)
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.setColor = function(t) {
          this.color = t, this.material.uniforms.uColor.value = this.color
        }, t.prototype.initMaterial = function() {
          var t = this;
          this.material = new ke.ShaderMaterial({
            uniforms: {
              uThickness: {
                value: 0
              },
              uNoiseTexture: {
                value: null
              },
              uColor: {
                value: this.color
              },
              uTime: {
                value: 0
              },
              uAlpha: {
                value: 1
              }
            },
            vertexShader: "varying float vIntensity;\nvarying vec2 vUv;\n\nuniform float uThickness;\n\nvoid main() {\n\n  // vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n  vec3 worldNormal = normalize(modelMatrix * vec4(normal, 0.0)).xyz;\n\n  vec3 dirToCamera = normalize(cameraPosition - worldNormal.xyz);\n  vIntensity = 1.0 - dot(worldNormal, dirToCamera);\n  vIntensity = pow(vIntensity, uThickness);\n  \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n  vUv = uv;\n}",
            fragmentShader: "varying float vIntensity;\nvarying vec2 vUv;\n\nuniform vec3 uColor;\nuniform sampler2D uNoiseTexture;\nuniform float uTime;\nuniform float uAlpha;\n\nvoid main() {\n\n  vec2 nuv = vUv;\n\n  nuv.y += sin(uTime * 0.5);\n  nuv.x += cos(uTime * 0.5);\n  vec4 noiseColor = texture2D(uNoiseTexture, nuv);\n\n  gl_FragColor = vec4(noiseColor.rgb * vIntensity * uColor * 5.0, uAlpha * noiseColor.a * 5.0);\n}",
            transparent: !0,
            blending: ke.NormalBlending,
            lights: !1
          }), LT.getSimpleTexture("dlc/particle/noise.png", (function(e) {
            e.wrapS = ke.RepeatWrapping, e.wrapT = ke.RepeatWrapping, t.material.uniforms.uNoiseTexture.value = e
          }))
        }, t.prototype.update = function(t) {
          this.time += t, this.material.uniforms.uTime.value = this.time
        }, t
      }(),
      Pk = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          i.velocity = 0, i.curY = 0, i.floorY = 0, i.deltaTime = 0, i.stayY = 0, i.meshList = [], i.modelObject = null, i.rotationDirs = [], i.followOffset = 0, i._animationMixer = null, i._actions = {}, i._curAction = "jump", i._sprint = !1, i.checkStay = !1, i.gravity = 0, i.radius = e;
          var n = new ke.Object3D;
          return n.frustumCulled = !1, i.setThreeObj(n), i
        }
        return i(e, t), e.prototype.updateMaterial = function() {
          for (var t = 0; t < this.meshList.length; t++) {
            var e = this.meshList[t].material;
            e && (e.needsUpdate = !0)
          }
        }, e.prototype.setSolidBall = function(t) {
          this.removeModel();
          var e = new ke.Mesh(new ke.SphereBufferGeometry(this.radius, 12, 12), new ke.MeshPhongMaterial({
            color: t,
            flatShading: !1,
            shininess: 50,
            specular: 8947848,
            fog: !1
          }));
          e.castShadow = !0, e.receiveShadow = !1, e.frustumCulled = !1, this.modelObject = e, this.meshList.push(e), this.threeObj.add(this.modelObject), this.setSolidColor(t)
        }, e.prototype.addShield = function() {
          this._shieldEffect ? (this._shieldEffect.radius = this.radius + .1, this._shieldEffect.alpha = 1, this._shieldEffect.mesh.visible = !0) : (this._shieldEffect = new Sk(this.radius + .1, new ke.Color(65280)), this.threeObj.add(this._shieldEffect.mesh))
        }, e.prototype.shakeShield = function() {
          if (this._shieldEffect) {
            TWEEN.killTweensOf(this._shieldEffect);
            var t = this._shieldEffect.radius,
              e = new TWEEN.Tween(this._shieldEffect).to({
                radius: 1.5 * t
              }, 100).easing(TWEEN.Easing.Linear.None),
              i = new TWEEN.Tween(this._shieldEffect).delay(150).to({
                radius: t
              }, 100).easing(TWEEN.Easing.Linear.None);
            e.chain(i), e.start()
          }
        }, e.prototype.removeShield = function() {
          var t = this;
          this._shieldEffect && (TWEEN.killTweensOf(this._shieldEffect), this._shieldEffect.alpha = 1, new TWEEN.Tween(this._shieldEffect).to({
            radius: 2,
            alpha: 0
          }, 100).onComplete((function() {
            t._shieldEffect.mesh.visible = !1
          })).easing(TWEEN.Easing.Linear.None).start())
        }, e.prototype.setSolidColor = function(t) {
          for (var e = 0; e < this.meshList.length; e++) {
            var i = this.meshList[e].material;
            i && i.color.set(t)
          }
        }, e.prototype.removeModel = function() {
          this._animationMixer && (this._animationMixer.stopAllAction(), this._animationMixer.uncacheRoot(this._animationMixer.getRoot()), this._animationMixer = null), this._actions = {};
          for (var t = 0, e = this.meshList.length; t < e; t++) {
            var i = this.meshList[t];
            i && (i.geometry && i.geometry.dispose(), i.material && (i.material.map && i.material.map.dispose(), i.material.dispose && i.material.dispose()))
          }
          this.meshList.length = 0, this.modelObject && this.threeObj.remove(this.modelObject), this.modelObject = null
        }, Object.defineProperty(e.prototype, "followY", {
          get: function() {
            return this.threeObj.position.y + this.followOffset
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.setModelBall = function(t) {
          var e = this,
            i = t.rotate;
          if (this.rotationDirs.length = 0, "none" !== i)
            for (var n = 0; n < i.length; n++) this.rotationDirs.push(i[n]);
          this.followOffset = t.followOffset;
          var o = t.scale,
            r = t.rotationY;
          Tk(t, o, r).then((function(i) {
            e._onModelLoaded(i.object3d, i.meshList, t, i.animations)
          })).catch((function() {
            e.onLoadError()
          }))
        }, e.prototype._onModelLoaded = function(t, e, i, n) {
          if (void 0 === n && (n = null), this.removeModel(), this.modelObject = t, this.threeObj.add(this.modelObject), this.meshList = e, n) {
            if (this._animationMixer = new ke.AnimationMixer(t), n) {
              this._actions = {};
              for (var o = 0; o < n.length; o++) this._actions[n[o].name] = this._animationMixer.clipAction(n[o])
            }
            this.playAction("jump")
          } else i.mtl || this.setSkin(i.texture)
        }, e.prototype.onLoadError = function() {
          rc("", 1e3), this.setSolidBall("#3BB6DF")
        }, e.prototype.playAction = function(t) {
          var e = this._actions[this._curAction];
          e && e.stop(), this._curAction = t;
          var i = this._actions[this._curAction];
          i && i.play()
        }, e.prototype.setSkin = function(t) {
          this.loadTexture("dlc/model/".concat(t))
        }, e.prototype.loadTexture = function(t) {
          var e = this;
          LT.getSimpleTexture(t, (function(t) {
            if (t) {
              t.flipY = !0, t.premultiplyAlpha = !1;
              for (var i = 0; i < e.meshList.length; i++) {
                var n = e.meshList[i].material;
                n && (n.map = t, n.needsUpdate = !0)
              }
            }
          }))
        }, e.prototype.setAlpha = function(t) {
          for (var e = 0; e < this.meshList.length; e++) {
            var i = this.meshList[e].material;
            i && (i.transparent = t < 1, i.opacity = t)
          }
        }, e.prototype.calGravity = function() {
          this.gravity = this.velocity * this.velocity / 7
        }, e.prototype.reset = function() {
          this._sprint = !1, this.deltaTime = 0, this.calGravity(), this.threeObj.scale.y = 1, this.setPosition(new ke.Vector3(0, RI.curY + 1 + this.radius, 3))
        }, e.prototype.enableSpeedUp = function() {
          this.velocity = 40, this.calGravity(), this.curY = this.y, this.velocity = 0
        }, e.prototype.setVelocity = function(t) {
          this.velocity = t, this.calGravity()
        }, e.prototype.setPosition = function(e) {
          t.prototype.setPosition.call(this, e), this.floorY = e.y, this.resetPosition()
        }, e.prototype.resetPosition = function() {
          this.deltaTime = 0, this.curY = this.stayY = this.floorY, this.setVelocity(je)
        }, e.prototype.enterSprint = function() {
          this._sprint || (this._sprint = !0, this._sprintStartFloor = RI.curFloor, this._sprintVelocity = 30, this._sprintDeltaTime = 0, this._sprintGravity = this._sprintVelocity * this._sprintVelocity / 7, this.stayY = this.floorY, this.curY = this.y, RI.enableSprintDrop())
        }, e.prototype.disableSprint = function() {
          RI.enableSprint = !1, this._sprint = !1, this.resetPosition()
        }, e.prototype.update = function(t) {
          if (!RI.isDead) {
            if (this._animationMixer && this._animationMixer.update(t), this.modelObject && this.rotationDirs.length > 0)
              for (var e = -.15, i = 0; i < this.rotationDirs.length; i++) {
                var n = this.rotationDirs[i];
                "x" === n ? this.modelObject.rotateOnAxis(Ge, e) : "y" === n ? this.modelObject.rotateOnAxis(Ae, e) : "z" === n && this.modelObject.rotateOnAxis(Ne, e)
              }
            if (this._shieldEffect && this._shieldEffect.update(t), this._sprint) {
              this._sprintDeltaTime += t;
              var o = -this._sprintGravity * this._sprintDeltaTime * this._sprintDeltaTime * .5;
              if (this.y = this.curY + o, this.checkStay && this.y <= this.stayY && (this.stayY = this.floorY, this.checkStay = !1), this.y <= this.floorY) {
                var r = null;
                if (s = RI.getCurFloorPieces())
                  for (i = 0; i < s.length; i++) {
                    (l = s[i]).isEnd && (r = l)
                  }
                if (r) this.hitEndPiece(r);
                else(d = s ? s[0] : null) && (cI.showHitParticle(RI.curFloor, d, this.threeObj.position), RI.addHitCount(RI.curFloor)), cI.setFloor(RI.curFloor + 1, d ? d.type : 1), RI.curFloor - this._sprintStartFloor > 8 ? (this.disableSprint(), RI.onHitFloor(RI.curFloor, !1), this.updateFloorY(!0)) : this.updateFloorY(!1)
              }
            } else {
              this.deltaTime += t;
              var s, a = this.deltaTime * this.velocity - this.gravity * this.deltaTime * this.deltaTime * .5;
              if (this.y = this.curY + a, this.checkStay && this.y <= this.stayY && (this.stayY = this.floorY, this.checkStay = !1), this.y <= this.floorY)
                if (s = RI.getCurFloorPieces()) {
                  r = null;
                  var h = null,
                    c = null,
                    u = null;
                  for (i = 0; i < s.length; i++) {
                    var l;
                    (l = s[i]).isEnd ? r = l : l.isRed && 6 !== l.type ? h = l : 9 !== l.type || l.safe ? l.isFadeOut && !l.safe && (u = l) : c = l
                  }
                  if (r) this.hitEndPiece(r);
                  else if (RI.ghost > 0) this.throughPiece(s[0], !0);
                  else if (RI.canThrough(RI.curFloor)) this.throughPiece(s[0]);
                  else if (h) this.hitRedPiece(h);
                  else {
                    var d = s[0];
                    if (this.y = this.floorY, this.resetPosition(), cI.onHitFloor(RI.curFloor, d, this.threeObj.position), RI.costBlood(d), c && (RI.hitBlackToRedPiece(c), cI.changePieceType(RI.curFloor, c)), u) {
                      var p = 1 === s.length || s.every((function(t) {
                        return t.isFadeOut
                      }));
                      p && (RI.costPower(u), cI.updateFloorPiecePowerColor(RI.curFloor, u))
                    }
                  }
                } else cI.setFloor(RI.curFloor + 1, 0), this.updateFloorY(!1)
            }
          }
        }, e.prototype.hitEndPiece = function(t) {
          this.y = this.floorY, RI.isHitEnd = !0, cI.onHitFloor(RI.curFloor, t, this.threeObj.position), cI.gameDead(!0)
        }, e.prototype.hitRedPiece = function(t) {
          this.y = this.floorY, cI.onHitFloor(RI.curFloor, t, this.threeObj.position), RI.cover > 0 ? (RI.cover--, 0 === RI.cover ? this.removeShield() : this.shakeShield(), this.throughPiece(t, !1)) : cI.gameDead(!0)
        }, e.prototype.throughPiece = function(t, e) {
          void 0 === e && (e = !1);
          var i = t.type;
          e && (RI.ghost--, i = 0, t.isGhost = !0), e || this.resetPosition(), cI.showHitParticle(RI.curFloor, t, this.threeObj.position), RI.addHitCount(RI.curFloor), RI.mode === Jh.Collection && cI.collectWordsAtFloor(RI.curFloor), cI.setFloor(RI.curFloor + 1, i), RI.onHitFloor(RI.curFloor, !1), this.updateFloorY(!0)
        }, e.prototype.updateFloorY = function(t) {
          this.floorY = 1 + this.radius + RI.curY, t ? this.checkStay = !0 : this.stayY = this.floorY
        }, e.prototype.setDead = function(t) {
          void 0 === t && (t = 0), this._sprint = !1, RI.enableSprint = !1, this.velocity = 0, this.gravity = 0, this.threeObj.scale.y = .6, this.y = 0 !== t ? t : 1 + this.radius + RI.curY
        }, e.prototype.revive = function() {
          this._sprint = !1, RI.enableSprint = !1, this.setVelocity(je), this.threeObj.scale.y = 1, this.updateFloorY(!1), this.resetPosition()
        }, e.prototype.destroy = function() {
          t.prototype.destroy.call(this)
        }, e
      }(Xx),
      Dk = function() {
        function t(t) {
          this.pieceParticle = null, this.defaultPieceEmitters = [], this.particlePosition = new ke.Vector3, this.initDefaultPieceParticle(t)
        }
        return t.prototype.setDefaultTexture = function(t) {
          this.pieceParticle && (this.pieceParticle.texture = t, this.pieceParticle.uniforms.texture.value = t)
        }, t.prototype.initDefaultPieceParticle = function(t) {
          this.pieceParticle = new SPE.Group({
            texture: {
              value: t
            },
            maxParticleCount: 60,
            blending: ke.NormalBlending,
            depthTest: !1,
            depthWrite: !1,
            fog: !1
          });
          var e = new ke.Color("#FFFFFF"),
            i = new ke.Color("#FFFFFF");
          this.defaultPieceEmitterSettings = {
            maxAge: {
              value: .4
            },
            position: {
              value: new ke.Vector3(0, 0, 0),
              spread: new ke.Vector3(0, 0, 0)
            },
            velocity: {
              value: new ke.Vector3(0, 0, 0),
              spread: new ke.Vector3(10, 10, 10)
            },
            color: {
              value: [e, i]
            },
            size: {
              value: [1, .2]
            },
            opacity: {
              value: [1, 0]
            },
            duration: .1,
            particleCount: 20
          }, this.pieceParticle.addPool(2, this.defaultPieceEmitterSettings, !1), this.pieceParticle.mesh.frustumCulled = !1, this.pieceParticle.mesh.renderOrder = 102, cI.sceneObject.add(this.pieceParticle.mesh), this.defaultPieceEmitters = this.pieceParticle.getPool().concat()
        }, t.prototype.playParticle = function(t) {
          this.pieceParticle.mesh.position.y = t.y, this.particlePosition.x = t.x, this.particlePosition.z = t.z, this.pieceParticle.triggerPoolEmitter(1, this.particlePosition)
        }, t.prototype.setColor = function(t, e) {
          var i = [t, e];
          if (this.defaultPieceEmitters)
            for (var n = 0; n < this.defaultPieceEmitters.length; n++) {
              for (var o = this.defaultPieceEmitters[n].color.value, r = 0; r < o.length; r++) o[r] = o[r].set(i[r]);
              this.defaultPieceEmitters[n].color.value = o
            }
        }, t.prototype.update = function(t) {
          this.pieceParticle.tick(t)
        }, t
      }(),
      Mk = function(t) {
        function e() {
          var e = t.call(this) || this;
          e.cylinderMat = null, e.cylinderList = [], e.cylinderObject = new ke.Object3D, e.curIndex = 0, e.offsetY = 0, e.cylinderMat = new ke.MeshLambertMaterial({
            color: "#B1B1B1",
            fog: !1
          });
          for (var i = new ke.CylinderBufferGeometry(2, 2, 30, 12, 5, !0), n = 0; n < 3; n++) {
            var o = new ke.Mesh(i, e.cylinderMat);
            o.castShadow = !0, o.receiveShadow = !0, o.position.y = 30 * -n, o.matrixAutoUpdate = !1, o.updateMatrix(), e.cylinderObject.add(o), e.cylinderList.push(o)
          }
          return e.cylinderObject.matrixAutoUpdate = !1, e.cylinderObject.updateMatrix(), e.curIndex = 3, e.setThreeObj(e.cylinderObject), e
        }
        return i(e, t), e.prototype.updateMaterial = function() {
          this.cylinderMat.needsUpdate = !0
        }, e.prototype.reset = function() {
          this.offsetY = 0, this.curIndex = 3;
          for (var t = 0; t < 3; t++) {
            var e = this.cylinderList[t];
            e.position.y = 30 * -t + this.offsetY, e.updateMatrix()
          }
        }, e.prototype.onRevive = function(t) {
          this.update(0);
          for (var e = 6 * t, i = 0; i < 3; i++) {
            var n = this.cylinderList[i];
            n.position.y += e, n.updateMatrix()
          }
          this.offsetY += e
        }, e.prototype.update = function(t) {
          var e = this.cylinderList[0]; - (cI.sceneObject.position.y - 12) < e.position.y - 15 && (this.cylinderList.shift(), e.position.y = 30 * -this.curIndex + this.offsetY, e.updateMatrix(), this.curIndex++, this.cylinderList.push(e))
        }, e
      }(Xx),
      Fk = Math.PI / 180,
      Ek = 270 * Fk,
      Lk = 10,
      Ok = 10 * Fk,
      Rk = {},
      Gk = {},
      Ak = {},
      Nk = [],
      jk = {},
      Vk = 0,
      Uk = 120;

    function Wk(t, e, i) {
      void 0 === e && (e = 1);
      var n, o = Yk(t);
      switch (t) {
        case 99:
          n = We;
          break;
        case 100:
          n = Ue;
          break;
        case 8:
          n = He;
          break;
        default:
          n = o ? qe : i || We
      }
      return $k(n, e)
    }

    function qk(t, e) {
      var i;
      return Vk > 0 ? ((i = Nk[--Vk]).geometry = t, i.material = e, i.frustumCulled = !0, Nk[Vk] = null) : ((i = new ke.Mesh(t, e)).castShadow = !0, i.receiveShadow = !0, i.matrixAutoUpdate = !1, i.updateMatrix(), i.frustumCulled = !0), i
    }

    function Hk(t, e, i) {
      var n = function(t, e) {
          return 6 === e ? function(t, e) {
            var i = 1e4 * e + t,
              n = Gk[i];
            if (!n) {
              var o = 2.2,
                r = new ke.Shape,
                s = .3,
                a = o * Math.cos(-Ok / 2),
                h = o * Math.sin(-Ok / 2),
                c = o * Math.cos(Ok / 2),
                u = o * Math.sin(Ok / 2);
              r.moveTo(a, h), r.lineTo(c, u), r.lineTo(c - s, u), r.lineTo(c - s, h);
              var l = 3.2,
                d = 0,
                p = new ke.Shape;
              p.moveTo(l, d), p.arc(0, 0, Ee, 0, 2 * Math.PI, !1);
              var f = new ke.Shape;
              f.moveTo(l, d), f.arc(0, 0, Le, 0, 2 * Math.PI, !1), p.holes = [f];
              var g = {
                depth: .6 * Math.PI * 4 * (t * Fk / Math.PI),
                bevelEnabled: !1,
                steps: 1
              };
              (n = new ke.ExtrudeBufferGeometry([r, p], g)).rotateY(Ek), n.rotateZ(180 * Fk), Gk[i] = n
            }
            return n
          }(t, e) : function(t, e) {
            var i = e;
            5 !== e && 7 !== e || (i = 3);
            var n = 1e4 * i + t,
              o = Gk[n];
            if (!o) {
              var r = Yk(e),
                s = void 0;
              s = 8 === i ? 3.98 : 9 === i ? 4.05 : i >= 11 && i <= 13 ? 3.96 : r ? Fe : 4;
              var a = new ke.Shape;
              a.moveTo(2, 0);
              for (var h = t / 10, c = new Array(h), u = new Array(h), l = 0; l <= h; l++) {
                var d = Ok * l,
                  p = Math.cos(d),
                  f = Math.sin(d);
                c[l] = f, u[l] = p;
                var g = s * p,
                  m = s * f;
                a.lineTo(g, m)
              }
              for (l = h; l >= 0; l--) {
                g = 2 * u[l], m = 2 * c[l];
                a.lineTo(g, m)
              }
              var y = {
                depth: 1,
                bevelEnabled: !1,
                steps: 1
              };
              2 === i ? y.depth = 1.1 : 9 === i ? y.depth = 1.02 : 3 === i ? y.depth = 5 : 4 === i ? y.depth = 3 : 8 === i ? y.depth = .98 : i >= 11 && i <= 13 && (y.depth = .96), (o = new ke.ExtrudeBufferGeometry([a], y)).rotateX(Ek), o.rotateY(Ek), Gk[n] = o
            }
            return o
          }(t, e)
        }(t, e),
        o = [qk(n, Wk(e, 1, i))];
      if (9 === e) {
        var r = function(t, e) {
            var i = 1e4 * e + t,
              n = Ak[i];
            if (!n) {
              var o = 2,
                r = Fe,
                s = new ke.Shape;
              s.moveTo(o, 0);
              for (var a = Math.floor(t / Lk), h = new Array(a), c = new Array(a), u = 0; u <= a; u++) {
                var l = Ok * u,
                  d = Math.cos(l),
                  p = Math.sin(l);
                h[u] = p, c[u] = d;
                var f = r * d,
                  g = r * p;
                s.lineTo(f, g)
              }
              var m = 2,
                y = Math.cos(Ok * a + m * Fk),
                v = Math.sin(Ok * a + m * Fk);
              s.lineTo(r * y, r * v), s.lineTo(o * y, o * v);
              for (u = a; u >= 0; u--) {
                f = o * c[u], g = o * h[u];
                s.lineTo(f, g)
              }
              var b = .2,
                w = {
                  depth: b,
                  bevelEnabled: !1,
                  steps: 1
                };
              (n = new ke.ExtrudeBufferGeometry([s], w)).rotateX(Ek), n.rotateY(Ek - .5 * m * Fk), n.translate(0, .5 * (1 - b), 0), Ak[i] = n
            }
            return n
          }(t, e),
          s = Wk(2, 1),
          a = qk(r, s);
        o.push(a);
        var h = function(t, e) {
            var i = 1e4 * e + t,
              n = jk[i];
            if (n) return n;
            for (var o = 4, r = Fe, s = 1, a = new Array(s), h = new Array(s), c = new ke.Shape, u = 0; u <= s; u++) {
              var l = (0 === u ? -1 : 1) * Zs,
                d = Math.cos(l),
                p = Math.sin(l);
              a[u] = p, h[u] = d;
              var f = r * d,
                g = r * p;
              0 === u ? c.moveTo(f, g) : c.lineTo(f, g)
            }
            for (u = s; u >= 0; u--) {
              f = o * h[u], g = o * a[u];
              c.lineTo(f, g)
            }
            var m = new ke.Shape;
            for (u = 0; u <= s; u++) {
              var y = (0 === u ? t - 1 : t + 1) * Zs;
              d = Math.cos(y), p = Math.sin(y);
              a[u] = p, h[u] = d;
              f = r * d, g = r * p;
              0 === u ? m.moveTo(f, g) : m.lineTo(f, g)
            }
            for (u = s; u >= 0; u--) {
              f = o * h[u], g = o * a[u];
              m.lineTo(f, g)
            }
            var v = .6,
              b = {
                depth: v,
                bevelEnabled: !1,
                steps: 1
              };
            return (n = new ke.ExtrudeBufferGeometry([c, m], b)).rotateX(Ek), n.rotateY(Ek), n.translate(0, (1 - v) / 2, 0), jk[i] = n, n
          }(t, e),
          c = qk(h, s);
        o.push(c)
      }
      return o
    }

    function $k(t, e) {
      void 0 === e && (e = 1);
      var i = 100 * t.getHex() + Math.floor(10 * e);
      return Rk[i] || (Rk[i] = new ke.MeshLambertMaterial({
        fog: !1,
        color: t,
        transparent: e < 1,
        opacity: e
      })), Rk[i]
    }

    function Xk(t) {
      if (t.parent && t.parent.remove(t), Vk >= Uk) return t.material = null, void(t.geometry = null);
      t.visible = !0, t.frustumCulled = !0, Nk[Vk] = t, Vk++
    }

    function Yk(t) {
      return t >= 2 && t < 8
    }
    var zk = new ke.PlaneBufferGeometry(1.5, 1.5, 1, 1),
      Kk = Math.PI / 2;
    zk.rotateX(-Kk);
    var Jk = function() {
        function t() {}
        return t.createPainterPlane = function(e, i, n) {
          var o;
          t._poolCount > 0 ? ((o = t._planePools[--t._poolCount]).material = i, t._planePools[t._poolCount] = null) : ((o = new ke.Mesh(zk, i)).castShadow = !1, o.receiveShadow = !1, t._createCount++), o.rotateY(Math.random() * Math.PI * 2);
          var r = e * Zs;
          o.position.x = 3 * Math.sin(r), o.position.z = 3 * Math.cos(r), o.position.y = n ? 1.15 : 1.08, o.renderOrder = 100;
          var s = .8 + .4 * Math.random();
          return o.scale.set(s, s, s), o.matrixAutoUpdate = !1, o.updateMatrix(), o
        }, t.releaseToPool = function(e) {
          if (e.parent && e.parent.remove(e), t._poolCount >= t.maxPoolCount) return e.material = null, void(e.geometry = null);
          e.scale.set(1, 1, 1), e.quaternion.set(0, 0, 0, 1), t._planePools[t._poolCount] = e, t._poolCount++
        }, t._planePools = [], t._poolCount = 0, t._createCount = 0, t.maxPoolCount = 50, t
      }(),
      Qk = new ke.Color,
      Zk = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          return i.pieceData = null, i.curY = 0, i.deltaTime = 0, i.offset = 0, i.sx = 0, i.sz = 0, i.rotateSpeed = 0, i.curAngle = 0, i.painterAngleMap = {}, i.painterPlanes = [], i.pieceMeshes = [], i._shadow = !1, i._frustumCulled = !0, i._isDestroyed = !1, i.setThreeObj(ET.createObject3D()), i.setPieceData(e), i
        }
        return i(e, t), e.prototype.updateColor = function() {
          var t = Wk(this.pieceData.type, 1, this.pieceData.specialColor);
          this.setPieceMaterial(t)
        }, e.prototype.setPieceFrustumCulled = function(t, e) {
          if (void 0 === e && (e = !1), this._frustumCulled !== t || e) {
            this._frustumCulled = t;
            for (var i = 0; i < this.pieceMeshes.length; i++) {
              this.pieceMeshes[i].frustumCulled = t
            }
          }
        }, e.prototype.setPieceMaterial = function(t) {
          for (var e = 0; e < this.pieceMeshes.length; e++) {
            this.pieceMeshes[e].material = t
          }
        }, Object.defineProperty(e.prototype, "shadow", {
          get: function() {
            return this._shadow
          },
          set: function(t) {
            if (this._shadow != t) {
              this._shadow = t;
              for (var e = 0; e < this.pieceMeshes.length; e++) {
                var i = this.pieceMeshes[e];
                i.receiveShadow = t, i.castShadow = t
              }
            }
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.setPieceData = function(t) {
          this.pieceData = t, this.curAngle = this.pieceData.startAngle, this.curY = this.threeObj.position.y = this.pieceData.y, this.threeObj.rotateY(this.curAngle * Zs), this.setPieceMesh(t.angle, t.type), !this.pieceData.safe && this.pieceData.power >= 0 && this.updatePowerColor()
        }, e.prototype.updatePowerColor = function() {
          var t = Xe[this.pieceData.power],
            e = Ye[this.pieceData.power];
          this.setPieceColor(t, e)
        }, e.prototype.setPieceMesh = function(t, e) {
          this.removePieceMeshes(), this.pieceMeshes = Hk(t, e, this.pieceData.specialColor);
          for (var i = this._frustumCulled = this.pieceData.floor <= RI.curFloor + 5, n = 0; n < this.pieceMeshes.length; n++) {
            var o = this.pieceMeshes[n];
            o.receiveShadow = this._shadow, o.castShadow = this._shadow, o.frustumCulled = i, this.threeObj.add(o)
          }
        }, e.prototype.updateMaterial = function() {
          for (var t = 0; t < this.pieceMeshes.length; t++) {
            this.pieceMeshes[t].material.needsUpdate = !0
          }
        }, e.prototype.addPainter = function(t, e) {
          if (!this._isDestroyed && (t -= this.pieceData.curStartAngle, t = Math.floor(ia(t)), this.painterAngleMap[t] || (this.painterAngleMap[t] = 0), this.painterAngleMap[t] < 8)) {
            this.painterAngleMap[t]++;
            var i = Jk.createPainterPlane(t, e, this.pieceData.isRed);
            this.threeObj.add(i), this.painterPlanes.push(i)
          }
        }, e.prototype.updateRotation = function() {
          var t = this.pieceData.curStartAngle - this.curAngle;
          this.curAngle = this.pieceData.curStartAngle, 0 !== t && this.threeObj.rotateY(t * Zs)
        }, e.prototype.breakDown = function(e) {
          if (!this.isBreak) {
            t.prototype.breakDown.call(this, e);
            var i = RI.curRotation;
            this.threeObj.rotateY(i * Zs), cI.sceneObject.add(this.threeObj), this.gravity = 50, 0 === this.pieceData.power || (this.pieceData.isGhost ? (Qk.set(Nc.ballColor), this.setPieceMaterial($k(Qk, .4))) : 0 !== e && (Qk.set(Nc.ballColor), this.setPieceMaterial($k(Qk, .8))));
            var n = (i + this.pieceData.curStartAngle + .5 * this.pieceData.angle) * Zs;
            this.rotateSpeed = -45 * Zs * .04, this.sx = 15 * Math.sin(n), this.sz = 15 * Math.cos(n)
          }
        }, e.prototype.setPieceColor = function(t, e) {
          this.setPieceMaterial($k(t, e))
        }, e.prototype.updatePieceMaterialByType = function() {
          this.setPieceMaterial(Wk(this.pieceData.type, 1))
        }, e.prototype.checkPieceType = function(t) {
          void 0 === t && (t = !1);
          var e = this.pieceData.type;
          if ((e !== this.pieceData.initType || t) && this.setPieceMesh(this.pieceData.angle, e), this.pieceData.power >= 0 ? this.updatePowerColor() : this.setPieceMaterial(Wk(e, 1)), this.pieceMeshes.length > 1)
            for (var i = Wk(2, 1), n = 9 === e, o = 1; o < this.pieceMeshes.length; o++) this.pieceMeshes[o].visible = n, this.pieceMeshes[o].material = i
        }, e.prototype.update = function(t) {
          0 !== this.pieceData.rotationSpeed && this.curAngle !== this.pieceData.curStartAngle && this.updateRotation(), 1 !== this.pieceData.scaleY && (this.threeObj.scale.y = this.pieceData.scaleY), this.pieceData.floor <= RI.curFloor + 3 && (this.shadow = !0), this.setPieceFrustumCulled(this.pieceData.floor > RI.curFloor + 5), 0 !== this.gravity && (this.deltaTime += t, this.offset = -this.gravity * this.deltaTime * this.deltaTime / 2, this.threeObj.position.set(this.deltaTime * this.sx, this.curY + this.offset, this.deltaTime * this.sz), 0 !== this.rotateSpeed && this.threeObj.rotateZ(this.rotateSpeed), this.offset < -20 && this.destroy())
        }, e.prototype.removePieceMeshes = function() {
          if (this.pieceMeshes && this.pieceMeshes.length > 0) {
            for (var t = 0; t < this.pieceMeshes.length; t++) {
              Xk(this.pieceMeshes[t])
            }
            this.pieceMeshes.length = 0
          }
        }, e.prototype.destroy = function() {
          if (!this._isDestroyed) {
            this._isDestroyed = !0;
            for (var e = this.painterPlanes.length - 1; e >= 0; e--) Jk.releaseToPool(this.painterPlanes[e]);
            this.painterPlanes.length = 0, this.painterPlanes = null, this.removePieceMeshes(), ET.releaseToPool(this.threeObj), t.prototype.destroy.call(this), this.pieceData = null, this.painterAngleMap = null
          }
        }, e
      }(Xx),
      tI = SPE.Emitter,
      eI = function() {
        function t(t) {
          this.trailParticle = null, this._curTrailId = -1, this.particleTexture = t
        }
        return t.prototype.addListeners = function() {
          var t = this;
          mr((function() {
            t.setTrailSkin(uC.trail)
          }))
        }, t.prototype.setTrailSkin = function(t) {
          this._curTrailId !== t && (this._curTrailId = t, this.updateTrailParticle())
        }, t.prototype.updateTrailParticle = function() {
          var t = this,
            e = hh.getItem(uC.skin);
          if (e) {
            this.trailParticle && (cI.sceneObject.remove(this.trailParticle.mesh), this.trailParticle.dispose());
            for (var i = [], n = 0, o = Math.min(e.trailColors.length, 3); n < o; n++) {
              var r = (new ke.Color).set(e.trailColors[n]);
              i.push(r)
            }
            var s = e.follow,
              a = e.trailScale,
              h = null;
            if (this._curTrailId > 0 && 3001 !== this._curTrailId) {
              var c = oh.getItem(this._curTrailId);
              if (c && 2 === c.skinType) {
                var u = hh.getItem(this._curTrailId);
                if (s = u.follow, h = u.frames, u.color)
                  for (n = 0, o = i.length; n < o; n++) i[n].set(u.color);
                0 !== u.trailScale && (a = u.trailScale)
              }
            }
            var l = zi ? 40 : 60;
            this.trailParticle = new SPE.Group({
              maxParticleCount: l,
              blending: ke.NormalBlending,
              depthTest: !0,
              depthWrite: !1,
              fog: !1
            }), this.trailParticle.mesh.frustumCulled = !1, cI.sceneObject.add(this.trailParticle.mesh), s ? LT.getSimpleTexture("dlc/particle/".concat(s), (function(e) {
              t.trailParticle.texture = e, t.trailParticle.uniforms.texture.value = t.trailParticle.texture
            })) : (this.trailParticle.texture = this.particleTexture, this.trailParticle.uniforms.texture.value = this.trailParticle.texture), h ? (this.trailParticle.textureFrames.x = h[0], this.trailParticle.textureFrames.y = h[1], this.trailParticle.textureFrameCount = h[0] * h[1], this.trailParticle.textureLoop = h[2], this.trailParticle.uniforms.textureAnimation.value = new ke.Vector4(h[0], h[1], this.trailParticle.textureFrameCount, this.trailParticle.textureLoop), this.trailParticle.defines.SHOULD_CALCULATE_SPRITE = !0) : (this.trailParticle.textureFrames.x = 1, this.trailParticle.textureFrames.y = 1, this.trailParticle.textureFrameCount = 1, this.trailParticle.textureLoop = 1, this.trailParticle.uniforms.textureAnimation.value = new ke.Vector4(1, 1, 1, 1), this.trailParticle.defines.SHOULD_CALCULATE_SPRITE = !1), this.trailEmitter = new tI({
              maxAge: {
                value: e.trailAge
              },
              position: {
                value: new ke.Vector3(0, 0, 2.8)
              },
              velocity: {
                value: new ke.Vector3(0, 0, 0),
                spread: new ke.Vector3(.2, 0, .5)
              },
              color: {
                value: i
              },
              size: {
                value: [3, 1.5 * a * 2]
              },
              opacity: {
                value: [1, .7, .1]
              },
              particleCount: l
            }), this.trailEmitterPosition = this.trailEmitter.position, this.trailParticle.addEmitter(this.trailEmitter)
          }
        }, t.prototype.update = function(t, e) {
          this.trailParticle && (this.trailEmitterPosition.value.y = e, this.trailEmitterPosition.value = this.trailEmitterPosition.value, this.trailParticle.tick(t))
        }, t
      }(),
      iI = function() {
        function t() {
          this.defaultColors = [new ke.Color(11250347), new ke.Color(4276545), new ke.Color(13224393), new ke.Color(6250335)], this.curColors = [new ke.Color(11250347), new ke.Color(4276545), new ke.Color(13224393), new ke.Color(6250335)], this.lightColors = [new ke.Color(1902516), new ke.Color(14682040), new ke.Color(1902516), new ke.Color(14682040)], this.brightness = 1, this.targetColors = [];
          var t = new ke.ShaderMaterial({
            vertexShader: "attribute vec3 color;\nvarying vec3 vColor;\nvoid main() {\n  gl_Position = vec4(position.xy, 1.0, 1.0);\n  vColor = color;\n}",
            fragmentShader: "varying vec3 vColor;\nvoid main() {\n  gl_FragColor.rgb = vColor;\n  gl_FragColor.a = 1.0;\n}",
            side: ke.DoubleSide,
            uniforms: {},
            depthTest: !0,
            depthFunc: ke.LessEqualDepth,
            depthWrite: !1,
            transparent: !1
          });
          this.geometry = new ke.PlaneGeometry(2, 2, 1, 1), this.bgMesh = new ke.Mesh(this.geometry, t), this.bgMesh.frustumCulled = !1, this.bgMesh.matrixAutoUpdate = !1, this.bgMesh.updateMatrix(), this.bgMesh.renderOrder = 100;
          var e = this.defaultColors;
          this.updateColors([
            [e[0], e[1], e[2]],
            [e[1], e[3], e[2]]
          ])
        }
        return t.prototype.setColors = function(t) {
          this.updateColors([
            [t[0], t[1], t[2]],
            [t[1], t[3], t[2]]
          ])
        }, t.prototype.updateColors = function(t) {
          for (var e = this.geometry.faces, i = 0; i < e.length; i++)
            for (var n = e[i], o = 0; o < 3; o++) {
              var r = t[i];
              n.vertexColors[o] ? n.vertexColors[o].set(r[o]) : n.vertexColors[o] = new ke.Color(r[o])
            }
          this.geometry.colorsNeedUpdate = !0
        }, t.prototype.updateSkyColors = function() {
          for (var t = 1 - this.brightness, e = 0, i = this.targetColors.length; e < i; e++) {
            var n = this.targetColors[e],
              o = this.defaultColors[e],
              r = this.curColors[e];
            r.r = this.brightness * o.r + t * n.r, r.g = this.brightness * o.g + t * n.g, r.b = this.brightness * o.b + t * n.b
          }
          this.updateColors([
            [this.curColors[0], this.curColors[1], this.curColors[2]],
            [this.curColors[1], this.curColors[3], this.curColors[2]]
          ])
        }, t.prototype.showLightTween = function() {
          this.showSkyTween(this.lightColors)
        }, t.prototype.showSkyTween = function(t) {
          var e = this;
          if (!this.skyTween) {
            this.targetColors = t.concat(), this.skyTween && (this.skyTween.stop(), TWEEN.remove(this.skyTween)), this.brightness = 1, this.skyTween = new TWEEN.Tween(this).to({
              brightness: 0
            }, 500).easing(TWEEN.Easing.Quadratic.In).onUpdate((function() {
              e.updateSkyColors()
            }));
            var i = new TWEEN.Tween(this).delay(1e3).to({
              brightness: 1
            }, 500).easing(TWEEN.Easing.Quadratic.Out).onUpdate((function() {
              e.updateSkyColors()
            })).onComplete((function() {
              e.skyTween = null
            }));
            this.skyTween.chain(i), this.skyTween.start()
          }
        }, t
      }(),
      nI = function() {
        function t() {
          this.canRotate = !1, this.isRotating = !1, this.lastClientX = 0, this._touchIdentifier = -1
        }
        return t.prototype.setRotateEnable = function(t) {
          this.canRotate = t, this.reset()
        }, t.prototype.reset = function() {
          this._touchIdentifier = -1, this.isRotating = !1
        }, t.prototype.addListeners = function() {
          var t = this;
          ql.addTouchStart(this._onTouchStart, this), ql.addTouchEnd(this._onTouchEnd, this), ql.addTouchMove(this._onTouchMove, this), wx.onHide((function() {
            t.reset()
          })), wx.onShow((function() {
            t.reset()
          }))
        }, t.prototype._onTouchStart = function(t) {
          if (this.canRotate && t.changedTouches) {
            var e = t.changedTouches[0];
            e && (this.isRotating && -1 !== this._touchIdentifier && e.identifier !== this._touchIdentifier || (this._touchIdentifier = e.identifier, this.isRotating = !0, this.lastClientX = e.clientX))
          }
        }, t.prototype._onTouchMove = function(t) {
          if (this.canRotate && t.changedTouches) {
            var e = t.changedTouches[0];
            if (e && (-1 === this._touchIdentifier || e.identifier === this._touchIdentifier)) {
              this.isRotating || (this.isRotating = !0, this.lastClientX = e.clientX);
              var i = .02 * (e.clientX - this.lastClientX);
              i < -ea ? i = -ea : i > ea && (i = ea), cI.rotateY(i), this.lastClientX = e.clientX
            }
          }
        }, t.prototype._onTouchEnd = function(t) {
          if (this.canRotate && t.changedTouches)
            for (var e = 0; e < t.changedTouches.length; e++) {
              if (t.changedTouches[e].identifier === this._touchIdentifier) {
                this.isRotating = !1, this._touchIdentifier = -1;
                break
              }
            }
        }, t
      }(),
      oI = SPE.Group,
      rI = function() {
        function t(t) {
          this.isCustomPieceParticle = !1, this.defaultPieceParticle = null, this.curPieceParticle = null, this.defaultPieceEmitters = [], this.particlePosition = new ke.Vector3, this.initDefaultPieceParticle(t)
        }
        return t.prototype.setCustomPiece = function(t) {
          var e = cI.sceneObject;
          this.curPieceParticle !== this.defaultPieceParticle ? (e.remove(this.curPieceParticle.mesh), this.curPieceParticle.dispose(), this.curPieceParticle = null) : e.remove(this.defaultPieceParticle.mesh), this.isCustomPieceParticle = !!t, this.isCustomPieceParticle ? this.createCustomPieceParticle(t) : (e.add(this.defaultPieceParticle.mesh), this.curPieceParticle = this.defaultPieceParticle), this.curPieceParticle || (this.curPieceParticle = this.defaultPieceParticle)
        }, t.prototype.updatePieceParticle = function(t) {
          this.setCustomPiece(t.piece), this.setColor(t)
        }, t.prototype.setDefaultTexture = function(t) {
          this.defaultPieceParticle && (this.defaultPieceParticle.texture = t, this.defaultPieceParticle.uniforms.texture.value = t)
        }, t.prototype.initDefaultPieceParticle = function(t) {
          this.defaultPieceParticle = new SPE.Group({
            texture: {
              value: t
            },
            maxParticleCount: 60,
            blending: ke.NormalBlending,
            depthTest: !1,
            depthWrite: !1,
            fog: !1
          });
          var e = new ke.Color(Nc.ballColor);
          this.defaultPieceEmitterSettings = {
            maxAge: {
              value: 1
            },
            position: {
              value: new ke.Vector3(0, 0, 0),
              spread: new ke.Vector3(0, 0, 0)
            },
            acceleration: {
              value: new ke.Vector3(0, -10, 0),
              spread: new ke.Vector3(4, 1, 4)
            },
            velocity: {
              value: new ke.Vector3(0, 5, 0),
              spread: new ke.Vector3(4, 4, 4)
            },
            color: {
              value: [new ke.Color(e), new ke.Color(e), new ke.Color(e)]
            },
            size: {
              value: [1, .2]
            },
            opacity: {
              value: [1, .9, 0]
            },
            duration: .2,
            particleCount: 30
          }, this.defaultPieceParticle.addPool(2, this.defaultPieceEmitterSettings, !1), this.defaultPieceParticle.mesh.frustumCulled = !1, this.defaultPieceParticle.mesh.renderOrder = 102, cI.sceneObject.add(this.defaultPieceParticle.mesh), this.defaultPieceEmitters = this.defaultPieceParticle.getPool().concat(), this.curPieceParticle = this.defaultPieceParticle
        }, t.prototype.createCustomPieceParticle = function(t) {
          var e = new oI({
            texture: {
              value: null
            },
            maxParticleCount: zi ? 50 : 60,
            blending: ke.NormalBlending,
            depthTest: !1,
            depthWrite: !1,
            fog: !1
          });
          e.texture = LT.getSimpleTexture("dlc/particle/".concat(t)), e.uniforms.texture.value = e.texture;
          var i = {
            maxAge: {
              value: 1
            },
            position: {
              value: new ke.Vector3(0, 0, 0),
              spread: new ke.Vector3(0, 0, 0)
            },
            acceleration: {
              value: new ke.Vector3(0, -10, 0),
              spread: new ke.Vector3(4, 1, 4)
            },
            velocity: {
              value: new ke.Vector3(0, 5, 0),
              spread: new ke.Vector3(4, 4, 4)
            },
            size: {
              value: [1, .2]
            },
            opacity: {
              value: [1, .9, 0]
            },
            duration: .2,
            particleCount: zi ? 25 : 30
          };
          e.addPool(2, i, !1), e.mesh.frustumCulled = !1, e.mesh.renderOrder = 102, cI.sceneObject.add(e.mesh), this.curPieceParticle = e
        }, t.prototype.playHitParticle = function(t) {
          this.curPieceParticle.mesh.position.y = t.y, this.particlePosition.x = t.x, this.particlePosition.z = t.z, this.curPieceParticle.triggerPoolEmitter(1, this.particlePosition)
        }, t.prototype.setColor = function(t) {
          if (!this.isCustomPieceParticle) {
            var e = t.trailColors.concat();
            if (e.length < 3) {
              e.push(e[1]);
              var i = (new ke.Color).set(e[0]),
                n = (new ke.Color).set(e[2]),
                o = new ke.Color;
              o.r = .5 * (i.r + n.r), o.g = .5 * (i.g + n.g), o.b = .5 * (i.b + n.b), e[1] = "#" + o.getHexString()
            }
            if (this.defaultPieceEmitters)
              for (var r = 0; r < this.defaultPieceEmitters.length; r++) {
                for (var s = this.defaultPieceEmitters[r].color.value, a = 0; a < s.length; a++) s[a] = s[a].set(e[a]);
                this.defaultPieceEmitters[r].color.value = s
              }
          }
        }, t.prototype.update = function(t) {
          this.curPieceParticle.tick(t)
        }, t
      }(),
      sI = function() {
        function t() {
          this.painterMats = [], this.isCustomPaint = !1, this.customPaintMaterial = null, this._curPaintId = -1, this.initTextures(), this.initPainter()
        }
        return t.prototype.addListeners = function() {
          var t = this;
          mr((function() {
            t.setPaintSkin(uC.paint)
          }))
        }, t.prototype.initTextures = function() {
          var t = this;
          this.painterTexture = LT.getSimpleTexture("dlc/particle/painter1.png", (function(e) {
            e.flipY = !0, e.premultiplyAlpha = !1, t.painterTexture = e, t.painterMats[0] && (t.painterMats[0].map = e)
          })), this.painterTexture2 = LT.getSimpleTexture("dlc/particle/painter2.png", (function(e) {
            e.flipY = !0, e.premultiplyAlpha = !1, t.painterTexture2 = e, t.painterMats[1] && (t.painterMats[1].map = e)
          }))
        }, t.prototype.initPainter = function() {
          var t = new ke.MeshBasicMaterial({
            map: this.painterTexture,
            color: Nc.ballColor,
            fog: !1,
            transparent: !0,
            depthWrite: !1,
            depthTest: !0,
            lights: !1
          });
          this.painterMats.push(t);
          var e = new ke.MeshBasicMaterial({
            map: this.painterTexture2,
            color: Nc.ballColor,
            fog: !1,
            transparent: !0,
            depthWrite: !1,
            depthTest: !0,
            lights: !1
          });
          this.painterMats.push(e)
        }, t.prototype.setCustomPaint = function(t, e) {
          this.isCustomPaint = !!t, this.isCustomPaint && (this.customPaintMaterial || (this.customPaintMaterial = new ke.MeshBasicMaterial({
            fog: !1,
            transparent: !0,
            depthWrite: !1,
            depthTest: !0,
            lights: !1
          })), e && this.customPaintMaterial.color.setStyle(e), this.customPaintMaterial.map = LT.getSimpleTexture("dlc/particle/".concat(t)), this.customPaintMaterial.needsUpdate = !0)
        }, t.prototype.setPaintSkin = function(t) {
          this._curPaintId !== t && (this._curPaintId = t, this.updatePaint())
        }, t.prototype.updatePaint = function() {
          var t = hh.getItem(uC.skin),
            e = t && t.paint;
          if (2001 === this._curPaintId && e) this.setCustomPaint(e, Nc.ballColor);
          else if (this._curPaintId > 0) {
            var i = hh.getItem(this._curPaintId);
            if (i) {
              var n = void 0;
              n = i.color ? i.color : Nc.ballColor, this.setCustomPaint(i.paint, n)
            }
          } else {
            var o = hh.getItem(uC.skin);
            o && this.setCustomPaint(o.paint, "#FFFFFF")
          }
        }, t.prototype.getPainterMat = function() {
          return this.isCustomPaint ? this.customPaintMaterial : this.painterMats[Math.floor(this.painterMats.length * Math.random())]
        }, t.prototype.setColor = function(t) {
          for (var e = 0; e < this.painterMats.length; e++) {
            this.painterMats[e].color.set(t)
          }
        }, t
      }(),
      aI = new ke.Vector3,
      hI = function() {
        function t() {
          this.camera = null, this.sceneView = null, this.isSceneReady = !1, this.gameObjects = [], this.cylinderObject = null, this.sceneObject = null, this.floorObject = null, this.floorPieceObjects = [], this.floorWords = [], this.ball = null, this.oldFloorY = 0, this.lightTarget = new ke.Object3D, this.background = null, this.defaultFloorY = 0, this._curSkinId = -1, this._gameInput = new nI, this.hitInfo = {
            isHit: !1,
            pieceData: null,
            hitY: 0
          }, this._oldTween = null
        }
        return t.prototype.hideScene = function() {
          this.sceneObject.visible = !1, this.staticObject.visible = !1, this._gameInput.setRotateEnable(!1)
        }, t.prototype.showScene = function() {
          this.sceneObject.visible = !0, this.staticObject.visible = !0, this._gameInput.reset(), this.resetCameraPos()
        }, t.prototype.init = function() {
          this.camera = bI.camera, this.sceneView = bI.scene, this.staticObject = new ke.Object3D, this.sceneView.add(this.staticObject), this.sceneObject = new ke.Object3D, this.sceneView.add(this.sceneObject), this.floorObject = new ke.Object3D, this.sceneObject.add(this.floorObject), this.initLight(), this.initBackground(), this.resetCameraPos();
          var t = this.camera.position.y;
          this.light.position.y = t + 5, this.lightTarget.position.y = t - 5, this.lightTarget.updateMatrix()
        }, t.prototype.resetCameraPos = function() {
          this.camera.position.set(0, 12, 14), this.camera.lookAt(new ke.Vector3(0, 2, 0))
        }, t.prototype.initLight = function() {
          this.lightTarget.matrixAutoUpdate = !1, this.staticObject.add(this.lightTarget), this.light = new ke.DirectionalLight(16777215, .5), this.light.position.set(5, 5, 8), this.light.target = this.lightTarget, this.light.castShadow = !0;
          this.light.shadow.camera.left = -10, this.light.shadow.camera.right = 10, this.light.shadow.camera.top = 10, this.light.shadow.camera.bottom = -10, this.light.shadow.camera.near = 2, this.light.shadow.camera.far = 50;
          var t = zi ? 512 : 1024;
          this.light.shadow.mapSize.x = t, this.light.shadow.mapSize.y = t, this.staticObject.add(this.light)
        }, t.prototype.updateShadowMap = function() {
          for (var t = 0; t < this.gameObjects.length; t++) {
            this.gameObjects[t].updateMaterial()
          }
        }, t.prototype.initBackground = function() {
          this.background = new iI, this.staticObject.add(this.background.bgMesh)
        }, t.prototype.setup = function() {
          var t = this;
          this.cylinderObject = new Mk, this.addGameObject(this.cylinderObject), this.initTextures(), this._followTrail = new eI(this.particleTexture), this._hitParticle = new rI(this.particleTexture), this._collectParticle = new Dk(this.particleTexture), this._painter = new sI, this.cylinderObject.update(0), this.initBall(uC.skin), this._addListeners(), mr((function() {
            t.setBallSkin(uC.skin)
          })), this._followTrail.addListeners(), this._painter.addListeners(), this.previewFloors()
        }, t.prototype.previewFloors = function() {
          RI.setFightInfo({
            fightId: -1,
            floorCount: rh.createFloorNum,
            map: 0,
            syncData: null
          }), this.gameReady(!1)
        }, t.prototype.previewShow = function() {
          this.addGameObject(this.ball), this.isSceneReady = !0
        }, t.prototype.onFloorChange = function() {
          this.floorPieceObjects.length < RI.floorCount && this.floorPieceObjects.length - RI.curFloor <= 8 && this.generateFloorModels(4)
        }, t.prototype.setTrailSkin = function(t) {
          this._followTrail.setTrailSkin(t)
        }, t.prototype.setPaintSkin = function(t) {
          this._painter.setPaintSkin(t)
        }, t.prototype.setBallSkin = function(t) {
          var e = hh.getItem(t);
          e || (e = hh.getItem($e)), e && this._curSkinId !== t && (this._curSkinId = t, e.model ? (this.ball.setModelBall(e), this.setBallColor(e, !0)) : this.setBallColor(e, !1), this._hitParticle.updatePieceParticle(e), this._painter.updatePaint(), this._followTrail.updateTrailParticle())
        }, t.prototype.reset = function() {
          this._gameInput.reset(), this.ball.visible = !0, this.floorObject.quaternion.set(0, 0, 0, 1), this.floorObject.position.set(0, 0, 0), this.cylinderObject.reset(), this.ball.reset(), this.ball.setVelocity(je), this.oldFloorY = this.ball.stayY, this.sceneObject.position.y = 0, this.defaultFloorY = this.oldFloorY, this.removeAllFloors(), TWEEN.killTweensOf(this.camera.position), this._oldTween = null
        }, t.prototype.setRotateEnable = function(t) {
          this._gameInput.setRotateEnable(t)
        }, t.prototype.gameReady = function(t) {
          this.setRotateEnable(t), this.reset(), this.generateFloorModels(8)
        }, t.prototype.removeAllFloors = function() {
          for (var t = this.floorPieceObjects.length - 1; t >= 0; t--) {
            var e = this.floorPieceObjects[t];
            if (e)
              for (var i = e.length - 1; i >= 0; i--) e[i].destroy();
            this.floorPieceObjects[t] = null
          }
          this.floorPieceObjects.length = 0;
          for (t = this.floorWords.length - 1; t >= 0; t--) {
            var n = this.floorWords[t];
            if (n)
              for (i = n.length - 1; i >= 0; i--) n[i].destroy();
            this.floorWords[t] = null
          }
          this.floorWords.length = 0
        }, t.prototype._addListeners = function() {
          this._gameInput.addListeners(), RI.addListener($g, this.onFloorChange, this)
        }, t.prototype.initTextures = function() {
          var t = this;
          this.particleTexture = LT.getSimpleTexture("dlc/particle/particle2.png", (function(e) {
            e.flipY = !0, e.premultiplyAlpha = !1, t.particleTexture = e, t._hitParticle.setDefaultTexture(e)
          }))
        }, t.prototype.showCollectParticle = function(t) {
          aI.set(0, 0, 0);
          var e = t.threeObj.getWorldPosition(aI);
          e.y -= this.sceneObject.position.y, this._collectParticle.playParticle(e), RI.isGaming && (xk("collect"), Nc.vibrate && !tn() && wx.vibrateShort())
        }, t.prototype.showHitParticle = function(t, e, i) {
          if (6 !== e.type) {
            var n = -RI.curRotation,
              o = this.getFloorPiece(t, e);
            o && o.addPainter(n, this._painter.getPainterMat()), this._hitParticle.playHitParticle(i)
          }
          RI.isGaming && (xk("hit"), Nc.vibrate && !tn() && wx.vibrateShort())
        }, t.prototype.onHitFloor = function(t, e, i) {
          RI.onHitFloor(t, !0), this.showHitParticle(t, e, i)
        }, t.prototype.updatePieceMaterial = function(t, e) {
          var i = this.getFloorPiece(t, e);
          null != i && i.updatePieceMaterialByType()
        }, t.prototype.changePieceType = function(t, e) {
          var i = this.getFloorPiece(t, e);
          null != i && i.checkPieceType()
        }, t.prototype.updateFloorPiecePowerColor = function(t, e) {
          var i = this.getFloorPiece(t, e);
          if (null != i && (i.updatePowerColor(), 0 === e.power)) {
            var n = this.floorPieceObjects[e.floor];
            if (n) {
              var o = n.indexOf(i);
              o >= 0 && n.splice(o, 1)
            }
            i.breakDown(e.type)
          }
        }, t.prototype.getFloorPiece = function(t, e) {
          var i = this.floorPieceObjects[t];
          if (!i) return null;
          for (var n = 0, o = i.length; n < o; n++) {
            var r = i[n];
            if (r.pieceData === e) return r
          }
          return null
        }, t.prototype.getFloorWord = function(t) {
          var e = this.floorWords[t.floor];
          if (!e) return null;
          for (var i = 0, n = e.length; i < n; i++) {
            var o = e[i];
            if (o.data === t) return o
          }
          return null
        }, t.prototype.initBall = function(t) {
          this.ball = new Pk(Me), this.ball.setPosition(new ke.Vector3(0, RI.curY + 1 + this.ball.radius, 3)), this.ball.setVelocity(je), this.setBallSkin(t)
        }, t.prototype.regenerateCollect = function(t) {
          if (t && 0 !== t.length) {
            var e = RI.curFloor + 1,
              i = RI.floorList[e];
            if (i) {
              i.clearWords();
              for (var n = [], o = t.split("|"), r = 0; r < o.length; r++) {
                var s = o[r].split("_").map((function(t) {
                  return t.split("-").map((function(t) {
                    return 0 === t.indexOf("*") ? -parseFloat(t.slice(1)) : parseFloat(t)
                  }))
                }));
                n.push(s)
              }
              bk(i, Us([Nl.Word1, Nl.Word2, Nl.Word3]), 1, n, 0), this.showWordsAtFloor(e)
            }
          }
        }, t.prototype.regenerateFloor = function(t) {
          if (t && 0 !== t.length)
            for (var e = t.split("+"), i = 0; i < e.length; i++) {
              var n = e[i].split("|").map((function(t) {
                  return t.split("_").map((function(t) {
                    return t.split("-").map((function(t) {
                      return 0 === t.indexOf("*") ? -parseFloat(t.slice(1)) : parseFloat(t)
                    }))
                  }))
                })),
                o = RI.curFloor + i + 1,
                r = td(o, n);
              RI.addFloor(r), this.showPiecesAtFloor(o)
            }
        }, t.prototype.generateFloorModels = function(t) {
          var e = this.floorPieceObjects.length,
            i = RI.floorCount - e;
          i > t && (i = t);
          for (var n = e + i, o = e; o < n; o++) this.showPiecesAtFloor(o)
        }, t.prototype.showPiecesAtFloor = function(t) {
          this.breakPiecesAtFloor(t, 0);
          var e = RI.floorList[t];
          if (e) {
            for (var i = e.pieceList, n = [], o = 0, r = i.length; o < r; o++) {
              var s = new Zk(i[o]);
              n.push(s), this.addFloorPiece(s)
            }
            if (this.floorPieceObjects[t] = n, e.wordList) {
              var a = [];
              for (o = 0, r = e.wordList.length; o < r; o++) {
                var h = new AT;
                h.setData(e.wordList[o]), this.addWord(h), a.push(h)
              }
              this.floorWords[t] = a
            }
          }
        }, t.prototype.showWordsAtFloor = function(t) {
          var e = RI.floorList[t];
          if (e && (this.breakWordsAtFloor(t, 0), e.wordList)) {
            for (var i = [], n = 0, o = e.wordList.length; n < o; n++) {
              var r = new AT;
              r.setData(e.wordList[n]), this.addWord(r), i.push(r)
            }
            this.floorWords[t] = i
          }
        }, t.prototype.revive = function(t) {
          for (var e = RI.curFloor, i = RI.revive(t), n = 0; n < i; n++) this.showPiecesAtFloor(RI.curFloor + n);
          var o = this.floorPieceObjects[e];
          if (o)
            for (n = 0; n < o.length; n++) o[n].checkPieceType(!0);
          this.ball.revive(), this.oldFloorY = this.ball.stayY, this.sceneObject.position.y = -(this.ball.stayY - this.defaultFloorY), this.cylinderObject.onRevive(i), this.setRotateEnable(!0)
        }, t.prototype.onGameTimeOut = function() {
          this.setRotateEnable(!1), this.ball.setDead(), RI.onGameTimeOut(), ck(!1), ec("", "")
        }, t.prototype.gameDead = function(t) {
          return r(this, arguments, void 0, (function(t, e) {
            var i;
            return void 0 === e && (e = 0), s(this, (function(n) {
              switch (n.label) {
                case 0:
                  this.setRotateEnable(!1), RI.setDead(), this.ball.setDead(e), n.label = 1;
                case 1:
                  return n.trys.push([1, 6, , 7]), RI.isExpert && Zi() ? [4, lu(2e3)] : [3, 3];
                case 2:
                  n.sent(), n.label = 3;
                case 3:
                  return i = void 0, !t || RI.needShowRevive ? [3, 5] : [4, RI.sendGameEnd(!0)];
                case 4:
                  i = n.sent(), n.label = 5;
                case 5:
                  return yk(t, i), [3, 7];
                case 6:
                  return n.sent(), yk(t, null), [3, 7];
                case 7:
                  return [2]
              }
            }))
          }))
        }, t.prototype.setBallColor = function(t, e) {
          var i = t.color;
          Nc.ballColor = i, e || this.ball.setSolidBall(i), this._painter.setColor(i)
        }, t.prototype.rotateY = function(t) {
          RI.isDead || (RI.setCurRotation(RI.curRotation + t * ta), this.floorObject.quaternion.setFromAxisAngle(Ae, RI.curRotation * Zs))
        }, t.prototype.setRotation = function(t) {
          this.floorObject.quaternion.setFromAxisAngle(Ae, t), RI.setCurRotation(t * ta)
        }, t.prototype.addFloorPiece = function(t) {
          this.gameObjects.indexOf(t) >= 0 || (this.gameObjects.push(t), t.threeObj.parent || this.floorObject.add(t.threeObj))
        }, t.prototype.addWord = function(t) {
          this.gameObjects.indexOf(t) >= 0 || (this.gameObjects.push(t), t.threeObj.parent || this.floorObject.add(t.threeObj))
        }, t.prototype.addGameObject = function(t) {
          this.gameObjects.indexOf(t) >= 0 || (this.gameObjects.push(t), t.threeObj.parent || this.sceneObject.add(t.threeObj))
        }, t.prototype.removeGameObject = function(t) {
          var e = this.gameObjects.indexOf(t);
          e >= 0 && this.gameObjects.splice(e, 1)
        }, t.prototype.collectWordsAtFloor = function(t) {
          var e = this.floorWords[t];
          if (e)
            for (var i = e.length - 1; i >= 0; i--) {
              var n = e[i];
              n && !n.data.collected && (n.data.collected = !0, RI.collectData.addCollect(n.data.type), this.showCollectParticle(n), this.removeWordsAtFloor(n), n.flyUp())
            }
        }, t.prototype.setFloor = function(t, e) {
          var i = RI.curFloor,
            n = RI.curScore;
          if (t > RI.floorCount) return RI.onGameLostFloor(), void this.gameDead(!1);
          if (RI.setCurFloor(t, e), i < t) {
            var o = RI.curScore - n;
            o > 0 && (RI.mode !== Jh.Blood && RI.mode !== Jh.Punch && function(t) {
              var e, i = xx[t];
              i && i.length > 0 ? e = i.pop() : ((e = zh("", 80, 16776960, "center")).text = "+" + t, e.cacheAsBitmap = !0), e.x = (Pe - e.textWidth) / 2 + 80 * (Math.random() - .5), e.y = Mu.top + De / 2 - 100, tc.stage.addChild(e), new TWEEN.Tween(e).delay(100).to({
                y: e.y - 100
              }, 500).onComplete((function() {
                e.parent && e.parent.removeChild(e);
                var i = xx[t];
                i || (i = xx[t] = []), i.length < 5 ? i.push(e) : e.destroy()
              })).start()
            }(o), RI.mode < Jh.Collection && o >= 10 && 1005 === RI.curSkin && this.background.showLightTween()), this.breakPiecesAtFloor(i, e), this.floorPieceObjects.length < RI.floorCount && this.floorPieceObjects.length - i <= 8 && this.generateFloorModels(4)
          }
        }, t.prototype.breakWordsAtFloor = function(t, e) {
          var i = this.floorWords[t];
          if (i) {
            for (var n = i.length - 1; n >= 0; n--) i[n].breakDown(e);
            this.floorWords[t] = null
          }
        }, t.prototype.removeWordsAtFloor = function(t) {
          var e = t.data.floor,
            i = this.floorWords[e];
          if (i) {
            var n = i.indexOf(t);
            n >= 0 && i.splice(n, 1)
          }
        }, t.prototype.breakPiecesAtFloor = function(t, e) {
          var i = this.floorPieceObjects[t];
          if (i) {
            for (var n = i.length - 1; n >= 0; n--) i[n].breakDown(e);
            this.floorPieceObjects[t] = null
          }
          this.breakWordsAtFloor(t, e)
        }, t.prototype.update = function(t, e) {
          if (this.isSceneReady && RI.isStarted && !RI.isPaused) {
            if (this.hitInfo.words = null, this.hitInfo.pieceData = null, RI.update(t, e, this.ball.y, this.hitInfo), this.hitInfo.words) {
              for (var i = 0; i < this.hitInfo.words.length; i++) {
                var n = this.getFloorWord(this.hitInfo.words[i]);
                n && (this.showCollectParticle(n), this.removeWordsAtFloor(n), n.flyUp())
              }
              this.hitInfo.words = null
            }
            if (!RI.isDead && this.hitInfo.isHit) {
              var o = this.hitInfo.pieceData;
              if (o)
                if (RI.cover > 0) this.ball.hitRedPiece(o);
                else {
                  var r = o.curStartAngle + o.angle / 2;
                  this.setRotation(-r * Zs), this.gameDead(!0, this.hitInfo.hitY)
                }
              else this.gameDead(!0, 0)
            }
            RI.isDead || RI.mode !== Jh.Blood || 0 !== RI.blood || (rc("".concat("", "")), this.gameDead(!0, 0));
            var s = this.ball.stayY;
            this.oldFloorY !== s && (this.oldFloorY = s, this._oldTween && TWEEN.remove(this._oldTween), this._oldTween = new TWEEN.Tween(this.sceneObject.position).to({
              y: -(s - this.defaultFloorY)
            }, 500).easing(TWEEN.Easing.Quadratic.Out).start());
            for (i = this.gameObjects.length - 1; i >= 0; i--) this.gameObjects[i].update(t);
            this._hitParticle.update(t), this._followTrail.update(t, this.ball.followY), RI.mode == Jh.Collection && this._collectParticle.update(t)
          }
        }, t
      }(),
      cI = new hI,
      uI = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.castShadow = !0, e.receiveShadow = !1, e.invertX = !1, e
        }
        return i(e, t), e.prototype.removeOldSkin = function() {
          this._modelGroup && (this.remove(this._modelGroup), this._modelGroup = null)
        }, e.prototype.setSkin = function(t, e) {
          return r(this, arguments, void 0, (function(t, e, i) {
            var n, o, r = this;
            return void 0 === i && (i = !1), s(this, (function(s) {
              switch (s.label) {
                case 0:
                  return this.removeOldSkin(), !i && t.endsWith(".obj") && (t = t.replace(".obj", ".bin")), e ? (n = this, [4, FT("".concat(ui, "/team/models/").concat(t), "".concat(ui, "/team/models/").concat(e))]) : [3, 2];
                case 1:
                  return n._modelGroup = s.sent(), [3, 4];
                case 2:
                  return o = this, [4, FT("".concat(ui, "/team/models/").concat(t))];
                case 3:
                  o._modelGroup = s.sent(), s.label = 4;
                case 4:
                  return this._modelGroup.traverse((function(t) {
                    if (t instanceof ke.Mesh) {
                      var e = t.material;
                      e.fog = !1, e.side = ke.DoubleSide, t.castShadow = r.castShadow, t.receiveShadow = r.receiveShadow, t.frustumCulled = !1
                    }
                  })), this.add(this._modelGroup), [2]
              }
            }))
          }))
        }, e.prototype.setDef = function(t, e, i) {
          void 0 === i && (i = !1), this.def === t && this.invertX === i || (this.def = t, this.invertX = i, this.setLayout(bI.teamScene.getLayout(e)), this.setSkin(t.model, t.mtl))
        }, e.prototype.setDebug = function(t, e, i) {
          void 0 === i && (i = !1), this.invertX = i, this.setLayout(bI.teamScene.getLayout(e)), t.position && this.position.set(t.position[0], t.position[1], t.position[2]), t.rotation && this.rotation.set(t.rotation[0], t.rotation[1], t.rotation[2]), t.scale && this.scale.set(t.scale[0], t.scale[1], t.scale[2]), this.setSkin(t.model, t.mtl, !0)
        }, e.prototype.setLayout = function(t) {
          t && (this.position.set(t.position[0], t.position[1], t.position[2]), this.rotation.set(t.rotation[0], t.rotation[1], t.rotation[2]), this.scale.set(t.scale[0], t.scale[1], t.scale[2]));
          var e = this.def;
          e && (e.positionFix && this.position.set(e.positionFix[0], e.positionFix[1], e.positionFix[2]), e.rotationFix && this.rotation.set(e.rotationFix[0], e.rotationFix[1], e.rotationFix[2]), e.scaleFix && this.scale.set(e.scaleFix[0], e.scaleFix[1], e.scaleFix[2])), this.invertX && (this.scale.x *= -1)
        }, e.prototype.updateMaterial = function() {
          this._modelGroup && this._modelGroup.traverse((function(t) {
            t instanceof ke.Mesh && (t.material.needsUpdate = !0)
          }))
        }, e.prototype.update = function(t) {
          this._modelGroup && this._modelGroup.update(t)
        }, e
      }(ke.Object3D),
      lI = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.castShadow = !1, e.receiveShadow = !1, e
        }
        return i(e, t), e
      }(uI),
      dI = function(t) {
        function e(e) {
          var i = t.call(this) || this;
          return i.castShadow = !0, i.receiveShadow = !1, i.decorateId = e, i
        }
        return i(e, t), e
      }(uI),
      pI = new Map,
      fI = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.meshList = [], e.modelObject = null, e._animationMixer = null, e._actions = {}, e._curAction = "jump", e._jump = !1, e.deltaTime = 0, e.velocity = 0, e.jumpHeight = 2, e.gravity = 0, e.rotationDirs = [], e.radius = .3, e.scale.set(1.25, 1.25, 1.25), e._head = new ke.Mesh(new ke.PlaneBufferGeometry(.5, .5)), e._head.position.y = .8, e.add(e._head), e._head.quaternion.copy(bI.camera.quaternion), e._head.visible = !1, e
        }
        return i(e, t), e.prototype.calGravity = function() {
          this.gravity = this.velocity * this.velocity / (2 * this.jumpHeight), this._jumpDuration = this.velocity / this.gravity
        }, e.prototype.setMemberInfo = function(t) {
          this.setSkin(t.skin || $e), this.loadHead(t.avatar)
        }, e.prototype.loadHead = function(t) {
          var e = this;
          if (t || (t = "dlc/ui/default_avatar.png"), pI.has(t)) return this._head.material = pI.get(t), void(this._head.visible = !0);
          LT.loadTexture(t).then((function(i) {
            i.minFilter = ke.LinearFilter, i.magFilter = ke.LinearFilter;
            var n = new ke.ShaderMaterial({
              vertexShader: "\n                    varying vec2 vUv;\n                    void main() {\n                        vUv = uv;\n                        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                    }\n                ",
              fragmentShader: "\n                    varying vec2 vUv;\n                    uniform sampler2D map;\n                    void main() {\n                        float dist = distance(vUv, vec2(0.5));\n                        float alpha = 1.0 - smoothstep(0.5 - 0.02, 0.5 + 0.02, dist);\n                        gl_FragColor = vec4(texture2D(map, vUv).rgb, alpha);\n                    }\n                ",
              uniforms: {
                map: {
                  value: i
                }
              },
              transparent: !0
            });
            n.needsUpdate = !0, pI.set(t, n), e._head.material = n, e._head.visible = !0
          }))
        }, e.prototype.setSkin = function(t) {
          if (this._curSkin !== t) {
            this._curSkin = t;
            var e = hh.getItem(t);
            if (e || (e = hh.getItem($e)), this._head.position.y = 1031 === t ? 1.3 : .8, this.rotationDirs.length = 0, "none" !== e.rotate)
              for (var i = 0; i < e.rotate.length; i++) this.rotationDirs.push(e.rotate[i]);
            e.model ? this.setModelBall(e) : this.setSolidBall(e.color || "#3BB6DF")
          }
        }, e.prototype.setSolidBall = function(t) {
          this.removeModel();
          var e = new ke.Mesh(new ke.SphereBufferGeometry(this.radius, 12, 12), new ke.MeshPhongMaterial({
            color: t,
            flatShading: !1,
            shininess: 50,
            specular: 8947848,
            fog: !1
          }));
          e.castShadow = !0, e.receiveShadow = !1, e.frustumCulled = !1, this.modelObject = e, this.meshList.push(e), this.add(this.modelObject), this.setSolidColor(t)
        }, e.prototype.removeModel = function() {
          this._animationMixer && (this._animationMixer.stopAllAction(), this._animationMixer.uncacheRoot(this._animationMixer.getRoot()), this._animationMixer = null), this._actions = {};
          for (var t = 0, e = this.meshList.length; t < e; t++) {
            var i = this.meshList[t];
            i && (i.geometry && i.geometry.dispose(), i.material && (i.material.map && i.material.map.dispose(), i.material.dispose && i.material.dispose()))
          }
          this.meshList.length = 0, this.modelObject && this.remove(this.modelObject), this.modelObject = null
        }, e.prototype.setSolidColor = function(t) {
          for (var e = 0; e < this.meshList.length; e++) {
            var i = this.meshList[e].material;
            i && i.color.set(t)
          }
        }, e.prototype.setModelBall = function(t) {
          var e = this,
            i = t.scale,
            n = t.rotationY;
          Tk(t, i, n).then((function(i) {
            e._onModelLoaded(i.object3d, i.meshList, t, i.animations)
          })).catch((function() {
            e.onLoadError()
          }))
        }, e.prototype._onModelLoaded = function(t, e, i, n) {
          if (void 0 === n && (n = null), this.removeModel(), this.modelObject = t, this.add(this.modelObject), this.meshList = e, n) {
            if (this._animationMixer = new ke.AnimationMixer(t), n) {
              this._actions = {};
              for (var o = 0; o < n.length; o++) this._actions[n[o].name] = this._animationMixer.clipAction(n[o])
            }
            this.playAction("jump")
          } else this.loadTexture("dlc/model/".concat(i.texture))
        }, e.prototype.onLoadError = function() {
          rc("", 1e3), this.setSolidBall("#3BB6DF")
        }, e.prototype.updateMaterial = function() {
          this.modelObject && this.modelObject.traverse((function(t) {
            t instanceof ke.Mesh && (t.material.needsUpdate = !0)
          }))
        }, e.prototype.playAction = function(t) {
          var e = this._actions[this._curAction];
          e && e.stop(), this._curAction = t;
          var i = this._actions[this._curAction];
          i && i.play()
        }, e.prototype.loadTexture = function(t) {
          var e = this;
          LT.getSimpleTexture(t, (function(t) {
            if (t) {
              t.flipY = !0, t.premultiplyAlpha = !1, t.minFilter = ke.LinearFilter, t.magFilter = ke.LinearFilter;
              for (var i = 0; i < e.meshList.length; i++) {
                var n = e.meshList[i].material;
                n && (n.map = t, n.needsUpdate = !0)
              }
            }
          }))
        }, e.prototype.jump = function(t) {
          void 0 === t && (t = 0), this.delayJumpTime = t, this.defaultY = 1.5, this._jump = !0, this.jumpHeight = Vs(2, 3), this.deltaTime = 0, this.setVelocity(6 + 4 * Math.random())
        }, e.prototype.setVelocity = function(t) {
          this.velocity = t, this.calGravity()
        }, Object.defineProperty(e.prototype, "isJump", {
          get: function() {
            return this._jump
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.update = function(t) {
          if (this._animationMixer && this._animationMixer.update(t), this._head.lookAt(bI.camera.position), this._jump)
            if (this.delayJumpTime > 0) this.delayJumpTime -= t;
            else {
              this.deltaTime += t;
              var e = this.rotationDirs.length;
              if (this.modelObject && e > 0)
                for (var i = -t * Math.PI * 2 / this._jumpDuration, n = 0; n < e; n++) {
                  var o = this.rotationDirs[n];
                  "x" === o ? this.modelObject.rotateOnAxis(Ge, i) : "y" === o ? this.modelObject.rotateOnAxis(Ae, i) : "z" === o && this.modelObject.rotateOnAxis(Ne, i)
                }
              this.position.y = this.defaultY + this.deltaTime * this.velocity - this.gravity * this.deltaTime * this.deltaTime * .5, this.position.y <= this.defaultY && (this.position.y = this.defaultY, this.deltaTime = 0, this._jump = !1, this.modelObject && e > 0 && this.modelObject.rotation.set(0, 0, 0))
            }
        }, e
      }(ke.Object3D),
      gI = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e._innerRadius = 2.6, e._outerRadius = 4, e.castShadow = !1, e.receiveShadow = !0, e._avatars = [], e._avatarPool = [], e
        }
        return i(e, t), e.prototype.setSkin = function(e, i) {
          return r(this, void 0, void 0, (function() {
            return s(this, (function(n) {
              switch (n.label) {
                case 0:
                  return [4, t.prototype.setSkin.call(this, e, i)];
                case 1:
                  return n.sent(), this._modelGroup.scale.set(.08, .08, .08), [2]
              }
            }))
          }))
        }, e.prototype.hideAvatars = function() {
          for (var t = 0; t < this._avatars.length; t++) {
            var e = this._avatars[t];
            this._avatarPool.push(e), this.remove(e)
          }
          this._avatars.length = 0, this._lastJumpAvatar = null
        }, e.prototype.showAvatar = function(t) {
          var e = this._avatarPool.pop() || new fI;
          e.setMemberInfo(t), this._avatars.push(e), this.add(e), this.refreshAvatarPositions()
        }, e.prototype.refreshAvatarPositions = function() {
          for (var t = Math.PI / 4, e = 2 * Math.PI / 8, i = 2 * Math.PI / 12, n = 0; n < this._avatars.length; n++) {
            var o = this._avatars[n],
              r = void 0,
              s = void 0;
            n < 8 ? (s = this._innerRadius, r = t + e + n * e) : (s = this._outerRadius, r = t + (n - 8) * i);
            var a = Math.cos(r) * s,
              h = Math.sin(r) * s;
            o.position.set(a, 1.5, h)
          }
          this._lastJumpAvatar = this._avatars[0], this._lastJumpAvatar && this._lastJumpAvatar.jump()
        }, e.prototype.updateMaterials = function() {
          this.updateMaterial();
          for (var t = 0, e = this._avatars.length; t < e; t++) {
            this._avatars[t].updateMaterial()
          }
        }, e.prototype.update = function(e) {
          t.prototype.update.call(this, e);
          for (var i = 0, n = this._avatars.length; i < n; i++) {
            this._avatars[i].update(e)
          }
          if (this._lastJumpAvatar && !this._lastJumpAvatar.isJump) {
            var o = this._avatars.indexOf(this._lastJumpAvatar);
            o === this._avatars.length - 1 ? o = 0 : o++, this._lastJumpAvatar = this._avatars[o], this._lastJumpAvatar.jump(2 * Math.random())
          }
        }, e
      }(uI),
      mI = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.castShadow = !1, e.receiveShadow = !0, e
        }
        return i(e, t), e
      }(uI),
      yI = function() {
        function t() {
          this.isFirstEnter = !0, this.camera = null, this.sceneView = null, this.isVisible = !1, this.sceneObject = null, this.lightTarget = new ke.Object3D, this.declareObjects = [], this._rotation = 0, this._input = new fb, this.camera = bI.camera, this.sceneView = bI.scene, this.staticObject = new ke.Object3D, this.sceneView.add(this.staticObject), this.sceneObject = new ke.Object3D, this.sceneView.add(this.sceneObject), this.initLight();
          var t;
          this.light.position.y = 17, this.lightTarget.position.y = 7, this.lightTarget.updateMatrix(), this.background = new iI, this.background.setColors([new ke.Color(5355263), new ke.Color(5355263), new ke.Color(5355263), new ke.Color(5355263)]), this.staticObject.add(this.background.bgMesh), this.teamBg = new lI, this.sceneObject.add(this.teamBg), this.teamGround = new mI, this.sceneObject.add(this.teamGround), this.teamFloor = new gI, this.sceneObject.add(this.teamFloor), this._input.addListeners(), this._input.setRotateEnable(!1), this.isVisible = !1, this.decorateLayouts || (this.decorateLayouts = (t = "".concat(ci, "/team/decorates.json"), JSON.parse(wi.readFileSync(t, "utf-8"))).decorates)
        }
        return t.prototype.hideScene = function() {
          this.sceneObject.visible = !1, this.staticObject.visible = !1, this.teamFloor.hideAvatars(), this._input.setRotateEnable(!1), this.isVisible = !1, this.watchPopupCount && (this.watchPopupCount(), this.watchPopupCount = null)
        }, t.prototype.showScene = function() {
          var t = this;
          this.sceneObject.visible = !0, this.staticObject.visible = !0, this._input.reset(), this.rotateY(0), this.camera.position.set(0, 12, 14), this.camera.lookAt(new ke.Vector3(0, 0, 0)), this.isVisible = !0, this.showDecorates(), this.loadMembers(), this.watchPopupCount = mr((function() {
            t._input.setRotateEnable(0 === tc.openedPopUpPanelCount)
          }))
        }, t.prototype.loadMembers = function() {
          var t = this;
          Ew().then((function(e) {
            if (t.isVisible) {
              t.teamFloor.hideAvatars();
              for (var i = e.members, n = 0; n < i.length; n++) {
                var o = i[n];
                t.teamFloor.showAvatar(o)
              }
            }
          }))
        }, t.prototype.getDecorateLayouts = function() {
          return this.decorateLayouts
        }, t.prototype.showDecorates = function() {
          li(ui) && this.refreshDecorates()
        }, t.prototype.refreshDecorates = function() {
          for (var t = mx.teamInfo.decorates || [], e = hd.backLeft; e <= hd.floor; e++) {
            var i = void 0;
            if (i = e >= t.length ? 0 : t[e], isNaN(i) || i <= 0)
              if (e === hd.bg) i = 10101;
              else if (e === hd.ground) i = 20101;
            else {
              if (e !== hd.floor) {
                this.removeDecorateObject(e);
                continue
              }
              i = 30101
            }
            var n = this.declareObjects[e];
            if (!n || n.decorateId !== i) {
              var o = Dh.getDecorate(i);
              o && this.addDecorateObject(e, o)
            }
          }
        }, t.prototype.removeDecorateObject = function(t) {
          var e = this.declareObjects[t];
          e && (t === hd.statue ? this.teamFloor.remove(e) : this.sceneObject.remove(e)), this.declareObjects[t] = null
        }, t.prototype.addDebugDecorateObject = function(t, e) {
          if ("bg" === e.type) this.teamBg.setDebug(e, t);
          else if ("ground" === e.type) this.teamGround.setDebug(e, t);
          else if ("floor" === e.type) this.teamFloor.setDebug(e, t);
          else {
            this.removeDecorateObject(t);
            var i = new dI(-1);
            i.setDebug(e, t, !1), this.declareObjects[t] = i, t === hd.statue ? this.teamFloor.add(i) : this.sceneObject.add(i)
          }
        }, t.prototype.addDecorateObject = function(t, e) {
          if ("bg" === e.type) this.teamBg.setDef(e, t);
          else if ("ground" === e.type) this.teamGround.setDef(e, t);
          else if ("floor" === e.type) this.teamFloor.setDef(e, t);
          else {
            this.removeDecorateObject(t);
            var i = !1;
            if (e.position) {
              var n = t == hd.backLeft || t == hd.frontLeft ? "left" : "right";
              i = e.position !== n
            }
            var o = new dI(e.id);
            o.setDef(e, t, i), this.declareObjects[t] = o, t === hd.statue ? this.teamFloor.add(o) : this.sceneObject.add(o)
          }
        }, t.prototype.getLayout = function(t) {
          return this.decorateLayouts[t]
        }, t.prototype.initLight = function() {
          this.lightTarget.matrixAutoUpdate = !1, this.staticObject.add(this.lightTarget), this.light = new ke.DirectionalLight(16777215, .5), this.light.position.set(5, 5, 8), this.light.target = this.lightTarget, this.light.castShadow = !0;
          this.light.shadow.camera.left = -10, this.light.shadow.camera.right = 10, this.light.shadow.camera.top = 10, this.light.shadow.camera.bottom = -10, this.light.shadow.camera.near = 2, this.light.shadow.camera.far = 50;
          var t = zi ? 512 : 1024;
          this.light.shadow.mapSize.x = t, this.light.shadow.mapSize.y = t, this.staticObject.add(this.light)
        }, t.prototype.rotateY = function(t) {
          this._rotation += t, this.teamFloor.rotation.y = this._rotation
        }, t.prototype.updateShadowMap = function() {
          this.teamBg.updateMaterial(), this.teamGround.updateMaterial(), this.teamFloor.updateMaterials();
          for (var t = 0; t < this.declareObjects.length; t++) {
            var e = this.declareObjects[t];
            e && e.updateMaterial()
          }
        }, t.prototype.update = function(t, e) {
          if (this.isVisible) {
            for (var i = 0, n = this.declareObjects.length; i < n; i++) {
              var o = this.declareObjects[i];
              o && o.update(t)
            }
            this.teamBg.update(t), this.teamGround.update(t), this.teamFloor.update(t)
          }
        }, t
      }(),
      vI = function() {
        function t() {
          this.gameRender = null, this.camera = null, this.scene = null, this.teamScene = null, this.isTeamSceneVisible = !1
        }
        return t.prototype.initTeamScene = function() {
          this.teamScene || (this.teamScene = new yI, this.teamScene.hideScene())
        }, t.prototype.showTeamScene = function() {
          cI.hideScene(), this.teamScene || (this.teamScene = new yI), this.ambientLight.color.set(16777215), this.teamScene.showScene(), this.isTeamSceneVisible = !0
        }, t.prototype.showGameScene = function() {
          this.teamScene && this.teamScene.hideScene(), this.ambientLight.color.set(16777215), cI.showScene(), this.isTeamSceneVisible = !1
        }, t.prototype.init = function() {
          var t = this,
            e = this.gameRender = new jc;
          this.camera = new ke.PerspectiveCamera(60, Se, .1, 1e3), this.scene = new ke.Scene, this.ambientLight = new ke.AmbientLight(16777215), this.scene.add(this.ambientLight), tc.init(this.gameRender.pixiApp), cI.init();
          var i = zi ? 2 : 1,
            n = 0,
            o = Date.now();
          this.animate = function(r) {
            var s = Date.now(),
              a = .001 * (s - o);
            a > .1 && (a = .1), o = s, t.isTeamSceneVisible ? t.teamScene.update(a, s) : cI.update(a, s), TWEEN.update(s), ++n >= i && (n = 0, Sc && Sc.update()), e.render(t.scene, t.camera, s), requestAnimationFrame(t.animate)
          }, this.animate(0)
        }, Object.defineProperty(t.prototype, "shadowMapEnabled", {
          get: function() {
            return this.gameRender.renderer3D.shadowMap.enabled
          },
          set: function(t) {
            var e = this.gameRender.renderer3D.shadowMap;
            if (e.enabled != t) {
              e.enabled = t;
              var i = e.map;
              !t && i && this.gameRender.renderer3D.clearTarget(i, !0, !0, !0)
            }
            cI.updateShadowMap(), this.teamScene && this.teamScene.updateShadowMap()
          },
          enumerable: !1,
          configurable: !0
        }), t
      }(),
      bI = new vI,
      wI = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = Hh(580, 249), e.addChild(e.bg), e.skinItem = new om(!1), e.skinItem.x = 50, e.skinItem.y = 40, e.addChild(e.skinItem), e.nameText = Xh("", "#FFFFFF", !1, "left", 32), e.nameText.x = e.skinItem.x, e.nameText.y = e.skinItem.y + e.skinItem.height + 10, e.addChild(e.nameText), e.tryBtn = new Ru("button_try.png"), e.tryBtn.y = e.bg.height / 2, e.tryBtn.x = 430, e.addChild(e.tryBtn.skin), e.tryBtn.on(Iu, e.onTry, e), e
        }
        return i(e, t), e.prototype.onTry = function() {
          return r(this, void 0, void 0, (function() {
            var t;
            return s(this, (function(e) {
              switch (e.label) {
                case 0:
                  return [4, mu(6)];
                case 1:
                  return (t = e.sent()) === ve.cancel ? [2, gu("")] : t === ve.fail ? [2, rc(fu)] : (this._onTrySuccess(), [2])
              }
            }))
          }))
        }, e.prototype._onTrySuccess = function() {
          switch (oh.getItem(this.skinId).skinType) {
            case 0:
              RI.curSkin = this.skinId;
              break;
            case 1:
              RI.curPaint = this.skinId;
              break;
            case 2:
              RI.curTrail = this.skinId
          }
          tc.closePanel(xI.clsName)
        }, e.prototype.setSkin = function(t) {
          this.skinId = t;
          var e = oh.getItem(t);
          this.skinItem.data = e, this.skinItem.setActive(!0), this.nameText.text = e.name, this.nameText.x = this.skinItem.x + (this.skinItem.width - this.nameText.width) / 2
        }, e.prototype.destroy = function() {
          this.tryBtn && (this.tryBtn.destroy(), this.tryBtn = null), this.skinItem && (this.skinItem.destroy(), this.skinItem = null), t.prototype.destroy.call(this)
        }, e
      }(Fl),
      xI = function(t) {
        function e() {
          var e = t.call(this, 2, !0) || this;
          return e.check = !1, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.bg = $h(620, 715), this.addChild(this.bg);
          var t = Xh("", 16777215, !0, "center", 40);
          t.x = (this.bg.width - t.width) / 2, t.y = 30, this.addChild(t), this.item0 = new wI, this.item0.x = 20, this.item0.y = 110, this.addChild(this.item0), this.item1 = new wI, this.item1.x = 20, this.item1.y = 370, this.addChild(this.item1), this.checkbox = jh(this.check ? "try_skin_checked.png" : "try_skin_uncheck.png"), this.checkbox.x = (this.bg.width - this.checkbox.width) / 2, this.checkbox.y = 650, this.addChild(this.checkbox), this.checkbox.interactive = !0, this.checkbox.on(Tu, this.onCheck, this), this.skipBtn = new Ru("button_try_skip.png"), this.skipBtn.on(Tu, this.close, this), this.skipBtn.x = this.bg.width / 2, this.skipBtn.y = this.bg.height + 50, this.addSkin(this.skipBtn)
        }, e.prototype.onCheck = function() {
          this.check = !this.check, this.checkbox.texture = Vh(this.check ? "try_skin_checked.png" : "try_skin_uncheck.png"), ws.skipSkinTry = !0, uC.gameVersion < 2 && (BI = Je.curTime, Nh("banTrySkinTime" + $hostDef.api, BI)), this.close()
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.item0.setSkin(e[0]), e.length >= 2 ? this.item1.setSkin(e[1]) : this.item1.visible = !1
        }, e.prototype.addPromise = function() {
          return r(this, void 0, void 0, (function() {
            var t = this;
            return s(this, (function(e) {
              return [2, new Promise((function(e) {
                t.resolve = e
              }))]
            }))
          }))
        }, e.prototype.onDestroy = function() {
          t.prototype.onDestroy.call(this), this.item0 && (this.item0.destroy(), this.item0 = null), this.item1 && (this.item1.destroy(), this.item1 = null), this.skipBtn && (this.skipBtn.destroy(), this.skipBtn = null), this.resolve && (this.resolve(), this.resolve = void 0)
        }, e.clsName = "TrySkinView", e
      }(Qg);

    function TI(t, e) {
      return r(this, arguments, void 0, (function(t, e, i, n) {
        var o;
        return void 0 === i && (i = 0), void 0 === n && (n = 0), s(this, (function(r) {
          switch (r.label) {
            case 0:
              return i = void 0 !== i ? Number(i) : 0, [4, UP({
                skin: e,
                map: i,
                challengeId: n,
                mode: t
              })];
            case 1:
              return (o = r.sent()).syncData && uC.syncData(o.syncData), [2, o]
          }
        }))
      }))
    }

    function kI(t, e) {
      return window.md5.base64("".concat("9c").concat("CG").concat("Tq").concat("a&").concat(uC.uid, "&").concat(t, "&").concat(e)).slice(3, 11)
    }

    function II(t, e, i, n, o, a, h, c, u) {
      return r(this, void 0, void 0, (function() {
        var r;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              return s.trys.push([0, 2, , 3]), [4, WP({
                fightId: t,
                score: e,
                dropFloor: i,
                crashPlane: n,
                crashBanPlane: o,
                clientTasks: a,
                relayId: h,
                modeScore: c,
                pass: u,
                sig: kI(t, e)
              })];
            case 1:
              return (r = s.sent()).syncData && (uC.syncData(r.syncData), function(t, e, i) {
                0;
                X.logEvent("-", {
                  mode: t,
                  time: e,
                  ct: i
                })
              }(RI.mode, Math.round(RI.gameTime), uC.todayGameCount)), [2, r];
            case 2:
              return oc(s.sent()), [3, 3];
            case 3:
              return [2]
          }
        }))
      }))
    }

    function CI(t) {
      return r(this, void 0, void 0, (function() {
        var e, i;
        return s(this, (function(n) {
          switch (n.label) {
            case 0:
              return (e = uC.items.get(t)) && e.isExpired ? (rc(""), i = oh.getItem($e), [4, tC(2 === i.skinType ? 3001 : 1 === i.skinType ? 2001 : $e)]) : [3, 2];
            case 1:
              n.sent(), n.label = 2;
            case 2:
              return [2]
          }
        }))
      }))
    }

    function _I(t) {
      return r(this, arguments, void 0, (function(t, e, i, n) {
        var o, r;
        return void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = !1), s(this, (function(s) {
          switch (s.label) {
            case 0:
              return rw(), qy() && t === Jh.Classics && ($y.resetWxChallenge(), $y.isInWxChallenge || (n ? $y.setCreateCondition($hostDef.wxChallengeRewardScoreKey, $hostDef.wxChallengeRewardScore) : $y.setCreateCondition($hostDef.wxChallengeScoreKey, $hostDef.wxChallengeScore))), bI.isTeamSceneVisible && (hw(), bI.showGameScene()), [4, CI(uC.skin)];
            case 1:
              return s.sent(), [4, CI(uC.paint)];
            case 2:
              return s.sent(), [4, CI(uC.trail)];
            case 3:
              return s.sent(), RI.mode = t, RI.curSkin = uC.skin, RI.curPaint = uC.paint, RI.curTrail = uC.trail, RI.mode > Jh.Challenge && (qI("".concat(Mh.getMode(RI.mode).name, "-")), RI.modeDiff = function() {
                var t = UT(),
                  e = Math.floor(t / pm),
                  i = Math.floor(e / lh.dailyModeOrders.length),
                  n = WT(),
                  o = i % n.diffOrder.length;
                return n.diffOrder[o]
              }(), DEVELOP && console.log("mode diff:" + RI.modeDiff)), DEVELOP && RI.debugMode !== Jh.Classics && (RI.mode = RI.debugMode, RI.modeDiff = RI.debugModeDiff, console.log("" + Mh.getMode(RI.mode).name + ":" + RI.modeDiff)), RI.mode !== Jh.Collection ? [3, 5] : [4, di(ui)];
            case 4:
              s.sent(), RI.setupCollect(), s.label = 5;
            case 5:
              return mx.hasTeam ? [4, mx.loadPersonTask()] : [3, 7];
            case 6:
              s.sent(), s.label = 7;
            case 7:
              return e > 0 ? [4, vh.loadExpertMap(e)] : [3, 9];
            case 8:
              s.sent(), s.label = 9;
            case 9:
              return function() {
                if ($hostDef.censor || !$hostDef.trySkin || OD()) return !1;
                if (uC.gameVersion < 2) return ! function() {
                  void 0 === BI && (BI = wx.getStorageSync("banTrySkinTime" + $hostDef.api) || 0, DEVELOP && console.log("banTrySkinTime:", BI));
                  return gt(new Date(Je.curTime), new Date(BI))
                }() && !ws.skipSkinTry;
                return !ws.skipSkinTry
              }() && (o = function() {
                for (var t = [], e = oh.getNormalSkins(), i = 0; i < e.length; i++)(s = e[i]).trial <= 0 || uC.hasSkin(s.id) || t.push(s.id);
                var n = [],
                  o = oh.getPaintSkins();
                for (i = 0; i < o.length; i++)(s = o[i]).trial <= 0 || uC.hasSkin(s.id) || n.push(s.id);
                var r = oh.getTrailSkins();
                for (i = 0; i < r.length; i++) {
                  var s;
                  (s = r[i]).trial <= 0 || uC.hasSkin(s.id) || n.push(s.id)
                }
                var a = [];
                return t.length > 0 && n.length > 0 ? (a.push(Us(t)), a.push(Us(n))) : t.length > 0 ? a = t.length >= 2 ? it(t).slice(0, 2) : t.slice() : n.length > 0 && (a = n.length >= 2 ? it(n).slice(0, 2) : n.slice()), a
              }()).length > 0 ? [4, tc.showPanel(xI, o).addPromise()] : [3, 11];
            case 10:
              s.sent(), s.label = 11;
            case 11:
              return cI.setBallSkin(RI.curSkin), cI.setTrailSkin(RI.curTrail), cI.setPaintSkin(RI.curPaint), RI.isStarted && !RI.isDead || Ag.isFinishCurChallenge && Ag.restartGame(), [4, TI(t, RI.curSkin, e, i)];
            case 12:
              return (r = s.sent()) && i > 0 && (uC.isChallengeComplete(i) || function(t) {
                0;
                X.logEvent("-", {
                  level: t,
                  count: uC.challengeEnterCount
                })
              }(i)), RI.setFightInfo(r), cI.reset(), cI.generateFloorModels(8), cI.setRotateEnable(!0), RI.startGame(), $x.instance.visible = !0, $x.instance.setGameMode(RI.mode), [2]
          }
        }))
      }))
    }
    var BI = void 0;

    function SI(t) {
      t && t.gold && t.gold > 0 ? tc.showPanel(pk, t) : pu()
    }
    var PI = function() {
      function t(t) {
        this.offset = 0, this.value = 0, this.setValue(t)
      }
      return t.prototype.setValue = function(t) {
        this.offset = Math.floor(2147483647 * Math.random()), this.value = t ^ this.offset
      }, t.prototype.getValue = function() {
        return this.value ^ this.offset
      }, t
    }();

    function DI(t, e, i, n, o, r, s) {
      var a, h;
      if (e.stage) h = !1, a = gh.getStage(e.stage), i = e.angleDiff;
      else if (h = !0, 0 === t) a = gh.getStage(1);
      else {
        var c = e.getRandomHardId();
        a = gh.getRandomStageByHard(c)
      }
      for (var u = [], l = 0, d = 0; d < a.rules.length; d++) {
        for (var p = a.rules[d], f = t + d, g = new zl(f), m = 0, y = p.length; m < y; m++) {
          var v = p[m],
            b = v[0],
            w = b[0] + i,
            x = void 0,
            T = void 0;
          3 === b.length ? (T = b[1], x = b[2]) : 2 === b.length ? (T = b[1], x = Ve) : (T = 0, x = 0);
          for (var k = 1, I = v.length; k < I; k++) {
            var C = v[k],
              _ = Kl(f, C[0], w, C[1], T, x);
            g.addPiece(_), w += C[1]
          }
        }
        h && 0 === d ? (l = dd(g, o, n), g.afterInit(), ld(e, g, r, s)) : (0 !== l && g.rotate(l), g.afterInit(), d > 0 && (g.gapToType = u[0].gapToType)), g.gapAngle = g.findFirstGapAngle(), u.push(g)
      }
      return u
    }

    function MI(t, e, i, n, o, r, s) {
      var a, h;
      if (e.stage) h = !1, a = gh.getStage(e.stage), i = e.angleDiff;
      else if (h = !0, 0 === t) a = gh.getStage(1);
      else {
        var c = e.getRandomHardId();
        a = gh.getRandomStageByHard(c)
      }
      for (var u = [], l = 0, d = 0; d < a.rules.length; d++) {
        for (var p = a.rules[d], f = t + d, g = new zl(f), m = 0, y = p.length; m < y; m++) {
          var v = p[m],
            b = v[0],
            w = b[0] + i,
            x = void 0,
            T = void 0;
          3 === b.length ? (T = b[1], x = b[2]) : 2 === b.length ? (T = b[1], x = Ve) : (T = 0, x = 0);
          for (var k = 1, I = v.length; k < I; k++) {
            var C = v[k],
              _ = Kl(f, C[0], w, C[1], T, x);
            g.addPiece(_), w += C[1]
          }
        }
        h && 0 === d ? (l = dd(g, o, n), g.afterInit(), ld(e, g, r, s)) : (0 !== l && g.rotate(l), g.afterInit(), d > 0 && (g.gapToType = u[0].gapToType)), g.gapAngle = g.findFirstGapAngle(), u.push(g)
      }
      return u
    }

    function FI(t, e, i, n, o, r, s) {
      var a, h;
      if (e.stage) h = !1, a = gh.getStage(e.stage), i = e.angleDiff;
      else if (h = !0, 0 === t) a = gh.getStage(1);
      else {
        var c = e.getRandomHardId();
        a = gh.getRandomStageByHard(c)
      }
      for (var u = [], l = 0, d = 0; d < a.rules.length; d++) {
        for (var p = a.rules[d], f = t + d, g = new zl(f), m = 0, y = p.length; m < y; m++) {
          var v = p[m],
            b = v[0],
            w = b[0] + i,
            x = void 0,
            T = void 0;
          3 === b.length ? (T = b[1], x = b[2]) : 2 === b.length ? (T = b[1], x = Ve) : (T = 0, x = 0);
          for (var k = 1, I = v.length; k < I; k++) {
            var C = v[k],
              _ = Kl(f, C[0], w, C[1], T, x);
            g.addPiece(_), w += C[1]
          }
        }
        h && 0 === d ? (l = dd(g, o, n), g.afterInit(), ld(e, g, r, s)) : (0 !== l && g.rotate(l), g.afterInit(), d > 0 && (g.gapToType = u[0].gapToType)), g.gapAngle = g.findFirstGapAngle(), u.push(g)
      }
      return u
    }

    function EI(t, e, i, n, o, r, s) {
      var a, h;
      if (e.stage) h = !1, a = gh.getStage(e.stage), i = e.angleDiff;
      else if (h = !0, 0 === t) a = gh.getStage(1);
      else {
        var c = e.getRandomHardId();
        a = gh.getRandomStageByHard(c)
      }
      for (var u = [], l = 0, d = 0; d < a.rules.length; d++) {
        for (var p = a.rules[d], f = t + d, g = new zl(f), m = 0, y = p.length; m < y; m++) {
          var v = p[m],
            b = v[0],
            w = b[0] + i,
            x = void 0,
            T = void 0;
          3 === b.length ? (T = b[1], x = b[2]) : 2 === b.length ? (T = b[1], x = Ve) : (T = 0, x = 0);
          for (var k = 1, I = v.length; k < I; k++) {
            var C = v[k],
              _ = Kl(f, C[0], w, C[1], T, x);
            g.addPiece(_), w += C[1]
          }
        }
        h && 0 === d ? (l = dd(g, o, n), g.afterInit(), ld(e, g, r, s)) : (0 !== l && g.rotate(l), g.afterInit(), d > 0 && (g.gapToType = u[0].gapToType)), g.gapAngle = g.findFirstGapAngle(), u.push(g)
      }
      return u
    }
    var LI, OI = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.fightId = 0, e.mapId = 0, e.challengeId = 0, e.mode = Jh.Classics, e._modeDiff = qs.Level1, e.debugMode = Jh.Classics, e.debugModeDiff = qs.Level1, e.curSkin = 0, e.curPaint = 0, e.curTrail = 0, e.curY = 4, e.floorList = [], e.lastHitFloor = 0, e.lastRotation = 0, e.curRotation = 0, e.lastBallY = 0, e.curBallY = 0, e._curScore = new PI(0), e.curFloor = 0, e.endFloor = 0, e.maxFloor = 0, e.deadFloor = -1, e.crashPlane = 0, e.crashBanPlane = 0, e.forceGapToGapFloor = 0, e.gapToGapFactor = 0, e.forceGapToBanFloor = 0, e.gapToBanFactor = 0, e.isCoinRevive = !1, e.isVideoRevive = !1, e.reviveCount = 0, e.isDead = !1, e.isGaming = !1, e.isStarted = !1, e.isPaused = !1, e.isHitEnd = !1, e.dropFloorTimes = [], e.hitFloorCounts = [], e.jumpOverWallCounts = [], e.jumpOverCount = 0, e.torusCrossCounts = [], e.torusCrossCount = 0, e.lastHeartTime = 0, e.startTime = 0, e.serverStartTime = 0, e.endTimeStamp = 0, e.gameTime = 0, e._sendGameEnded = !1, e.enableSprint = !1, e._lastCostFloor = 0, e._bloodHitCount = 0, e._ghost = 0, e._cover = 0, e.maxGameTime = 0, e._scoreProgress = 0, wx.onShow((function(t) {
            e.lastHeartTime = Date.now() - 59900
          })), e
        }
        return i(e, t), Object.defineProperty(e.prototype, "scoreLevel", {
          get: function() {
            var t = ze.length;
            if (this._scoreProgress >= Ke) return t + 1;
            for (var e = 1, i = this._scoreProgress, n = 0; n < t; n++) {
              var o = ze[n];
              if (i < o) {
                e = n + 1;
                break
              }
              i -= o
            }
            return e
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "scoreProgress", {
          get: function() {
            return this._scoreProgress
          },
          set: function(t) {
            this._scoreProgress !== t && (this._scoreProgress = Math.max(0, t), this.dispatchEvent(zg))
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "scorePercent", {
          get: function() {
            if (this._scoreProgress >= Ke) return 1;
            for (var t = this.scoreLevel - 1, e = this._scoreProgress, i = 0; i < t; i++) e -= ze[i];
            return Math.min(1, e / ze[t])
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "cover", {
          get: function() {
            return this._cover
          },
          set: function(t) {
            this._cover = t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "ghost", {
          get: function() {
            return this._ghost
          },
          set: function(t) {
            this._ghost = t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "modeDiff", {
          get: function() {
            return this._modeDiff
          },
          set: function(t) {
            if (!(this.mode <= Jh.Challenge)) {
              var e;
              switch (this.mode) {
                case Jh.Collection:
                  e = Qa;
                  break;
                case Jh.FastDrop:
                  e = wh;
                  break;
                case Jh.Blood:
                  e = xh;
                  break;
                case Jh.Mutation:
                  e = Th;
                  break;
                case Jh.Punch:
                  e = Ih;
                  break;
                case Jh.Power:
                  e = Ch
              }
              e && (t < qs.Level1 && (t = qs.Level1), t > e.maxDiff && (t = e.maxDiff), this._modeDiff = t)
            }
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.setupCollect = function() {
          this.collectData = new Ox, this.collectData.setup(this._modeDiff)
        }, Object.defineProperty(e.prototype, "blood", {
          get: function() {
            return this._blood
          },
          set: function(t) {
            this._blood !== t && (this._blood = t, this.dispatchEvent(Yg))
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "curScore", {
          get: function() {
            return this._curScore.getValue()
          },
          set: function(t) {
            this._curScore.setValue(t), this.dispatchEvent(Vg)
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.setFightInfo = function(t) {
          (-1 !== this.fightId || t.map > 0 || t.challengeId > 0 || this.mode >= Jh.Collection) && this.reset(), this.fightId = t.fightId, this.mapId = t.map, this.challengeId = t.challengeId, this.isStarted = !0, this.isGaming = this.fightId > 0, this.mode === Jh.FastDrop ? this.generateAllFloorsBySpeedMode() : this.mode === Jh.Punch ? this.generateAllFloorsByPunchMode() : this.syncFloorsByClient(0, t.floorCount, !1), this.setCurFloor(0, 0), this.dispatchEvent(Hg)
        }, e.prototype.startGame = function() {
          this.gameTime = 0, this.startTime = Date.now(), this.serverStartTime = Je.curTime
        }, e.prototype.setDead = function() {
          this.deadFloor = this.curFloor, this.isDead = !0, this.updateOpenDataScore(), this.dispatchEvent(Ug)
        }, e.prototype.updateOpenDataScore = function() {
          var t, e;
          this.mode < Jh.Challenge && (t = this.mapId, e = this.curScore, t < 0 || 0 === t && Oc({
            type: pc,
            mapId: t,
            score: e
          }))
        }, e.prototype.tickHeart = function(t) {
          !this.isDead && this.isStarted && (this.fightId <= 0 || t - this.lastHeartTime < 6e4 || (this.lastHeartTime = t, function(t) {
            r(this, void 0, void 0, (function() {
              var e;
              return s(this, (function(i) {
                switch (i.label) {
                  case 0:
                    return i.trys.push([0, 2, , 3]), [4, qP({
                      fightId: t
                    })];
                  case 1:
                    return [2, i.sent()];
                  case 2:
                    return e = i.sent(), t === RI.fightId && e.errMsg && e.errMsg.indexOf("") >= 0 && (DEVELOP && console.log("fightHeart error:", JSON.stringify(e)), cI.onGameTimeOut()), [3, 3];
                  case 3:
                    return [2]
                }
              }))
            }))
          }(this.fightId)))
        }, e.prototype.cleanGameOver = function() {
          this.isDead = !1, this.isStarted = !1
        }, Object.defineProperty(e.prototype, "isExpert", {
          get: function() {
            return this.mode === Jh.Expert
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "isChallenge", {
          get: function() {
            return this.mode === Jh.Challenge
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "needShowRevive", {
          get: function() {
            if (this.isHitEnd) return !1;
            if (this.isChallenge) {
              var t = yh.getChallengeMode(this.challengeId);
              return !(t && t.finishFloor <= RI.curFloor)
            }
            return !this.isExpert && (!($hostDef.forceVideoRevive && !yu()) && (this.reviveCount < 2 && (this.canCoinRevive || this.canVideoRevive)))
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "canCoinRevive", {
          get: function() {
            return !this.isCoinRevive && $hostDef.shareRevive && $hostDef.coinEnable
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(e.prototype, "canVideoRevive", {
          get: function() {
            return !this.isVideoRevive
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.revive = function(t) {
          var e;
          void 0 === t && (t = !1), this.reviveCount++, t ? this.isVideoRevive = !0 : this.isCoinRevive = !0, this.isDead = !1, this.isGaming = !0, this.mode === Jh.Blood && (this._lastCostFloor = this.curFloor, this._bloodHitCount = 0, this.blood += $hostDef.reviveAddBlood), e = this.isChallenge ? Math.max(this.curFloor - 3, 0) : Math.max(this.curFloor - 1, 0);
          var i = this.curFloor - e,
            n = this.curFloor;
          this.setCurFloor(e, 0);
          for (var o = ia(60 + Math.floor(60 * Math.random()) - this.curRotation), r = 0; r < i; r++) this.generateReviveFloor(this.curFloor + r, o);
          var s = this.floorList[n];
          if (s)
            for (r = 0; r < s.pieceList.length; r++) {
              var a = s.pieceList[r];
              a.type === a.initType && a.power === a.initPower || s.changePieceType(a, a.initType, a.initPower)
            }
          return this.dispatchEvent(qg), i
        }, e.prototype.getNextWordFloor = function() {
          for (var t = this.curFloor; t < this.floorList.length; t++) {
            var e = this.floorList[t];
            if (e && e.hasWord) return e.floor
          }
          return -1
        }, e.prototype.checkFloors = function() {
          if (!this.isDead && this.isStarted && this.mode !== Jh.FastDrop && this.mode !== Jh.Punch) {
            var t = this.floorCount;
            if (!(this.endFloor > 0 && t >= this.endFloor) && t - this.curFloor < .5 * rh.createFloorByRemainNum) {
              var e = t,
                i = e + rh.createFloorNum;
              this.syncFloorsByClient(e, i, !0)
            }
          }
        }, e.prototype.addJumpOverWallCount = function(t) {
          this.jumpOverWallCounts[t] > 0 || (this.jumpOverWallCounts[t] = 1, this.jumpOverCount++)
        }, e.prototype.addCrossTorusCount = function(t) {
          this.torusCrossCounts[t] > 0 || (this.torusCrossCounts[t] = 1, this.torusCrossCount++)
        }, e.prototype.gameEnd = function() {
          this.isGaming = !1, this.dispatchEvent(Wg)
        }, e.prototype.sendGameEnd = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n, o, r, a, h, c, u, l, d, p, f, g, m, y, v, b, w, x, T, k, I, C;
            return s(this, (function(s) {
              switch (s.label) {
                case 0:
                  if (!this.isDead) return [2];
                  if (this._sendGameEnded) return [2];
                  if (this._sendGameEnded = !0, this.isGaming = !1, this.endTimeStamp = Je.curTime, e = !1, this.curScore >= 1e3 && (i = Je.curTime - this.serverStartTime, 1.25 * (Date.now() - this.startTime) < i && (this.dropFloorTimes.length = 0, this.hitFloorCounts.length = 0, this.jumpOverCount = 0, this.curScore = 0, this.curFloor = 0, this.crashPlane = 0, this.crashBanPlane = 0, e = !0)), n = this.mode >= Jh.Collection, o = [], (r = this.dropFloorTimes.length) > 0)
                    for (a = uC.taskModel.unFinishDropTimeTasks, p = 0; p < a.length; p++) {
                      for (f = a[p], h = f.condition, c = 0, y = 0; y < r && !(r - y < c); y++) {
                        for (v = 0, u = this.dropFloorTimes[y], b = !1, w = y; w < r; w++)
                          if (this.dropFloorTimes[w] - u > h) {
                            v = w - 1 - y, b = !0;
                            break
                          } b || (v = r - 1 - y), v > c && (c = v)
                      }
                      o.push({
                        type: 104,
                        progress: c,
                        condition: h
                      })
                    }
                  if ((l = this.hitFloorCounts.length) > 0)
                    for (d = uC.taskModel.unFinishQuickDropTasks, p = 0; p < d.length; p++)
                      if (105 !== (f = d[p]).type || !n) {
                        for (g = f.condition, m = 0, y = 0; y < l; y++)
                          if (!(this.hitFloorCounts[y] > g)) {
                            if (l - y < m) break;
                            for (v = 0, b = !1, w = y; w < l; w++)
                              if (this.hitFloorCounts[w] > g) {
                                v = w - 1 - y, b = !0;
                                break
                              } b || (v = l - 1 - y), v > m && (m = v)
                          } o.push({
                          type: 105,
                          progress: m,
                          condition: g
                        })
                      } this.jumpOverCount > 0 && o.push({
                    type: 115,
                    progress: this.jumpOverCount
                  }), x = this.isChallenge && !uC.isChallengeComplete(this.challengeId), s.label = 1;
                case 1:
                  return s.trys.push([1, 3, 4, 5]), k = Rg.getRelayId(), t && sc(""), I = 0, this.isPassed = !1, this.mode === Jh.Collection ? (this.isPassed = this.endFloor > 0 && this.curFloor >= this.endFloor, I = this.collectData.getFullCollectCount(), HI(this.mode, I + "", this.isPassed)) : this.mode === Jh.FastDrop ? (this.isPassed = this.endFloor > 0 && this.curFloor >= this.endFloor, I = Math.floor(1e3 * this.gameTime), HI(this.mode, oi(I), this.isPassed)) : this.mode === Jh.Blood ? (I = this.maxFloor, this.isPassed = !1, function(t, e, i) {
                    var n = "".concat(Mh.getMode(Jh.Blood).name, "-");
                    0;
                    X.logEvent("-".concat(n), {
                      modeScore: t,
                      hp: e,
                      reviveTimes: i
                    })
                  }(I + "", this.blood, this.reviveCount)) : this.mode === Jh.Mutation ? (I = this.maxFloor, this.isPassed = !1, function(t, e) {
                    var i = "".concat(Mh.getMode(Jh.Mutation).name, "-");
                    0;
                    X.logEvent("-".concat(i), {
                      modeFloor: t,
                      reviveTimes: e
                    })
                  }(I + "", this.reviveCount)) : this.mode === Jh.Punch ? (I = this.curScore, this.isPassed = this.endFloor > 0 && this.curFloor >= this.endFloor, function(t, e, i, n) {
                    var o = "".concat(Mh.getMode(Jh.Punch).name, "-");
                    0;
                    X.logEvent("-".concat(o), {
                      modeScore: t,
                      isPassed: e ? 1 : 0,
                      reviveTimes: i,
                      scoreLevel: n
                    })
                  }(I + "", this.isPassed, this.reviveCount, this.scoreLevel)) : this.mode === Jh.Power && (I = this.curScore, this.isPassed = !1, function(t, e) {
                    var i = "".concat(Mh.getMode(Jh.Power).name, "-");
                    0;
                    X.logEvent("-".concat(i), {
                      modeScore: t,
                      reviveTimes: e
                    })
                  }(I + "", this.reviveCount)), [4, II(this.fightId, this.curScore, this.curFloor, this.crashPlane, this.crashBanPlane, o, k, I, this.isPassed)];
                case 2:
                  return (T = s.sent()) && T.score >= 0 && (this.curScore = T.score, this.updateOpenDataScore()), t && ac(), [3, 5];
                case 3:
                  return rc("" + s.sent()), [3, 5];
                case 4:
                  return t && ac(), [7];
                case 5:
                  return T && x && (C = yh.getChallengeMode(this.challengeId), this.curFloor >= C.finishFloor && function(t, e) {
                    0;
                    X.logEvent("-", {
                      level: t,
                      revive: e,
                      count: uC.challengeEnterCount
                    })
                  }(this.challengeId, this.reviveCount)), e && rc("", 2e3), Ag.onGameOver(), Rg.onGameOver(), [2, T]
              }
            }))
          }))
        }, Object.defineProperty(e.prototype, "gameModeScore", {
          get: function() {
            return this.mode <= Jh.Challenge ? this.curScore : this.mode === Jh.Collection ? this.collectData.getFullCollectCount() : this.mode === Jh.FastDrop ? Math.floor(this.gameTime) : this.mode === Jh.Blood || this.mode === Jh.Mutation ? this.maxFloor : (this.mode === Jh.Punch || (this.mode, Jh.Power), this.curScore)
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.syncFloorsByClient = function(t, e, i) {
          t >= e || (this.floorCount >= e ? DEVELOP && console.log("") : (this.generateFloor(t, e - t), i && this.dispatchEvent($g)))
        }, Object.defineProperty(e.prototype, "floorCount", {
          get: function() {
            return this.floorList.length
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.update = function(t, e, i, n) {
          if (this.isDead) n.isHit = !1;
          else {
            n.hitY = 0, this.gameTime += t, this.tickHeart(e), this.checkFloors();
            var o, r = this.mode === Jh.FastDrop || this.mode === Jh.Punch,
              s = this.curFloor + 8;
            r ? (o = this.floorList[this.curFloor].speedGroup, s = this.floorList.length) : s > this.floorList.length && (s = this.floorList.length);
            for (var a = this.curFloor; a < s; a++) {
              var h = this.floorList[a];
              if (h && (r && h.disableUpdate && h.speedGroup - o <= 2 && (h.needsUpdate = !0, h.disableUpdate = !1), h.needsUpdate)) {
                var c = h.updateList;
                if (c)
                  for (var u = 0, l = c.length; u < l; u++) c[u].update(t);
                if (h.wordList) {
                  var d = h.wordList;
                  for (u = d.length - 1; u >= 0; u--) {
                    var p = d[u];
                    p.update(t) && (n.words || (n.words = []), n.words.push(p), d.splice(u, 1), h.hasWord = d.length > 0, p.collected = !0, this.collectData.addCollect(p.type))
                  }
                }
              }
            }
            0 === this.curBallY && (this.curBallY = i), this.lastBallY = this.curBallY, this.curBallY = i;
            var f = this.lastRotation;
            this.lastRotation = this.curRotation;
            var g = this.floorList[this.curFloor];
            if (g)
              if (this.curFloor - this.lastHitFloor >= 3) n.isHit = !1;
              else if (this.enableSprint) n.isHit = !1;
            else {
              var m = -f,
                y = -this.curRotation;
              if (m > y) {
                var v = m;
                m = y, y = v
              }
              g.hasWall && this.checkWallHit(g.wallList, i, m, y, n) || g.hasTorus && this.checkTorusWallHit(g.torusList, i, m, y, n) || g.hasHalfWall && this.checkHalfWallHit(g.halfWallList, i, m, y, n) || g.hasScaleWall && this.checkScaleWallHit(g.scaleWallList, i, m, y, n) || (n.isHit = !1)
            } else n.isHit = !1
          }
        }, e.prototype.checkWallHit = function(t, e, i, n, o) {
          if (e > this.curY + 5) return o.isHit = !1, !1;
          if (i !== n) {
            var r = ia(n - i);
            i = ia(i);
            for (var s = 0, a = t.length; s < a; s++) {
              if ((h = t[s]).isIntersect(i, r)) return o.isHit = !0, o.pieceData = h, !0
            }
          } else
            for (r = ia(i), s = 0, a = t.length; s < a; s++) {
              var h;
              if ((h = t[s]).isInside(r)) return o.isHit = !0, o.pieceData = h, !0
            }
          return !1
        }, e.prototype.checkJumpOverWall = function(t) {
          t < Ul(this.curFloor - 1) && this.addJumpOverWallCount(this.curFloor)
        }, e.prototype.checkHalfWallHit = function(t, e, i, n, o) {
          var r = this.curY + 3 + Me;
          if (i !== n)
            for (var s = ia(n - i), a = (i = ia(i)) + s, h = 0, c = t.length; h < c; h++) {
              if ((u = t[h]).isIntersect(i, s)) {
                if (e > r && this.lastBallY > r) return this.checkJumpOverWall(e), o.isHit = !1, !1;
                if (e + (e - this.lastBallY) * (u.curStartAngle + .5 * u.angle - i) / a < r) return o.isHit = !0, o.pieceData = u, !0;
                this.checkJumpOverWall(e)
              }
            } else {
              if (e > r) return o.isHit = !1, !1;
              for (s = ia(i), h = 0, c = t.length; h < c; h++) {
                var u;
                if ((u = t[h]).isInside(s)) return o.isHit = !0, o.pieceData = u, !0
              }
            }
          return !1
        }, e.prototype.checkScaleWallHit = function(t, e, i, n, o) {
          var r = this.curY + Me;
          if (i !== n) {
            if (e > (l = r + 5) && this.lastBallY > l) return o.isHit = !1, !1;
            for (var s = ia(n - i), a = (i = ia(i)) + s, h = 0, c = t.length; h < c; h++) {
              if ((d = t[h]).isIntersect(i, s)) {
                var u = r + 5 * d.scaleY;
                if (e + (e - this.lastBallY) * (d.curStartAngle + d.angle / 2 - i) / a < u) return o.isHit = !0, o.pieceData = d, !0
              }
            }
          } else {
            var l;
            if (e > (l = r + 5)) return o.isHit = !1, !1;
            for (s = ia(i), h = 0, c = t.length; h < c; h++) {
              var d;
              if ((d = t[h]).isInside(s))
                if (e < r + 5 * d.scaleY) return o.isHit = !0, o.pieceData = d, !0
            }
          }
          return !1
        }, e.prototype.checkTorusWallHit = function(t, e, i, n, o) {
          var r = this.curY + Me + 4.2,
            s = r + Ee,
            a = s - .20000000000000007,
            h = r - Le,
            c = h - .20000000000000007;
          if (i !== n)
            for (var u = ia(n - i), l = (i = ia(i)) + u, d = 0, p = t.length; d < p; d++) {
              if ((v = t[d]).isIntersect(i, u)) {
                var f = this.curBallY - this.lastBallY,
                  g = v.curStartAngle + .5 * v.angle,
                  m = this.curBallY + f * (g - i) / l;
                if (m < s && m > a) return o.hitY = m, o.isHit = !0, o.pieceData = v, !0;
                if (this.lastBallY > s && this.curBallY < s) {
                  var y = ia(-this.lastRotation);
                  if (v.isInside(y)) return o.hitY = e, o.isHit = !0, o.pieceData = v, !0
                }
                if (m < h && m > c) return o.hitY = m, o.isHit = !0, o.pieceData = v, !0;
                m <= a && m >= h && this.addCrossTorusCount(this.curFloor)
              }
            } else {
              if (e > s || e < c) return o.isHit = !1, !1;
              for (u = ia(i), d = 0, p = t.length; d < p; d++) {
                var v;
                if ((v = t[d]).isInside(u)) {
                  if (e < s && e > a) return o.hitY = e, o.isHit = !0, o.pieceData = v, !0;
                  if (this.lastBallY > s && this.curBallY < s) {
                    y = ia(-this.lastRotation);
                    if (v.isInside(y)) return o.hitY = e, o.isHit = !0, o.pieceData = v, !0
                  }
                  if (e < h && e > c) return o.hitY = e, o.isHit = !0, o.pieceData = v, !0
                }
              }
            }
          return !1
        }, e.prototype.onGameTimeOut = function() {
          this.isGaming = !1, this.isDead = !0
        }, e.prototype.onGameLostFloor = function() {
          this.isCoinRevive = !0, this.isVideoRevive = !0, this.isGaming = !1
        }, e.prototype.reset = function() {
          this._sendGameEnded = !1, this.isDead = !1, this.isStarted = !1, this.isPaused = !1, this.isHitEnd = !1, this.curRotation = 0, this.lastRotation = 0, this.curFloor = 0, this.endFloor = 0, this.maxFloor = 0, this.deadFloor = -1, this.curY = 4, this.lastHitFloor = 0, this.floorList.length = 0, this.curScore = 0, this.crashPlane = 0, this.crashBanPlane = 0, this.forceGapToGapFloor = 0, this.forceGapToBanFloor = 0, this.dropFloorTimes.length = 0, this.hitFloorCounts.length = 0, this.jumpOverWallCounts.length = 0, this.jumpOverCount = 0, this.torusCrossCounts.length = 0, this.torusCrossCount = 0, this.isCoinRevive = !1, this.isVideoRevive = !1, this.reviveCount = 0, this.lastHeartTime = 0, this.startTime = Date.now(), this.serverStartTime = Je.curTime, this.gameTime = 0, this.lastBallY = 0, this.curBallY = 0, this.enableSprint = !1, this.sprintCount = 0, this.isPassed = !1, this._blood = $hostDef.defaultBlood, this._bloodHitCount = 0, this._lastCostFloor = 0, this._ghost = 0, this._cover = 0, this._scoreProgress = 0
        }, e.prototype.enableSprintDrop = function() {
          this.enableSprint = !0, this.sprintCount++
        }, e.prototype.setCurRotation = function(t) {
          this.curRotation = t
        }, e.prototype.costBlood = function(t) {
          if (this.mode === Jh.Blood && !t.safe) {
            var e = void 0;
            this._lastCostFloor === t.floor ? (this._bloodHitCount++, e = Math.min(this._bloodHitCount, 3)) : (this._lastCostFloor = t.floor, e = 1, this._bloodHitCount = 1), this.blood = Math.max(0, this._blood - e)
          }
        }, e.prototype.costPower = function(t) {
          !t.safe && t.power > 0 && (t.power--, t.power <= 0 && this.removePiece(t))
        }, e.prototype.hitBlackToRedPiece = function(t) {
          t.safe || this.changePieceType(t, 2)
        }, e.prototype.changePieceType = function(t, e) {
          var i = this.floorList[t.floor];
          i && i.changePieceType(t, e, t.power)
        }, e.prototype.setCurFloor = function(t, e) {
          var i = this.curFloor;
          if (this.curFloor = t, t > this.maxFloor && (this.maxFloor = t), this.curY = Ul(this.curFloor), this.lastRotation = this.curRotation, this.dropFloorTimes[t] = Math.floor(.001 * Date.now()), this.hitFloorCounts[t] = 0, this.curFloor > i) {
            var n = (this.curFloor - i) * rh.floorScore,
              o = this.curFloor - this.lastHitFloor;
            this.mode === Jh.Blood && o >= 3 && this.blood < $hostDef.maxBlood && (this.blood = Math.min($hostDef.maxBlood, this.blood + 1)), o >= 2 && (n += (o - 1) * rh.continuousPassScoreAdd, this.mode === Jh.Punch && o >= 4 && this.scoreProgress < Ke && (this.scoreProgress += Math.max(0, o - 3)));
            var r = n;
            this.mode === Jh.Punch && (r *= this.scoreLevel);
            var s = !1;
            0 !== e && (2 === e && (this.mode < Jh.Collection && this.crashBanPlane++, r *= rh.crashBanScoreRate, s = !0), this.mode < Jh.Collection && this.crashPlane++), this.mode === Jh.Punch && function(t, e, i) {
              void 0 === e && (e = 1);
              var n, o = t + "_" + e + "_" + (i ? 1 : 0),
                r = Ix[o];
              r && r.length > 0 ? n = r.pop() : ((n = zh("", 80, 16776960, "center")).text = "+" + t + (e > 1 ? "x".concat(e) : "") + (i ? "x2" : ""), n.cacheAsBitmap = !0), n.x = (Pe - n.width) / 2 + 40 + 40 * Math.random(), n.y = Mu.top + De / 2 - 100, tc.stage.addChild(n), new TWEEN.Tween(n).delay(100).to({
                y: n.y - 100
              }, 500).onComplete((function() {
                n.parent && n.parent.removeChild(n);
                var t = Ix[o];
                t || (t = Ix[o] = []), t.length < 5 ? t.push(n) : n.destroy()
              })).start()
            }(n, RI.scoreLevel, s), this.curScore += r
          }
          this.dispatchEvent(Xg)
        }, e.prototype.onHitFloor = function(t, e) {
          if (this.mode === Jh.Punch)
            if (this.curFloor === this.endFloor) this.curScore += 500;
            else if (this.curFloor - this.lastHitFloor === 1 && this.curFloor > this.deadFloor) {
            var i = this.curScore,
              n = Math.min(50, 5 + 5 * Math.floor(this.curFloor / 10));
            this.curScore = Math.max(0, this.curScore - n), i !== this.curScore && this.dispatchEvent(Kg, n)
          }
          this.lastHitFloor = t, e && this.hitFloorCounts[t]++
        }, e.prototype.addHitCount = function(t) {
          this.hitFloorCounts[t]++
        }, e.prototype.canThrough = function(t) {
          return t - this.lastHitFloor >= 3
        }, e.prototype.getCurFloorPieces = function() {
          return this.getFloorPiecesAt(this.curFloor, -this.curRotation)
        }, e.prototype.getFloorPiecesAt = function(t, e) {
          var i = this.floorList[t];
          if (!i) return null;
          e = ia(e);
          for (var n = null, o = i.pieceList, r = 0, s = o.length; r < s; r++) {
            var a = o[r];
            a.isInside(e) && (n || (n = []), n.push(a))
          }
          return n && n.length > 1 && n.sort((function(t, e) {
            var i = t.type,
              n = e.type;
            return 8 === t.type ? i = 1 : t.isFadeOut && (i = 0), 8 === e.type ? n = 1 : e.isFadeOut && (n = 0), n - i
          })), n
        }, e.prototype.generateReviveFloor = function(t, e) {
          this.floorList[t] = function(t, e) {
            for (var i = gh.getStage(1).rules[0], n = new zl(t), o = 0, r = i.length; o < r; o++) {
              var s = i[o],
                a = s[0],
                h = a[0],
                c = void 0,
                u = void 0;
              3 === a.length ? (u = a[1], c = a[2]) : 2 === a.length ? (u = a[1], c = Ve) : (u = 0, c = 0);
              for (var l = 1; l < s.length; l++) {
                var d = s[l],
                  p = d[1],
                  f = Kl(t, d[0], h, p, u, c);
                f.safe = !0, n.addPiece(f), h += p
              }
            }
            return n.rotate(e), n.afterInit(), n
          }(t, e)
        }, e.prototype.addFloor = function(t) {
          this.floorList[t.floor] = t
        }, e.prototype.calGapToGapFloor = function() {
          var t = rh.gapToGap;
          this.forceGapToGapFloor += t[0] + Math.floor(Math.random() * (t[1] - t[0])) + 3, this.gapToGapFactor = t[2]
        }, e.prototype.calGapToBanFloor = function() {
          var t = rh.gapToBan;
          this.forceGapToBanFloor += t[0] + Math.floor(Math.random() * (t[1] - t[0])) + 1, this.gapToBanFactor = t[2]
        }, e.prototype.generateFloor = function(t, e) {
          e <= 0 || (this.mode === Jh.Collection ? this._generateFloorCollect(t, e) : this.mode === Jh.Blood ? this._generateFloorBloodMode(t, e) : this.mode === Jh.Mutation ? this._generateFloorMutationMode(t, e) : this.mode === Jh.Power ? this._generateFloorPowerMode(t, e) : this._generateFloorDefault(t, e))
        }, e.prototype._generateFloorCollect = function(t, e) {
          0 !== this.forceGapToGapFloor && this.forceGapToGapFloor !== t || this.calGapToGapFloor(), 0 !== this.forceGapToBanFloor && this.forceGapToBanFloor !== t || this.calGapToBanFloor();
          var i = -1,
            n = 0,
            o = this.floorList[t - 1];
          o && (i = o.gapToType, n = o.gapAngle);
          for (var r = 0 === t ? 60 + Math.floor(60 * Math.random()) : 0, s = 0; s < e; s++) {
            var a = s + t;
            if (!this.floorList[a]) {
              var h = !1,
                c = this.collectData.getDifficulty(),
                u = this.forceGapToGapFloor > a && this.forceGapToGapFloor <= a + 3 ? this.gapToGapFactor : 0,
                l = this.forceGapToBanFloor > a && this.forceGapToBanFloor <= a + 1 ? this.gapToBanFactor : 0,
                d = void 0;
              this.collectData.canAddCollect ? d = vk(a, c, r, i, n, u, l) : (this.endFloor = a, d = [ed(a, r)], h = !0);
              for (var p = d.length, f = 0; f < p; f++) {
                var g = d[f];
                this.floorList[g.floor] = g, i = g.gapToType, n = g.gapAngle, this.forceGapToGapFloor === g.floor && this.calGapToGapFloor(), this.forceGapToBanFloor === g.floor && this.calGapToBanFloor()
              }
              if (p > 1 && (s += p - 1), h) break
            }
          }
        }, e.prototype._generateFloorDefault = function(t, e) {
          0 !== this.forceGapToGapFloor && this.forceGapToGapFloor !== t || this.calGapToGapFloor(), 0 !== this.forceGapToBanFloor && this.forceGapToBanFloor !== t || this.calGapToBanFloor();
          var i, n = this.mapId;
          this.isExpert ? i = vh : this.isChallenge ? (i = yh, n = this.challengeId) : i = ah;
          var o = -1,
            r = 0,
            s = this.floorList[t - 1];
          s && (o = s.gapToType, r = s.gapAngle);
          for (var a = 0 === t ? 60 + Math.floor(60 * Math.random()) : 0, h = 0; h < e; h++) {
            var c = h + t;
            if (!this.floorList[c]) {
              for (var u = MI(c, i.getDifficulty(n, c), a, o, r, this.forceGapToGapFloor > c && this.forceGapToGapFloor <= c + 3 ? this.gapToGapFactor : 0, this.forceGapToBanFloor > c && this.forceGapToBanFloor <= c + 1 ? this.gapToBanFactor : 0), l = u.length, d = 0; d < l; d++) {
                var p = u[d];
                this.floorList[p.floor] = p, o = p.gapToType, r = p.gapAngle, this.forceGapToGapFloor === p.floor && this.calGapToGapFloor(), this.forceGapToBanFloor === p.floor && this.calGapToBanFloor()
              }
              l > 1 && (h += l - 1)
            }
          }
        }, e.prototype._generateFloorBloodMode = function(t, e) {
          0 !== this.forceGapToGapFloor && this.forceGapToGapFloor !== t || this.calGapToGapFloor(), 0 !== this.forceGapToBanFloor && this.forceGapToBanFloor !== t || this.calGapToBanFloor();
          var i = xh,
            n = -1,
            o = 0,
            r = this.floorList[t - 1];
          r && (n = r.gapToType, o = r.gapAngle);
          for (var s = 0 === t ? 60 + Math.floor(60 * Math.random()) : 0, a = 0; a < e; a++) {
            var h = a + t;
            if (!this.floorList[h]) {
              for (var c = DI(h, i.getDifficulty(this.modeDiff, h), s, n, o, this.forceGapToGapFloor > h && this.forceGapToGapFloor <= h + 3 ? this.gapToGapFactor : 0, this.forceGapToBanFloor > h && this.forceGapToBanFloor <= h + 1 ? this.gapToBanFactor : 0), u = c.length, l = 0; l < u; l++) {
                var d = c[l];
                this.floorList[d.floor] = d, n = d.gapToType, o = d.gapAngle, this.forceGapToGapFloor === d.floor && this.calGapToGapFloor(), this.forceGapToBanFloor === d.floor && this.calGapToBanFloor()
              }
              u > 1 && (a += u - 1)
            }
          }
        }, e.prototype._generateFloorMutationMode = function(t, e) {
          0 !== this.forceGapToGapFloor && this.forceGapToGapFloor !== t || this.calGapToGapFloor(), 0 !== this.forceGapToBanFloor && this.forceGapToBanFloor !== t || this.calGapToBanFloor();
          var i = Th,
            n = -1,
            o = 0,
            r = this.floorList[t - 1];
          r && (n = r.gapToType, o = r.gapAngle);
          for (var s = 0 === t ? 60 + Math.floor(60 * Math.random()) : 0, a = 0; a < e; a++) {
            var h = a + t;
            if (!this.floorList[h]) {
              for (var c = FI(h, i.getDifficulty(this.modeDiff, h), s, n, o, this.forceGapToGapFloor > h && this.forceGapToGapFloor <= h + 3 ? this.gapToGapFactor : 0, this.forceGapToBanFloor > h && this.forceGapToBanFloor <= h + 1 ? this.gapToBanFactor : 0), u = c.length, l = 0; l < u; l++) {
                var d = c[l];
                this.floorList[d.floor] = d, n = d.gapToType, o = d.gapAngle, this.forceGapToGapFloor === d.floor && this.calGapToGapFloor(), this.forceGapToBanFloor === d.floor && this.calGapToBanFloor()
              }
              u > 1 && (a += u - 1)
            }
          }
        }, e.prototype._generateFloorPowerMode = function(t, e) {
          0 !== this.forceGapToGapFloor && this.forceGapToGapFloor !== t || this.calGapToGapFloor(), 0 !== this.forceGapToBanFloor && this.forceGapToBanFloor !== t || this.calGapToBanFloor();
          var i = Ch,
            n = -1,
            o = 0,
            r = this.floorList[t - 1];
          r && (n = r.gapToType, o = r.gapAngle);
          for (var s = 0 === t ? 60 + Math.floor(60 * Math.random()) : 0, a = 0; a < e; a++) {
            var h = a + t;
            if (!this.floorList[h]) {
              for (var c = EI(h, i.getDifficulty(this.modeDiff, h), s, n, o, this.forceGapToGapFloor > h && this.forceGapToGapFloor <= h + 3 ? this.gapToGapFactor : 0, this.forceGapToBanFloor > h && this.forceGapToBanFloor <= h + 1 ? this.gapToBanFactor : 0), u = c.length, l = 0; l < u; l++) {
                var d = c[l];
                this.floorList[d.floor] = d, n = d.gapToType, o = d.gapAngle, this.forceGapToGapFloor === d.floor && this.calGapToGapFloor(), this.forceGapToBanFloor === d.floor && this.calGapToBanFloor()
              }
              u > 1 && (a += u - 1)
            }
          }
        }, e.prototype.generateAllFloorsBySpeedMode = function() {
          this.floorList.length = 0;
          for (var t = function(t) {
              for (var e = [], i = WT(), n = ka((i ? qT(i.type).getTime() : Date.now()) + ""), o = wh.getArray(t), r = 0, s = [], a = 0; a < o.length; a++) {
                var h = o[a],
                  c = h.period,
                  u = h.anglesGroup,
                  l = h.groupAngle,
                  d = h.num;
                s.length = 0;
                for (var p = 0; p < d; p++) {
                  var f = bh.getDataByGroup(h.type, h.stageGroup, n);
                  if (f)
                    for (var g = f.rules, m = 0; m < g.length; m++) {
                      var y = g[m];
                      (E = new zl(r)).speedGroup = c, s.push(E);
                      for (var v = 0, b = y.length; v < b; v++) {
                        var w = y[v],
                          x = w[0],
                          T = x[0],
                          k = void 0,
                          I = void 0;
                        3 === x.length ? (I = x[1], k = x[2]) : 2 === x.length ? (I = x[1], k = Ve) : (I = 0, k = 0);
                        for (var C = 1, _ = w.length; C < _; C++) {
                          var B = w[C],
                            S = Kl(r, B[0], T, B[1], I, k);
                          E.addPiece(S), T += B[1]
                        }
                      }
                      r++
                    }
                }
                if (u > 0) {
                  var P = bh.getDataByGroup(3, u, n);
                  if (P) {
                    var D = P.angles,
                      M = Math.min(d, D.length);
                    for (p = 0; p < M; p++) s[p].rotate(D[p])
                  }
                }
                if (l) {
                  var F = Ia(l[0], l[1], n, !0);
                  for (p = 0; p < s.length; p++) s[p].rotate(F)
                }
                for (p = 0; p < s.length; p++) {
                  var E;
                  (E = s[p]).afterInit(), E.needsUpdate && (E.disableUpdate = !0, E.needsUpdate = !1), e[E.floor] = E
                }
              }
              var L = ed(r, 0);
              return e[L.floor] = L, e
            }(this.modeDiff), e = 0; e < t.length; e++) {
            var i = t[e];
            this.floorList[i.floor] = i
          }
          this.endFloor = this.floorList[this.floorList.length - 1].floor
        }, e.prototype.generateAllFloorsByPunchMode = function() {
          this.floorList.length = 0;
          for (var t = function(t) {
              for (var e = [], i = WT(), n = ka((i ? qT(i.type).getTime() : Date.now()) + ""), o = Ih.getArray(t), r = 0, s = [], a = 0; a < o.length; a++) {
                var h = o[a],
                  c = h.period,
                  u = h.anglesGroup,
                  l = h.groupAngle,
                  d = null,
                  p = h.num;
                u > 0 && (d = kh.getDataByGroup(3, u, n)) && (p = Math.max(p, d.angles.length)), s.length = 0;
                for (var f = 0; f < p; f++) {
                  var g = kh.getDataByGroup(h.type, h.stageGroup, n);
                  if (g)
                    for (var m = g.rules, y = 0; y < m.length; y++) {
                      var v = m[y];
                      (F = new zl(r)).speedGroup = c, s.push(F);
                      for (var b = 0, w = v.length; b < w; b++) {
                        var x = v[b],
                          T = x[0],
                          k = T[0],
                          I = void 0,
                          C = void 0;
                        3 === T.length ? (C = T[1], I = T[2]) : 2 === T.length ? (C = T[1], I = Ve) : (C = 0, I = 0);
                        for (var _ = 1, B = x.length; _ < B; _++) {
                          var S = x[_],
                            P = Kl(r, S[0], k, S[1], C, I);
                          F.addPiece(P), k += S[1]
                        }
                      }
                      r++
                    }
                }
                if (d) {
                  var D = d.angles;
                  for (f = 0; f < D.length; f++) s[f].rotate(D[f])
                }
                if (l) {
                  var M = Ia(l[0], l[1], n, !0);
                  for (f = 0; f < s.length; f++) s[f].rotate(M)
                }
                for (f = 0; f < s.length; f++) {
                  var F;
                  (F = s[f]).afterInit(), F.needsUpdate && (F.disableUpdate = !0, F.needsUpdate = !1), e[F.floor] = F
                }
              }
              var E = ed(r, 0);
              return e[E.floor] = E, e
            }(this.modeDiff), e = 0; e < t.length; e++) {
            var i = t[e];
            this.floorList[i.floor] = i
          }
          this.endFloor = this.floorList[this.floorList.length - 1].floor
        }, e.prototype.removePiece = function(t) {
          var e = this.floorList[t.floor];
          e && e.removePiece(t)
        }, e
      }(Ll),
      RI = new OI,
      GI = ai.withCategory("");

    function AI(t, e) {
      X.logEvent("-".concat(t), e)
    }

    function NI(t) {
      X.logEvent("-".concat(t))
    }

    function jI(t) {
      X.logEvent("-".concat(t))
    }

    function VI(t, e, i) {
      X.logEvent("-".concat(t, "-").concat(e), i)
    }

    function UI(t, e) {
      X.logEvent("-".concat(t), e)
    }

    function WI(t, e) {
      X.logEvent("-".concat(t), e)
    }

    function qI(t) {
      X.logEvent("-".concat(t))
    }

    function HI(t, e, i) {
      var n = "".concat(Mh.getMode(t).name, "-");
      X.logEvent("-".concat(n), {
        modeScore: e,
        isPassed: i ? 1 : 0
      })
    }

    function $I(t) {
      X.logEvent("-".concat(t))
    }

    function XI(t, e) {
      X.logEvent("-".concat(t), {
        id: e
      })
    }

    function YI(t, e) {
      X.logEvent("-".concat(t), {
        id: e
      })
    }

    function zI(t, e, i) {
      X.logEvent("-".concat(t), {
        preId: e,
        newId: i
      })
    }

    function KI(t) {
      X.logEvent("-".concat(t))
    }

    function JI(t) {
      X.logEvent("-".concat(t))
    }

    function QI(t) {
      X.logEvent("-".concat(t))
    }! function(t) {
      t[t.normal = 1] = "normal", t[t.rare = 2] = "rare"
    }(LI || (LI = {}));
    var ZI = function(t) {
      function e() {
        var e = t.call(this, 2, !0) || this;
        return e.tween = null, e.initUI(), e
      }
      return i(e, t), e.prototype.initUI = function() {
        var t = this;
        this.bg = Wh("dlc/ui/skin/skin_bg.png"), this.bg.width = 557, this.bg.height = 597, this.bg.interactive = !0, this.addChild(this.bg), this.skinIcon = new PIXI.Sprite, this.skinIcon.width = 100, this.skinIcon.height = 100, this.skinIcon.anchor.set(.5, .5), this.skinIcon.x = this.bg.width / 2, this.skinIcon.y = 230, this.addChild(this.skinIcon), this.nameText = Xh("", "#FFFFFF", !1, "left", 32), this.nameText.x = (this.bg.width - this.nameText.width) / 2, this.nameText.y = this.skinIcon.y + this.skinIcon.height / 2 + 50, this.addChild(this.nameText), this.leftTimeText = Xh("12:00:00", "#FFFFFF", !1), this.leftTimeText.anchor.set(.5, .5), this.leftTimeText.x = this.bg.width / 2, this.leftTimeText.y = this.nameText.y + 70, this.addChild(this.leftTimeText), this.addCloseButton(), this.useButton = new Ru("button_ok.png", !1), this.useButton.on(Tu, (function() {
          return r(t, void 0, void 0, (function() {
            return s(this, (function(t) {
              switch (t.label) {
                case 0:
                  return this.skin ? [4, eC(this.skin.id)] : [3, 2];
                case 1:
                  t.sent(), t.label = 2;
                case 2:
                  return this.close(), [2]
              }
            }))
          }))
        }), this), this.shareButton = new Ru("button_strut.png", !1), this.shareButton.on(Tu, this.onShare, this), this.buttonGroup = new im(20), this.buttonGroup.addButton(this.useButton), this.buttonGroup.addButton(this.shareButton), this.addChild(this.buttonGroup), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.y + this.bg.height - 150, this.descText = Yh("", 9092672, 450, 26, !0), this.descText.x = 50, this.descText.y = 150, this.addChild(this.descText)
      }, e.prototype.onShare = function() {
        var t = this;
        NI("".concat(this.skin.id, "")), $c(this.skin.id).then((function(e) {
          Uc(e) && jI("".concat(t.skin.id, ""))
        }))
      }, e.prototype.onShow = function(e) {
        var i, n = this;
        t.prototype.onShow.call(this), this.skin = e, i = "".concat(this.skin.id), X.logEvent("-".concat(i)), this.skinIcon.texture = Vh("item".concat(this.skin.id, ".png")), this.nameText.text = this.skin.name, this.nameText.x = (this.bg.width - this.nameText.width) / 2, this.descText.text = e.text;
        oh.getItem(this.skin.id);
        var o = uC.items.get(this.skin.id);
        this.leftTimeText.visible = o && o.expire > 0, this.leftTimeText.visible && (this.leftTimeText.text = ri(o.expire - Je.curTime)), this.pivot.set(this.width / 2, this.height / 2), this.x += this.width / 2, this.y += this.height / 2, this.scale.set(.5), this.tween = new TWEEN.Tween({
          scale: .5
        }).to({
          scale: 1
        }, 400).easing(TWEEN.Easing.Bounce.Out).onUpdate((function(t) {
          n.isDisposed || n.scale.set(t.scale)
        })).onComplete((function() {
          n.tween = null
        })).start()
      }, e.prototype.onHide = function() {
        t.prototype.onHide.call(this), this.tween && (TWEEN.remove(this.tween), this.tween = null)
      }, e.prototype.onDestroy = function() {
        t.prototype.onDestroy.call(this), this.bg && (this.bg.destroy({
          texture: !0,
          baseTexture: !0
        }), this.bg = null), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.useButton && (this.useButton.destroy(), this.useButton = null), uC.skinUnlocks.length > 0 && setTimeout((function() {
          nC()
        }), 100)
      }, e.clsName = "SkinUnlockNewView", e
    }(Qg);

    function tC(t) {
      /* LOCAL MODE: equip skin directly without server */
      var item = oh.getItem(t);
      if (item) {
        if (0 === item.skinType) uC.skin = t;
        else if (1 === item.skinType) uC.paint = t;
        else if (2 === item.skinType) uC.trail = t;
      }
      return Promise.resolve({});
    }

    function eC(t) {
      /* LOCAL MODE: equip skin directly without server */
      var item = oh.getItem(t);
      if (item) {
        if (0 === item.skinType) uC.skin = t;
        else if (1 === item.skinType) uC.paint = t;
        else if (2 === item.skinType) uC.trail = t;
        var typeName = 2 === item.skinType ? "" : 1 === item.skinType ? "" : "";
        rc("".concat(typeName, "").concat(item.name));
      }
      return Promise.resolve({});
    }

    function iC(t) {
      /* LOCAL MODE: buy skin directly (free in cheat mode) */
      var item = oh.getItem(t);
      if (item) {
        if (!uC.items.has(t)) {
          var si = new sC;
          si.id = t;
          si.count = 1;
          uC.items.set(t, si);
        }
        uC.gold = 999999;
      }
      return Promise.resolve({});
    }

    function nC() {
      if (0 !== uC.skinUnlocks.length) {
        var t = uC.skinUnlocks.shift(),
          e = oh.getItem(t.id);
        e ? tc.showPanel(ZI, e) : nC()
      }
    }

    function oC(t) {
      var e = Object.getPrototypeOf(t);
      return Object.assign({}, Object.create(e), t)
    }
    var rC, sC = function() {
        function t() {
          this.id = 0, this.count = 0, this.expire = 0
        }
        return t.prototype.setItemInfo = function(t, e) {
          this.id = t, this.count = e
        }, Object.defineProperty(t.prototype, "isExpired", {
          get: function() {
            return this.expire > 0 && this.expire <= Je.curTime
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.clone = function() {
          return oC(this)
        }, t
      }(),
      aC = function() {
        function t(t) {
          this.id = t, this.progress = 0, this.isReward = 0
        }
        return t.prototype.setTaskInfo = function(t, e, i) {
          this.id = t, this.progress = e, this.isReward = i;
          var n = sh.getTask(t);
          this.condition = n.condition, this.type = n.type, this.needValue = n.value
        }, Object.defineProperty(t.prototype, "canGetReward", {
          get: function() {
            return !this.isReward && this.progress >= this.needValue
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.fromBaseTask = function(t) {
          this.setTaskInfo(t.id, t.progress, t.isReward)
        }, t.prototype.clone = function() {
          return oC(this)
        }, t
      }(),
      hC = function() {
        function t() {
          this.taskMap = {}, this.taskList = []
        }
        return t.prototype.init = function() {
          this.taskMap = {}, this.taskList = [];
          for (var t = sh.getTasks(), e = 0; e < t.length; e++) {
            var i = t[e],
              n = new aC(i.id);
            this.taskList.push(n), this.taskMap[n.id] = n
          }
        }, t.prototype.syncData = function(t) {
          if (t)
            for (var e = 0, i = t.length; e < i; e++) {
              var n = t[e],
                o = this.getTask(n.id);
              o && o.fromBaseTask(n)
            }
        }, t.prototype.getTasks = function() {
          return this.taskList
        }, t.prototype.getTask = function(t) {
          return this.taskMap[t]
        }, t.prototype.getTaskProgess = function(t) {
          var e = this.getTask(t);
          return e ? e.progress : 0
        }, t.prototype.isTaskRewarded = function(t) {
          var e = this.taskMap[t];
          return e && e.isReward
        }, Object.defineProperty(t.prototype, "unFinishDropTimeTasks", {
          get: function() {
            for (var t = [], e = 0, i = this.taskList.length; e < i; e++) {
              var n = this.taskList[e];
              n && !n.isReward && (104 === n.type && t.push(n))
            }
            return t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "unFinishQuickDropTasks", {
          get: function() {
            for (var t = [], e = 0, i = this.taskList.length; e < i; e++) {
              var n = this.taskList[e];
              n && !n.isReward && (105 === n.type && t.push(n))
            }
            return t
          },
          enumerable: !1,
          configurable: !0
        }), t
      }(),
      cC = function() {
        function t() {
          this.connectToken = "", this.chid = null, this.image = "", this.nick = "", this.guest = !1, this.lastAuthorizeTime = -1, this.isAuthorized = !1, this.bestScore = 0, this.isCheat = 0, this.ticket = 0, this.ticketVideoAd = 0, this.ticketChallenge = 0, this.expertBestScores = [], this.mapBestFloors = [], this.unlockChallengeMapId = 0, this.challengeBestFloors = [], this.challengeEnterCount = 0, this.bestRelayFirst = null, this.bestRelaySec = null, this.gold = 0, this.goldRate = 0, this.freeTurntableCount = 0, this.videoTurntableCount = 0, this.lastFreeTurntableTime = 0, this.coin = 0, this.skinUnlocks = [], this.skin = 0, this.usedSkins = [], this.videoSkins = new Map, this.paint = 0, this.trail = 0, this.items = new Map, this.videoCnt = 0, this.loginDays = 0, this.todayGameCount = 0, this.createTime = 0, this.signDay = 0, this.isSign = 0, this.gameVersion = 0, this.isNewPlayer = !1, this.lastShareFriendTime = 0, this.adCardUsedCount = 0, this.adCardCount = 0, this.dailyRewardPopCount = 0, this.adButtonCounter = 0, this.lastLimitGiftTime = 0, this.speGameCnt = 0, this.teamCoin = 0, this.dayVideoTeamCoin = 0, this.taskModel = new hC, -1 == this.lastAuthorizeTime && (this.lastAuthorizeTime = wx.getStorageSync("lastAuthorizeTime") || -1)
        }
        return t.prototype.updateLastAuthorizeTime = function() {
          this.guest = !1, this.isAuthorized = !0, this.lastAuthorizeTime = Je.curTime, Nh("lastAuthorizeTime", this.lastAuthorizeTime)
        }, Object.defineProperty(t.prototype, "needAuthorize", {
          get: function() {
            return this.lastAuthorizeTime <= 0 || Je.curTime - this.lastAuthorizeTime >= 2592e6
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.init = function(t) {
          this.taskModel.init(), this.syncData(t, !0)
        }, t.prototype.syncData = function(t, e) {
          var i = this;
          if (void 0 === e && (e = !1), t) {
            if (DEVELOP && console.log("syncData:" + JSON.stringify(t)), t.guest >= 0 && (this.guest = t.guest >= 1), t.image && (this.image = t.image), t.nick && (this.nick = Vc.decodeURIComponent(t.nick)), t.gold >= 0 && (this.gold = t.gold), t.uid > 0 && (this.uid = t.uid), t.usedSkins && (this.usedSkins = t.usedSkins), t.skin && (this.skin = t.skin), t.paint && (this.paint = t.paint), t.trail && (this.trail = t.trail), t.bestScore && (this.bestScore = t.bestScore), t.isCheat >= 0 && (this.isCheat = t.isCheat), t.coin >= 0 && (this.coin = t.coin), t.ticket >= 0 && (this.ticket = t.ticket), t.ticketVideoAd >= 0 && (this.ticketVideoAd = t.ticketVideoAd), t.ticketChallenge >= 0 && (this.ticketChallenge = t.ticketChallenge), t.expertBestScores) {
              this.expertBestScores = t.expertBestScores;
              for (var n = 0; n < this.expertBestScores.length; n++) null === this.expertBestScores[n] && (this.expertBestScores[n] = 0)
            }
            if (t.mapBestFloors && (this.mapBestFloors = t.mapBestFloors), t.bestRelayFirst && (this.bestRelayFirst = t.bestRelayFirst), t.bestRelaySec && (this.bestRelaySec = t.bestRelaySec), t.goldRate >= 0 && (this.goldRate = t.goldRate), t.freeTurntableCount >= 0 && (this.freeTurntableCount = t.freeTurntableCount), t.videoTurntableCount >= 0 && (this.videoTurntableCount = t.videoTurntableCount), t.lastFreeTurntableTime >= 0 && (this.lastFreeTurntableTime = t.lastFreeTurntableTime), t.loginDays >= 0 && (this.loginDays = t.loginDays, this.isNewPlayer = this.loginDays <= 1), t.todayGameCount >= 0 && (this.todayGameCount = t.todayGameCount), t.createTime >= 0 && (this.createTime = t.createTime), t.chid && (this.chid = t.chid), t.itemInfos) {
              for (n = 0; n < t.itemInfos.length; n++) {
                var o = t.itemInfos[n],
                  r = this.items.get(o.id);
                if (o.count > 0) {
                  var s = oh.getItem(o.id);
                  if (!s) continue;
                  var a = r ? r.count : 0,
                    h = r ? r.expire : 0;
                  r ? (r.count = o.count, r.expire = o.expire) : ((r = new sC).id = o.id, r.count = o.count, r.expire = o.expire, this.items.set(o.id, r)), !e && 4 === s.type && r.count > 0 && (0 === a || h < Je.curTime && r.expire > Je.curTime) && this.skinUnlocks.push(r)
                } else r && (r.count = 0, this.items.delete(r.id))
              }!e && this.skinUnlocks.length > 0 && nC()
            }
            t.tasks && this.taskModel.syncData(t.tasks), t.videoCnt >= 0 && (this.videoCnt = t.videoCnt), t.signDay >= 0 && (this.signDay = t.signDay), t.isSign >= 0 && (this.isSign = t.isSign), t.videoSkins && (this.videoSkins.clear(), t.videoSkins.forEach((function(t) {
              i.videoSkins.set(t.id, t)
            }))), t.gameVersion >= 0 && (this.gameVersion = t.gameVersion), t.lastShareFriendTime >= 0 && (this.lastShareFriendTime = t.lastShareFriendTime), t.dayAdCardCount && (this.dayAdCardCount = t.dayAdCardCount), t.adButtonCounter >= 0 && (this.adButtonCounter = t.adButtonCounter), t.limitGift && (this.limitGift = t.limitGift), t.adCardCnt >= 0 && (this.adCardUsedCount = t.adCardCnt), t.unlockChallengeMapId >= 0 && (this.unlockChallengeMapId = t.unlockChallengeMapId), t.challengeEnterCount >= 0 && (this.challengeEnterCount = t.challengeEnterCount), t.challengeBestFloors && (this.challengeBestFloors = t.challengeBestFloors), t.speGameCnt >= 0 && (this.speGameCnt = t.speGameCnt), t.teamCoin >= 0 && (this.teamCoin = t.teamCoin), t.dayVideoTeamCoin >= 0 && (this.dayVideoTeamCoin = t.dayVideoTeamCoin)
          }
        }, Object.defineProperty(t.prototype, "skinCount", {
          get: function() {
            var t, e, i = 0;
            try {
              for (var n = a(this.items), o = n.next(); !o.done; o = n.next()) {
                var r = h(o.value, 2),
                  s = r[0],
                  c = (r[1], oh.getItem(s));
                c && (4 === c.type && i++)
              }
            } catch (e) {
              t = {
                error: e
              }
            } finally {
              try {
                o && !o.done && (e = n.return) && e.call(n)
              } finally {
                if (t) throw t.error
              }
            }
            return i
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.hasSkin = function(t) {
          return !!this.items.get(t)
        }, Object.defineProperty(t.prototype, "skinRedType", {
          get: function() {
            for (var t = 0, e = oh.getSkins(), i = 0, n = e.length; i < n; i++) {
              var o = e[i],
                r = this.items.get(o.id);
              if (!r || 0 === r.count) {
                if (!(o.gold > 0)) continue;
                if (o.gold <= this.gold) {
                  t = 2;
                  break
                }
              }
              if (r && this.usedSkins.indexOf(o.id) < 0) {
                t = 1;
                break
              }
            }
            return t
          },
          enumerable: !1,
          configurable: !0
        }), t.prototype.checkCheatAndMaxScore = function() {
          var t, e = this;
          if (this.isCheat && (this.isCheat = 0, Gc((function(t) {
              return r(e, void 0, void 0, (function() {
                var e;
                return s(this, (function(i) {
                  switch (i.label) {
                    case 0:
                      if (!t) return [3, 4];
                      i.label = 1;
                    case 1:
                      return i.trys.push([1, 3, , 4]), [4, SP({})];
                    case 2:
                      return (e = i.sent()) && this.syncData(e.syncData), [3, 4];
                    case 3:
                      return i.sent(), [3, 4];
                    case 4:
                      return [2]
                  }
                }))
              }))
            }))), this.bestScore > 0 && (t = this.bestScore, Oc({
              type: yc,
              mapId: 0,
              bestScore: t
            })), this.mapBestFloors.length > 0)
            for (var i = 0; i < this.mapBestFloors.length; i++) null !== this.mapBestFloors[i] && void 0 !== this.mapBestFloors[i] || (this.mapBestFloors[i] = 0)
        }, t.prototype.getChallengeFloor = function(t) {
          var e = Math.max(t - 1, 0);
          return this.challengeBestFloors[e] || 0
        }, t.prototype.isChallengeUnlock = function(t) {
          return this.unlockChallengeMapId >= t
        }, t.prototype.isChallengeComplete = function(t) {
          var e = yh.getChallengeMode(t);
          return e && e.finishFloor <= this.getChallengeFloor(t)
        }, Object.defineProperty(t.prototype, "challengeFinishCount", {
          get: function() {
            var t = 0;
            if (this.unlockChallengeMapId > 0)
              for (var e = 1; e <= this.unlockChallengeMapId; e++) {
                var i = yh.getChallengeMode(e);
                i && i.finishFloor <= this.getChallengeFloor(e) && t++
              }
            return t
          },
          enumerable: !1,
          configurable: !0
        }), Object.defineProperty(t.prototype, "expertFinishCount", {
          get: function() {
            for (var t = 0, e = Math.min($hostDef.maxExpertId, vh.expertMaxId), i = $hostDef.expertOpenList, n = 0; n < i.length; n++) {
              var o = i[n];
              new Date(o.openTime).getTime() <= Je.curTime && (e = Math.max(e, o.mapId))
            }
            for (var r = 2; r <= e; r++) {
              var s = vh.getExpertMode(r),
                a = this.mapBestFloors[r] || 0;
              s && s.finishFloor <= a && t++
            }
            return t
          },
          enumerable: !1,
          configurable: !0
        }), o([po], t.prototype, "bestScore", void 0), o([po], t.prototype, "ticket", void 0), o([po], t.prototype, "ticketVideoAd", void 0), o([po], t.prototype, "unlockChallengeMapId", void 0), o([po], t.prototype, "gold", void 0), o([po], t.prototype, "goldRate", void 0), o([po], t.prototype, "freeTurntableCount", void 0), o([po], t.prototype, "videoTurntableCount", void 0), o([po], t.prototype, "lastFreeTurntableTime", void 0), o([po], t.prototype, "coin", void 0), o([po], t.prototype, "skinUnlocks", void 0), o([po], t.prototype, "skin", void 0), o([po], t.prototype, "usedSkins", void 0), o([po], t.prototype, "videoSkins", void 0), o([po], t.prototype, "paint", void 0), o([po], t.prototype, "trail", void 0), o([po], t.prototype, "items", void 0), o([po], t.prototype, "signDay", void 0), o([po], t.prototype, "isSign", void 0), o([po], t.prototype, "lastShareFriendTime", void 0), o([po], t.prototype, "adCardUsedCount", void 0), o([po], t.prototype, "adCardCount", void 0), o([po], t.prototype, "limitGift", void 0), o([po], t.prototype, "lastLimitGiftTime", void 0), o([po], t.prototype, "speGameCnt", void 0), o([po], t.prototype, "teamCoin", void 0), o([po], t.prototype, "dayVideoTeamCoin", void 0), o([bo], t.prototype, "skinCount", null), o([bo], t.prototype, "skinRedType", null), o([bo], t.prototype, "challengeFinishCount", null), o([bo], t.prototype, "expertFinishCount", null), t
      }(),
      uC = new cC;

    function lC(t, e) {
      var i = Math.floor(50 * Hi.windowWidth / 375);
      return console.log("createGameClubButton size:" + i), wx.createGameClubButton({
        type: "image",
        icon: "white",
        style: {
          left: t * tc.uiScale,
          top: e * tc.uiScale,
          width: i,
          height: i
        }
      })
    }

    function dC() {
      return r(this, void 0, void 0, (function() {
        var t;
        return s(this, (function(e) {
          switch (e.label) {
            case 0:
              return e.trys.push([0, 2, , 3]), [4, _P({})];
            case 1:
              return (t = e.sent()).syncData && uC.syncData(t.syncData), [2, t.gifts];
            case 2:
              return oc(e.sent()), [3, 3];
            case 3:
              return [2, null]
          }
        }))
      }))
    }

    function pC() {
      return r(this, void 0, void 0, (function() {
        var t, e, i, n, o, r, a, h, c;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              return [4, dC()];
            case 1:
              if (!(t = s.sent())) return [3, 5];
              e = 0, s.label = 2;
            case 2:
              if (!(e < t.length)) return [3, 5];
              switch (i = t[e], n = void 0, i.type) {
                case 1:
                  n = "";
                  break;
                case 2:
                  n = "";
                  break;
                case 3:
                  n = "";
                  break;
                case 6:
                  n = "";
                  break;
                case 7:
                  n = "";
                  break;
                case 20:
                  n = "";
                  break;
                default:
                  n = ""
              }
              if (o = i.gift, r = [], o.gold > 0 && r.push("+".concat(o.gold)), o.coin > 0 && r.push("+".concat(o.coin)), o.teamCoin > 0 && r.push("+".concat(o.teamCoin)), o.ticket > 0 && r.push("+".concat(o.ticket)), o.items && o.items.length > 0)
                for (a = 0; a < o.items.length; a++) h = o.items[a], (c = oh.getItem(h[0])) && r.push("".concat(c.name, "+").concat(h[1]));
              return rc("".concat(n, "").concat(r.join(",")), 1e3), e < t.length - 1 ? [4, lu(1e3)] : [3, 4];
            case 3:
              s.sent(), s.label = 4;
            case 4:
              return e++, [3, 2];
            case 5:
              return [2]
          }
        }))
      }))
    }! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 259
    }(rC || (rC = {}));
    const fC = rC;
    Ft[90] = "!", Ft[91] = "!", Ft[50] = "!", Ft[93] = "!", Ft[94] = "session!", Ft[95] = "token!", Ft[100] = "!", Ft[101] = "Invoke!", Ft[250] = "!", Ft[2001] = "", Ft[2002] = "", Ft[2003] = "", Ft[90001] = "", Ft[90002] = "", Ft[90003] = "";
    var gC, mC = null;

    function yC(t) {
      return mC || (t && t !== uC.connectToken ? void 0 : (mC = function() {
        return r(this, void 0, void 0, (function() {
          var t, e, i, n, o, r, a;
          return s(this, (function(s) {
            switch (s.label) {
              case 0:
                return [4, Bb()];
              case 1:
                return t = s.sent(), e = t.uid, i = t.token, n = t.online, o = t.url, r = t.gatePath, DEVELOP && ai.info("gate:", n), Xt(n), AI(""), [4, TP({
                  uid: e,
                  token: i,
                  fuid: 0
                })];
              case 2:
                return a = s.sent(), uC.uid = e, uC.token = i, uC.connectToken = a.connectToken, Je.syncServerTime(a.now), AI(""), /* DISABLED: mg.connect(o, r, uC) - local mode */ a && a.hasMinigameGifts && pC(), [2]
            }
          }))
        }))
      }().finally((function() {
        mC = null
      })), mC))
    }

    function vC(t, e) {
      return r(this, void 0, void 0, (function() {
        var i, n, o, r, a, h;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              i = uC.uid, n = uC.connectToken, o = function(t, e, i) {
                return JSON.stringify($t(t, e, i))
              }(t, e, {
                uid: i,
                connectToken: n
              }), s.label = 1;
            case 1:
              return s.trys.push([1, 3, , 15]), [4, Yt(t, o)];
            case 2:
              return [2, s.sent()];
            case 3:
              return r = s.sent(), "object" == typeof(c = r) && c instanceof Et ? 94 !== (a = r.errCode) ? [3, 5] : (sc(""), [4, yC(n)]) : [3, 13];
            case 4:
              return s.sent(), ac(), wx.showToast({
                title: "",
                icon: "success"
              }), [2, vC(t, e)];
            case 5:
              if (100 !== a) return [3, 11];
              if (ws.isOffline = !0, t === fC.__cmd) return [2];
              sc(""), s.label = 6;
            case 6:
              return s.trys.push([6, 8, , 10]), [4, yC(n)];
            case 7:
              return s.sent(), [3, 10];
            case 8:
              return h = s.sent(), [4, new Promise((function(t) {
                nc(",", h, {
                  success: t
                })
              }))];
            case 9:
              return s.sent(), wx.exitMiniProgram(), [2];
            case 10:
              return ac(), wx.showToast({
                title: "",
                icon: "success"
              }), ws.isOffline = !1, [2, vC(t, e)];
            case 11:
              250 === a ? console.warn("") : console.error("[:".concat(a, "] ").concat(r.errMsg, " ").concat(ii(t))), s.label = 12;
            case 12:
              return [3, 14];
            case 13:
              console.error("[] ".concat(ii(t)), r), s.label = 14;
            case 14:
              throw r;
            case 15:
              return [2]
          }
          var c
        }))
      }))
    }! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.token, e[2] = t.uid, void 0 !== t.fuid && null !== t.fuid && (e[3] = t.fuid), void 0 !== t.chid && null !== t.chid && (e[4] = t.chid), e
      }, t.__cmd = 257
    }(gC || (gC = {}));
    const bC = gC;
    var wC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.id = t[1], e.count = t[2], void 0 !== t[3] && null !== t[3] && (e.expire = t[3]), e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.id, e[2] = t.count, void 0 !== t.expire && null !== t.expire && (e[3] = t.expire), e
      }
    }(wC || (wC = {}));
    const xC = wC;
    var TC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.id = t[1], e.progress = t[2], e.isReward = t[3], e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.id, e[2] = t.progress, e[3] = t.isReward, e
      }
    }(TC || (TC = {}));
    const kC = TC;
    var IC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.shareType = t[1], e.count = t[2], e.lastTime = t[3], e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.shareType, e[2] = t.count, e[3] = t.lastTime, e
      }
    }(IC || (IC = {}));
    const CC = IC;
    var _C;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.firstUid = t[1], e.firstOpenId = t[2], e.otherUid = t[3], e.otherOpenId = t[4], e.score = t[5], e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.firstUid, e[2] = t.firstOpenId, e[3] = t.otherUid, e[4] = t.otherOpenId, e[5] = t.score, e
      }
    }(_C || (_C = {}));
    const BC = _C;
    var SC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.id = t[1], e.count = t[2], e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.id, e[2] = t.count, e
      }
    }(SC || (SC = {}));
    const PC = SC;
    var DC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.id = t[1], e.process = t[2], e.time = t[3], e.received = t[4], e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.id, e[2] = t.process, e[3] = t.time, e[4] = t.received, e
      }
    }(DC || (DC = {}));
    const MC = DC;
    var FC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (e.uid = t[1], e.nick = t[2], e.image = t[3], e.gold = t[4], e.bestScore = t[5], e.skin = t[6], Array.isArray(t[7])) {
          e.itemInfos = [];
          for (var i = 0, n = t[7].length; i < n; i++) t[7][i] && (e.itemInfos[i] = xC.fromIndex(t[7][i]))
        } else 0;
        if (Array.isArray(t[8])) {
          e.expertBestScores = [];
          for (i = 0, n = t[8].length; i < n; i++) void 0 !== t[8][i] && null !== t[8][i] && (e.expertBestScores[i] = t[8][i])
        } else 0;
        if (Array.isArray(t[11])) {
          e.tasks = [];
          for (i = 0, n = t[11].length; i < n; i++) t[11][i] && (e.tasks[i] = kC.fromIndex(t[11][i]))
        } else 0;
        if (void 0 !== t[12] && null !== t[12] && (e.province = t[12]), Array.isArray(t[13])) {
          e.shareInfos = [];
          for (i = 0, n = t[13].length; i < n; i++) t[13][i] && (e.shareInfos[i] = CC.fromIndex(t[13][i]))
        } else 0;
        if (e.guest = t[14], e.sex = t[15], void 0 !== t[16] && null !== t[16] && (e.city = t[16]), e.guideStep = t[17], Array.isArray(t[18])) {
          e.usedSkins = [];
          for (i = 0, n = t[18].length; i < n; i++) void 0 !== t[18][i] && null !== t[18][i] && (e.usedSkins[i] = t[18][i])
        } else 0;
        if (e.isCheat = t[19], e.coin = t[20], e.ticket = t[21], e.ticketVideoAd = t[22], e.ticketChallenge = t[23], Array.isArray(t[24])) {
          e.mapBestFloors = [];
          for (i = 0, n = t[24].length; i < n; i++) void 0 !== t[24][i] && null !== t[24][i] && (e.mapBestFloors[i] = t[24][i])
        } else 0;
        if (t[25] && (e.bestRelayFirst = BC.fromIndex(t[25])), t[26] && (e.bestRelaySec = BC.fromIndex(t[26])), void 0 !== t[27] && null !== t[27] && (e.goldRate = t[27]), void 0 !== t[28] && null !== t[28] && (e.freeTurntableCount = t[28]), void 0 !== t[29] && null !== t[29] && (e.videoTurntableCount = t[29]), void 0 !== t[30] && null !== t[30] && (e.lastFreeTurntableTime = t[30]), void 0 !== t[31] && null !== t[31] && (e.loginDays = t[31]), void 0 !== t[32] && null !== t[32] && (e.todayGameCount = t[32]), void 0 !== t[33] && null !== t[33] && (e.createTime = t[33]), void 0 !== t[34] && null !== t[34] && (e.chid = t[34]), void 0 !== t[35] && null !== t[35] && (e.videoCnt = t[35]), void 0 !== t[36] && null !== t[36] && (e.signDay = t[36]), void 0 !== t[37] && null !== t[37] && (e.isSign = t[37]), void 0 !== t[38] && null !== t[38])
          if (Array.isArray(t[38])) {
            e.videoSkins = [];
            for (i = 0, n = t[38].length; i < n; i++) t[38][i] && (e.videoSkins[i] = PC.fromIndex(t[38][i]))
          } else 0;
        if (void 0 !== t[39] && null !== t[39] && (e.paint = t[39]), void 0 !== t[40] && null !== t[40] && (e.trail = t[40]), void 0 !== t[41] && null !== t[41] && (e.gameVersion = t[41]), void 0 !== t[42] && null !== t[42] && (e.lastShareFriendTime = t[42]), void 0 !== t[43] && null !== t[43])
          if (Array.isArray(t[43])) {
            e.dayAdCardCount = [];
            for (i = 0, n = t[43].length; i < n; i++)
              if (void 0 !== t[43][i] && null !== t[43][i])
                if (Array.isArray(t[43][i])) {
                  e.dayAdCardCount[i] = [];
                  for (var o = 0, r = t[43][i].length; o < r; o++) void 0 !== t[43][i][o] && null !== t[43][i][o] && (e.dayAdCardCount[i][o] = t[43][i][o])
                } else 0
          } else 0;
        if (void 0 !== t[44] && null !== t[44] && (e.adButtonCounter = t[44]), t[45] && (e.limitGift = MC.fromIndex(t[45])), void 0 !== t[46] && null !== t[46] && (e.adCardCnt = t[46]), void 0 !== t[47] && null !== t[47] && (e.unlockChallengeMapId = t[47]), void 0 !== t[48] && null !== t[48])
          if (Array.isArray(t[48])) {
            e.challengeBestFloors = [];
            for (i = 0, n = t[48].length; i < n; i++) void 0 !== t[48][i] && null !== t[48][i] && (e.challengeBestFloors[i] = t[48][i])
          } else 0;
        return void 0 !== t[49] && null !== t[49] && (e.challengeEnterCount = t[49]), void 0 !== t[50] && null !== t[50] && (e.speGameCnt = t[50]), void 0 !== t[51] && null !== t[51] && (e.teamCoin = t[51]), void 0 !== t[52] && null !== t[52] && (e.dayVideoTeamCoin = t[52]), e
      }, t.toIndex = function(t) {
        var e = {};
        if (e[1] = t.uid, e[2] = t.nick, e[3] = t.image, e[4] = t.gold, e[5] = t.bestScore, e[6] = t.skin, Array.isArray(t.itemInfos)) {
          e[7] = [];
          for (var i = 0, n = t.itemInfos.length; i < n; i++) t.itemInfos[i] && (e[7][i] = xC.toIndex(t.itemInfos[i]))
        } else 0;
        if (Array.isArray(t.expertBestScores)) {
          e[8] = [];
          for (i = 0, n = t.expertBestScores.length; i < n; i++) void 0 !== t.expertBestScores[i] && null !== t.expertBestScores[i] && (e[8][i] = t.expertBestScores[i])
        } else 0;
        if (Array.isArray(t.tasks)) {
          e[11] = [];
          for (i = 0, n = t.tasks.length; i < n; i++) t.tasks[i] && (e[11][i] = kC.toIndex(t.tasks[i]))
        } else 0;
        if (void 0 !== t.province && null !== t.province && (e[12] = t.province), Array.isArray(t.shareInfos)) {
          e[13] = [];
          for (i = 0, n = t.shareInfos.length; i < n; i++) t.shareInfos[i] && (e[13][i] = CC.toIndex(t.shareInfos[i]))
        } else 0;
        if (e[14] = t.guest, e[15] = t.sex, void 0 !== t.city && null !== t.city && (e[16] = t.city), e[17] = t.guideStep, Array.isArray(t.usedSkins)) {
          e[18] = [];
          for (i = 0, n = t.usedSkins.length; i < n; i++) void 0 !== t.usedSkins[i] && null !== t.usedSkins[i] && (e[18][i] = t.usedSkins[i])
        } else 0;
        if (e[19] = t.isCheat, e[20] = t.coin, e[21] = t.ticket, e[22] = t.ticketVideoAd, e[23] = t.ticketChallenge, Array.isArray(t.mapBestFloors)) {
          e[24] = [];
          for (i = 0, n = t.mapBestFloors.length; i < n; i++) void 0 !== t.mapBestFloors[i] && null !== t.mapBestFloors[i] && (e[24][i] = t.mapBestFloors[i])
        } else 0;
        if (t.bestRelayFirst && (e[25] = BC.toIndex(t.bestRelayFirst)), t.bestRelaySec && (e[26] = BC.toIndex(t.bestRelaySec)), void 0 !== t.goldRate && null !== t.goldRate && (e[27] = t.goldRate), void 0 !== t.freeTurntableCount && null !== t.freeTurntableCount && (e[28] = t.freeTurntableCount), void 0 !== t.videoTurntableCount && null !== t.videoTurntableCount && (e[29] = t.videoTurntableCount), void 0 !== t.lastFreeTurntableTime && null !== t.lastFreeTurntableTime && (e[30] = t.lastFreeTurntableTime), void 0 !== t.loginDays && null !== t.loginDays && (e[31] = t.loginDays), void 0 !== t.todayGameCount && null !== t.todayGameCount && (e[32] = t.todayGameCount), void 0 !== t.createTime && null !== t.createTime && (e[33] = t.createTime), void 0 !== t.chid && null !== t.chid && (e[34] = t.chid), void 0 !== t.videoCnt && null !== t.videoCnt && (e[35] = t.videoCnt), void 0 !== t.signDay && null !== t.signDay && (e[36] = t.signDay), void 0 !== t.isSign && null !== t.isSign && (e[37] = t.isSign), void 0 !== t.videoSkins && null !== t.videoSkins)
          if (Array.isArray(t.videoSkins)) {
            e[38] = [];
            for (i = 0, n = t.videoSkins.length; i < n; i++) t.videoSkins[i] && (e[38][i] = PC.toIndex(t.videoSkins[i]))
          } else 0;
        if (void 0 !== t.paint && null !== t.paint && (e[39] = t.paint), void 0 !== t.trail && null !== t.trail && (e[40] = t.trail), void 0 !== t.gameVersion && null !== t.gameVersion && (e[41] = t.gameVersion), void 0 !== t.lastShareFriendTime && null !== t.lastShareFriendTime && (e[42] = t.lastShareFriendTime), void 0 !== t.dayAdCardCount && null !== t.dayAdCardCount)
          if (Array.isArray(t.dayAdCardCount)) {
            e[43] = [];
            for (i = 0, n = t.dayAdCardCount.length; i < n; i++)
              if (void 0 !== t.dayAdCardCount[i] && null !== t.dayAdCardCount[i])
                if (Array.isArray(t.dayAdCardCount[i])) {
                  e[43][i] = [];
                  for (var o = 0, r = t.dayAdCardCount[i].length; o < r; o++) void 0 !== t.dayAdCardCount[i][o] && null !== t.dayAdCardCount[i][o] && (e[43][i][o] = t.dayAdCardCount[i][o])
                } else 0
          } else 0;
        if (void 0 !== t.adButtonCounter && null !== t.adButtonCounter && (e[44] = t.adButtonCounter), t.limitGift && (e[45] = MC.toIndex(t.limitGift)), void 0 !== t.adCardCnt && null !== t.adCardCnt && (e[46] = t.adCardCnt), void 0 !== t.unlockChallengeMapId && null !== t.unlockChallengeMapId && (e[47] = t.unlockChallengeMapId), void 0 !== t.challengeBestFloors && null !== t.challengeBestFloors)
          if (Array.isArray(t.challengeBestFloors)) {
            e[48] = [];
            for (i = 0, n = t.challengeBestFloors.length; i < n; i++) void 0 !== t.challengeBestFloors[i] && null !== t.challengeBestFloors[i] && (e[48][i] = t.challengeBestFloors[i])
          } else 0;
        return void 0 !== t.challengeEnterCount && null !== t.challengeEnterCount && (e[49] = t.challengeEnterCount), void 0 !== t.speGameCnt && null !== t.speGameCnt && (e[50] = t.speGameCnt), void 0 !== t.teamCoin && null !== t.teamCoin && (e[51] = t.teamCoin), void 0 !== t.dayVideoTeamCoin && null !== t.dayVideoTeamCoin && (e[52] = t.dayVideoTeamCoin), e
      }
    }(FC || (FC = {}));
    const EC = FC;
    var LC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.now = t[1], e.connectToken = t[2], t[3] && (e.userInfo = EC.fromIndex(t[3])), void 0 !== t[9] && null !== t[9] && (e.hasMinigameGifts = t[9]), e
      }, t.__cmd = 257
    }(LC || (LC = {}));
    const OC = LC;
    var RC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (void 0 !== t[1] && null !== t[1] && (e.uid = t[1]), void 0 !== t[2] && null !== t[2] && (e.nick = t[2]), void 0 !== t[3] && null !== t[3] && (e.image = t[3]), void 0 !== t[4] && null !== t[4] && (e.gold = t[4]), void 0 !== t[5] && null !== t[5] && (e.bestScore = t[5]), void 0 !== t[6] && null !== t[6] && (e.skin = t[6]), void 0 !== t[7] && null !== t[7])
          if (Array.isArray(t[7])) {
            e.itemInfos = [];
            for (var i = 0, n = t[7].length; i < n; i++) t[7][i] && (e.itemInfos[i] = xC.fromIndex(t[7][i]))
          } else 0;
        if (void 0 !== t[8] && null !== t[8])
          if (Array.isArray(t[8])) {
            e.expertBestScores = [];
            for (i = 0, n = t[8].length; i < n; i++) void 0 !== t[8][i] && null !== t[8][i] && (e.expertBestScores[i] = t[8][i])
          } else 0;
        if (void 0 !== t[11] && null !== t[11])
          if (Array.isArray(t[11])) {
            e.tasks = [];
            for (i = 0, n = t[11].length; i < n; i++) t[11][i] && (e.tasks[i] = kC.fromIndex(t[11][i]))
          } else 0;
        if (void 0 !== t[12] && null !== t[12] && (e.province = t[12]), void 0 !== t[13] && null !== t[13])
          if (Array.isArray(t[13])) {
            e.shareInfos = [];
            for (i = 0, n = t[13].length; i < n; i++) t[13][i] && (e.shareInfos[i] = CC.fromIndex(t[13][i]))
          } else 0;
        if (void 0 !== t[14] && null !== t[14] && (e.guest = t[14]), void 0 !== t[15] && null !== t[15] && (e.sex = t[15]), void 0 !== t[16] && null !== t[16] && (e.city = t[16]), void 0 !== t[17] && null !== t[17] && (e.guideStep = t[17]), void 0 !== t[18] && null !== t[18])
          if (Array.isArray(t[18])) {
            e.usedSkins = [];
            for (i = 0, n = t[18].length; i < n; i++) void 0 !== t[18][i] && null !== t[18][i] && (e.usedSkins[i] = t[18][i])
          } else 0;
        if (void 0 !== t[19] && null !== t[19] && (e.isCheat = t[19]), void 0 !== t[20] && null !== t[20] && (e.coin = t[20]), void 0 !== t[21] && null !== t[21] && (e.ticket = t[21]), void 0 !== t[22] && null !== t[22] && (e.ticketVideoAd = t[22]), void 0 !== t[23] && null !== t[23] && (e.ticketChallenge = t[23]), void 0 !== t[24] && null !== t[24])
          if (Array.isArray(t[24])) {
            e.mapBestFloors = [];
            for (i = 0, n = t[24].length; i < n; i++) void 0 !== t[24][i] && null !== t[24][i] && (e.mapBestFloors[i] = t[24][i])
          } else 0;
        if (t[25] && (e.bestRelayFirst = BC.fromIndex(t[25])), t[26] && (e.bestRelaySec = BC.fromIndex(t[26])), void 0 !== t[27] && null !== t[27] && (e.goldRate = t[27]), void 0 !== t[28] && null !== t[28] && (e.freeTurntableCount = t[28]), void 0 !== t[29] && null !== t[29] && (e.videoTurntableCount = t[29]), void 0 !== t[30] && null !== t[30] && (e.lastFreeTurntableTime = t[30]), void 0 !== t[31] && null !== t[31] && (e.loginDays = t[31]), void 0 !== t[32] && null !== t[32] && (e.todayGameCount = t[32]), void 0 !== t[33] && null !== t[33] && (e.createTime = t[33]), void 0 !== t[34] && null !== t[34] && (e.chid = t[34]), void 0 !== t[35] && null !== t[35] && (e.videoCnt = t[35]), void 0 !== t[36] && null !== t[36] && (e.signDay = t[36]), void 0 !== t[37] && null !== t[37] && (e.isSign = t[37]), void 0 !== t[38] && null !== t[38])
          if (Array.isArray(t[38])) {
            e.videoSkins = [];
            for (i = 0, n = t[38].length; i < n; i++) t[38][i] && (e.videoSkins[i] = PC.fromIndex(t[38][i]))
          } else 0;
        if (void 0 !== t[39] && null !== t[39] && (e.paint = t[39]), void 0 !== t[40] && null !== t[40] && (e.trail = t[40]), void 0 !== t[41] && null !== t[41] && (e.gameVersion = t[41]), void 0 !== t[42] && null !== t[42] && (e.lastShareFriendTime = t[42]), void 0 !== t[43] && null !== t[43])
          if (Array.isArray(t[43])) {
            e.dayAdCardCount = [];
            for (i = 0, n = t[43].length; i < n; i++)
              if (void 0 !== t[43][i] && null !== t[43][i])
                if (Array.isArray(t[43][i])) {
                  e.dayAdCardCount[i] = [];
                  for (var o = 0, r = t[43][i].length; o < r; o++) void 0 !== t[43][i][o] && null !== t[43][i][o] && (e.dayAdCardCount[i][o] = t[43][i][o])
                } else 0
          } else 0;
        if (void 0 !== t[44] && null !== t[44] && (e.adButtonCounter = t[44]), t[45] && (e.limitGift = MC.fromIndex(t[45])), void 0 !== t[46] && null !== t[46] && (e.adCardCnt = t[46]), void 0 !== t[47] && null !== t[47] && (e.unlockChallengeMapId = t[47]), void 0 !== t[48] && null !== t[48])
          if (Array.isArray(t[48])) {
            e.challengeBestFloors = [];
            for (i = 0, n = t[48].length; i < n; i++) void 0 !== t[48][i] && null !== t[48][i] && (e.challengeBestFloors[i] = t[48][i])
          } else 0;
        return void 0 !== t[49] && null !== t[49] && (e.challengeEnterCount = t[49]), void 0 !== t[50] && null !== t[50] && (e.speGameCnt = t[50]), void 0 !== t[51] && null !== t[51] && (e.teamCoin = t[51]), void 0 !== t[52] && null !== t[52] && (e.dayVideoTeamCoin = t[52]), e
      }, t.toIndex = function(t) {
        var e = {};
        if (void 0 !== t.uid && null !== t.uid && (e[1] = t.uid), void 0 !== t.nick && null !== t.nick && (e[2] = t.nick), void 0 !== t.image && null !== t.image && (e[3] = t.image), void 0 !== t.gold && null !== t.gold && (e[4] = t.gold), void 0 !== t.bestScore && null !== t.bestScore && (e[5] = t.bestScore), void 0 !== t.skin && null !== t.skin && (e[6] = t.skin), void 0 !== t.itemInfos && null !== t.itemInfos)
          if (Array.isArray(t.itemInfos)) {
            e[7] = [];
            for (var i = 0, n = t.itemInfos.length; i < n; i++) t.itemInfos[i] && (e[7][i] = xC.toIndex(t.itemInfos[i]))
          } else 0;
        if (void 0 !== t.expertBestScores && null !== t.expertBestScores)
          if (Array.isArray(t.expertBestScores)) {
            e[8] = [];
            for (i = 0, n = t.expertBestScores.length; i < n; i++) void 0 !== t.expertBestScores[i] && null !== t.expertBestScores[i] && (e[8][i] = t.expertBestScores[i])
          } else 0;
        if (void 0 !== t.tasks && null !== t.tasks)
          if (Array.isArray(t.tasks)) {
            e[11] = [];
            for (i = 0, n = t.tasks.length; i < n; i++) t.tasks[i] && (e[11][i] = kC.toIndex(t.tasks[i]))
          } else 0;
        if (void 0 !== t.province && null !== t.province && (e[12] = t.province), void 0 !== t.shareInfos && null !== t.shareInfos)
          if (Array.isArray(t.shareInfos)) {
            e[13] = [];
            for (i = 0, n = t.shareInfos.length; i < n; i++) t.shareInfos[i] && (e[13][i] = CC.toIndex(t.shareInfos[i]))
          } else 0;
        if (void 0 !== t.guest && null !== t.guest && (e[14] = t.guest), void 0 !== t.sex && null !== t.sex && (e[15] = t.sex), void 0 !== t.city && null !== t.city && (e[16] = t.city), void 0 !== t.guideStep && null !== t.guideStep && (e[17] = t.guideStep), void 0 !== t.usedSkins && null !== t.usedSkins)
          if (Array.isArray(t.usedSkins)) {
            e[18] = [];
            for (i = 0, n = t.usedSkins.length; i < n; i++) void 0 !== t.usedSkins[i] && null !== t.usedSkins[i] && (e[18][i] = t.usedSkins[i])
          } else 0;
        if (void 0 !== t.isCheat && null !== t.isCheat && (e[19] = t.isCheat), void 0 !== t.coin && null !== t.coin && (e[20] = t.coin), void 0 !== t.ticket && null !== t.ticket && (e[21] = t.ticket), void 0 !== t.ticketVideoAd && null !== t.ticketVideoAd && (e[22] = t.ticketVideoAd), void 0 !== t.ticketChallenge && null !== t.ticketChallenge && (e[23] = t.ticketChallenge), void 0 !== t.mapBestFloors && null !== t.mapBestFloors)
          if (Array.isArray(t.mapBestFloors)) {
            e[24] = [];
            for (i = 0, n = t.mapBestFloors.length; i < n; i++) void 0 !== t.mapBestFloors[i] && null !== t.mapBestFloors[i] && (e[24][i] = t.mapBestFloors[i])
          } else 0;
        if (t.bestRelayFirst && (e[25] = BC.toIndex(t.bestRelayFirst)), t.bestRelaySec && (e[26] = BC.toIndex(t.bestRelaySec)), void 0 !== t.goldRate && null !== t.goldRate && (e[27] = t.goldRate), void 0 !== t.freeTurntableCount && null !== t.freeTurntableCount && (e[28] = t.freeTurntableCount), void 0 !== t.videoTurntableCount && null !== t.videoTurntableCount && (e[29] = t.videoTurntableCount), void 0 !== t.lastFreeTurntableTime && null !== t.lastFreeTurntableTime && (e[30] = t.lastFreeTurntableTime), void 0 !== t.loginDays && null !== t.loginDays && (e[31] = t.loginDays), void 0 !== t.todayGameCount && null !== t.todayGameCount && (e[32] = t.todayGameCount), void 0 !== t.createTime && null !== t.createTime && (e[33] = t.createTime), void 0 !== t.chid && null !== t.chid && (e[34] = t.chid), void 0 !== t.videoCnt && null !== t.videoCnt && (e[35] = t.videoCnt), void 0 !== t.signDay && null !== t.signDay && (e[36] = t.signDay), void 0 !== t.isSign && null !== t.isSign && (e[37] = t.isSign), void 0 !== t.videoSkins && null !== t.videoSkins)
          if (Array.isArray(t.videoSkins)) {
            e[38] = [];
            for (i = 0, n = t.videoSkins.length; i < n; i++) t.videoSkins[i] && (e[38][i] = PC.toIndex(t.videoSkins[i]))
          } else 0;
        if (void 0 !== t.paint && null !== t.paint && (e[39] = t.paint), void 0 !== t.trail && null !== t.trail && (e[40] = t.trail), void 0 !== t.gameVersion && null !== t.gameVersion && (e[41] = t.gameVersion), void 0 !== t.lastShareFriendTime && null !== t.lastShareFriendTime && (e[42] = t.lastShareFriendTime), void 0 !== t.dayAdCardCount && null !== t.dayAdCardCount)
          if (Array.isArray(t.dayAdCardCount)) {
            e[43] = [];
            for (i = 0, n = t.dayAdCardCount.length; i < n; i++)
              if (void 0 !== t.dayAdCardCount[i] && null !== t.dayAdCardCount[i])
                if (Array.isArray(t.dayAdCardCount[i])) {
                  e[43][i] = [];
                  for (var o = 0, r = t.dayAdCardCount[i].length; o < r; o++) void 0 !== t.dayAdCardCount[i][o] && null !== t.dayAdCardCount[i][o] && (e[43][i][o] = t.dayAdCardCount[i][o])
                } else 0
          } else 0;
        if (void 0 !== t.adButtonCounter && null !== t.adButtonCounter && (e[44] = t.adButtonCounter), t.limitGift && (e[45] = MC.toIndex(t.limitGift)), void 0 !== t.adCardCnt && null !== t.adCardCnt && (e[46] = t.adCardCnt), void 0 !== t.unlockChallengeMapId && null !== t.unlockChallengeMapId && (e[47] = t.unlockChallengeMapId), void 0 !== t.challengeBestFloors && null !== t.challengeBestFloors)
          if (Array.isArray(t.challengeBestFloors)) {
            e[48] = [];
            for (i = 0, n = t.challengeBestFloors.length; i < n; i++) void 0 !== t.challengeBestFloors[i] && null !== t.challengeBestFloors[i] && (e[48][i] = t.challengeBestFloors[i])
          } else 0;
        return void 0 !== t.challengeEnterCount && null !== t.challengeEnterCount && (e[49] = t.challengeEnterCount), void 0 !== t.speGameCnt && null !== t.speGameCnt && (e[50] = t.speGameCnt), void 0 !== t.teamCoin && null !== t.teamCoin && (e[51] = t.teamCoin), void 0 !== t.dayVideoTeamCoin && null !== t.dayVideoTeamCoin && (e[52] = t.dayVideoTeamCoin), e
      }
    }(RC || (RC = {}));
    const GC = RC;
    var AC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e.now = t[2], e
      }, t.__cmd = 259
    }(AC || (AC = {}));
    const NC = AC;
    var jC;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        if (e[1] = t.type, Array.isArray(t.values)) {
          e[2] = [];
          for (var i = 0, n = t.values.length; i < n; i++) void 0 !== t.values[i] && null !== t.values[i] && (e[2][i] = t.values[i])
        } else 0;
        return e
      }, t.__cmd = 260
    }(jC || (jC = {}));
    const VC = jC;
    var UC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 260
    }(UC || (UC = {}));
    const WC = UC;
    var qC;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.token, e[2] = t.uid, void 0 !== t.fuid && null !== t.fuid && (e[3] = t.fuid), e
      }, t.__cmd = 266
    }(qC || (qC = {}));
    const HC = qC;
    var $C;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.now = t[1], e.connectToken = t[2], t[3] && (e.userInfo = EC.fromIndex(t[3])), void 0 !== t[4] && null !== t[4] && (e.canPay = t[4]), void 0 !== t[5] && null !== t[5] && (e.canIOSPay = t[5]), void 0 !== t[6] && null !== t[6] && (e.canInvite = t[6]), void 0 !== t[7] && null !== t[7] && (e.canFocus = t[7]), void 0 !== t[8] && null !== t[8] && (e.canMoreFocus = t[8]), void 0 !== t[9] && null !== t[9] && (e.hasMinigameGifts = t[9]), e
      }, t.__cmd = 266
    }($C || ($C = {}));
    const XC = $C;
    var YC;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 287
    }(YC || (YC = {}));
    const zC = YC;
    var KC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (void 0 !== t[1] && null !== t[1] && (e.gold = t[1]), void 0 !== t[2] && null !== t[2])
          if (Array.isArray(t[2])) {
            e.items = [];
            for (var i = 0, n = t[2].length; i < n; i++)
              if (void 0 !== t[2][i] && null !== t[2][i])
                if (Array.isArray(t[2][i])) {
                  e.items[i] = [];
                  for (var o = 0, r = t[2][i].length; o < r; o++) void 0 !== t[2][i][o] && null !== t[2][i][o] && (e.items[i][o] = t[2][i][o])
                } else 0
          } else 0;
        return void 0 !== t[3] && null !== t[3] && (e.ticket = t[3]), void 0 !== t[4] && null !== t[4] && (e.coin = t[4]), void 0 !== t[5] && null !== t[5] && (e.teamCoin = t[5]), e
      }, t.toIndex = function(t) {
        var e = {};
        if (void 0 !== t.gold && null !== t.gold && (e[1] = t.gold), void 0 !== t.items && null !== t.items)
          if (Array.isArray(t.items)) {
            e[2] = [];
            for (var i = 0, n = t.items.length; i < n; i++)
              if (void 0 !== t.items[i] && null !== t.items[i])
                if (Array.isArray(t.items[i])) {
                  e[2][i] = [];
                  for (var o = 0, r = t.items[i].length; o < r; o++) void 0 !== t.items[i][o] && null !== t.items[i][o] && (e[2][i][o] = t.items[i][o])
                } else 0
          } else 0;
        return void 0 !== t.ticket && null !== t.ticket && (e[3] = t.ticket), void 0 !== t.coin && null !== t.coin && (e[4] = t.coin), void 0 !== t.teamCoin && null !== t.teamCoin && (e[5] = t.teamCoin), e
      }
    }(KC || (KC = {}));
    const JC = KC;
    var QC;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.type = t[1], t[2] && (e.gift = JC.fromIndex(t[2])), e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, t.gift && (e[2] = JC.toIndex(t.gift)), e
      }
    }(QC || (QC = {}));
    const ZC = QC;
    var t_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (Array.isArray(t[1])) {
          e.gifts = [];
          for (var i = 0, n = t[1].length; i < n; i++) t[1][i] && (e.gifts[i] = ZC.fromIndex(t[1][i]))
        } else 0;
        return t[2] && (e.syncData = GC.fromIndex(t[2])), e
      }, t.__cmd = 287
    }(t_ || (t_ = {}));
    const e_ = t_;
    var i_;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.encryptedData, e[2] = t.iv, e
      }, t.__cmd = 288
    }(i_ || (i_ = {}));
    const n_ = i_;
    var o_;
    ! function(t) {
      t.fromIndex = function(t) {
        return {}
      }, t.__cmd = 288
    }(o_ || (o_ = {}));
    const r_ = o_;
    var s_;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 516
    }(s_ || (s_ = {}));
    const a_ = s_;
    var h_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 516
    }(h_ || (h_ = {}));
    const c_ = h_;
    var u_;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.skin, e
      }, t.__cmd = 769
    }(u_ || (u_ = {}));
    const l_ = u_;
    var d_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 769
    }(d_ || (d_ = {}));
    const p_ = d_;
    var f_;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, e
      }, t.__cmd = 771
    }(f_ || (f_ = {}));
    const g_ = f_;
    var m_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), t[2] && (e.gift = JC.fromIndex(t[2])), e.result = t[3], e
      }, t.__cmd = 771
    }(m_ || (m_ = {}));
    const y_ = m_;
    var v_;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.targetUid, void 0 !== t.time && null !== t.time && (e[2] = t.time), e
      }, t.__cmd = 772
    }(v_ || (v_ = {}));
    const b_ = v_;
    var w_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 772
    }(w_ || (w_ = {}));
    const x_ = w_;
    var T_;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return void 0 !== t.count && null !== t.count && (e[1] = t.count), e
      }, t.__cmd = 773
    }(T_ || (T_ = {}));
    const k_ = T_;
    var I_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 773
    }(I_ || (I_ = {}));
    const C_ = I_;
    var __;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 774
    }(__ || (__ = {}));
    const B_ = __;
    var S_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 774
    }(S_ || (S_ = {}));
    const P_ = S_;
    var D_;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 775
    }(D_ || (D_ = {}));
    const M_ = D_;
    var F_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 775
    }(F_ || (F_ = {}));
    const E_ = F_;
    var L_;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.score, e
      }, t.__cmd = 776
    }(L_ || (L_ = {}));
    const O_ = L_;
    var R_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 776
    }(R_ || (R_ = {}));
    const G_ = R_;
    var A_;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.uid, e[2] = t.time, e
      }, t.__cmd = 777
    }(A_ || (A_ = {}));
    const N_ = A_;
    var j_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e.result = t[2], e
      }, t.__cmd = 777
    }(j_ || (j_ = {}));
    const V_ = j_;
    var U_;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 778
    }(U_ || (U_ = {}));
    const W_ = U_;
    var q_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 778
    }(q_ || (q_ = {}));
    const H_ = q_;
    var $_;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 779
    }($_ || ($_ = {}));
    const X_ = $_;
    var Y_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), t[2] && (e.gift = JC.fromIndex(t[2])), e
      }, t.__cmd = 779
    }(Y_ || (Y_ = {}));
    const z_ = Y_;
    var K_;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, e
      }, t.__cmd = 780
    }(K_ || (K_ = {}));
    const J_ = K_;
    var Q_;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 780
    }(Q_ || (Q_ = {}));
    const Z_ = Q_;
    var tB;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 781
    }(tB || (tB = {}));
    const eB = tB;
    var iB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.id = t[1], e.process = t[2], e.received = t[3], e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.id, e[2] = t.process, e[3] = t.received, e
      }
    }(iB || (iB = {}));
    const nB = iB;
    var oB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.time = t[1], t[2] && (e.good1 = nB.fromIndex(t[2])), void 0 !== t[3] && null !== t[3] && (e.good2Skin = t[3]), e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.time, t.good1 && (e[2] = nB.toIndex(t.good1)), void 0 !== t.good2Skin && null !== t.good2Skin && (e[3] = t.good2Skin), e
      }
    }(oB || (oB = {}));
    const rB = oB;
    var sB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.goods = rB.fromIndex(t[1])), e
      }, t.__cmd = 781
    }(sB || (sB = {}));
    const aB = sB;
    var hB;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, e
      }, t.__cmd = 782
    }(hB || (hB = {}));
    const cB = hB;
    var uB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.goods = rB.fromIndex(t[1])), t[2] && (e.gift = JC.fromIndex(t[2])), t[3] && (e.syncData = GC.fromIndex(t[3])), e
      }, t.__cmd = 782
    }(uB || (uB = {}));
    const lB = uB;
    var dB;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return void 0 !== t.type && null !== t.type && (e[1] = t.type), e[2] = t.skin, void 0 !== t.map && null !== t.map && (e[3] = t.map), void 0 !== t.relayId && null !== t.relayId && (e[4] = t.relayId), void 0 !== t.challengeId && null !== t.challengeId && (e[5] = t.challengeId), void 0 !== t.mode && null !== t.mode && (e[6] = t.mode), e
      }, t.__cmd = 1025
    }(dB || (dB = {}));
    const pB = dB;
    var fB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.fightId = t[1], e.floorCount = t[2], e.map = t[3], t[4] && (e.syncData = GC.fromIndex(t[4])), void 0 !== t[5] && null !== t[5] && (e.challengeId = t[5]), e
      }, t.__cmd = 1025
    }(fB || (fB = {}));
    const gB = fB;
    var mB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.type = t[1], e.progress = t[2], void 0 !== t[3] && null !== t[3] && (e.condition = t[3]), e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, e[2] = t.progress, void 0 !== t.condition && null !== t.condition && (e[3] = t.condition), e
      }
    }(mB || (mB = {}));
    const yB = mB;
    var vB;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        if (e[1] = t.fightId, e[2] = t.score, e[3] = t.dropFloor, e[4] = t.crashPlane, e[5] = t.crashBanPlane, Array.isArray(t.clientTasks)) {
          e[6] = [];
          for (var i = 0, n = t.clientTasks.length; i < n; i++) t.clientTasks[i] && (e[6][i] = yB.toIndex(t.clientTasks[i]))
        } else 0;
        return void 0 !== t.relayId && null !== t.relayId && (e[7] = t.relayId), void 0 !== t.modeScore && null !== t.modeScore && (e[9] = t.modeScore), void 0 !== t.pass && null !== t.pass && (e[10] = t.pass), void 0 !== t.sig && null !== t.sig && (e[11] = t.sig), e
      }, t.__cmd = 1027
    }(vB || (vB = {}));
    const bB = vB;
    var wB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.fightId = t[1], t[2] && (e.syncData = GC.fromIndex(t[2])), e.score = t[3], void 0 !== t[4] && null !== t[4] && (e.gold = t[4]), void 0 !== t[5] && null !== t[5] && (e.goldRate = t[5]), void 0 !== t[6] && null !== t[6] && (e.addGold = t[6]), void 0 !== t[7] && null !== t[7] && (e.tired = t[7]), e
      }, t.__cmd = 1027
    }(wB || (wB = {}));
    const xB = wB;
    var TB;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.fightId, e
      }, t.__cmd = 1030
    }(TB || (TB = {}));
    const kB = TB;
    var IB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.fightId = t[1], e
      }, t.__cmd = 1030
    }(IB || (IB = {}));
    const CB = IB;
    var _B;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return void 0 !== t.type && null !== t.type && (e[1] = t.type), e
      }, t.__cmd = 1031
    }(_B || (_B = {}));
    const BB = _B;
    var SB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 1031
    }(SB || (SB = {}));
    const PB = SB;
    var DB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.uid = t[1], e.nick = t[2], e.image = t[3], e
      }, t.__cmd = 1281
    }(DB || (DB = {}));
    const MB = DB;
    var FB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.ticket = t[1], e
      }, t.__cmd = 1282
    }(FB || (FB = {}));
    const EB = FB;
    var LB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 1283
    }(LB || (LB = {}));
    const OB = LB;
    var RB;
    ! function(t) {
      t.fromIndex = function(t) {
        return {}
      }, t.__cmd = 1284
    }(RB || (RB = {}));
    const GB = RB;
    var AB;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.score, e
      }, t.__cmd = 1537
    }(AB || (AB = {}));
    const NB = AB;
    var jB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.relayId = t[1], e
      }, t.__cmd = 1537
    }(jB || (jB = {}));
    const VB = jB;
    var UB;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.relayId, e
      }, t.__cmd = 1538
    }(UB || (UB = {}));
    const WB = UB;
    var qB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.uid = t[1], e.nick = t[2], e.score = t[3], e
      }, t.__cmd = 1538
    }(qB || (qB = {}));
    const HB = qB;
    var $B;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 1539
    }($B || ($B = {}));
    const XB = $B;
    var YB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 1539
    }(YB || (YB = {}));
    const zB = YB;
    var KB;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, e
      }, t.__cmd = 1793
    }(KB || (KB = {}));
    const JB = KB;
    var QB;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.index = t[1], t[2] && (e.gift = JC.fromIndex(t[2])), t[3] && (e.syncData = GC.fromIndex(t[3])), e
      }, t.__cmd = 1793
    }(QB || (QB = {}));
    const ZB = QB;
    var tS;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.skin, e
      }, t.__cmd = 1794
    }(tS || (tS = {}));
    const eS = tS;
    var iS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), t[2] && (e.gift = JC.fromIndex(t[2])), e
      }, t.__cmd = 1794
    }(iS || (iS = {}));
    const nS = iS;
    var oS;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, void 0 !== t.orderNo && null !== t.orderNo && (e[2] = t.orderNo), e
      }, t.__cmd = 1795
    }(oS || (oS = {}));
    const rS = oS;
    var sS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.gift = JC.fromIndex(t[1])), t[2] && (e.syncData = GC.fromIndex(t[2])), e
      }, t.__cmd = 1795
    }(sS || (sS = {}));
    const aS = sS;
    var hS;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 1796
    }(hS || (hS = {}));
    const cS = hS;
    var uS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 1796
    }(uS || (uS = {}));
    const lS = uS;
    var dS;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 1797
    }(dS || (dS = {}));
    const pS = dS;
    var fS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 1797
    }(fS || (fS = {}));
    const gS = fS;
    var mS;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.skin, e
      }, t.__cmd = 1798
    }(mS || (mS = {}));
    const yS = mS;
    var vS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), t[2] && (e.gift = JC.fromIndex(t[2])), e
      }, t.__cmd = 1798
    }(vS || (vS = {}));
    const bS = vS;
    var wS;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, e
      }, t.__cmd = 2049
    }(wS || (wS = {}));
    const xS = wS;
    var TS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 2049
    }(TS || (TS = {}));
    const kS = TS;
    var IS;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.type, e
      }, t.__cmd = 2305
    }(IS || (IS = {}));
    const CS = IS;
    var _S;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), t[2] && (e.gift = JC.fromIndex(t[2])), e
      }, t.__cmd = 2305
    }(_S || (_S = {}));
    const BS = _S;
    var SS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.key = t[1], e.value = t[2], e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.key, e[2] = t.value, e
      }
    }(SS || (SS = {}));
    const PS = SS;
    var DS;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        if (e[1] = t.templateId, void 0 !== t.sendTime && null !== t.sendTime && (e[2] = t.sendTime), void 0 !== t.keyValues && null !== t.keyValues)
          if (Array.isArray(t.keyValues)) {
            e[3] = [];
            for (var i = 0, n = t.keyValues.length; i < n; i++) t.keyValues[i] && (e[3][i] = PS.toIndex(t.keyValues[i]))
          } else 0;
        return void 0 !== t.page && null !== t.page && (e[4] = t.page), e
      }, t.__cmd = 4097
    }(DS || (DS = {}));
    const MS = DS;
    var FS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return void 0 !== t[1] && null !== t[1] && (e.id = t[1]), e
      }, t.__cmd = 4097
    }(FS || (FS = {}));
    const ES = FS;
    var LS;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        if (Array.isArray(t.templateIds)) {
          e[1] = [];
          for (var i = 0, n = t.templateIds.length; i < n; i++) void 0 !== t.templateIds[i] && null !== t.templateIds[i] && (e[1][i] = t.templateIds[i])
        } else 0;
        return e
      }, t.__cmd = 4099
    }(LS || (LS = {}));
    const OS = LS;
    var RS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (e.id = t[1], e.sendTime = t[2], void 0 !== t[3] && null !== t[3])
          if (Array.isArray(t[3])) {
            e.keyValues = [];
            for (var i = 0, n = t[3].length; i < n; i++) t[3][i] && (e.keyValues[i] = PS.fromIndex(t[3][i]))
          } else 0;
        return e
      }, t.toIndex = function(t) {
        var e = {};
        if (e[1] = t.id, e[2] = t.sendTime, void 0 !== t.keyValues && null !== t.keyValues)
          if (Array.isArray(t.keyValues)) {
            e[3] = [];
            for (var i = 0, n = t.keyValues.length; i < n; i++) t.keyValues[i] && (e[3][i] = PS.toIndex(t.keyValues[i]))
          } else 0;
        return e
      }
    }(RS || (RS = {}));
    const GS = RS;
    var AS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (e.templateId = t[1], e.count = t[2], Array.isArray(t[3])) {
          e.schedules = [];
          for (var i = 0, n = t[3].length; i < n; i++) t[3][i] && (e.schedules[i] = GS.fromIndex(t[3][i]))
        } else 0;
        return e
      }, t.toIndex = function(t) {
        var e = {};
        if (e[1] = t.templateId, e[2] = t.count, Array.isArray(t.schedules)) {
          e[3] = [];
          for (var i = 0, n = t.schedules.length; i < n; i++) t.schedules[i] && (e[3][i] = GS.toIndex(t.schedules[i]))
        } else 0;
        return e
      }
    }(AS || (AS = {}));
    const NS = AS;
    var jS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (Array.isArray(t[1])) {
          e.list = [];
          for (var i = 0, n = t[1].length; i < n; i++) t[1][i] && (e.list[i] = NS.fromIndex(t[1][i]))
        } else 0;
        return e
      }, t.__cmd = 4099
    }(jS || (jS = {}));
    const VS = jS;
    var US;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        if (Array.isArray(t.ids)) {
          e[1] = [];
          for (var i = 0, n = t.ids.length; i < n; i++) void 0 !== t.ids[i] && null !== t.ids[i] && (e[1][i] = t.ids[i])
        } else 0;
        return e
      }, t.__cmd = 4100
    }(US || (US = {}));
    const WS = US;
    var qS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.cnt = t[1], e
      }, t.__cmd = 4100
    }(qS || (qS = {}));
    const HS = qS;
    var $S;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        if (e[1] = t.id, void 0 !== t.sendTime && null !== t.sendTime && (e[2] = t.sendTime), void 0 !== t.keyValues && null !== t.keyValues)
          if (Array.isArray(t.keyValues)) {
            e[3] = [];
            for (var i = 0, n = t.keyValues.length; i < n; i++) t.keyValues[i] && (e[3][i] = PS.toIndex(t.keyValues[i]))
          } else 0;
        return void 0 !== t.page && null !== t.page && (e[4] = t.page), e
      }, t.__cmd = 4101
    }($S || ($S = {}));
    const XS = $S;
    var YS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.cnt = t[1], e
      }, t.__cmd = 4101
    }(YS || (YS = {}));
    const zS = YS;
    var KS;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.mapId, e
      }, t.__cmd = 4353
    }(KS || (KS = {}));
    const JS = KS;
    var QS;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return t[1] && (e.syncData = GC.fromIndex(t[1])), e
      }, t.__cmd = 4353
    }(QS || (QS = {}));
    const ZS = QS;
    var tP;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.begin, e[2] = t.len, e
      }, t.__cmd = 4368
    }(tP || (tP = {}));
    const eP = tP;
    var iP;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        return e.uid = t[1], e.nick = t[2], e.image = t[3], e.rank = t[4], e.score = t[5], e
      }, t.toIndex = function(t) {
        var e = {};
        return e[1] = t.uid, e[2] = t.nick, e[3] = t.image, e[4] = t.rank, e[5] = t.score, e
      }
    }(iP || (iP = {}));
    const nP = iP;
    var oP;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (Array.isArray(t[1])) {
          e.list = [];
          for (var i = 0, n = t[1].length; i < n; i++) t[1][i] && (e.list[i] = nP.fromIndex(t[1][i]))
        } else 0;
        return void 0 !== t[2] && null !== t[2] && (e.selfRank = t[2]), void 0 !== t[3] && null !== t[3] && (e.selfScore = t[3]), e
      }, t.__cmd = 4368
    }(oP || (oP = {}));
    const rP = oP;
    var sP;
    ! function(t) {
      t.toIndex = function(t) {
        return {}
      }, t.__cmd = 4369
    }(sP || (sP = {}));
    const aP = sP;
    var hP;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (Array.isArray(t[1])) {
          e.list = [];
          for (var i = 0, n = t[1].length; i < n; i++) t[1][i] && (e.list[i] = nP.fromIndex(t[1][i]))
        } else 0;
        return e.selfRank = t[2], e.selfScore = t[3], e
      }, t.__cmd = 4369
    }(hP || (hP = {}));
    const cP = hP;
    var uP;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.map, e[2] = t.begin, e[3] = t.len, e
      }, t.__cmd = 4370
    }(uP || (uP = {}));
    const lP = uP;
    var dP;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (Array.isArray(t[1])) {
          e.list = [];
          for (var i = 0, n = t[1].length; i < n; i++) t[1][i] && (e.list[i] = nP.fromIndex(t[1][i]))
        } else 0;
        return e
      }, t.__cmd = 4370
    }(dP || (dP = {}));
    const pP = dP;
    var fP;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.mode, e[2] = t.begin, e[3] = t.len, void 0 !== t.self && null !== t.self && (e[4] = t.self), e
      }, t.__cmd = 4371
    }(fP || (fP = {}));
    const gP = fP;
    var mP;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (Array.isArray(t[1])) {
          e.list = [];
          for (var i = 0, n = t[1].length; i < n; i++) t[1][i] && (e.list[i] = nP.fromIndex(t[1][i]))
        } else 0;
        return void 0 !== t[2] && null !== t[2] && (e.selfRank = t[2]), void 0 !== t[3] && null !== t[3] && (e.selfScore = t[3]), e
      }, t.__cmd = 4371
    }(mP || (mP = {}));
    const yP = mP;
    var vP;
    ! function(t) {
      t.toIndex = function(t) {
        var e = {};
        return e[1] = t.day, e[2] = t.begin, e[3] = t.len, void 0 !== t.self && null !== t.self && (e[4] = t.self), e
      }, t.__cmd = 4372
    }(vP || (vP = {}));
    const bP = vP;
    var wP;
    ! function(t) {
      t.fromIndex = function(t) {
        var e = {};
        if (Array.isArray(t[1])) {
          e.list = [];
          for (var i = 0, n = t[1].length; i < n; i++) t[1][i] && (e.list[i] = nP.fromIndex(t[1][i]))
        } else 0;
        return void 0 !== t[2] && null !== t[2] && (e.selfRank = t[2]), void 0 !== t[3] && null !== t[3] && (e.selfScore = t[3]), e.mode = t[4], e
      }, t.__cmd = 4372
    }(wP || (wP = {}));
    const xP = wP;

    function TP(t) {
      return vC(257, t)
    }

    function kP(t) {
      return vC(259, t)
    }

    function IP(t) {
      return vC(260, t)
    }

    function CP(t) {
      return vC(266, t)
    }

    function _P(t) {
      return vC(287, t)
    }

    function BP(t) {
      return vC(288, t)
    }

    function SP(t) {
      return vC(516, t)
    }

    function PP(t) {
      return vC(769, t)
    }

    function DP(t) {
      return vC(771, t)
    }

    function MP(t) {
      return vC(772, t)
    }

    function FP(t) {
      return vC(773, t)
    }

    function EP(t) {
      return vC(774, t)
    }

    function LP(t) {
      return vC(775, t)
    }

    function OP(t) {
      return vC(776, t)
    }

    function RP(t) {
      return vC(777, t)
    }

    function GP(t) {
      return vC(778, t)
    }

    function AP(t) {
      return vC(779, t)
    }

    function NP(t) {
      return vC(780, t)
    }

    function jP(t) {
      return vC(781, t)
    }

    function VP(t) {
      return vC(782, t)
    }

    function UP(t) {
      return vC(1025, t)
    }

    function WP(t) {
      return vC(1027, t)
    }

    function qP(t) {
      return vC(1030, t)
    }

    function HP(t) {
      return vC(1031, t)
    }

    function $P(t) {
      return vC(1537, t)
    }

    function XP(t) {
      return vC(1538, t)
    }

    function YP(t) {
      return vC(1539, t)
    }

    function zP(t) {
      return vC(1793, t)
    }

    function KP(t) {
      return vC(1794, t)
    }

    function JP(t) {
      return vC(1795, t)
    }

    function QP(t) {
      return vC(1796, t)
    }

    function ZP(t) {
      return vC(1797, t)
    }

    function tD(t) {
      return vC(1798, t)
    }

    function eD(t) {
      return vC(2049, t)
    }

    function iD(t) {
      return vC(2305, t)
    }

    function nD(t) {
      return vC(4097, t)
    }

    function oD(t) {
      return vC(4099, t)
    }

    function rD(t) {
      return vC(4101, t)
    }

    function sD(t) {
      return vC(4353, t)
    }

    function aD(t) {
      return vC(4368, t)
    }

    function hD(t) {
      return vC(4369, t)
    }

    function cD(t) {
      return vC(4370, t)
    }

    function uD(t) {
      return vC(4372, t)
    }
    var lD = !1;
    var dD = function(t) {
      function e() {
        var e = t.call(this, 2, !0) || this;
        return e.initUI(), e
      }
      return i(e, t), e.prototype.initUI = function() {
        var t = this;
        this.bg = $h(557, 591), this.addChild(this.bg);
        var e = Xh("", 16777215, !0, "center", 40);
        e.x = (this.bg.width - e.width) / 2, e.y = 30, this.addChild(e), this.descText = Yh("", 9092672, 450, 26, !0), this.descText.x = 50, this.descText.y = 150, this.addChild(this.descText), this.addCloseButton(), this.buttonGroup = new im(20), Ju.supportRequestSubscribe && !Ju.subscribedNotice ? (this.subscribeButton = new Ru("btn_subscribe_notice.png", !1), this.subscribeButton.on(Iu, this.onSubscribe, this), this.buttonGroup.addButton(this.subscribeButton)) : (this.okButton = new Ru("button_ok.png", !1), this.okButton.on(Tu, (function() {
          t.close()
        }), this), this.buttonGroup.addButton(this.okButton)), this.shareButton = new Ru("button_announce.png", !1), this.shareButton.on(Tu, this.onShare, this), this.buttonGroup.addButton(this.shareButton), this.addChild(this.buttonGroup), this.buttonGroup.x = (this.bg.width - this.buttonGroup.width) / 2, this.buttonGroup.y = this.bg.y + this.bg.height - 130
      }, e.prototype.onSubscribe = function() {
        return r(this, void 0, void 0, (function() {
          return s(this, (function(t) {
            switch (t.label) {
              case 0:
                return Ju.subscribedNotice ? (rc(""), [2]) : [4, Ju.requestSubscribe($u, "")];
              case 1:
                return "accept" === t.sent() && (nD({
                  templateId: $u
                }), Ju.subscribedNotice = !0, rc("")), [2]
            }
          }))
        }))
      }, e.prototype.onShare = function() {
        ! function() {
          r(this, void 0, void 0, (function() {
            var t, e, i;
            return s(this, (function(n) {
              return t = uh.getRandomInviteWordByType(bs.update), e = t.image, $hostDef.updateImage && (e = $hostDef.updateImage), i = t.desc, $hostDef.updateDesc && (i = $hostDef.updateDesc), [2, Xc(t.type, i, e, null, t.id)]
            }))
          }))
        }(), this.close()
      }, e.prototype.onShow = function(e) {
        t.prototype.onShow.call(this, e), e && (this.descText.text = e.text)
      }, e.prototype.addPromise = function() {
        return r(this, void 0, void 0, (function() {
          var t = this;
          return s(this, (function(e) {
            return [2, new Promise((function(e) {
              t.resolve = e
            }))]
          }))
        }))
      }, e.prototype.onDestroy = function() {
        t.prototype.onDestroy.call(this), this.shareButton && (this.shareButton.destroy(), this.shareButton = null), this.subscribeButton && (this.subscribeButton.destroy(), this.subscribeButton = null), this.okButton && (this.okButton.destroy(), this.okButton = null), this.buttonGroup && (this.buttonGroup.destroy(), this.buttonGroup = null), this.resolve && (this.resolve(), this.resolve = void 0)
      }, e.clsName = "AnnouncementView", e
    }(Qg);

    function pD() {
      return r(this, void 0, void 0, (function() {
        var t, e, i, n, o, r, a, h;
        return s(this, (function(s) {
          switch (s.label) {
            case 0:
              for (t = $hostDef.noticeId, e = $hostDef.expertOpenList, i = 0; i < e.length; i++) n = e[i], new Date(n.openTime).getTime() <= Je.curTime && t < n.noticeId && (t = n.noticeId);
              return t <= 0 ? [2] : (o = Number(wx.getStorageSync("announceId")), (isNaN(o) || 0 === o) && (r = wx.getStorageSync("announcement")) && r.ids && (a = r.ids, o = a[a.length - 1], wx.setStorage({
                key: "announceId",
                data: o
              }), Nh("announcement", null)), !isNaN(o) && o >= t ? [2] : [4, Ah()]);
            case 1:
              return s.sent(), (h = mh.getNotice(t)) ? (DEVELOP && console.log("announce id:", t), wx.setStorage({
                key: "announceId",
                data: t
              }), [4, tc.showPanel(dD, h).addPromise()]) : [3, 3];
            case 2:
              s.sent(), s.label = 3;
            case 3:
              return [2]
          }
        }))
      }))
    }
    var fD = function(t) {
        function e() {
          var e = t.call(this, !1, 2) || this;
          return e.tipLayer = null, e.scoreText = null, e.skinName = null, e.bg = null, e.tween = null, e.initChildren(), e
        }
        return i(e, t), e.prototype.initChildren = function() {
          this.tipLayer = new PIXI.Container, this.bg = Wh("dlc/ui/challenge_bg.png"), this.bg.width = 354, this.bg.height = 127, this.tipLayer.addChild(this.bg), this.skinName = Xh("", "#FFcd48", !0, "left", 28), this.skinName.x = 140, this.skinName.y = 5, this.tipLayer.addChild(this.skinName), this.scoreText = Xh("", "#FF052e", !0, "left", 50), this.scoreText.x = 110, this.scoreText.y = 45, this.tipLayer.addChild(this.scoreText), this.addChild(this.tipLayer)
        }, e.prototype.onShow = function(t) {
          this.skinName.text = Vc.decodeURIComponent(t.nick), this.scoreText.text = t.score, this.y = -this.height, this.x = (Pe - this.width) / 2, TWEEN.killTweensOf(this), new TWEEN.Tween(this).to({
            y: Mu.top
          }, 500).easing(TWEEN.Easing.Quadratic.InOut).start()
        }, e.prototype.hideChallenge = function() {
          var t = this;
          TWEEN.killTweensOf(this), new TWEEN.Tween(this).to({
            y: -this.height
          }, 500).onComplete((function() {
            t.close()
          })).easing(TWEEN.Easing.Quadratic.InOut).start()
        }, e.prototype.onHide = function() {
          TWEEN.killTweensOf(this)
        }, e.clsName = "ChallengeTipView", e
      }(Eu),
      gD = function(t) {
        function e() {
          var e = t.call(this, !1, 2) || this;
          return e.tipLayer = null, e.scoreText = null, e.skinName = null, e.bg = null, e.initChildren(), e
        }
        return i(e, t), e.prototype.initChildren = function() {
          this.tipLayer = new PIXI.Container, this.bg = Wh("dlc/ui/relay_bg.png"), this.bg.width = 354, this.bg.height = 127, this.tipLayer.addChild(this.bg), this.skinName = Xh("dd", "#FFcd48", !0, "left", 28), this.skinName.x = 140, this.skinName.y = 5, this.tipLayer.addChild(this.skinName), this.scoreText = Xh("dd", "#00FF00", !0, "left", 50), this.scoreText.x = 110, this.scoreText.y = 45, this.tipLayer.addChild(this.scoreText), this.addChild(this.tipLayer)
        }, e.prototype.onShow = function(e) {
          t.prototype.onShow.call(this), this.skinName.text = Vc.decodeURIComponent(e.nick), this.scoreText.text = e.score, this.y = -this.height, this.x = (Pe - this.width) / 2, TWEEN.killTweensOf(this), new TWEEN.Tween(this).to({
            y: Mu.top
          }, 500).easing(TWEEN.Easing.Quadratic.InOut).start()
        }, e.prototype.hideRelay = function() {
          var t = this;
          TWEEN.killTweensOf(this), new TWEEN.Tween(this).to({
            y: -this.height
          }, 500).onComplete((function() {
            t.close()
          })).easing(TWEEN.Easing.Quadratic.InOut).start()
        }, e.prototype.onHide = function() {
          TWEEN.killTweensOf(this)
        }, e.clsName = "RelayTipView", e
      }(Eu),
      mD = function(t) {
        function e() {
          var e = t.call(this, !1, 2) || this;
          return e.noticeTexts = [], e.initChildren(), e
        }
        return i(e, t), e.prototype.initChildren = function() {
          var t = new PIXI.Graphics;
          t.beginFill(1579554, .5), t.drawRect(0, 0, Pe, 50), t.endFill(), t.x = 0, t.y = 0, this.addChild(t);
          for (var e = 0; e < 2; e++) {
            var i = new PIXI.Container,
              n = jh("bell.png");
            i.addChild(n);
            var o = Xh("tttt", "#00ECF4", !0);
            o.name = "noticeText", o.x = n.width + 10, i.addChild(o), n.y = (o.height - n.height) / 2, i.y = (50 - i.height) / 2, this.noticeTexts.push(i), this.addChild(i)
          }
        }, e.prototype.onTick = function() {
          for (var t = 0; t < this.noticeTexts.length; t++) {
            var e = this.noticeTexts[t];
            if (e.x -= 2, e.x + e.width < 0) {
              var i = 0 === t ? this.noticeTexts[1] : this.noticeTexts[0];
              e.x = i.x + i.width + 375
            }
          }
          this.leftTime < Date.now() && this.close()
        }, e.prototype.stopTick = function() {
          this.intervalId && (clearInterval(this.intervalId), this.intervalId = null)
        }, e.prototype.onHide = function() {
          this.stopTick()
        }, e.prototype.onShow = function(t) {
          this.x = 0, this.y = Mu.top + 90;
          for (var e = 0; e < this.noticeTexts.length; e++) {
            var i = this.noticeTexts[e];
            i.getChildByName("noticeText").text = t.text, i.x = 0 === e ? Pe : this.noticeTexts[0].x + this.noticeTexts[0].width + 375
          }
          this.stopTick(), this.leftTime = Date.now() + (2 === t.type ? 36e5 : 6e4), this.intervalId = setInterval(this.onTick.bind(this), 16.6)
        }, e.clsName = "SystemNoticeView", e
      }(Eu);

    function yD(t) {
      tc.showPanel(mD, t)
    }

    function vD() {
      var t = Ag.getCurChallenge();
      t && tc.showPanel(fD, t)
    }

    function bD() {
      var t = tc.getPanel(fD.clsName);
      t && t.hideChallenge()
    }

    function wD() {
      var t = Rg.getRelayData();
      t && tc.showPanel(gD, t)
    }

    function xD() {
      var t = tc.getPanel(gD.clsName);
      t && t.hideRelay()
    }
    var TD = "...",
      kD = function(t) {
        function e() {
          var e = t.call(this, !1, 1) || this;
          return e.progressBar = null, e.descText = null, e.retryBtn = null, e.totalStep = 1, e.defaultProgress = 0, e.curStep = 0, e.tryCount = 0, e.initUI(), e
        }
        return i(e, t), e.prototype.initUI = function() {
          this.title = Uh("res/ui/title.png"), this.title.anchor.set(.5, .5), this.title.width = 613, this.title.height = 149, this.addChild(this.title), this.title.x = 375, this.title.y = 220, _e / Be > .605 && (this.title.y = 120);
          this.title.y - this.title.height / 2 < 199.5 && (this.title.y = 199.5 + this.title.height / 2), this.descText = Yh(TD, "#000000", 730, 32, !1), this.descText.x = (Pe - this.descText.width) / 2, this.descText.y = (De - this.descText.height) / 2 - 80, this.addChild(this.descText), this.uidText = Xh("", "#000000", !0), this.uidText.x = 0, this.uidText.y = De - 60, this.uidText.visible = !1, this.addChild(this.uidText), this.progressBar = new ID, this.progressBar.x = 157, this.progressBar.y = (De - 56) / 2, this.progressBar.progress = 0, this.addChild(this.progressBar), this.retryBtn = new zy("res/ui/button_reload.png", 311, 117, !0), this.retryBtn.x = 375, this.retryBtn.y = De / 2 + 160, this.retryBtn.visible = !1, this.addSkin(this.retryBtn), Lg.addListener(Eg, this.onUserUid, this)
        }, e.prototype.setTitle = function(t) {
          this.descText.text = t, this.descText.x = (Pe - this.descText.width) / 2, this.descText.width > Pe && (this.descText.x = Pe - this.descText.width), this.descText.y = this.progressBar.y - this.descText.height - 20
        }, e.prototype.setDescColor = function(t) {
          this.descText.style.fill = t
        }, e.prototype.showRetry = function(t) {
          var e = this;
          return this.tryCount++, DEVELOP && console.log("showRetry", t), this.setTitle(t && t.errMsg || String(t)), new Promise((function(t) {
            e.retryBtn.visible = !0, e.retryBtn.once(Iu, (function() {
              e.tryCount >= 3 && (e.tryCount = 0, Nh("token", null)), e.setTitle(TD), e.retryBtn.visible = !1, t()
            }), e)
          }))
        }, e.prototype.setUid = function(t) {
          this.uidText.text = t + ""
        }, e.prototype.onUserUid = function(t) {
          this.setUid(t)
        }, e.prototype.onHide = function() {
          Lg.removeListener(Eg, this.onUserUid), TWEEN.killTweensOf(this.progressBar)
        }, e.prototype.onDestroy = function() {
          this.retryBtn && (this.retryBtn.destroy(), this.retryBtn = null), this.progressBar && (this.progressBar.destroy(), this.progressBar = null), t.prototype.onDestroy.call(this)
        }, e.prototype.onShow = function() {
          t.prototype.onShow.call(this), this.x = 0, this.y = 0
        }, e.prototype.setTotalStep = function(t, e) {
          this.totalStep = t, this.defaultProgress = e, this.setProgress(e, 200)
        }, e.prototype.finishStep = function(t) {
          this.curStep++;
          var e = this.defaultProgress + (1 - this.defaultProgress) * (this.curStep / this.totalStep);
          this.setProgress(e, 200), DEVELOP && console.log("[load Step]:".concat(this.curStep, ",---").concat(t, "---"))
        }, e.prototype.setProgress = function(t, e) {
          void 0 === e && (e = 0), TWEEN.killTweensOf(this.progressBar), new TWEEN.Tween(this.progressBar).to({
            progress: t
          }, e).easing(TWEEN.Easing.Linear.None).start()
        }, e.prototype.withRetry = function(t) {
          return r(this, void 0, void 0, (function() {
            var e, i, n;
            return s(this, (function(o) {
              switch (o.label) {
                case 0:
                  e = !1, o.label = 1;
                case 1:
                  if (e) return [3, 7];
                  o.label = 2;
                case 2:
                  return o.trys.push([2, 4, , 6]), [4, t()];
                case 3:
                  return i = o.sent(), e = !0, [3, 6];
                case 4:
                  return n = o.sent(), [4, this.showRetry(n)];
                case 5:
                  return o.sent(), [3, 6];
                case 6:
                  return [3, 1];
                case 7:
                  return [2, i]
              }
            }))
          }))
        }, e.clsName = "LoadingView", e
      }(Eu),
      ID = function(t) {
        function e() {
          var e = t.call(this) || this;
          return e.bg = Uh("res/ui/loading_progress_bg.png"), e.bg.anchor.set(0, 0), e.addChild(e.bg), e.thumb = Uh("res/ui/loading_progress_thumb.png"), e.thumb.anchor.set(0, 0), e.thumb.y = 2, e.thumb.x = 2, e.addChild(e.thumb), e.scale.set(2, 2), e
        }
        return i(e, t), Object.defineProperty(e.prototype, "progress", {
          get: function() {
            return this.thumb.scale.x
          },
          set: function(t) {
            t < 0 && (t = 0), this.thumb.scale.x = Math.min(t, 1)
          },
          enumerable: !1,
          configurable: !0
        }), e.prototype.destroy = function(e) {
          this.bg && (this.bg.destroy({
            texture: !0,
            baseTexture: !0
          }), this.bg = null), this.thumb && (this.thumb.destroy({
            texture: !0,
            baseTexture: !0
          }), this.thumb = null), t.prototype.destroy.call(this, e)
        }, e
      }(PIXI.Container);

    function CD(t) {
      $hostDef.linkTicket && rc("", 1e3), t.ticket && (uC.ticket = t.ticket)
    }

    function _D(t) {}

    function BD(t) {
      t.syncData && uC.syncData(t.syncData)
    }

    function SD(t) {
      pC().catch((function(t) {}))
    }
    var PD = new(function(t) {
      function e() {
        return null !== t && t.apply(this, arguments) || this
      }
      return i(e, t), e.prototype.onNotify = function(t, e, i, n) {
        this.on(t.__cmd.toString(), e, i, n)
      }, e.prototype.offNotify = function(t, e, i) {
        this.off(t.__cmd.toString(), e, i)
      }, e
    }(N));
    PD.onNotify(pd, (function(t) {
      rc(""), Sw()
    }));
    var DD = "..",
      MD = "",
      FD = "UI",
      ED = function() {
        function t() {
          console.log("-----VERSION-----", 1769759192), Zt.init(),
            function(t) {
              var e, i, o;
              U.appId = t.appId, U.wxAppId = t.wxAppId, U.confAppId = null !== (e = t.confAppId) && void 0 !== e ? e : t.wxAppId, U.user = t.user, U.clientVersion = t.clientVersion, U.time = Date, U.DEBUG = t.DEBUG, t.httpRequester && (void 0 !== U.sendHttp ? V.error("initClientLib  httpRequester ,  @h5/wxgame ") : U.sendHttp = t.httpRequester), t.env && (U.env ? V.error("initClientLib  env ,  @h5/wxgame ") : U.env = t.env), t.distinctId && V.error("initClientLib  distinctId,  user.distinctId"), w.$dealDistinctId();
              var r = n({}, null !== (o = null === (i = U.getLaunchData) || void 0 === i ? void 0 : i.call(U)) && void 0 !== o ? o : {});
              r.cv = U.clientVersion, r.ai = U.wxAppId, G(O.init, r), setTimeout((function() {
                U.logged || V.warn('20,  logged .  hostEnv.emitter.emit("logged");')
              }), 2e4)
            }({
              appId: "jump",
              wxAppId: "wxf872ea5294e051c0",
              user: uC,
              clientVersion: 1769759192
            }), Uk = zi ? 80 : 120, bI.init(),
            function(t) {
              if (le.log("policy: ".concat(t)), "function" == typeof wx.getUpdateManager) {
                var e = wx.getUpdateManager();
                "ask" === t ? e.onUpdateReady((function() {
                  wx.showModal({
                    title: "",
                    content: "",
                    confirmText: "",
                    showCancel: !0,
                    cancelText: "",
                    success: function(t) {
                      t.confirm && e.applyUpdate()
                    }
                  })
                })) : (e.onCheckForUpdate((function(t) {
                  t.hasUpdate ? (le.log(""), wx.showLoading({
                    title: "",
                    mask: !0
                  })) : le.log("")
                })), e.onUpdateReady((function() {
                  wx.hideLoading(), le.log(""), e.applyUpdate()
                })), e.onUpdateFailed((function() {
                  wx.hideLoading(), le.warn("")
                })))
              } else le.warn(" wx.getUpdateManager")
            }("force"), jy(), lD || (lD = !0, Ut(bC), Wt(OC), Ut(fC), Wt(NC), Ut(VC), Wt(WC), Ut(HC), Wt(XC), Ut(zC), Wt(e_), Ut(n_), Wt(r_), Ut(a_), Wt(c_), Ut(l_), Wt(p_), Ut(g_), Wt(y_), Ut(b_), Wt(x_), Ut(k_), Wt(C_), Ut(B_), Wt(P_), Ut(M_), Wt(E_), Ut(O_), Wt(G_), Ut(N_), Wt(V_), Ut(W_), Wt(H_), Ut(X_), Wt(z_), Ut(J_), Wt(Z_), Ut(eB), Wt(aB), Ut(cB), Wt(lB), Ut(pB), Wt(gB), Ut(bB), Wt(xB), Ut(kB), Wt(CB), Ut(BB), Wt(PB), Wt(MB), Wt(EB), Wt(OB), Wt(GB), Ut(NB), Wt(VB), Ut(WB), Wt(HB), Ut(XB), Wt(zB), Ut(JB), Wt(ZB), Ut(eS), Wt(nS), Ut(rS), Wt(aS), Ut(cS), Wt(lS), Ut(pS), Wt(gS), Ut(yS), Wt(bS), Ut(xS), Wt(kS), Ut(CS), Wt(BS), Ut(MS), Wt(ES), Ut(OS), Wt(VS), Ut(WS), Wt(HS), Ut(XS), Wt(zS), Ut(JS), Wt(ZS), Ut(eP), Wt(rP), Ut(aP), Wt(cP), Ut(lP), Wt(pP), Ut(gP), Wt(yP), Ut(bP), Wt(xP)), Lt(MB, _D), Lt(EB, CD), Lt(OB, BD), Lt(GB, SD), this.startLoading()
        }
        return t.prototype.startLoading = function() {
          return r(this, void 0, void 0, (function() {
            var t, e, i, n, o, a, h, c, u = this;
            return s(this, (function(l) {
              switch (l.label) {
                case 0:
                  return t = this.loadingView = tc.showPanel(kD), this.loadingView.setTotalStep(7, .2), [4, t.withRetry((function() {
                    return function(t) {
                      return r(this, void 0, void 0, (function() {
                        var e;
                        return s(this, (function(i) {
                          switch (i.label) {
                            case 0:
                              return e = Date.now(), [4, pn()];
                            case 1:
                              return i.sent(), $hostDef.videoAd && we.init(["adunit-7856b462c828e9fc", "adunit-f72e8eab8a32ba4e", "adunit-14dbdffd354c36e4"]), Il(), t.finishStep("host"), G(O.hostLoaded, {
                                ut: Date.now() - e
                              }), [2]
                          }
                        }))
                      }))
                    }(t)
                  }))];
                case 1:
                  return l.sent(), DEVELOP || m.setLevel("error"), t.setTitle(MD), i = di(e = ci), o = 0,
                    function(t) {
                      mg ? m.warn("init server repeated") : mg = new vg(bg, t)
                    }(PD), [4, t.withRetry((function() {
                      return r(u, void 0, void 0, (function() {
                        var e, i;
                        return s(this, (function(r) {
                          switch (r.label) {
                            case 0:
                              t.setTitle(MD), e = Date.now(), r.label = 1;
                            case 1:
                              return r.trys.push([1, 3, , 4]), [4, _b()];
                            case 2:
                              return n = r.sent(), t.finishStep("login"), G(O.loginFinish, {
                                ut: Date.now() - e,
                                re: o
                              }), [3, 4];
                            case 3:
                              throw i = r.sent(), o += 1, i;
                            case 4:
                              return [2]
                          }
                        }))
                      }))
                    }))];
                case 2:
                  return l.sent(), Ju.fetchSubscribes().catch((function() {})),
                    function() {
                      return r(this, void 0, void 0, (function() {
                        var t;
                        return s(this, (function(e) {
                          switch (e.label) {
                            case 0:
                              window.$operation = {
                                interstitial: !0,
                                interstitialOld: !0,
                                interstitialStartLimitNew: 62e3,
                                interstitialStartLimitOld: 12e4,
                                interstitialMinIntervalNew: 2e4,
                                interstitialMinIntervalOld: 12e4
                              }, e.label = 1;
                            case 1:
                              return e.trys.push([1, 3, , 4]), [4, ft()];
                            case 2:
                              return (t = e.sent()) && (window.$operation = t), [3, 4];
                            case 3:
                              return e.sent(), [3, 4];
                            case 4:
                              return [2]
                          }
                        }))
                      }))
                    }().catch((function() {})), a = Date.now(), [4, t.withRetry((function() {
                      return r(u, void 0, void 0, (function() {
                        return s(this, (function(e) {
                          switch (e.label) {
                            case 0:
                              return t.setTitle(MD + "."), [4, mi.init()];
                            case 1:
                              return e.sent(), t.finishStep("version"), [2]
                          }
                        }))
                      }))
                    }))];
                case 3:
                  return l.sent(), [4, t.withRetry((function() {
                    return t.setTitle(DD),
                      function() {
                        return r(this, void 0, void 0, (function() {
                          var t, e;
                          return s(this, (function(i) {
                            switch (i.label) {
                              case 0:
                                return Eh ? [2, Promise.resolve()] : [4, Si("configs2")];
                              case 1:
                                return (t = i.sent()) && (e = Gh(t), lh = new la(e.globalSet), oh = new pa(e.item), rh = new As(e.basicData), sh = new Wa(e.task), ah = new oa(e.difficulty), gh.fillData(e.helixStage), hh = new Oa(e.skin), uh = new sa(e.inviteword), ch = new ca(e.gift), dh = new Ea(e.sign), ph = new ga(e.limitGift), fh = new Xs(e.dailyGoods1), new zs(e.dailyGoods2), Qa = new $s(e.collectDifficulty), bh = new Aa(e.speedModeData), wh = new ja(e.speedModePeriod), xh = new da(e.hpModeDifficulty), Th = new ba(e.mutationModeDifficulty), kh = new Da(e.scoreModeData), Ih = new Fa(e.scoreModePeriod), Ch = new Ta(e.powerModeDifficulty), _h = new ih(e.teamTask), Bh = new Ja(e.teamPersonTask), Sh = new th(e.teamPersonTaskReward, e.teamPersonTaskRewardNew), Ph = new za(e.teamLevel), Dh = new Xa(e.teamDecorates), Mh = new Js(e.dailyMode), e.medal && (Fh = new ya(e.medal)), Eh = !0), [2]
                            }
                          }))
                        }))
                      }()
                  }))];
                case 4:
                  return l.sent(), li(e) ? [3, 6] : [4, t.withRetry((function() {
                    return r(u, void 0, void 0, (function() {
                      var n;
                      return s(this, (function(o) {
                        switch (o.label) {
                          case 0:
                            if (t.setTitle(".."), !i) return [3, 5];
                            o.label = 1;
                          case 1:
                            return o.trys.push([1, 3, , 4]), [4, i];
                          case 2:
                            return o.sent(), [3, 4];
                          case 3:
                            return n = o.sent(), console.log("load sub package:" + n), i = null, [2, di(e)];
                          case 4:
                            return [3, 6];
                          case 5:
                            return [2, di(e)];
                          case 6:
                            return [2]
                        }
                      }))
                    }))
                  }))];
                case 5:
                  l.sent(), l.label = 6;
                case 6:
                  return di(ui).catch((function() {})), cI.setup(), t.setDescColor("#FFFFFF"), $hostDef.challengeMode ? [4, t.withRetry((function() {
                    return t.setTitle(DD),
                      function() {
                        return r(this, void 0, void 0, (function() {
                          var t, e;
                          return s(this, (function(i) {
                            switch (i.label) {
                              case 0:
                                return [4, Si("challenge")];
                              case 1:
                                return (t = i.sent()) && (e = Gh(t), yh.fillData(e.challengeMode, e.challengeDifficulty), gh.fillData(e.stages)), [2]
                            }
                          }))
                        }))
                      }()
                  }))] : [3, 8];
                case 7:
                  l.sent(), l.label = 8;
                case 8:
                  return [4, t.withRetry((function() {
                    return t.setTitle(DD),
                      function() {
                        return r(this, void 0, void 0, (function() {
                          var t;
                          return s(this, (function(e) {
                            switch (e.label) {
                              case 0:
                                return Lh ? [2, Promise.resolve()] : [4, Si("expertmode")];
                              case 1:
                                return (t = e.sent()) && (vh.fillModes(Gh(t).expertMode), Lh = !0), [2]
                            }
                          }))
                        }))
                      }()
                  }))];
                case 9:
                  return l.sent(), [4, t.withRetry((function() {
                    return t.setTitle(FD + "..."), Bi("ui_new").then((function() {
                      t.finishStep("ui loaded")
                    }))
                  }))];
                case 10:
                  return l.sent(), [4, t.withRetry((function() {
                    return t.setTitle(FD + "...."), Bi("item").then((function() {
                      t.finishStep("item loaded")
                    }))
                  }))];
                case 11:
                  return l.sent(), [4, t.withRetry((function() {
                    return t.setTitle(FD + "......"),
                      function() {
                        return r(this, void 0, void 0, (function() {
                          return s(this, (function(t) {
                            switch (t.label) {
                              case 0:
                                return t.trys.push([0, 2, , 3]), [4, Wi()];
                              case 1:
                                return t.sent(), [3, 3];
                              case 2:
                                return t.sent(), [2, new Promise((function(t) {
                                  ue.getJSON(yi("font/score.json")).then((function(e) {
                                    PIXI.Texture.from(yi("font/score_0.png")).once("update", (function(i) {
                                      PIXI.extras.BitmapText.registerJsonFont(e, i), Ui.score = !0, t()
                                    }))
                                  }))
                                }))];
                              case 3:
                                return [2]
                            }
                          }))
                        }))
                      }().then((function() {
                        t.finishStep("font loaded")
                      }))
                  }))];
                case 12:
                  return l.sent(), G(O.resLoaded, {
                      ut: Date.now() - a
                    }), t.close(), this.loadingView = null, wx.showShareMenu({
                      withShareTicket: !0,
                      menus: ["shareAppMessage", "shareTimeline"]
                    }), wx.onShareAppMessage((function() {
                      return Yc()
                    })), "function" == typeof wx.onShareTimeline && wx.onShareTimeline((function() {
                      return Yc()
                    })), Lc(), n && n.userInfo && (uC.init(n.userInfo), uC.checkCheatAndMaxScore(), Rc(uC.bestRelayFirst, uC.bestRelaySec)), Sy.start(), Rt = !0, At.forEach((function(t) {
                      return Nt(t.cmd, t.body)
                    })), At.length = 0,
                    function() {
                      if ("function" != typeof wx.createInterstitialAd) return;
                      if ($operation.interstitial) {
                        var t = ["adunit-221c2529059438b8", "adunit-82458774950e2416"];
                        Te.init(t, {
                          startLimit: $operation.interstitialStartLimitNew,
                          minInterval: $operation.interstitialMinIntervalNew
                        })
                      }
                    }(), Dy(), cI.previewShow(), tc.showPanel($x),
                    function() {
                      Lg.addListener(Pg, vD, this), Lg.addListener(Dg, bD, this), Lg.addListener(Mg, wD, this), Lg.addListener(Fg, xD, this), Lg.addListener(_g, yD, this)
                    }(), (h = tc.getPanel(mD.clsName)) && h.close(), c = ws.query, [4, Ny.checkQuery(c, ws.shareTicket, !1)];
                case 13:
                  return l.sent(), ws.gameInitialized = !0, $hostDef.team && mx.loadTeam().catch((function(t) {})), n.hasMinigameGifts && pC().catch((function(t) {})), $y.isInWxChallenge ? [3, 17] : (tc.showPanel(Cw), uC.isNewPlayer ? [3, 15] : [4, pD()]);
                case 14:
                  l.sent(), l.label = 15;
                case 15:
                  return $hostDef.censor || !$hostDef.signPopUp || 0 !== uC.isSign || OD() ? [3, 17] : [4, tc.showPanel(iv).addPromise()];
                case 16:
                  l.sent(), l.label = 17;
                case 17:
                  return [2]
              }
            }))
          }))
        }, t
      }();
    var LD = void 0;

    function OD() {
      void 0 === LD && (wx.getStorageSync("isFirstLogin_" + $hostDef.api) ? LD = !1 : (Nh("isFirstLogin_" + $hostDef.api, !0), LD = !0));
      return LD
    }
    new ED
  })()
})();